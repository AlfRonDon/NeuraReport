## 2025-10-21T13:39:06Z - template_initial_html

```json
{
  "id": "chatcmpl-CT6pjo4KymdRdNmbaulJVENxKQdsI",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title>Consumption report</title>\n<style>\n  @page { size: A4; margin: 14mm 16mm 18mm 16mm; }\n  :root{\n    --col-1-w: 16mm;   /* Sl. No. */\n    --col-2-w: 92mm;   /* Material name */\n    --col-3-w: 28mm;   /* Set. wt(Kg) */\n    --col-4-w: 28mm;   /* Ach. wt(Kg) */\n    --col-5-w: 24mm;   /* Error(Kg) */\n    --col-6-w: 20mm;   /* Error % */\n    --row-pad: 3.5px;\n    --gap-y: 6mm;\n    --hair: 1px;\n  }\n  html, body { font-family: Arial, Helvetica, sans-serif; font-size: 11pt; color:#000; }\n  h1 {\n    font-family: \"Times New Roman\", Times, serif;\n    font-size: 18pt;\n    font-weight: 700;\n    text-align: center;\n    margin: 6mm 0 3mm 0;\n  }\n\n  /* Header box */\n  #report-header { margin-bottom: 2mm; }\n  #meta-box{\n    border: 1px solid #000;\n    padding: 0;\n  }\n  #meta-box table{\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    font-size: 10.5pt;\n  }\n  #meta-box td{\n    padding: 2.5mm 3mm;\n    vertical-align: top;\n  }\n  #meta-box tr + tr td{ border-top: 1px solid #000; }\n  #meta-box .left { width: 70%; }\n  #meta-box .right { text-align: right; white-space: nowrap; }\n  #title-rule { border-bottom: 1px solid #000; margin-bottom: 3mm; }\n\n  /* Main table */\n  #data-table{\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    border: 1px solid #000;\n    font-size: 10.5pt;\n  }\n  #data-table col.c1{ width: var(--col-1-w); }\n  #data-table col.c2{ width: var(--col-2-w); }\n  #data-table col.c3{ width: var(--col-3-w); }\n  #data-table col.c4{ width: var(--col-4-w); }\n  #data-table col.c5{ width: var(--col-5-w); }\n  #data-table col.c6{ width: var(--col-6-w); }\n\n  #data-table th, #data-table td{\n    border: 1px solid #000;\n    padding: var(--row-pad) 5px;\n    line-height: 1.25;\n  }\n  #data-table th{\n    background: #f2f2f2;\n    font-weight: 600;\n    text-align: left;\n  }\n  #data-table td.num, #data-table th.num{ text-align: right; }\n  #data-table td.center{ text-align: center; }\n\n  /* Totals row */\n  #data-table tfoot td{\n    background: #f7f7f7;\n    font-weight: 600;\n  }\n\n  /* Footer */\n  #page-footer{\n    position: fixed;\n    bottom: 10mm;\n    left: 16mm;\n    right: 16mm;\n    font-size: 9.5pt;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  #page-footer .center { flex: 1; text-align: center; }\n</style>\n</head>\n<body>\n\n<section id=\"report-header\">\n  <div id=\"meta-box\">\n    <table>\n      <tr>\n        <td class=\"left\">Plant name  : {plant_name}</td>\n        <td class=\"right\">From  Date: {from_date}  To {to_date}</td>\n      </tr>\n      <tr>\n        <td class=\"left\">Location    : {location}</td>\n        <td class=\"right\"></td>\n      </tr>\n      <tr>\n        <td class=\"left\">Print Date  : {print_date}</td>\n        <td class=\"right\">Recipe code : {recipe_code}</td>\n      </tr>\n    </table>\n  </div>\n\n  <h1>{report_title}</h1>\n  <div id=\"title-rule\"></div>\n</section>\n\n<table id=\"data-table\">\n  <colgroup>\n    <col class=\"c1\"><col class=\"c2\"><col class=\"c3\"><col class=\"c4\"><col class=\"c5\"><col class=\"c6\">\n  </colgroup>\n  <thead>\n    <tr>\n      <th data-label=\"sl_no\">Sl. No.</th>\n      <th data-label=\"material_name\">Material name</th>\n      <th data-label=\"set_wt\">Set. wt(Kg)</th>\n      <th data-label=\"ach_wt\">Ach. wt(Kg)</th>\n      <th data-label=\"error_kg\">Error(Kg)</th>\n      <th data-label=\"error_pct\">Error %</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"center\">{sl_no}</td>\n      <td>{material_name}</td>\n      <td class=\"num\">{set_wt}</td>\n      <td class=\"num\">{ach_wt}</td>\n      <td class=\"num\">{error_kg}</td>\n      <td class=\"num\">{error_pct}</td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr>\n      <td colspan=\"2\">Total</td>\n      <td class=\"num\">{total_set_wt}</td>\n      <td class=\"num\">{total_ach_wt}</td>\n      <td class=\"num\">{total_error_kg}</td>\n      <td class=\"num\">{total_error_pct}</td>\n    </tr>\n  </tfoot>\n</table>\n\n<footer id=\"page-footer\">\n  <div>{company_name}</div>\n  <div class=\"center\">{page_label}</div>\n  <div></div>\n</footer>\n\n</body>\n</html>\n<!--END_HTML-->\n\n<!--BEGIN_SCHEMA_JSON-->\n{\n  \"scalars\": [\n    \"plant_name\",\n    \"location\",\n    \"from_date\",\n    \"to_date\",\n    \"print_date\",\n    \"recipe_code\",\n    \"report_title\",\n    \"company_name\",\n    \"page_label\"\n  ],\n  \"row_tokens\": [\n    \"sl_no\",\n    \"material_name\",\n    \"set_wt\",\n    \"ach_wt\",\n    \"error_kg\",\n    \"error_pct\"\n  ],\n  \"totals\": [\n    \"total_set_wt\",\n    \"total_ach_wt\",\n    \"total_error_kg\",\n    \"total_error_pct\"\n  ],\n  \"notes\": \"\"\n}\n<!--END_SCHEMA_JSON-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761053815,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4631,
    "prompt_tokens": 1544,
    "total_tokens": 6175,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 3072,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T13:41:23Z - template_fix_html_call2

```json
{
  "id": "chatcmpl-CT6ryFLdj3ryRvK91MuryF9HKiTxD",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\" />\n<title>Consumption report</title>\n<style>\n  @page { size: A4; margin: 14mm 16mm 18mm 16mm; }\n  :root{\n    /* Column widths must equal printable width (178mm) */\n    --col-1-w: 12.5mm;  /* Sl. No. */\n    --col-2-w: 89.5mm;  /* Material name */\n    --col-3-w: 26mm;    /* Set. wt(Kg) */\n    --col-4-w: 26mm;    /* Ach. wt(Kg) */\n    --col-5-w: 14mm;    /* Error(Kg) */\n    --col-6-w: 10mm;    /* Error % */\n    --row-pad-y: 1.2mm;\n    --row-pad-x: 2.8mm;\n    --hair: 1px;\n  }\n\n  html, body { font-family: Arial, Helvetica, sans-serif; font-size: 10pt; color:#000; }\n  h1 {\n    font-family: \"Times New Roman\", Times, serif;\n    font-size: 18pt;\n    font-weight: 700;\n    text-align: center;\n    margin: 4mm 0 2mm 0;\n  }\n\n  /* Header box */\n  #report-header { margin-bottom: 3mm; }\n  #meta-box{\n    border: 1px solid #000;\n    padding: 0;\n  }\n  #meta-box table{\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    font-size: 10pt;\n  }\n  #meta-box td{\n    padding: 2mm 3mm;\n    vertical-align: top;\n  }\n  #meta-box tr + tr td{ border-top: 1px solid #000; }\n  #meta-box .left { width: 70%; }\n  #meta-box .right { text-align: right; white-space: nowrap; }\n  #title-rule { border-bottom: 1px solid #000; margin-bottom: 3mm; }\n\n  /* Main table */\n  #data-table{\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    border: 1px solid #000;\n    font-size: 10pt;\n    font-variant-numeric: tabular-nums;\n  }\n  #data-table col.c1{ width: var(--col-1-w); }\n  #data-table col.c2{ width: var(--col-2-w); }\n  #data-table col.c3{ width: var(--col-3-w); }\n  #data-table col.c4{ width: var(--col-4-w); }\n  #data-table col.c5{ width: var(--col-5-w); }\n  #data-table col.c6{ width: var(--col-6-w); }\n\n  #data-table th, #data-table td{\n    border: 1px solid #000;\n    padding: var(--row-pad-y) var(--row-pad-x);\n    line-height: 1.25;\n  }\n  #data-table thead th{\n    background: #e9e9e9;\n    font-weight: 600;\n    white-space: nowrap;\n    text-align: left;\n  }\n  #data-table thead th.num{ text-align: right; }\n  #data-table td.num{ text-align: right; }\n  #data-table td.center, #data-table thead th.center{ text-align: center; }\n\n  /* Totals row */\n  #data-table tfoot td{\n    background: #f0f0f0;\n    font-weight: 600;\n  }\n  #data-table tfoot td:first-child{ text-align: left; }\n\n  /* Pagination stability */\n  #data-table tbody tr{ break-inside: avoid; page-break-inside: avoid; }\n\n  /* Footer */\n  #page-footer{\n    position: fixed;\n    bottom: 12mm;\n    left: 16mm;\n    right: 16mm;\n    font-size: 9.5pt;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n  #page-footer .center { flex: 1; text-align: center; }\n</style>\n</head>\n<body>\n\n<section id=\"report-header\">\n  <div id=\"meta-box\">\n    <table>\n      <tr>\n        <td class=\"left\">Plant name  : {plant_name}</td>\n        <td class=\"right\">From  Date: {from_date}  To {to_date}</td>\n      </tr>\n      <tr>\n        <td class=\"left\">Location    : {location}</td>\n        <td class=\"right\"></td>\n      </tr>\n      <tr>\n        <td class=\"left\">Print Date  : {print_date}</td>\n        <td class=\"right\">Recipe code : {recipe_code}</td>\n      </tr>\n    </table>\n  </div>\n\n  <h1>{report_title}</h1>\n  <div id=\"title-rule\"></div>\n</section>\n\n<table id=\"data-table\">\n  <colgroup>\n    <col class=\"c1\" /><col class=\"c2\" /><col class=\"c3\" /><col class=\"c4\" /><col class=\"c5\" /><col class=\"c6\" />\n  </colgroup>\n  <thead>\n    <tr>\n      <th class=\"center\" data-label=\"sl_no\">Sl. No.</th>\n      <th data-label=\"material_name\">Material name</th>\n      <th class=\"num\" data-label=\"set_wt\">Set. wt(Kg)</th>\n      <th class=\"num\" data-label=\"ach_wt\">Ach. wt(Kg)</th>\n      <th class=\"num\" data-label=\"error_kg\">Error(Kg)</th>\n      <th class=\"num\" data-label=\"error_pct\">Error %</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"center\">{sl_no}</td>\n      <td>{material_name}</td>\n      <td class=\"num\">{set_wt}</td>\n      <td class=\"num\">{ach_wt}</td>\n      <td class=\"num\">{error_kg}</td>\n      <td class=\"num\">{error_pct}</td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr>\n      <td colspan=\"2\">Total</td>\n      <td class=\"num\">{total_set_wt}</td>\n      <td class=\"num\">{total_ach_wt}</td>\n      <td class=\"num\">{total_error_kg}</td>\n      <td class=\"num\">{total_error_pct}</td>\n    </tr>\n  </tfoot>\n</table>\n\n<footer id=\"page-footer\">\n  <div>{company_name}</div>\n  <div class=\"center\">{page_label}</div>\n  <div></div>\n</footer>\n\n</body>\n</html>\n<!--END_HTML-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761053954,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4733,
    "prompt_tokens": 3705,
    "total_tokens": 8438,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 3200,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T13:43:35Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT6uWWRbLpsAJ6F68ZafO790FGgk9",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt\": \"UNRESOLVED\",\n    \"ach_wt\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"(((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / NULLIF((recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp), 0))\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761054112,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4913,
    "prompt_tokens": 3713,
    "total_tokens": 8626,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 3776,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T13:44:37Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT6uVhfyIUjhXoZlaOaIGV6nbQDNc",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt\": \"UNRESOLVED\",\n    \"ach_wt\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"SUM(COALESCE(recipes.bin1_sp,0) + COALESCE(recipes.bin2_sp,0) + COALESCE(recipes.bin3_sp,0) + COALESCE(recipes.bin4_sp,0) + COALESCE(recipes.bin5_sp,0) + COALESCE(recipes.bin6_sp,0) + COALESCE(recipes.bin7_sp,0) + COALESCE(recipes.bin8_sp,0) + COALESCE(recipes.bin9_sp,0) + COALESCE(recipes.bin10_sp,0) + COALESCE(recipes.bin11_sp,0) + COALESCE(recipes.bin12_sp,0))\",\n    \"total_ach_wt\": \"SUM(COALESCE(recipes.bin1_act,0) + COALESCE(recipes.bin2_act,0) + COALESCE(recipes.bin3_act,0) + COALESCE(recipes.bin4_act,0) + COALESCE(recipes.bin5_act,0) + COALESCE(recipes.bin6_act,0) + COALESCE(recipes.bin7_act,0) + COALESCE(recipes.bin8_act,0) + COALESCE(recipes.bin9_act,0) + COALESCE(recipes.bin10_act,0) + COALESCE(recipes.bin11_act,0) + COALESCE(recipes.bin12_act,0))\",\n    \"total_error_kg\": \"SUM((COALESCE(recipes.bin1_act,0) - COALESCE(recipes.bin1_sp,0)) + (COALESCE(recipes.bin2_act,0) - COALESCE(recipes.bin2_sp,0)) + (COALESCE(recipes.bin3_act,0) - COALESCE(recipes.bin3_sp,0)) + (COALESCE(recipes.bin4_act,0) - COALESCE(recipes.bin4_sp,0)) + (COALESCE(recipes.bin5_act,0) - COALESCE(recipes.bin5_sp,0)) + (COALESCE(recipes.bin6_act,0) - COALESCE(recipes.bin6_sp,0)) + (COALESCE(recipes.bin7_act,0) - COALESCE(recipes.bin7_sp,0)) + (COALESCE(recipes.bin8_act,0) - COALESCE(recipes.bin8_sp,0)) + (COALESCE(recipes.bin9_act,0) - COALESCE(recipes.bin9_sp,0)) + (COALESCE(recipes.bin10_act,0) - COALESCE(recipes.bin10_sp,0)) + (COALESCE(recipes.bin11_act,0) - COALESCE(recipes.bin11_sp,0)) + (COALESCE(recipes.bin12_act,0) - COALESCE(recipes.bin12_sp,0)))\",\n    \"total_error_pct\": \"UNRESOLVED\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\",\n      \"total_error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"total_ach_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"] },\n      \"total_error_kg\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\",\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761054111,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6571,
    "prompt_tokens": 3713,
    "total_tokens": 10284,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5184,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T13:46:01Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT6wDjCfSzt4uCTOEE9gUVc6eK9En",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt\": \"UNRESOLVED\",\n    \"ach_wt\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"(( (recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) ) / NULLIF((recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp), 0))\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"total_ach_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"] }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761054217,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6137,
    "prompt_tokens": 3756,
    "total_tokens": 9893,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5056,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3584
    }
  }
}
```

## 2025-10-21T13:48:08Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT6xErAzYg6WdQiaT2L2r2WTJVoCi",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"sl_no\": \"ROW_NUMBER() OVER (ORDER BY recipes.id)\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt\": \"UNRESOLVED\",\n    \"ach_wt\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\",\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"recipes.recipe_name\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761054280,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 8828,
    "prompt_tokens": 3756,
    "total_tokens": 12584,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 7616,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3584
    }
  }
}
```

## 2025-10-21T14:01:59Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT7AY9AokaYRJ5h5uBDuxZc0OKkc6",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"recipes.recipe_name\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt\": \"UNRESOLVED\",\n    \"ach_wt\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"(((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) * 100.0) / NULLIF((recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp), 0)\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761055106,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6262,
    "prompt_tokens": 3713,
    "total_tokens": 9975,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5120,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3584
    }
  }
}
```

## 2025-10-21T14:02:11Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT7AYaW0bNZv9rnEYucFmBCFDNFeS",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"recipes.recipe_name\",\n    \"set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"error_pct\": \"CASE WHEN (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN 0 ELSE 100.0 * ((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\",\n    \"total_set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"CASE WHEN (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN 0 ELSE 100.0 * ((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\",\n    \"page_label\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"report_title\": \"Consumption report\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt\": \"11,800.00\",\n    \"ach_wt\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_label\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\"\n    ],\n    \"hints\": {\n      \"set_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"ach_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"] },\n      \"total_set_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"total_ach_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"] }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761055106,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6691,
    "prompt_tokens": 3713,
    "total_tokens": 10404,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 4928,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3584
    }
  }
}
```

## 2025-10-21T14:04:30Z - llm_call_3_5

```json
{
  "id": "chatcmpl-CT7ErlXf7PcsnPGaZUJ6ixUDXupDA",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"final_template_html\": \"\\n<html>\\n<head>\\n<meta charset=\\\"utf-8\\\" />\\n<title>Consumption report</title>\\n<style>\\n  @page { size: A4; margin: 14mm 16mm 18mm 16mm; }\\n  :root{\\n    /* Column widths must equal printable width (178mm) */\\n    --col-1-w: 14mm;   /* Sl. No. */\\n    --col-2-w: 84mm;   /* Material name */\\n    --col-3-w: 26mm;   /* Set. wt(Kg) */\\n    --col-4-w: 26mm;   /* Ach. wt(Kg) */\\n    --col-5-w: 16mm;   /* Error(Kg) */\\n    --col-6-w: 12mm;   /* Error % */\\n    --row-pad-y: 1.2mm;\\n    --row-pad-x: 2.8mm;\\n    --hair: 1px;\\n  }\\n\\n  html, body { font-family: Arial, Helvetica, sans-serif; font-size: 10pt; color:#000; }\\n  h1 {\\n    font-family: \\\"Times New Roman\\\", Times, serif;\\n    font-size: 18pt;\\n    font-weight: 700;\\n    text-align: center;\\n    margin: 4mm 0 2mm 0;\\n  }\\n\\n  /* Header box */\\n  #report-header { margin-bottom: 3mm; }\\n  #meta-box{\\n    border: 1px solid #000;\\n    padding: 0;\\n  }\\n  #meta-box table{\\n    width: 100%;\\n    border-collapse: collapse;\\n    table-layout: fixed;\\n    font-size: 10pt;\\n  }\\n  #meta-box td{\\n    padding: 2mm 3mm;\\n    vertical-align: top;\\n  }\\n  #meta-box tr + tr td{ border-top: 1px solid #000; }\\n  #meta-box .left { width: 70%; }\\n  #meta-box .right { text-align: right; white-space: nowrap; }\\n  #title-rule { border-bottom: 1px solid #000; margin-bottom: 3mm; }\\n\\n  /* Main table */\\n  #data-table{\\n    width: 100%;\\n    border-collapse: collapse;\\n    table-layout: fixed;\\n    border: 1px solid #000;\\n    font-size: 10pt;\\n    font-variant-numeric: tabular-nums;\\n  }\\n  #data-table col.c1{ width: var(--col-1-w); }\\n  #data-table col.c2{ width: var(--col-2-w); }\\n  #data-table col.c3{ width: var(--col-3-w); }\\n  #data-table col.c4{ width: var(--col-4-w); }\\n  #data-table col.c5{ width: var(--col-5-w); }\\n  #data-table col.c6{ width: var(--col-6-w); }\\n\\n  #data-table th, #data-table td{\\n    border: 1px solid #000;\\n    padding: var(--row-pad-y) var(--row-pad-x);\\n    line-height: 1.25;\\n  }\\n  #data-table thead th{\\n    background: #e9e9e9;\\n    font-weight: 600;\\n    white-space: nowrap;\\n    text-align: left;\\n  }\\n  #data-table thead th.num{ text-align: right; }\\n  #data-table td.num{ text-align: right; }\\n  #data-table td.center, #data-table thead th.center{ text-align: center; }\\n\\n  /* Totals row */\\n  #data-table tfoot td{\\n    background: #f0f0f0;\\n    font-weight: 600;\\n  }\\n  #data-table tfoot td:first-child{ text-align: left; }\\n\\n  /* Pagination stability */\\n  #data-table tbody tr{ break-inside: avoid; page-break-inside: avoid; }\\n\\n  /* Footer */\\n  #page-footer{\\n    position: fixed;\\n    bottom: 12mm;\\n    left: 16mm;\\n    right: 16mm;\\n    font-size: 9.5pt;\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n  }\\n  #page-footer .center { flex: 1; text-align: center; }\\n</style>\\n</head>\\n<body>\\n\\n<section id=\\\"report-header\\\">\\n  <div id=\\\"meta-box\\\">\\n    <table>\\n      <tr>\\n        <td class=\\\"left\\\">Plant name  : SSR AQUA</td>\\n        <td class=\\\"right\\\">From  Date: {from_date}  To {to_date}</td>\\n      </tr>\\n      <tr>\\n        <td class=\\\"left\\\">Location    : Gudivada</td>\\n        <td class=\\\"right\\\"></td>\\n      </tr>\\n      <tr>\\n        <td class=\\\"left\\\">Print Date  : {print_date}</td>\\n        <td class=\\\"right\\\">Recipe code : {recipe_code}</td>\\n      </tr>\\n    </table>\\n  </div>\\n\\n  <h1>Consumption report</h1>\\n  <div id=\\\"title-rule\\\"></div>\\n</section>\\n\\n<table id=\\\"data-table\\\">\\n  <colgroup>\\n    <col class=\\\"c1\\\" /><col class=\\\"c2\\\" /><col class=\\\"c3\\\" /><col class=\\\"c4\\\" /><col class=\\\"c5\\\" /><col class=\\\"c6\\\" />\\n  </colgroup>\\n  <thead>\\n    <tr>\\n      <th class=\\\"center\\\" data-label=\\\"sl_no\\\">Sl. No.</th>\\n      <th data-label=\\\"material_name\\\">Material name</th>\\n      <th class=\\\"num\\\" data-label=\\\"set_wt\\\">Set. wt(Kg)</th>\\n      <th class=\\\"num\\\" data-label=\\\"ach_wt\\\">Ach. wt(Kg)</th>\\n      <th class=\\\"num\\\" data-label=\\\"error_kg\\\">Error(Kg)</th>\\n      <th class=\\\"num\\\" data-label=\\\"error_pct\\\">Error %</th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr>\\n      <td class=\\\"center\\\">{sl_no}</td>\\n      <td>{material_name}</td>\\n      <td class=\\\"num\\\">{set_wt}</td>\\n      <td class=\\\"num\\\">{ach_wt}</td>\\n      <td class=\\\"num\\\">{error_kg}</td>\\n      <td class=\\\"num\\\">{error_pct}</td>\\n    </tr>\\n  </tbody>\\n  <tfoot>\\n    <tr>\\n      <td colspan=\\\"2\\\">Total</td>\\n      <td class=\\\"num\\\">{total_set_wt}</td>\\n      <td class=\\\"num\\\">{total_ach_wt}</td>\\n      <td class=\\\"num\\\">{total_error_kg}</td>\\n      <td class=\\\"num\\\">{total_error_pct}</td>\\n    </tr>\\n  </tfoot>\\n</table>\\n\\n<footer id=\\\"page-footer\\\">\\n  <div>Indian Industrial Machines Pvt. Ltd.</div>\\n  <div class=\\\"center\\\">{page_label}</div>\\n  <div></div>\\n</footer>\\n\\n</body>\\n</html>\",\n  \"page_summary\": \"Adjusted the main table column widths to provide more consistent space while keeping the total printable width at 178mm. New widths (in order): 14mm (Sl. No.), 84mm (Material name), 26mm (Set. wt), 26mm (Ach. wt), 16mm (Error Kg), 12mm (Error %). Inlined constants based on mapping INPUT_SAMPLE: plant_name = \\\"SSR AQUA\\\" and location = \\\"Gudivada\\\". All other placeholders remain dynamic: from_date, to_date, and print_date are LATER_SELECTED; recipe_code maps to recipes.recipe_name; row fields sl_no, material_name, set_wt, ach_wt, error_kg, and error_pct remain UNRESOLVED; totals fields remain tokenized with SQL expressions for aggregation; page_label is LATER_SELECTED. No changes were made to the DOM structure, repeat rows, or data regions.\"\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761055373,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 3716,
    "prompt_tokens": 5210,
    "total_tokens": 8926,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 1792,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T14:10:27Z - contract_build_v2

```json
{
  "id": "chatcmpl-CT7HfwCxXuVMbljLEUoXe4gQdsrdL",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"overview_md\": \"Executive Summary\\n- Goal: Build a Consumption report that lists per-material Set/Achieved weights and error metrics by unpivoting bin1..bin12 columns from recipes, grouped by material name, with totals at the footer.\\n- Reshape: UNION ALL the 12 bin columns (content/sp/act) into a long form, drop blanks/zero-only entries, then group by trimmed material name.\\n- Grouping & Ordering: Group rows by TRIM(material_name). Order rows case-insensitively by material_name, with numeric tie-breakers for stability. Provide sequential Sl. No. based on that order.\\n- Filters: Required equality filter on recipe_code -> recipes.recipe_name. Optional date range filter on recipes.start_time using from_date/to_date (inclusive) when provided.\\n- Totals: Compute from the aggregated row dataset to ensure consistency with filters and reshape.\\n\\nToken Inventory (dynamic)\\n- Scalars: plant_name, location, from_date, to_date, print_date, recipe_code, report_title, company_name, page_label\\n- Row tokens: sl_no, material_name, set_wt, ach_wt, error_kg, error_pct\\n- Totals: total_set_wt, total_ach_wt, total_error_kg, total_error_pct\\n\\nMapping Table\\n- plant_name -> PARAM:plant_name\\n- location -> PARAM:location\\n- from_date -> PARAM:from_date\\n- to_date -> PARAM:to_date\\n- print_date -> PARAM:print_date\\n- recipe_code -> PARAM:recipe_code\\n- report_title -> 'Consumption report'\\n- company_name -> 'Indian Industrial Machines Pvt. Ltd.'\\n- page_label -> PARAM:page_label\\n- sl_no -> rows.sl_no\\n- material_name -> rows.material_name\\n- set_wt -> rows.set_wt\\n- ach_wt -> rows.ach_wt\\n- error_kg -> rows.error_kg\\n- error_pct -> rows.error_pct\\n- total_set_wt -> totals.total_set_wt\\n- total_ach_wt -> totals.total_ach_wt\\n- total_error_kg -> totals.total_error_kg\\n- total_error_pct -> totals.total_error_pct\\n\\nJoin & Date Rules\\n- Tables: single-table source recipes (no joins required).\\n- Date column: recipes.start_time is the canonical date for filtering.\\n- Date filter semantics: when from_date and to_date are both supplied, apply recipes.start_time BETWEEN :from_date AND :to_date (inclusive). If only one bound is provided, apply the corresponding single-sided predicate.\\n\\nTransformations\\n- Unpivot/Union: Create a staging dataset long_bins via UNION ALL across bin1..bin12 with columns (recipe_id, recipe_name, start_time, end_time, material_name, set_wt_kg, ach_wt_kg, bin_index).\\n- Pre-aggregation filters: Apply required recipe_code equality and optional date range filters to recipes before UNION. In the long form, drop rows where TRIM(material_name) IS NULL/empty and where both COALESCE(set_wt_kg,0)=0 AND COALESCE(ach_wt_kg,0)=0.\\n- Aggregation (rows dataset): GROUP BY TRIM(material_name). Compute:\\n  - set_wt = SUM(long_bins.set_wt_kg)\\n  - ach_wt = SUM(long_bins.ach_wt_kg)\\n  - error_kg = SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\\n  - error_pct = CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END\\n- Numbering: sl_no = ROW_NUMBER() OVER (ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC)\\n- Totals: Compute from rows:\\n  - total_set_wt = SUM(rows.set_wt)\\n  - total_ach_wt = SUM(rows.ach_wt)\\n  - total_error_kg = SUM(rows.error_kg)\\n  - total_error_pct = (SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0)\\n\\nParameters\\n- Required: recipe_code (string). Downstream SQL must apply equality predicate recipes.recipe_name = :recipe_code in all entrypoints (rows/totals/parent) when value is supplied.\\n- Optional filters: from_date, to_date (date/datetime strings). Only apply when non-empty; inclusive semantics when both provided.\\n- Pass-through (header only): plant_name, location, print_date, page_label. Not used in SQL.\\n\\nChecklist for Step 5\\n- Datasets columns order must match schema lists exactly.\\n- Build long_bins via UNION ALL over bins 1..12 using only catalog columns; include bin_index 1..12 for tie-breaks.\\n- Apply filters before aggregation: required recipe_name equality; optional date range on recipes.start_time; drop blank materials and zero-only rows.\\n- Group by TRIM(material_name) and compute row metrics with COALESCE/NULLIF guards as specified.\\n- Ordering: ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC; generate sl_no via ROW_NUMBER() over the same ordering.\\n- Totals must be computed from the rows dataset to mirror all filters/reshape.\\n- Use only columns from the allow-list; no additional tables/columns.\\n\",\n  \"step5_requirements\": {\n    \"datasets\": {\n      \"header\": {\n        \"description\": \"One-row header dataset for top-of-page fields; mainly pass-through parameters and constants.\",\n        \"columns\": [\n          \"plant_name\",\n          \"location\",\n          \"from_date\",\n          \"to_date\",\n          \"print_date\",\n          \"recipe_code\",\n          \"report_title\",\n          \"company_name\",\n          \"page_label\"\n        ]\n      },\n      \"rows\": {\n        \"description\": \"Detail rows by material after unpivoting bin1..bin12 from recipes and aggregating.\",\n        \"columns\": [\n          \"sl_no\",\n          \"material_name\",\n          \"set_wt\",\n          \"ach_wt\",\n          \"error_kg\",\n          \"error_pct\"\n        ],\n        \"grouping\": [\n          \"Group by TRIM(material_name) from the long_bins staging dataset.\",\n          \"Before grouping, filter out rows where TRIM(material_name) IS NULL or '' and where COALESCE(set_wt_kg,0)=0 AND COALESCE(ach_wt_kg,0)=0.\",\n          \"Apply required equality filter recipes.recipe_name = :recipe_code and optional date predicates on recipes.start_time prior to UNION/aggregation.\"\n        ],\n        \"ordering\": [\n          \"Stable sort: ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC.\",\n          \"sl_no = ROW_NUMBER() OVER the same ORDER BY to ensure deterministic numbering.\"\n        ]\n      },\n      \"totals\": {\n        \"description\": \"Aggregate totals computed from the rows dataset to reflect all filters and reshaping.\",\n        \"columns\": [\n          \"total_set_wt\",\n          \"total_ach_wt\",\n          \"total_error_kg\",\n          \"total_error_pct\"\n        ]\n      }\n    },\n    \"semantics\": \"Key token recipe_code is a required user selection. SQL must apply equality predicate on recipes.recipe_name when provided. from_date/to_date are optional; when provided, apply inclusive range on recipes.start_time (both sides if both present, single-sided otherwise). Pass-through parameters plant_name, location, print_date, and page_label are only used for header rendering. All filters must be applied consistently to header (if needed), rows, and totals datasets.\",\n    \"parameters\": {\n      \"required\": [\n        {\n          \"name\": \"recipe_code\",\n          \"type\": \"string\"\n        }\n      ],\n      \"optional\": [\n        {\n          \"name\": \"from_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"to_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"plant_name\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"location\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"print_date\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"page_label\",\n          \"type\": \"string\"\n        }\n      ]\n    },\n    \"transformations\": [\n      \"Create long_bins (staging) via UNION ALL across the 12 bin columns of recipes, selecting: recipe_id=recipes.id, recipe_name=recipes.recipe_name, start_time=recipes.start_time, end_time=recipes.end_time, material_name=TRIM(recipes.binN_content), set_wt_kg=CAST(recipes.binN_sp AS NUMERIC), ach_wt_kg=CAST(recipes.binN_act AS NUMERIC), bin_index=N.\",\n      \"Apply filters before UNION/aggregation: recipes.recipe_name = :recipe_code (required), and optional date predicates on recipes.start_time using :from_date/:to_date when supplied.\",\n      \"In long_bins, drop rows with TRIM(material_name) IS NULL OR TRIM(material_name) = '' and where COALESCE(set_wt_kg,0)=0 AND COALESCE(ach_wt_kg,0)=0.\",\n      \"Aggregate rows by TRIM(material_name). Compute set_wt = SUM(set_wt_kg), ach_wt = SUM(ach_wt_kg), error_kg = SUM(ach_wt_kg) - SUM(set_wt_kg), error_pct = CASE WHEN SUM(set_wt_kg)=0 THEN NULL ELSE ((SUM(ach_wt_kg) - SUM(set_wt_kg)) * 100.0) / SUM(set_wt_kg) END.\",\n      \"Compute sl_no using ROW_NUMBER() OVER (ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC).\",\n      \"Totals math mirrors row expressions: total_set_wt = SUM(rows.set_wt), total_ach_wt = SUM(rows.ach_wt), total_error_kg = SUM(rows.error_kg), total_error_pct = (SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0).\"\n    ]\n  },\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"plant_name\",\n        \"location\",\n        \"from_date\",\n        \"to_date\",\n        \"print_date\",\n        \"recipe_code\",\n        \"report_title\",\n        \"company_name\",\n        \"page_label\"\n      ],\n      \"row_tokens\": [\n        \"sl_no\",\n        \"material_name\",\n        \"set_wt\",\n        \"ach_wt\",\n        \"error_kg\",\n        \"error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt\",\n        \"total_ach_wt\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"print_date\": \"PARAM:print_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"report_title\": \"'Consumption report'\",\n      \"company_name\": \"'Indian Industrial Machines Pvt. Ltd.'\",\n      \"page_label\": \"PARAM:page_label\",\n      \"sl_no\": \"rows.sl_no\",\n      \"material_name\": \"rows.material_name\",\n      \"set_wt\": \"rows.set_wt\",\n      \"ach_wt\": \"rows.ach_wt\",\n      \"error_kg\": \"rows.error_kg\",\n      \"error_pct\": \"rows.error_pct\",\n      \"total_set_wt\": \"totals.total_set_wt\",\n      \"total_ach_wt\": \"totals.total_ach_wt\",\n      \"total_error_kg\": \"totals.total_error_kg\",\n      \"total_error_pct\": \"totals.total_error_pct\"\n    },\n    \"unresolved\": [],\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": null,\n      \"child_key\": null\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\"\n      },\n      \"optional\": {\n        \"from_date\": \"recipes.start_time\",\n        \"to_date\": \"recipes.start_time\"\n      }\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce rows dataset from wide bin columns\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into a long form with material content and weights; trim material names; drop blanks and zero-only rows; then group by material_name.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"material_name\": \"TRIM(long_bins.material_name)\",\n      \"set_wt\": \"SUM(long_bins.set_wt_kg)\",\n      \"ach_wt\": \"SUM(long_bins.ach_wt_kg)\",\n      \"error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END\"\n    },\n    \"totals_math\": {\n      \"total_set_wt\": \"SUM(rows.set_wt)\",\n      \"total_ach_wt\": \"SUM(rows.ach_wt)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"(SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0)\"\n    },\n    \"formatters\": {\n      \"set_wt\": \"number(2)\",\n      \"ach_wt\": \"number(2)\",\n      \"error_kg\": \"number(2)\",\n      \"error_pct\": \"number(4)\",\n      \"total_set_wt\": \"number(2)\",\n      \"total_ach_wt\": \"number(2)\",\n      \"total_error_kg\": \"number(2)\",\n      \"total_error_pct\": \"number(4)\",\n      \"print_date\": \"date(DD/MM/YYYY)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"UPPER(rows.material_name) ASC\",\n        \"rows.set_wt DESC\",\n        \"rows.ach_wt DESC\",\n        \"rows.material_name ASC\"\n      ]\n    },\n    \"notes\": \"Only the recipes table is in scope. Equality on recipe_code uses recipes.recipe_name. Date filters apply to recipes.start_time and are inclusive when both bounds are present. Error % is expressed as percent (x100).\"\n  },\n  \"validation\": {\n    \"unknown_tokens\": [],\n    \"unknown_columns\": [],\n    \"token_coverage\": {\n      \"scalars_mapped_pct\": 100,\n      \"row_tokens_mapped_pct\": 100,\n      \"totals_mapped_pct\": 100\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761055547,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 9706,
    "prompt_tokens": 8886,
    "total_tokens": 18592,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 6080,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T14:12:43Z - generator_assets_v1

```json
{
  "id": "chatcmpl-CT7MBiClgsaqaelaX867c0tgp8JUo",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "```json\n{\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"plant_name\",\n        \"location\",\n        \"from_date\",\n        \"to_date\",\n        \"print_date\",\n        \"recipe_code\",\n        \"report_title\",\n        \"company_name\",\n        \"page_label\"\n      ],\n      \"row_tokens\": [\n        \"sl_no\",\n        \"material_name\",\n        \"set_wt\",\n        \"ach_wt\",\n        \"error_kg\",\n        \"error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt\",\n        \"total_ach_wt\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"print_date\": \"PARAM:print_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"report_title\": \"'Consumption report'\",\n      \"company_name\": \"'Indian Industrial Machines Pvt. Ltd.'\",\n      \"page_label\": \"PARAM:page_label\",\n      \"sl_no\": \"rows.sl_no\",\n      \"material_name\": \"rows.material_name\",\n      \"set_wt\": \"rows.set_wt\",\n      \"ach_wt\": \"rows.ach_wt\",\n      \"error_kg\": \"rows.error_kg\",\n      \"error_pct\": \"rows.error_pct\",\n      \"total_set_wt\": \"totals.total_set_wt\",\n      \"total_ach_wt\": \"totals.total_ach_wt\",\n      \"total_error_kg\": \"totals.total_error_kg\",\n      \"total_error_pct\": \"totals.total_error_pct\"\n    },\n    \"unresolved\": [],\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": \"recipes\",\n      \"child_key\": \"id\"\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\"\n      },\n      \"optional\": {\n        \"from_date\": \"recipes.start_time\",\n        \"to_date\": \"recipes.start_time\"\n      }\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce rows dataset from wide bin columns\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into a long form with material content and weights; trim material names; drop blanks and zero-only rows; then group by material_name.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"material_name\": \"TRIM(long_bins.material_name)\",\n      \"set_wt\": \"SUM(long_bins.set_wt_kg)\",\n      \"ach_wt\": \"SUM(long_bins.ach_wt_kg)\",\n      \"error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END\"\n    },\n    \"totals_math\": {\n      \"total_set_wt\": \"SUM(rows.set_wt)\",\n      \"total_ach_wt\": \"SUM(rows.ach_wt)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"(SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0)\"\n    },\n    \"formatters\": {\n      \"set_wt\": \"number(2)\",\n      \"ach_wt\": \"number(2)\",\n      \"error_kg\": \"number(2)\",\n      \"error_pct\": \"number(4)\",\n      \"total_set_wt\": \"number(2)\",\n      \"total_ach_wt\": \"number(2)\",\n      \"total_error_kg\": \"number(2)\",\n      \"total_error_pct\": \"number(4)\",\n      \"print_date\": \"date(DD/MM/YYYY)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"UPPER(rows.material_name) ASC\",\n        \"rows.set_wt DESC\",\n        \"rows.ach_wt DESC\",\n        \"rows.material_name ASC\"\n      ]\n    },\n    \"notes\": \"Only the recipes table is in scope. Equality on recipe_code uses recipes.recipe_name. Date filters apply to recipes.start_time and are inclusive when both bounds are present. Error % is expressed as percent (x100).\",\n    \"header_tokens\": [\n      \"plant_name\",\n      \"location\",\n      \"from_date\",\n      \"to_date\",\n      \"print_date\",\n      \"recipe_code\",\n      \"report_title\",\n      \"company_name\",\n      \"page_label\"\n    ],\n    \"row_tokens\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"totals\": {\n      \"total_set_wt\": \"totals.total_set_wt\",\n      \"total_ach_wt\": \"totals.total_ach_wt\",\n      \"total_error_kg\": \"totals.total_error_kg\",\n      \"total_error_pct\": \"totals.total_error_pct\"\n    },\n    \"row_order\": [\n      \"UPPER(rows.material_name) ASC\",\n      \"rows.set_wt DESC\",\n      \"rows.ach_wt DESC\",\n      \"rows.material_name ASC\"\n    ],\n    \"literals\": {}\n  },\n  \"sql_pack\": {\n    \"dialect\": \"sqlite\",\n    \"script\": \"-- HEADER SELECT --\\nSELECT plant_name, location, from_date, to_date, print_date, recipe_code, report_title, company_name, page_label\\nFROM (SELECT :plant_name as plant_name, :location as location, :from_date as from_date, :to_date as to_date, :print_date as print_date, :recipe_code as recipe_code, 'Consumption report' as report_title, 'Indian Industrial Machines Pvt. Ltd.' as company_name, :page_label as page_label ) as header\\n-- ROWS SELECT --\\nSELECT ROW_NUMBER() OVER (ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC) as sl_no, material_name, set_wt, ach_wt, error_kg, error_pct\\nFROM (SELECT TRIM(long_bins.material_name) as material_name, SUM(long_bins.set_wt_kg) as set_wt, SUM(long_bins.ach_wt_kg) as ach_wt, SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) as error_kg, CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END as error_pct\\nFROM (\\n  SELECT recipes.id as recipe_id, recipes.recipe_name as recipe_name, recipes.start_time as start_time, recipes.end_time as end_time,\\n    recipes.bin1_content as material_name, CAST(recipes.bin1_sp AS NUMERIC) as set_wt_kg, CAST(recipes.bin1_act AS NUMERIC) as ach_wt_kg\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin2_content, CAST(recipes.bin2_sp AS NUMERIC), CAST(recipes.bin2_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin3_content, CAST(recipes.bin3_sp AS NUMERIC), CAST(recipes.bin3_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin4_content, CAST(recipes.bin4_sp AS NUMERIC), CAST(recipes.bin4_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin5_content, CAST(recipes.bin5_sp AS NUMERIC), CAST(recipes.bin5_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin6_content, CAST(recipes.bin6_sp AS NUMERIC), CAST(recipes.bin6_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin7_content, CAST(recipes.bin7_sp AS NUMERIC), CAST(recipes.bin7_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin8_content, CAST(recipes.bin8_sp AS NUMERIC), CAST(recipes.bin8_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin9_content, CAST(recipes.bin9_sp AS NUMERIC), CAST(recipes.bin9_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin10_content, CAST(recipes.bin10_sp AS NUMERIC), CAST(recipes.bin10_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin11_content, CAST(recipes.bin11_sp AS NUMERIC), CAST(recipes.bin11_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin12_content, CAST(recipes.bin12_sp AS NUMERIC), CAST(recipes.bin12_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n) as long_bins\\nGROUP BY TRIM(long_bins.material_name)) as rows\\n-- TOTALS SELECT --\\nSELECT SUM(rows.set_wt) as total_set_wt, SUM(rows.ach_wt) as total_ach_wt, SUM(rows.error_kg) as total_error_kg, (SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0) as total_error_pct\\nFROM (SELECT TRIM(long_bins.material_name) as material_name, SUM(long_bins.set_wt_kg) as set_wt, SUM(long_bins.ach_wt_kg) as ach_wt, SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) as error_kg, CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END as error_pct\\nFROM (\\n  SELECT recipes.id as recipe_id, recipes.recipe_name as recipe_name, recipes.start_time as start_time, recipes.end_time as end_time,\\n    recipes.bin1_content as material_name, CAST(recipes.bin1_sp AS NUMERIC) as set_wt_kg, CAST(recipes.bin1_act AS NUMERIC) as ach_wt_kg\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin2_content, CAST(recipes.bin2_sp AS NUMERIC), CAST(recipes.bin2_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin3_content, CAST(recipes.bin3_sp AS NUMERIC), CAST(recipes.bin3_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin4_content, CAST(recipes.bin4_sp AS NUMERIC), CAST(recipes.bin4_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin5_content, CAST(recipes.bin5_sp AS NUMERIC), CAST(recipes.bin5_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin6_content, CAST(recipes.bin6_sp AS NUMERIC), CAST(recipes.bin6_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin7_content, CAST(recipes.bin7_sp AS NUMERIC), CAST(recipes.bin7_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin8_content, CAST(recipes.bin8_sp AS NUMERIC), CAST(recipes.bin8_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin9_content, CAST(recipes.bin9_sp AS NUMERIC), CAST(recipes.bin9_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin10_content, CAST(recipes.bin10_sp AS NUMERIC), CAST(recipes.bin10_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin11_content, CAST(recipes.bin11_sp AS NUMERIC), CAST(recipes.bin11_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n  UNION ALL\\n  SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time,\\n    recipes.bin12_content, CAST(recipes.bin12_sp AS NUMERIC), CAST(recipes.bin12_act AS NUMERIC)\\n  FROM recipes\\n  WHERE recipes.recipe_name = :recipe_code\\n) as long_bins\\nGROUP BY TRIM(long_bins.material_name)) as rows;\",\n    \"entrypoints\": {\n      \"header\": \"SELECT plant_name, location, from_date, to_date, print_date, recipe_code, report_title, company_name, page_label FROM (SELECT :plant_name as plant_name, :location as location, :from_date as from_date, :to_date as to_date, :print_date as print_date, :recipe_code as recipe_code, 'Consumption report' as report_title, 'Indian Industrial Machines Pvt. Ltd.' as company_name, :page_label as page_label ) as header\",\n      \"rows\": \"SELECT ROW_NUMBER() OVER (ORDER BY UPPER(material_name) ASC, set_wt DESC, ach_wt DESC, material_name ASC) as sl_no, material_name, set_wt, ach_wt, error_kg, error_pct FROM (SELECT TRIM(long_bins.material_name) as material_name, SUM(long_bins.set_wt_kg) as set_wt, SUM(long_bins.ach_wt_kg) as ach_wt, SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) as error_kg, CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END as error_pct FROM (SELECT recipes.id as recipe_id, recipes.recipe_name as recipe_name, recipes.start_time as start_time, recipes.end_time as end_time, recipes.bin1_content as material_name, CAST(recipes.bin1_sp AS NUMERIC) as set_wt_kg, CAST(recipes.bin1_act AS NUMERIC) as ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin2_content, CAST(recipes.bin2_sp AS NUMERIC), CAST(recipes.bin2_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin3_content, CAST(recipes.bin3_sp AS NUMERIC), CAST(recipes.bin3_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin4_content, CAST(recipes.bin4_sp AS NUMERIC), CAST(recipes.bin4_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin5_content, CAST(recipes.bin5_sp AS NUMERIC), CAST(recipes.bin5_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin6_content, CAST(recipes.bin6_sp AS NUMERIC), CAST(recipes.bin6_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin7_content, CAST(recipes.bin7_sp AS NUMERIC), CAST(recipes.bin7_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin8_content, CAST(recipes.bin8_sp AS NUMERIC), CAST(recipes.bin8_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin9_content, CAST(recipes.bin9_sp AS NUMERIC), CAST(recipes.bin9_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin10_content, CAST(recipes.bin10_sp AS NUMERIC), CAST(recipes.bin10_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin11_content, CAST(recipes.bin11_sp AS NUMERIC), CAST(recipes.bin11_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin12_content, CAST(recipes.bin12_sp AS NUMERIC), CAST(recipes.bin12_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code) as long_bins GROUP BY TRIM(long_bins.material_name)) as rows\",\n      \"totals\": \"SELECT SUM(rows.set_wt) as total_set_wt, SUM(rows.ach_wt) as total_ach_wt, SUM(rows.error_kg) as total_error_kg, (SUM(rows.error_kg) * 100.0) / NULLIF(SUM(rows.set_wt), 0) as total_error_pct FROM (SELECT TRIM(long_bins.material_name) as material_name, SUM(long_bins.set_wt_kg) as set_wt, SUM(long_bins.ach_wt_kg) as ach_wt, SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) as error_kg, CASE WHEN SUM(long_bins.set_wt_kg)=0 THEN NULL ELSE ((SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) * 100.0) / SUM(long_bins.set_wt_kg) END as error_pct FROM (SELECT recipes.id as recipe_id, recipes.recipe_name as recipe_name, recipes.start_time as start_time, recipes.end_time as end_time, recipes.bin1_content as material_name, CAST(recipes.bin1_sp AS NUMERIC) as set_wt_kg, CAST(recipes.bin1_act AS NUMERIC) as ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin2_content, CAST(recipes.bin2_sp AS NUMERIC), CAST(recipes.bin2_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin3_content, CAST(recipes.bin3_sp AS NUMERIC), CAST(recipes.bin3_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin4_content, CAST(recipes.bin4_sp AS NUMERIC), CAST(recipes.bin4_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin5_content, CAST(recipes.bin5_sp AS NUMERIC), CAST(recipes.bin5_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin6_content, CAST(recipes.bin6_sp AS NUMERIC), CAST(recipes.bin6_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin7_content, CAST(recipes.bin7_sp AS NUMERIC), CAST(recipes.bin7_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin8_content, CAST(recipes.bin8_sp AS NUMERIC), CAST(recipes.bin8_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin9_content, CAST(recipes.bin9_sp AS NUMERIC), CAST(recipes.bin9_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin10_content, CAST(recipes.bin10_sp AS NUMERIC), CAST(recipes.bin10_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin11_content, CAST(recipes.bin11_sp AS NUMERIC), CAST(recipes.bin11_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code UNION ALL SELECT recipes.id, recipes.recipe_name, recipes.start_time, recipes.end_time, recipes.bin12_content, CAST(recipes.bin12_sp AS NUMERIC), CAST(recipes.bin12_act AS NUMERIC) FROM recipes WHERE recipes.recipe_name = :recipe_code) as long_bins GROUP BY TRIM(long_bins.material_name)) as rows\"\n    },\n    \"params\": {\n      \"required\": [\n        \"recipe_code\"\n      ],\n      \"optional\": [\n        \"from_date\",\n        \"to_date\",\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"page_label\"\n      ]\n    },\n    \"notes\": \"\",\n  },\n  \"output_schemas\": {\n    \"header\": [\n      \"plant_name\",\n      \"location\",\n      \"from_date\",\n      \"to_date\",\n      \"print_date\",\n      \"recipe_code\",\n      \"report_title\",\n      \"company_name\",\n      \"page_label\"\n    ],\n    \"rows\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt\",\n      \"ach_wt\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"totals\": [\n      \"total_set_wt\",\n      \"total_ach_wt\",\n      \"total_error_kg\",\n      \"total_error_pct\"\n    ]\n  },\n  \"needs_user_fix\": [],\n  \"dry_run\": null,\n  \"summary\": {\n    \"dialect\": \"sqlite\",\n    \"params\": {\n      \"required\": [\n        \"recipe_code\"\n      ],\n      \"optional\": [\n        \"from_date\",\n        \"to_date\",\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"page_label\"\n      ]\n    },\n    \"notes\": \"All filters must be applied consistently to header (if needed), rows, and totals datasets.\"\n  }\n}\n```",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761055827,
  "model": "gpt-4o-mini-2024-07-18",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559",
  "usage": {
    "completion_tokens": 5798,
    "prompt_tokens": 7451,
    "total_tokens": 13249,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 0,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T15:42:16Z - template_initial_html

```json
{
  "id": "chatcmpl-CT8kWQgEJ50ZSqiAuhW19P2vjsVbI",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>{report_title}</title>\n<style>\n  @page { size: A4; margin: 14mm 16mm; }\n  :root{\n    --col-1-w: 18mm;\n    --col-2-w: 90mm;\n    --col-3-w: 28mm;\n    --col-4-w: 28mm;\n    --col-5-w: 24mm;\n    --col-6-w: 20mm;\n    --row-pad-v: 3.2mm;\n    --cell-pad-h: 3.2mm;\n    --rule: 1px solid #000;\n  }\n  *{ box-sizing: border-box; }\n  body{ font-family: Arial, Helvetica, sans-serif; font-size: 12px; color:#000; }\n  h1,h2,h3,p{ margin:0; }\n  .grid{\n    width:100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n  }\n  .grid th,\n  .grid td{\n    border: var(--rule);\n    padding: calc(var(--row-pad-v) - 1mm) var(--cell-pad-h);\n    vertical-align: middle;\n    line-height: 1.25;\n  }\n  #report-header{\n    margin-bottom: 6mm;\n  }\n  #report-header .pad{\n    padding: 2.5mm var(--cell-pad-h);\n    border: var(--rule);\n  }\n  #report-header .right{ text-align: right; }\n  #report-header .title-row td{\n    padding: 3.2mm 0 4mm 0;\n    border-left: var(--rule);\n    border-right: var(--rule);\n    border-top: var(--rule);\n    border-bottom: none;\n  }\n  #report-header .title{\n    font-family: \"Times New Roman\", Times, serif;\n    font-size: 20px;\n    font-weight: 700;\n    text-align: center;\n  }\n  #report-header .below-title td{\n    border-left: var(--rule);\n    border-right: var(--rule);\n    border-top: none;\n    border-bottom: var(--rule);\n    padding: 2.5mm var(--cell-pad-h);\n  }\n\n  #data-table th{\n    background: #fff;\n    font-weight: 700;\n    text-align: left;\n  }\n  #data-table th:nth-child(1){ text-align: center; }\n  #data-table td:nth-child(1){ text-align: center; }\n  #data-table th:nth-child(3),\n  #data-table th:nth-child(4),\n  #data-table th:nth-child(5),\n  #data-table th:nth-child(6){ text-align: right; }\n  #data-table td:nth-child(3),\n  #data-table td:nth-child(4),\n  #data-table td:nth-child(5),\n  #data-table td:nth-child(6){ text-align: right; }\n  #data-table td{ padding-top: var(--row-pad-v); padding-bottom: var(--row-pad-v); }\n  #data-table tfoot td{\n    font-weight: 700;\n    background:#fff;\n  }\n\n  /* Column widths */\n  #data-table col.col-1{ width: var(--col-1-w); }\n  #data-table col.col-2{ width: var(--col-2-w); }\n  #data-table col.col-3{ width: var(--col-3-w); }\n  #data-table col.col-4{ width: var(--col-4-w); }\n  #data-table col.col-5{ width: var(--col-5-w); }\n  #data-table col.col-6{ width: var(--col-6-w); }\n\n  /* Footer */\n  #page-footer{\n    position: fixed;\n    left: 16mm;\n    right: 16mm;\n    bottom: 10mm;\n    font-size: 11px;\n  }\n  #page-footer .left{ float:left; }\n  #page-footer .center{ text-align: center; }\n  .muted{ color:#000; }\n</style>\n</head>\n<body>\n\n<table id=\"report-header\" class=\"grid\">\n  <colgroup>\n    <col style=\"width: 60%;\">\n    <col style=\"width: 40%;\">\n  </colgroup>\n  <tbody>\n    <tr>\n      <td class=\"pad\">\n        <strong>Plant name</strong> : {plant_name}\n      </td>\n      <td class=\"pad right\">\n        <strong>From Date</strong>: {from_date} &nbsp;&nbsp; <strong>To</strong> {to_date}\n      </td>\n    </tr>\n    <tr>\n      <td class=\"pad\">\n        <strong>Location</strong> &nbsp;&nbsp;: {location}\n      </td>\n      <td class=\"pad right\">\n        <!-- intentional blank to mirror spacing -->\n      </td>\n    </tr>\n    <tr class=\"title-row\">\n      <td class=\"title\" colspan=\"2\">{report_title}</td>\n    </tr>\n    <tr class=\"below-title\">\n      <td>\n        <strong>Print Date</strong> : {print_date}\n      </td>\n      <td class=\"right\">\n        <strong>Recipe code</strong> : {recipe_code}\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table id=\"data-table\" class=\"grid\">\n  <colgroup>\n    <col class=\"col-1\">\n    <col class=\"col-2\">\n    <col class=\"col-3\">\n    <col class=\"col-4\">\n    <col class=\"col-5\">\n    <col class=\"col-6\">\n  </colgroup>\n  <thead>\n    <tr>\n      <th data-label=\"sl_no\">Sl. No.</th>\n      <th data-label=\"material_name\">Material name</th>\n      <th data-label=\"set_wt\">Set. wt(Kg)</th>\n      <th data-label=\"ach_wt\">Ach. wt(Kg)</th>\n      <th data-label=\"error_kg\">Error(Kg)</th>\n      <th data-label=\"error_pct\">Error %</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>{row_sl_no}</td>\n      <td>{row_material_name}</td>\n      <td>{row_set_wt}</td>\n      <td>{row_ach_wt}</td>\n      <td>{row_error_kg}</td>\n      <td>{row_error_pct}</td>\n    </tr>\n  </tbody>\n  <tfoot id=\"report-totals\">\n    <tr>\n      <td></td>\n      <td><strong>Total</strong></td>\n      <td>{total_set_wt}</td>\n      <td>{total_ach_wt}</td>\n      <td>{total_error_kg}</td>\n      <td>{total_error_pct}</td>\n    </tr>\n  </tfoot>\n</table>\n\n<div id=\"page-footer\">\n  <div class=\"left muted\">{company_name}</div>\n  <div class=\"center muted\">{page_number}</div>\n</div>\n\n</body>\n</html>\n<!--END_HTML-->\n\n<!--BEGIN_SCHEMA_JSON-->\n{\n  \"scalars\": [\n    \"plant_name\",\n    \"location\",\n    \"from_date\",\n    \"to_date\",\n    \"recipe_code\",\n    \"print_date\",\n    \"report_title\",\n    \"company_name\",\n    \"page_number\"\n  ],\n  \"row_tokens\": [\n    \"row_sl_no\",\n    \"row_material_name\",\n    \"row_set_wt\",\n    \"row_ach_wt\",\n    \"row_error_kg\",\n    \"row_error_pct\"\n  ],\n  \"totals\": [\n    \"total_set_wt\",\n    \"total_ach_wt\",\n    \"total_error_kg\",\n    \"total_error_pct\"\n  ],\n  \"notes\": \"\"\n}\n<!--END_SCHEMA_JSON-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761061180,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 5567,
    "prompt_tokens": 1544,
    "total_tokens": 7111,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 3840,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T15:43:53Z - template_fix_html_call2

```json
{
  "id": "chatcmpl-CT8nAm3LxXq1PWQ2VwjMNMIO5T8pw",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\" />\n<title>{report_title}</title>\n<style>\n  @page { size: A4; margin: 14mm 16mm; }\n  :root{\n    --col-1-w: 12.8mm;\n    --col-2-w: 89.2mm;\n    --col-3-w: 19mm;\n    --col-4-w: 19mm;\n    --col-5-w: 19mm;\n    --col-6-w: 19mm;\n    --row-pad-v: 2.4mm;\n    --cell-pad-h: 2.8mm;\n    --rule: 1px solid #000;\n  }\n\n  *{ box-sizing: border-box; }\n  body{\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 12px;\n    color:#000;\n    margin:0;\n  }\n  h1,h2,h3,p{ margin:0; }\n\n  .grid{\n    width:100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n  }\n  .grid th,\n  .grid td{\n    border: var(--rule);\n    padding: var(--row-pad-v) var(--cell-pad-h);\n    vertical-align: middle;\n    line-height: 1.2;\n  }\n\n  /* Header block */\n  #report-header{ margin-bottom: 3.5mm; }\n  #report-header .pad{\n    padding: 2.2mm var(--cell-pad-h);\n  }\n  #report-header .right{ text-align: right; white-space: nowrap; }\n  #report-header .title-row td{\n    border-left: var(--rule);\n    border-right: var(--rule);\n    border-top: var(--rule);\n    border-bottom: none;\n    padding: 3mm 0 3.2mm 0;\n  }\n  #report-header .title{\n    font-family: \"Times New Roman\", Times, serif;\n    font-size: 20px;\n    font-weight: 700;\n    text-align: center;\n    letter-spacing: 0.1px;\n  }\n  #report-header .below-title td{\n    border-left: var(--rule);\n    border-right: var(--rule);\n    border-top: var(--rule);\n    border-bottom: var(--rule);\n    padding: 2.2mm var(--cell-pad-h);\n  }\n\n  /* Data table */\n  #data-table{ font-variant-numeric: tabular-nums; }\n  #data-table th{\n    background:#fff;\n    font-weight:700;\n    text-align: left;\n    padding-top: 2mm;\n    padding-bottom: 2mm;\n    white-space: nowrap;\n  }\n  #data-table thead th{\n    border-top: var(--rule);\n  }\n  #data-table th:nth-child(1),\n  #data-table td:nth-child(1){ text-align: center; }\n  #data-table th:nth-child(3),\n  #data-table th:nth-child(4),\n  #data-table th:nth-child(5),\n  #data-table th:nth-child(6){ text-align: right; }\n  #data-table td:nth-child(3),\n  #data-table td:nth-child(4),\n  #data-table td:nth-child(5),\n  #data-table td:nth-child(6){ text-align: right; }\n  #data-table td{\n    padding-top: var(--row-pad-v);\n    padding-bottom: var(--row-pad-v);\n  }\n  #data-table tfoot td{\n    font-weight: 700;\n    background:#fff;\n    border-top: 2px solid #000;\n  }\n\n  /* Column widths */\n  #data-table col.col-1{ width: var(--col-1-w); }\n  #data-table col.col-2{ width: var(--col-2-w); }\n  #data-table col.col-3{ width: var(--col-3-w); }\n  #data-table col.col-4{ width: var(--col-4-w); }\n  #data-table col.col-5{ width: var(--col-5-w); }\n  #data-table col.col-6{ width: var(--col-6-w); }\n\n  /* Footer */\n  #page-footer{\n    position: fixed;\n    left: 16mm;\n    right: 16mm;\n    bottom: 10mm;\n    font-size: 11px;\n    line-height: 1;\n  }\n  #page-footer .left{ float:left; }\n  #page-footer .center{ text-align: center; }\n  .muted{ color:#000; }\n\n  /* Pagination stability */\n  .batch-block{ break-inside: avoid; page-break-inside: avoid; }\n</style>\n</head>\n<body>\n\n<table id=\"report-header\" class=\"grid\">\n  <colgroup>\n    <col style=\"width: 60%;\" />\n    <col style=\"width: 40%;\" />\n  </colgroup>\n  <tbody>\n    <tr>\n      <td class=\"pad\">\n        <strong>Plant name</strong> : {plant_name}\n      </td>\n      <td class=\"pad right\">\n        <strong>From Date</strong>: {from_date}  <strong>To</strong> {to_date}\n      </td>\n    </tr>\n    <tr>\n      <td class=\"pad\">\n        <strong>Location</strong>  : {location}\n      </td>\n      <td class=\"pad right\">\n        \n      </td>\n    </tr>\n    <tr class=\"title-row\">\n      <td class=\"title\" colspan=\"2\">{report_title}</td>\n    </tr>\n    <tr class=\"below-title\">\n      <td>\n        <strong>Print Date</strong> : {print_date}\n      </td>\n      <td class=\"right\">\n        <strong>Recipe code</strong> : {recipe_code}\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table id=\"data-table\" class=\"grid\">\n  <colgroup>\n    <col class=\"col-1\" />\n    <col class=\"col-2\" />\n    <col class=\"col-3\" />\n    <col class=\"col-4\" />\n    <col class=\"col-5\" />\n    <col class=\"col-6\" />\n  </colgroup>\n  <thead>\n    <tr>\n      <th data-label=\"sl_no\">Sl. No.</th>\n      <th data-label=\"material_name\">Material name</th>\n      <th data-label=\"set_wt\">Set. wt(Kg)</th>\n      <th data-label=\"ach_wt\">Ach. wt(Kg)</th>\n      <th data-label=\"error_kg\">Error(Kg)</th>\n      <th data-label=\"error_pct\">Error %</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>{row_sl_no}</td>\n      <td>{row_material_name}</td>\n      <td>{row_set_wt}</td>\n      <td>{row_ach_wt}</td>\n      <td>{row_error_kg}</td>\n      <td>{row_error_pct}</td>\n    </tr>\n  </tbody>\n  <tfoot id=\"report-totals\">\n    <tr>\n      <td></td>\n      <td><strong>Total</strong></td>\n      <td>{total_set_wt}</td>\n      <td>{total_ach_wt}</td>\n      <td>{total_error_kg}</td>\n      <td>{total_error_pct}</td>\n    </tr>\n  </tfoot>\n</table>\n\n<div id=\"page-footer\">\n  <div class=\"left muted\">{company_name}</div>\n  <div class=\"center muted\">{page_number}</div>\n</div>\n\n</body>\n</html>\n<!--END_HTML-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761061344,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4502,
    "prompt_tokens": 3863,
    "total_tokens": 8365,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 2816,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T15:46:55Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT8pO9bn8mItL0CjEW8zgSONANekm",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"location\": \"params.location\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"row_sl_no\": \"UNRESOLVED\",\n    \"row_material_name\": \"UNRESOLVED\",\n    \"row_set_wt\": \"UNRESOLVED\",\n    \"row_ach_wt\": \"UNRESOLVED\",\n    \"row_error_kg\": \"UNRESOLVED\",\n    \"row_error_pct\": \"UNRESOLVED\",\n    \"total_set_wt\": \"(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"(((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / NULLIF((recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp), 0) * 100.0)\",\n    \"page_number\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"report_title\": \"Consumption report\",\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"row_sl_no\": \"1\",\n    \"row_material_name\": \"CM 100 + DORB 100 KRR\",\n    \"row_set_wt\": \"11,800.00\",\n    \"row_ach_wt\": \"11,803.20\",\n    \"row_error_kg\": \"3.20\",\n    \"row_error_pct\": \"0.0271\",\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_number\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"row_sl_no\",\n      \"row_material_name\",\n      \"row_set_wt\",\n      \"row_ach_wt\",\n      \"row_error_kg\",\n      \"row_error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761061482,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6347,
    "prompt_tokens": 3841,
    "total_tokens": 10188,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5184,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T15:47:01Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CT8pO6qFTQebfgO4FjEpUFujyXfYa",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_weight\": \"UNRESOLVED\",\n    \"achieved_weight\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_percent\": \"UNRESOLVED\",\n\n    \"plant_name\": \"params.plant_name\",\n    \"location\": \"params.location\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"print_date\": \"params.print_date\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"page_number\": \"To Be Selected...\",\n\n    \"row_sl_no\": \"UNRESOLVED\",\n    \"row_material_name\": \"UNRESOLVED\",\n    \"row_set_wt\": \"UNRESOLVED\",\n    \"row_ach_wt\": \"UNRESOLVED\",\n    \"row_error_kg\": \"UNRESOLVED\",\n    \"row_error_pct\": \"UNRESOLVED\",\n\n    \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n  },\n  \"token_samples\": {\n    \"report_title\": \"Consumption report\",\n    \"plant_name\": \"SSR AQUA\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n\n    \"row_sl_no\": \"1\",\n    \"row_material_name\": \"CM 100 + DORB 100 KRR\",\n    \"row_set_wt\": \"11,800.00\",\n    \"row_ach_wt\": \"11,803.20\",\n    \"row_error_kg\": \"3.20\",\n    \"row_error_pct\": \"0.0271\",\n\n    \"total_set_wt\": \"80,000.00\",\n    \"total_ach_wt\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n\n    \"company_name\": \"Indian Industrial Machines Pvt. Ltd.\",\n    \"page_number\": \"Page 1 of 1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_weight\",\n      \"achieved_weight\",\n      \"error_kg\",\n      \"error_percent\",\n      \"row_sl_no\",\n      \"row_material_name\",\n      \"row_set_wt\",\n      \"row_ach_wt\",\n      \"row_error_kg\",\n      \"row_error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"total_ach_wt\": { \"op\": \"SUM\", \"over\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"] },\n      \"total_error_kg\": { \"op\": \"DIFF_OF_SUMS\", \"over_act\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"], \"over_sp\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] },\n      \"total_error_pct\": { \"op\": \"RATIO_OF_DIFF_TO_SUM\", \"numerator_over_act\": [\"recipes.bin1_act\",\"recipes.bin2_act\",\"recipes.bin3_act\",\"recipes.bin4_act\",\"recipes.bin5_act\",\"recipes.bin6_act\",\"recipes.bin7_act\",\"recipes.bin8_act\",\"recipes.bin9_act\",\"recipes.bin10_act\",\"recipes.bin11_act\",\"recipes.bin12_act\"], \"denominator_over_sp\": [\"recipes.bin1_sp\",\"recipes.bin2_sp\",\"recipes.bin3_sp\",\"recipes.bin4_sp\",\"recipes.bin5_sp\",\"recipes.bin6_sp\",\"recipes.bin7_sp\",\"recipes.bin8_sp\",\"recipes.bin9_sp\",\"recipes.bin10_sp\",\"recipes.bin11_sp\",\"recipes.bin12_sp\"] }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761061482,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 7018,
    "prompt_tokens": 3841,
    "total_tokens": 10859,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5440,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3712
    }
  }
}
```

## 2025-10-21T15:50:12Z - llm_call_3_5

```json
{
  "id": "chatcmpl-CT8t5QuU43oMdILhTl74FupWvRc5b",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"final_template_html\": \"\\n<html>\\n<head>\\n<meta charset=\\\"utf-8\\\" />\\n<title>Consumption report</title>\\n<style>\\n  @page { size: A4; margin: 14mm 16mm; }\\n  :root{\\n    /* Adjusted column widths to provide ample and consistent space (sum = 178mm printable width) */\\n    --col-1-w: 13mm;   /* Sl. No. */\\n    --col-2-w: 85mm;   /* Material name */\\n    --col-3-w: 20mm;   /* Set. wt(Kg) */\\n    --col-4-w: 20mm;   /* Ach. wt(Kg) */\\n    --col-5-w: 20mm;   /* Error(Kg) */\\n    --col-6-w: 20mm;   /* Error % */\\n\\n    /* Spacing tweaks to mirror PDF */\\n    --row-pad-v: 2.8mm;\\n    --cell-pad-h: 3.2mm;\\n    --rule: 1px solid #000;\\n  }\\n\\n  *{ box-sizing: border-box; }\\n  body{\\n    font-family: Arial, Helvetica, sans-serif;\\n    font-size: 12px;\\n    color:#000;\\n    margin:0;\\n  }\\n  h1,h2,h3,p{ margin:0; }\\n\\n  .grid{\\n    width:100%;\\n    border-collapse: collapse;\\n    table-layout: fixed;\\n  }\\n  .grid th,\\n  .grid td{\\n    border: var(--rule);\\n    padding: var(--row-pad-v) var(--cell-pad-h);\\n    vertical-align: middle;\\n    line-height: 1.2;\\n  }\\n\\n  /* Header block */\\n  #report-header{ margin-bottom: 3.5mm; }\\n  #report-header .pad{\\n    padding: 2.6mm var(--cell-pad-h);\\n  }\\n  #report-header .right{ text-align: right; white-space: nowrap; }\\n  #report-header .title-row td{\\n    border-left: var(--rule);\\n    border-right: var(--rule);\\n    border-top: var(--rule);\\n    border-bottom: none;\\n    padding: 3mm 0 3.2mm 0;\\n  }\\n  #report-header .title{\\n    font-family: \\\"Times New Roman\\\", Times, serif;\\n    font-size: 20px;\\n    font-weight: 700;\\n    text-align: center;\\n    letter-spacing: 0.1px;\\n  }\\n  #report-header .below-title td{\\n    border-left: var(--rule);\\n    border-right: var(--rule);\\n    border-top: var(--rule);\\n    border-bottom: var(--rule);\\n    padding: 2.4mm var(--cell-pad-h);\\n  }\\n\\n  /* Data table */\\n  #data-table{ font-variant-numeric: tabular-nums; }\\n  #data-table th{\\n    background:#fff;\\n    font-weight:700;\\n    text-align: left;\\n    padding-top: 2.6mm;\\n    padding-bottom: 2.6mm;\\n    white-space: nowrap;\\n  }\\n  #data-table thead th{\\n    border-top: var(--rule);\\n  }\\n  #data-table th:nth-child(1),\\n  #data-table td:nth-child(1){ text-align: center; }\\n  #data-table th:nth-child(3),\\n  #data-table th:nth-child(4),\\n  #data-table th:nth-child(5),\\n  #data-table th:nth-child(6){ text-align: right; }\\n  #data-table td:nth-child(3),\\n  #data-table td:nth-child(4),\\n  #data-table td:nth-child(5),\\n  #data-table td:nth-child(6){ text-align: right; white-space: nowrap; }\\n  #data-table td{\\n    padding-top: var(--row-pad-v);\\n    padding-bottom: var(--row-pad-v);\\n  }\\n  #data-table tfoot td{\\n    font-weight: 700;\\n    background:#fff;\\n    border-top: 2px solid #000;\\n  }\\n\\n  /* Column widths */\\n  #data-table col.col-1{ width: var(--col-1-w); }\\n  #data-table col.col-2{ width: var(--col-2-w); }\\n  #data-table col.col-3{ width: var(--col-3-w); }\\n  #data-table col.col-4{ width: var(--col-4-w); }\\n  #data-table col.col-5{ width: var(--col-5-w); }\\n  #data-table col.col-6{ width: var(--col-6-w); }\\n\\n  /* Footer */\\n  #page-footer{\\n    position: fixed;\\n    left: 16mm;\\n    right: 16mm;\\n    bottom: 10mm;\\n    font-size: 11px;\\n    line-height: 1;\\n  }\\n  #page-footer .left{ float:left; }\\n  #page-footer .center{ text-align: center; }\\n  .muted{ color:#000; }\\n\\n  /* Pagination stability */\\n  .batch-block{ break-inside: avoid; page-break-inside: avoid; }\\n</style>\\n</head>\\n<body>\\n\\n<table id=\\\"report-header\\\" class=\\\"grid\\\">\\n  <colgroup>\\n    <col style=\\\"width: 60%;\\\" />\\n    <col style=\\\"width: 40%;\\\" />\\n  </colgroup>\\n  <tbody>\\n    <tr>\\n      <td class=\\\"pad\\\">\\n        <strong>Plant name</strong> : SSR AQUA\\n      </td>\\n      <td class=\\\"pad right\\\">\\n        <strong>From Date</strong>: {from_date}  <strong>To</strong> {to_date}\\n      </td>\\n    </tr>\\n    <tr>\\n      <td class=\\\"pad\\\">\\n        <strong>Location</strong>  : Gudivada\\n      </td>\\n      <td class=\\\"pad right\\\">\\n        \\n      </td>\\n    </tr>\\n    <tr class=\\\"title-row\\\">\\n      <td class=\\\"title\\\" colspan=\\\"2\\\">Consumption report</td>\\n    </tr>\\n    <tr class=\\\"below-title\\\">\\n      <td>\\n        <strong>Print Date</strong> : {print_date}\\n      </td>\\n      <td class=\\\"right\\\">\\n        <strong>Recipe code</strong> : {recipe_code}\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n<table id=\\\"data-table\\\" class=\\\"grid\\\">\\n  <colgroup>\\n    <col class=\\\"col-1\\\" />\\n    <col class=\\\"col-2\\\" />\\n    <col class=\\\"col-3\\\" />\\n    <col class=\\\"col-4\\\" />\\n    <col class=\\\"col-5\\\" />\\n    <col class=\\\"col-6\\\" />\\n  </colgroup>\\n  <thead>\\n    <tr>\\n      <th data-label=\\\"sl_no\\\">Sl. No.</th>\\n      <th data-label=\\\"material_name\\\">Material name</th>\\n      <th data-label=\\\"set_wt\\\">Set. wt(Kg)</th>\\n      <th data-label=\\\"ach_wt\\\">Ach. wt(Kg)</th>\\n      <th data-label=\\\"error_kg\\\">Error(Kg)</th>\\n      <th data-label=\\\"error_pct\\\">Error %</th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr>\\n      <td>{row_sl_no}</td>\\n      <td>{row_material_name}</td>\\n      <td>{row_set_wt}</td>\\n      <td>{row_ach_wt}</td>\\n      <td>{row_error_kg}</td>\\n      <td>{row_error_pct}</td>\\n    </tr>\\n  </tbody>\\n  <tfoot id=\\\"report-totals\\\">\\n    <tr>\\n      <td></td>\\n      <td><strong>Total</strong></td>\\n      <td>{total_set_wt}</td>\\n      <td>{total_ach_wt}</td>\\n      <td>{total_error_kg}</td>\\n      <td>{total_error_pct}</td>\\n    </tr>\\n  </tfoot>\\n</table>\\n\\n<div id=\\\"page-footer\\\">\\n  <div class=\\\"left muted\\\">Indian Industrial Machines Pvt. Ltd.</div>\\n  <div class=\\\"center muted\\\">{page_number}</div>\\n</div>\\n\\n</body>\\n</html>\",\n  \"page_summary\": \"Adjusted CSS only to improve readability and mirror the reference PDF while preserving DOM, data regions, and tokens. Column widths now sum to the printable width (178 mm): Sl. No. 13 mm, Material name 85 mm, and each numeric column (Set. wt, Ach. wt, Error(Kg), Error %) 20 mm for consistent numeric space. Increased horizontal and vertical paddings (cell-pad-h 3.2 mm, row-pad-v 2.8 mm) and slightly larger header row padding for clearer separation. No structural changes were made. Inlined constants based on mapping: plant_name = \\\"SSR AQUA\\\" and location = \\\"Gudivada\\\". All other placeholders remain dynamic: from_date, to_date, print_date, recipe_code, page_number, row_sl_no, row_material_name, row_set_wt, row_ach_wt, row_error_kg, row_error_pct, total_set_wt, total_ach_wt, total_error_kg, total_error_pct. Reference sample values (not inlined) suggest: from_date 24/03/2024, to_date 24/03/2024, print_date 25/03/2024, recipe_code GANGADHAR-2024, totals around 80,000.00 set vs 80,016.00 achieved with 16.00 kg difference and 0.0200 in the Error % column. Note on interpretation: the \\\"Error %\\\" sample values appear as decimal fractions (e.g., 0.0271) rather than 0\u2013100 percentages; confirm whether to multiply by 100 for display. Footer company name is a constant string already present; page_number remains a token (sample: \\\"Page 1 of 1\\\"). No unresolved tokens were inadvertently replaced beyond the two constants, and repeat/row prototypes were left untouched.\"\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761061711,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 5667,
    "prompt_tokens": 6027,
    "total_tokens": 11694,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 3264,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T16:01:05Z - contract_build_v2

```json
{
  "id": "chatcmpl-CT8zyEkbVZGNUOmUd254iHA5781Yj",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"overview_md\": \"Executive Summary\\n- Goal: Build a Consumption report for a specific recipe code and date range using recipes table bin columns (bin1..bin12 for content/setpoint/actual). Rows list materials with set/achieved weights and error metrics; totals aggregate across all materials.\\n- Reshaping: Unpivot recipes.bin{1..12}_{content,sp,act} into a long form (long_bins), drop blank material names, normalize names via UPPER(TRIM(...)), then aggregate per normalized material name. The report expects Error % as a decimal fraction (e.g., 0.0200), not multiplied by 100.\\n- Filters: Required recipe_code equality against recipes.recipe_name and required date range filter on recipes.start_time between from_date and to_date (inclusive). These apply to header, rows, and totals.\\n- Totals: Totals compute using authoritative mapping_override expressions that sum across bin columns, with NULLIF/CASE protection for divide-by-zero in Error %.\\n\\nToken Inventory\\n- Scalars: plant_name, location, from_date, to_date, recipe_code, print_date, report_title, company_name, page_number\\n- Rows: row_sl_no, row_material_name, row_set_wt, row_ach_wt, row_error_kg, row_error_pct\\n- Totals: total_set_wt, total_ach_wt, total_error_kg, total_error_pct\\n\\nMapping Table\\n- plant_name -> PARAM:plant_name (pass-through)\\n- location -> PARAM:location (pass-through)\\n- from_date -> PARAM:from_date (required; drives date filter)\\n- to_date -> PARAM:to_date (required; drives date filter)\\n- recipe_code -> PARAM:recipe_code (required; equals recipes.recipe_name)\\n- print_date -> PARAM:print_date (pass-through)\\n- report_title -> 'Consumption report' (SQL literal)\\n- company_name -> 'Indian Industrial Machines Pvt. Ltd.' (SQL literal)\\n- page_number -> PARAM:page_number (pass-through)\\n- row_sl_no -> ROW_NUMBER() OVER (ORDER BY UPPER(TRIM(long_bins.material_name)) ASC)\\n- row_material_name -> UPPER(TRIM(long_bins.material_name))\\n- row_set_wt -> SUM(long_bins.set_wt_kg)\\n- row_ach_wt -> SUM(long_bins.ach_wt_kg)\\n- row_error_kg -> SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\\n- row_error_pct -> CASE WHEN SUM(long_bins.set_wt_kg) = 0 THEN NULL ELSE (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / SUM(long_bins.set_wt_kg) END\\n- total_set_wt -> SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\\n- total_ach_wt -> SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\\n- total_error_kg -> SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\\n- total_error_pct -> CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\\n\\nJoin & Date Rules\\n- Tables: Single table recipes; no child tables or joins.\\n- Primary key: recipes.id (not displayed but can be used for stability).\\n- Date column: recipes.start_time.\\n- Date filter semantics: Apply inclusive range over recipes.start_time between from_date and to_date. For SQL compilation: treat from_date and to_date as dates; apply start_time >= from_date at 00:00:00 and < (to_date + 1 day) or an equivalent inclusive predicate supported by the target dialect.\\n\\nTransformations\\n- Unpivot/Union: Create CTE long_bins with columns (recipe_id, recipe_name, ts, material_name, set_wt_kg, ach_wt_kg) as UNION ALL of 12 SELECTs mapping from recipes.binX_content, recipes.binX_sp, recipes.binX_act. Apply required filters (date range, recipe_code) to the base recipes before unpivoting to avoid unnecessary rows.\\n- Cleaning: In long_bins, drop rows where TRIM(material_name) IS NULL or equals ''.\\n- Aggregation (rows dataset): Group by normalized material name: UPPER(TRIM(material_name)). Compute set/achieved sums and error metrics. Compute row_sl_no via ROW_NUMBER() over the sorted aggregated rows.\\n- Totals: Use authoritative expressions over the recipes bin columns for total_set_wt, total_ach_wt, total_error_kg, and total_error_pct, mirroring mapping_override. Error % is a fraction, not multiplied by 100.\\n\\nParameters\\n- Required: from_date (date), to_date (date), recipe_code (string). These must filter all entrypoints (header, rows, totals) with equality for recipe_code and inclusive date range on recipes.start_time.\\n- Optional/Pass-through: plant_name (string), location (string), print_date (date), page_number (string), report_title (string via SQL literal), company_name (string via SQL literal). Optional parameters do not drive filters.\\n- Examples: from_date=2024-03-24, to_date=2024-03-24, recipe_code='GANGADHAR-2024'.\\n\\nChecklist for Step 5\\n- Use only catalog columns from recipes.* enumerated in the allow-list.\\n- Build CTE long_bins via UNION ALL of bin1..bin12 mappings, filtering recipes by date range and recipe_code first.\\n- Drop rows with blank/NULL material_name prior to grouping.\\n- Normalize material name as UPPER(TRIM(material_name)) for grouping; display the normalized name.\\n- Rows grouping: by UPPER(TRIM(long_bins.material_name)).\\n- Rows ordering: ORDER BY row_material_name ASC; assign row_sl_no with ROW_NUMBER() over the same order.\\n- Totals must use the provided mapping_override expressions and the same filters; protect division by zero via CASE.\\n- Error % should remain a decimal fraction (e.g., 0.0200), not multiplied by 100.\\n- Ensure equality filter for recipe_code is applied on recipes.recipe_name when the parameter is supplied (required).\\n- Date filter is inclusive from from_date to to_date across all datasets.\\n- Column orders in datasets must follow the schema arrays exactly.\",\n  \"step5_requirements\": {\n    \"datasets\": {\n      \"header\": {\n        \"description\": \"One-row header dataset\",\n        \"columns\": [\n          \"plant_name\",\n          \"location\",\n          \"from_date\",\n          \"to_date\",\n          \"recipe_code\",\n          \"print_date\",\n          \"report_title\",\n          \"company_name\",\n          \"page_number\"\n        ]\n      },\n      \"rows\": {\n        \"description\": \"Detail rows dataset aggregated by normalized material name\",\n        \"columns\": [\n          \"row_sl_no\",\n          \"row_material_name\",\n          \"row_set_wt\",\n          \"row_ach_wt\",\n          \"row_error_kg\",\n          \"row_error_pct\"\n        ],\n        \"grouping\": [\n          \"Group by normalized material name: UPPER(TRIM(long_bins.material_name)).\",\n          \"Drop rows where TRIM(long_bins.material_name) IS NULL or equals ''.\",\n          \"Apply filters (recipes.start_time date range and recipes.recipe_name = :recipe_code) before unpivot and grouping to minimize rows.\"\n        ],\n        \"ordering\": [\n          \"Primary: row_material_name ASC (case-normalized, upper-cased).\",\n          \"Tie-breakers (deterministic): row_set_wt DESC, row_ach_wt DESC.\"\n        ]\n      },\n      \"totals\": {\n        \"description\": \"Aggregate totals dataset computed directly from recipes bin columns\",\n        \"columns\": [\n          \"total_set_wt\",\n          \"total_ach_wt\",\n          \"total_error_kg\",\n          \"total_error_pct\"\n        ]\n      }\n    },\n    \"semantics\": \"recipe_code is a required key filter and must be applied as equality to recipes.recipe_name in all entrypoints. from_date and to_date are required and define an inclusive date range on recipes.start_time. Optional parameters (plant_name, location, print_date, page_number) are pass-through tokens and do not influence filtering. Error % is a decimal fraction; do not multiply by 100.\",\n    \"parameters\": {\n      \"required\": [\n        {\n          \"name\": \"from_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"to_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"recipe_code\",\n          \"type\": \"string\"\n        }\n      ],\n      \"optional\": [\n        {\n          \"name\": \"plant_name\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"location\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"print_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"page_number\",\n          \"type\": \"string\"\n        }\n      ]\n    },\n    \"transformations\": [\n      \"Create CTE long_bins as UNION ALL of 12 SELECTs from recipes, each selecting: recipe_id=recipes.id, recipe_name=recipes.recipe_name, ts=recipes.start_time, material_name=recipes.binX_content, set_wt_kg=recipes.binX_sp, ach_wt_kg=recipes.binX_act.\",\n      \"Apply required filters to recipes (recipes.start_time between from_date and to_date, recipes.recipe_name = :recipe_code) before unpivot.\",\n      \"Filter out blank materials in long_bins where TRIM(material_name) IS NULL or equals ''.\",\n      \"Rows dataset: SELECT normalized material name UPPER(TRIM(long_bins.material_name)) AS row_material_name, SUM(set_wt_kg) AS row_set_wt, SUM(ach_wt_kg) AS row_ach_wt, compute row_error_kg and row_error_pct, and compute row_sl_no as ROW_NUMBER() OVER (ORDER BY row_material_name ASC).\",\n      \"Totals dataset: Use exact mapping_override expressions over recipes bin columns. Mirror them in totals_math to ensure runtime consistency.\",\n      \"Guard divisions with CASE/NULLIF to avoid divide-by-zero in row_error_pct and total_error_pct.\"\n    ]\n  },\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"plant_name\",\n        \"location\",\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\",\n        \"print_date\",\n        \"report_title\",\n        \"company_name\",\n        \"page_number\"\n      ],\n      \"row_tokens\": [\n        \"row_sl_no\",\n        \"row_material_name\",\n        \"row_set_wt\",\n        \"row_ach_wt\",\n        \"row_error_kg\",\n        \"row_error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt\",\n        \"total_ach_wt\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"print_date\": \"PARAM:print_date\",\n      \"report_title\": \"'Consumption report'\",\n      \"company_name\": \"'Indian Industrial Machines Pvt. Ltd.'\",\n      \"page_number\": \"PARAM:page_number\",\n      \"row_sl_no\": \"ROW_NUMBER() OVER (ORDER BY UPPER(TRIM(long_bins.material_name)) ASC)\",\n      \"row_material_name\": \"UPPER(TRIM(long_bins.material_name))\",\n      \"row_set_wt\": \"SUM(long_bins.set_wt_kg)\",\n      \"row_ach_wt\": \"SUM(long_bins.ach_wt_kg)\",\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg) = 0 THEN NULL ELSE (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / SUM(long_bins.set_wt_kg) END\",\n      \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n      \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n    },\n    \"unresolved\": [],\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": null,\n      \"child_key\": null\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\",\n        \"from_date\": \"recipes.start_time\",\n        \"to_date\": \"recipes.start_time\"\n      },\n      \"optional\": {}\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce long-form rows prior to aggregation\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into long form, trim material names, drop blanks before grouping. Apply required filters to recipes first.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg) = 0 THEN NULL ELSE (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / SUM(long_bins.set_wt_kg) END\"\n    },\n    \"totals_math\": {\n      \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n      \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n    },\n    \"formatters\": {\n      \"row_set_wt\": \"number(2)\",\n      \"row_ach_wt\": \"number(2)\",\n      \"row_error_kg\": \"number(2)\",\n      \"row_error_pct\": \"decimal(4)\",\n      \"total_set_wt\": \"number(2)\",\n      \"total_ach_wt\": \"number(2)\",\n      \"total_error_kg\": \"number(2)\",\n      \"total_error_pct\": \"decimal(4)\",\n      \"print_date\": \"date(DD/MM/YYYY)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"row_material_name ASC\",\n        \"row_set_wt DESC\",\n        \"row_ach_wt DESC\"\n      ]\n    },\n    \"notes\": \"Use only recipes.* columns in the catalog. Error % is a fraction (0\u20131), not multiplied by 100. Apply required filters (recipe_code equality to recipes.recipe_name and inclusive date range on recipes.start_time) to header, rows, and totals.\"\n  },\n  \"validation\": {\n    \"unknown_tokens\": [],\n    \"unknown_columns\": [],\n    \"token_coverage\": {\n      \"scalars_mapped_pct\": 100,\n      \"row_tokens_mapped_pct\": 100,\n      \"totals_mapped_pct\": 100\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761062138,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 12313,
    "prompt_tokens": 10560,
    "total_tokens": 22873,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 7296,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-21T16:03:36Z - generator_assets_v1

```json
{
  "id": "chatcmpl-CT95G8wgt6bMvxnuvaidzbfDKHr3O",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"plant_name\",\n        \"location\",\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\",\n        \"print_date\",\n        \"report_title\",\n        \"company_name\",\n        \"page_number\"\n      ],\n      \"row_tokens\": [\n        \"row_sl_no\",\n        \"row_material_name\",\n        \"row_set_wt\",\n        \"row_ach_wt\",\n        \"row_error_kg\",\n        \"row_error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt\",\n        \"total_ach_wt\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"print_date\": \"PARAM:print_date\",\n      \"report_title\": \"'Consumption report'\",\n      \"company_name\": \"'Indian Industrial Machines Pvt. Ltd.'\",\n      \"page_number\": \"PARAM:page_number\",\n      \"row_sl_no\": \"ROW_NUMBER() OVER (ORDER BY UPPER(TRIM(long_bins.material_name)) ASC)\",\n      \"row_material_name\": \"UPPER(TRIM(long_bins.material_name))\",\n      \"row_set_wt\": \"SUM(long_bins.set_wt_kg)\",\n      \"row_ach_wt\": \"SUM(long_bins.ach_wt_kg)\",\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg) = 0 THEN NULL ELSE (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / SUM(long_bins.set_wt_kg) END\",\n      \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n      \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n    },\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": \"recipes\",\n      \"child_key\": \"id\"\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\",\n        \"from_date\": \"recipes.start_time\",\n        \"to_date\": \"recipes.start_time\"\n      },\n      \"optional\": {}\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce long-form rows prior to aggregation\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into long form, trim material names, drop blanks before grouping. Apply required filters to recipes first.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"CASE WHEN SUM(long_bins.set_wt_kg) = 0 THEN NULL ELSE (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / SUM(long_bins.set_wt_kg) END\"\n    },\n    \"totals_math\": {\n      \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n      \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n    },\n    \"formatters\": {\n      \"row_set_wt\": \"number(2)\",\n      \"row_ach_wt\": \"number(2)\",\n      \"row_error_kg\": \"number(2)\",\n      \"row_error_pct\": \"decimal(4)\",\n      \"total_set_wt\": \"number(2)\",\n      \"total_ach_wt\": \"number(2)\",\n      \"total_error_kg\": \"number(2)\",\n      \"total_error_pct\": \"decimal(4)\",\n      \"print_date\": \"date(DD/MM/YYYY)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"row_material_name ASC\",\n        \"row_set_wt DESC\",\n        \"row_ach_wt DESC\"\n      ]\n    },\n    \"header_tokens\": [\n      \"plant_name\",\n      \"location\",\n      \"from_date\",\n      \"to_date\",\n      \"recipe_code\",\n      \"print_date\",\n      \"report_title\",\n      \"company_name\",\n      \"page_number\"\n    ],\n    \"row_tokens\": [\n      \"row_sl_no\",\n      \"row_material_name\",\n      \"row_set_wt\",\n      \"row_ach_wt\",\n      \"row_error_kg\",\n      \"row_error_pct\"\n    ],\n    \"totals\": {\n      \"total_set_wt\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_ach_wt\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n      \"total_error_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n      \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) = 0 THEN NULL ELSE (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) END\"\n    },\n    \"row_order\": [\n      \"row_material_name ASC\",\n      \"row_set_wt DESC\",\n      \"row_ach_wt DESC\"\n    ]\n  },\n  \"sql_pack\": {\n    \"dialect\": \"sqlite\",\n    \"script\": \"-- HEADER SELECT --\\nSELECT plant_name, location, from_date, to_date, recipe_code, print_date, report_title, company_name, page_number\\nFROM recipes\\nWHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n-- ROWS SELECT --\\nSELECT row_sl_no, row_material_name, row_set_wt, row_ach_wt, row_error_kg, row_error_pct\\nFROM (\\n  WITH long_bins AS (\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n    UNION ALL\\n    SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts,\\n    recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg\\n    FROM recipes\\n    WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\\n  )\\n  SELECT row_sl_no, row_material_name, SUM(set_wt_kg) AS row_set_wt, SUM(ach_wt_kg) AS row_ach_wt, row_error_kg, row_error_pct\\n  FROM long_bins\\n  WHERE TRIM(material_name) IS NOT NULL AND TRIM(material_name) <> ''\\n  GROUP BY UPPER(TRIM(material_name))\\n  ORDER BY row_material_name ASC, row_set_wt DESC, row_ach_wt DESC\\n-- TOTALS SELECT --\\nSELECT total_set_wt, total_ach_wt, total_error_kg, total_error_pct\\nFROM recipes\\nWHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\",\n    \"entrypoints\": {\n      \"header\": \"SELECT plant_name, location, from_date, to_date, recipe_code, print_date, report_title, company_name, page_number FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\",\n      \"rows\": \"WITH long_bins AS (SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1 UNION ALL SELECT recipes.id AS recipe_id, recipes.recipe_name, recipes.start_time AS ts, recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1) SELECT row_sl_no, row_material_name, SUM(set_wt_kg) AS row_set_wt, SUM(ach_wt_kg) AS row_ach_wt, row_error_kg, row_error_pct FROM long_bins WHERE TRIM(material_name) IS NOT NULL AND TRIM(material_name) <> '' GROUP BY UPPER(TRIM(material_name)) ORDER BY row_material_name ASC, row_set_wt DESC, row_ach_wt DESC\",\n      \"totals\": \"SELECT total_set_wt, total_ach_wt, total_error_kg, total_error_pct FROM recipes WHERE recipes.recipe_name = :recipe_code AND recipes.start_time >= :from_date AND recipes.start_time < :to_date + 1\"\n    },\n    \"params\": {\n      \"required\": [\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\"\n      ],\n      \"optional\": [\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"page_number\"\n      ]\n    }\n  },\n  \"dialect\": \"sqlite\",\n  \"invalid\": false\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761062466,
  "model": "gpt-4o-mini-2024-07-18",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559",
  "usage": {
    "completion_tokens": 5496,
    "prompt_tokens": 9457,
    "total_tokens": 14953,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 0,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:08:19Z - template_initial_html

```json
{
  "id": "chatcmpl-CTaL7XeVvAOD1OYuD7fBORB5z7ANi",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>{report_title}</title>\n<style>\n  @page { size: A4; margin: 14mm; }\n  :root{\n    --row-gap: 2.5mm;\n    --col-slno-w: 16mm;\n    --col-material-w: 92mm;\n    --col-set-w: 30mm;\n    --col-ach-w: 30mm;\n    --col-errkg-w: 26mm;\n    --col-errpct-w: 22mm;\n  }\n  html,body{font-family:\"Times New Roman\", serif; color:#000; font-size:12pt; line-height:1.25;}\n  h1{font-size:20pt; margin: 0; font-weight: bold; text-align:center;}\n  small{font-size:10pt;}\n\n  /* Header box */\n  #report-header{\n    border:1px solid #000;\n    padding:6mm 7mm;\n    margin-bottom:6mm;\n  }\n  #header-row{\n    display:grid;\n    grid-template-columns: 1fr 1fr;\n    column-gap: 10mm;\n    align-items:start;\n  }\n  #header-left table,\n  #header-right table{\n    width:100%;\n    border-collapse:collapse;\n  }\n  #header-left td,\n  #header-right td{\n    padding: 1mm 0;\n    vertical-align:top;\n  }\n  #header-left td.label,\n  #header-right td.label{\n    width:32mm;\n    white-space:nowrap;\n  }\n  #title-wrap{\n    margin-top: 2mm;\n    margin-bottom: 2mm;\n  }\n  #title-rule{\n    border-top:1px solid #000;\n    margin-top: 3mm;\n  }\n\n  /* Main data table */\n  #data-table{\n    width:100%;\n    border-collapse:collapse;\n    table-layout:fixed;\n    font-variant-numeric: tabular-nums;\n  }\n  #data-table th, #data-table td{\n    border:1px solid #000;\n    padding:3.5mm 3mm;\n    vertical-align:middle;\n  }\n  #data-table thead th{\n    text-align:center;\n    font-weight:bold;\n    white-space:nowrap;\n  }\n  /* Column widths */\n  #data-table col.slno{width:var(--col-slno-w);}\n  #data-table col.material{width:var(--col-material-w);}\n  #data-table col.set{width:var(--col-set-w);}\n  #data-table col.ach{width:var(--col-ach-w);}\n  #data-table col.errkg{width:var(--col-errkg-w);}\n  #data-table col.errpct{width:var(--col-errpct-w);}\n\n  /* Alignments */\n  .ta-right{text-align:right;}\n  .ta-center{text-align:center;}\n\n  /* Totals */\n  #report-totals td{\n    font-weight:bold;\n  }\n\n  /* Footer */\n  footer{\n    position:fixed;\n    bottom:10mm;\n    left:14mm;\n    right:14mm;\n    display:flex;\n    justify-content:space-between;\n    font-size:10pt;\n  }\n</style>\n</head>\n<body>\n  <section id=\"report-header\">\n    <div id=\"header-row\">\n      <div id=\"header-left\">\n        <table>\n          <tr>\n            <td class=\"label\">Plant name</td>\n            <td>: {plant_name}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Location</td>\n            <td>: {location}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Print Date</td>\n            <td>: {print_date}</td>\n          </tr>\n        </table>\n      </div>\n      <div id=\"header-right\">\n        <table>\n          <tr>\n            <td class=\"label\">From Date</td>\n            <td>: {from_date}&nbsp;&nbsp;&nbsp;&nbsp;To {to_date}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Recipe code</td>\n            <td>: {recipe_code}</td>\n          </tr>\n        </table>\n      </div>\n    </div>\n    <div id=\"title-wrap\">\n      <h1>{report_title}</h1>\n    </div>\n    <div id=\"title-rule\"></div>\n  </section>\n\n  <table id=\"data-table\">\n    <colgroup>\n      <col class=\"slno\">\n      <col class=\"material\">\n      <col class=\"set\">\n      <col class=\"ach\">\n      <col class=\"errkg\">\n      <col class=\"errpct\">\n    </colgroup>\n    <thead>\n      <tr>\n        <th data-label=\"sl_no\">Sl. No.</th>\n        <th data-label=\"material_name\">Material name</th>\n        <th data-label=\"set_wt_kg\">Set. wt(Kg)</th>\n        <th data-label=\"ach_wt_kg\">Ach. wt(Kg)</th>\n        <th data-label=\"error_kg\">Error(Kg)</th>\n        <th data-label=\"error_pct\">Error %</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td class=\"ta-center\">{sl_no}</td>\n        <td>{material_name}</td>\n        <td class=\"ta-right\">{set_wt_kg}</td>\n        <td class=\"ta-right\">{ach_wt_kg}</td>\n        <td class=\"ta-right\">{error_kg}</td>\n        <td class=\"ta-right\">{error_pct}</td>\n      </tr>\n    </tbody>\n    <tfoot id=\"report-totals\">\n      <tr>\n        <td colspan=\"2\" class=\"ta-center\">Total</td>\n        <td class=\"ta-right\">{total_set_wt_kg}</td>\n        <td class=\"ta-right\">{total_ach_wt_kg}</td>\n        <td class=\"ta-right\">{total_error_kg}</td>\n        <td class=\"ta-right\">{total_error_pct}</td>\n      </tr>\n    </tfoot>\n  </table>\n\n  <footer>\n    <div>Indian Industrial Machines Pvt. Ltd.</div>\n    <div>Page {page_no} of {page_total}</div>\n  </footer>\n</body>\n</html>\n<!--END_HTML-->\n\n<!--BEGIN_SCHEMA_JSON-->\n{\n  \"scalars\": [\n    \"report_title\",\n    \"plant_name\",\n    \"location\",\n    \"print_date\",\n    \"from_date\",\n    \"to_date\",\n    \"recipe_code\",\n    \"page_no\",\n    \"page_total\"\n  ],\n  \"row_tokens\": [\n    \"sl_no\",\n    \"material_name\",\n    \"set_wt_kg\",\n    \"ach_wt_kg\",\n    \"error_kg\",\n    \"error_pct\"\n  ],\n  \"totals\": [\n    \"total_set_wt_kg\",\n    \"total_ach_wt_kg\",\n    \"total_error_kg\",\n    \"total_error_pct\"\n  ],\n  \"notes\": \"\"\n}\n<!--END_SCHEMA_JSON-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167237,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4052,
    "prompt_tokens": 1544,
    "total_tokens": 5596,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 2496,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:09:55Z - template_fix_html_call2

```json
{
  "id": "chatcmpl-CTaMpYShXtlyMed1Nx3o3WrbprSIT",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "<!--BEGIN_HTML-->\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\" />\n<title>{report_title}</title>\n<style>\n  @page { size: A4; margin: 14mm; }\n  :root{\n    --row-gap: 2.5mm;\n\n    /* Column widths must sum to page content width (~182mm) */\n    --col-slno-w: 12mm;\n    --col-material-w: 86mm;\n    --col-set-w: 28mm;\n    --col-ach-w: 28mm;\n    --col-errkg-w: 16mm;\n    --col-errpct-w: 12mm;\n  }\n\n  html,body{\n    font-family:\"Times New Roman\", serif;\n    color:#000;\n    font-size:11pt;\n    line-height:1.25;\n  }\n  h1{\n    font-size:16.5pt;\n    margin:0;\n    font-weight:bold;\n    text-align:center;\n    line-height:1.15;\n  }\n  small{font-size:9.5pt;}\n\n  /* Header box */\n  #report-header{\n    border:1px solid #000;\n    padding:4.8mm 6mm 4.2mm;\n    margin-bottom:2.8mm;\n  }\n  #header-row{\n    display:grid;\n    grid-template-columns: 1fr 1fr;\n    column-gap: 18mm;\n    align-items:start;\n  }\n  #header-left table,\n  #header-right table{\n    width:100%;\n    border-collapse:collapse;\n    table-layout:fixed;\n  }\n  #header-left td,\n  #header-right td{\n    padding:0.7mm 0;\n    vertical-align:top;\n  }\n  #header-left td.label,\n  #header-right td.label{\n    width:30mm;\n    white-space:nowrap;\n  }\n  #title-wrap{\n    margin-top:2mm;\n    margin-bottom:1.4mm;\n  }\n  #title-rule{\n    border-top:1px solid #000;\n    margin-top:2mm;\n  }\n\n  /* Main data table */\n  #data-table{\n    width:100%;\n    border-collapse:collapse;\n    table-layout:fixed;\n    font-variant-numeric: tabular-nums;\n  }\n  #data-table th, #data-table td{\n    border:1px solid #000;\n    vertical-align:middle;\n  }\n  #data-table thead th{\n    text-align:center;\n    font-weight:bold;\n    white-space:nowrap;\n    padding:2mm 2mm 2mm 2mm;\n    font-size:11pt;\n  }\n  #data-table tbody td{\n    padding:1.8mm 2mm;\n    font-size:11pt;\n  }\n  #data-table tfoot td{\n    padding:2mm 2mm;\n  }\n\n  /* Column widths */\n  #data-table col.slno{width:var(--col-slno-w);}\n  #data-table col.material{width:var(--col-material-w);}\n  #data-table col.set{width:var(--col-set-w);}\n  #data-table col.ach{width:var(--col-ach-w);}\n  #data-table col.errkg{width:var(--col-errkg-w);}\n  #data-table col.errpct{width:var(--col-errpct-w);}\n\n  /* Alignments */\n  .ta-right{text-align:right;}\n  .ta-center{text-align:center;}\n\n  /* Totals */\n  #report-totals td{\n    font-weight:bold;\n  }\n\n  /* Footer */\n  footer{\n    position:fixed;\n    bottom:10.5mm;\n    left:14mm;\n    right:14mm;\n    display:flex;\n    justify-content:space-between;\n    font-size:9.5pt;\n  }\n\n  /* Prevent table breaks inside one logical block (future multiple rows) */\n  tbody, tfoot{break-inside:avoid; page-break-inside:avoid;}\n</style>\n</head>\n<body>\n  <section id=\"report-header\">\n    <div id=\"header-row\">\n      <div id=\"header-left\">\n        <table>\n          <tr>\n            <td class=\"label\">Plant name</td>\n            <td>: {plant_name}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Location</td>\n            <td>: {location}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Print Date</td>\n            <td>: {print_date}</td>\n          </tr>\n        </table>\n      </div>\n      <div id=\"header-right\">\n        <table>\n          <tr>\n            <td class=\"label\">From Date</td>\n            <td>: {from_date}&nbsp;&nbsp;&nbsp;&nbsp;To {to_date}</td>\n          </tr>\n          <tr>\n            <td class=\"label\">Recipe code</td>\n            <td>: {recipe_code}</td>\n          </tr>\n        </table>\n      </div>\n    </div>\n    <div id=\"title-wrap\">\n      <h1>{report_title}</h1>\n    </div>\n    <div id=\"title-rule\"></div>\n  </section>\n\n  <table id=\"data-table\">\n    <colgroup>\n      <col class=\"slno\" />\n      <col class=\"material\" />\n      <col class=\"set\" />\n      <col class=\"ach\" />\n      <col class=\"errkg\" />\n      <col class=\"errpct\" />\n    </colgroup>\n    <thead>\n      <tr>\n        <th data-label=\"sl_no\">Sl. No.</th>\n        <th data-label=\"material_name\">Material name</th>\n        <th data-label=\"set_wt_kg\">Set. wt(Kg)</th>\n        <th data-label=\"ach_wt_kg\">Ach. wt(Kg)</th>\n        <th data-label=\"error_kg\">Error(Kg)</th>\n        <th data-label=\"error_pct\">Error %</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td class=\"ta-center\">{sl_no}</td>\n        <td>{material_name}</td>\n        <td class=\"ta-right\">{set_wt_kg}</td>\n        <td class=\"ta-right\">{ach_wt_kg}</td>\n        <td class=\"ta-right\">{error_kg}</td>\n        <td class=\"ta-right\">{error_pct}</td>\n      </tr>\n    </tbody>\n    <tfoot id=\"report-totals\">\n      <tr>\n        <td colspan=\"2\" class=\"ta-center\">Total</td>\n        <td class=\"ta-right\">{total_set_wt_kg}</td>\n        <td class=\"ta-right\">{total_ach_wt_kg}</td>\n        <td class=\"ta-right\">{total_error_kg}</td>\n        <td class=\"ta-right\">{total_error_pct}</td>\n      </tr>\n    </tfoot>\n  </table>\n\n  <footer>\n    <div>Indian Industrial Machines Pvt. Ltd.</div>\n    <div>Page {page_no} of {page_total}</div>\n  </footer>\n</body>\n</html>\n<!--END_HTML-->",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167343,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 3473,
    "prompt_tokens": 3697,
    "total_tokens": 7170,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 1920,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:12:11Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CTaNz2FBAYEo09OO28iYixO5zVtn3",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"UNRESOLVED\",\n    \"set_wt_kg\": \"UNRESOLVED\",\n    \"ach_wt_kg\": \"UNRESOLVED\",\n    \"error_kg\": \"UNRESOLVED\",\n    \"error_pct\": \"UNRESOLVED\",\n    \"total_set_wt_kg\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"SUM((recipes.bin1_act - recipes.bin1_sp) + (recipes.bin2_act - recipes.bin2_sp) + (recipes.bin3_act - recipes.bin3_sp) + (recipes.bin4_act - recipes.bin4_sp) + (recipes.bin5_act - recipes.bin5_sp) + (recipes.bin6_act - recipes.bin6_sp) + (recipes.bin7_act - recipes.bin7_sp) + (recipes.bin8_act - recipes.bin8_sp) + (recipes.bin9_act - recipes.bin9_sp) + (recipes.bin10_act - recipes.bin10_sp) + (recipes.bin11_act - recipes.bin11_sp) + (recipes.bin12_act - recipes.bin12_sp))\",\n    \"total_error_pct\": \"100 * SUM((recipes.bin1_act - recipes.bin1_sp) + (recipes.bin2_act - recipes.bin2_sp) + (recipes.bin3_act - recipes.bin3_sp) + (recipes.bin4_act - recipes.bin4_sp) + (recipes.bin5_act - recipes.bin5_sp) + (recipes.bin6_act - recipes.bin6_sp) + (recipes.bin7_act - recipes.bin7_sp) + (recipes.bin8_act - recipes.bin8_sp) + (recipes.bin9_act - recipes.bin9_sp) + (recipes.bin10_act - recipes.bin10_sp) + (recipes.bin11_act - recipes.bin11_sp) + (recipes.bin12_act - recipes.bin12_sp)) / NULLIF(SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp), 0)\",\n    \"page_no\": \"To Be Selected...\",\n    \"page_total\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"report_title\": \"Consumption report\",\n    \"plant_name\": \"SSR AQUA\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt_kg\": \"11,800.00\",\n    \"ach_wt_kg\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt_kg\": \"80,000.00\",\n    \"total_ach_wt_kg\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"page_no\": \"1\",\n    \"page_total\": \"1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt_kg\",\n      \"ach_wt_kg\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"hints\": {\n      \"total_set_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167415,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 6906,
    "prompt_tokens": 3698,
    "total_tokens": 10604,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5696,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 3584
    }
  }
}
```

## 2025-10-22T21:12:18Z - llm_call_3_v7

```json
{
  "id": "chatcmpl-CTaNzY8DRCum21NnLcdBy7MXblW9d",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"mapping\": {\n    \"plant_name\": \"params.plant_name\",\n    \"location\": \"params.location\",\n    \"print_date\": \"params.print_date\",\n    \"from_date\": \"To Be Selected...\",\n    \"to_date\": \"To Be Selected...\",\n    \"recipe_code\": \"params.recipe_code\",\n    \"sl_no\": \"UNRESOLVED\",\n    \"material_name\": \"recipes.recipe_name\",\n    \"set_wt_kg\": \"recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp\",\n    \"ach_wt_kg\": \"recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act\",\n    \"error_kg\": \"(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"error_pct\": \"CASE WHEN (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) <> 0 THEN ((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) ELSE NULL END\",\n    \"total_set_wt_kg\": \"SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)\",\n    \"total_ach_wt_kg\": \"SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act)\",\n    \"total_error_kg\": \"SUM((recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - (recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp))\",\n    \"total_error_pct\": \"CASE WHEN SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) <> 0 THEN (SUM(recipes.bin1_act + recipes.bin2_act + recipes.bin3_act + recipes.bin4_act + recipes.bin5_act + recipes.bin6_act + recipes.bin7_act + recipes.bin8_act + recipes.bin9_act + recipes.bin10_act + recipes.bin11_act + recipes.bin12_act) - SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp)) / SUM(recipes.bin1_sp + recipes.bin2_sp + recipes.bin3_sp + recipes.bin4_sp + recipes.bin5_sp + recipes.bin6_sp + recipes.bin7_sp + recipes.bin8_sp + recipes.bin9_sp + recipes.bin10_sp + recipes.bin11_sp + recipes.bin12_sp) ELSE NULL END\",\n    \"page_no\": \"To Be Selected...\",\n    \"page_total\": \"To Be Selected...\"\n  },\n  \"token_samples\": {\n    \"report_title\": \"Consumption report\",\n    \"plant_name\": \"SSR AQUA\",\n    \"location\": \"Gudivada\",\n    \"print_date\": \"25/03/2024\",\n    \"from_date\": \"24/03/2024\",\n    \"to_date\": \"24/03/2024\",\n    \"recipe_code\": \"GANGADHAR-2024\",\n    \"sl_no\": \"1\",\n    \"material_name\": \"CM 100 + DORB 100 KRR\",\n    \"set_wt_kg\": \"11,800.00\",\n    \"ach_wt_kg\": \"11,803.20\",\n    \"error_kg\": \"3.20\",\n    \"error_pct\": \"0.0271\",\n    \"total_set_wt_kg\": \"80,000.00\",\n    \"total_ach_wt_kg\": \"80,016.00\",\n    \"total_error_kg\": \"16.00\",\n    \"total_error_pct\": \"0.0200\",\n    \"page_no\": \"1\",\n    \"page_total\": \"1\"\n  },\n  \"meta\": {\n    \"unresolved\": [\n      \"sl_no\"\n    ],\n    \"hints\": {\n      \"set_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"ach_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      },\n      \"total_set_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_sp\",\n          \"recipes.bin2_sp\",\n          \"recipes.bin3_sp\",\n          \"recipes.bin4_sp\",\n          \"recipes.bin5_sp\",\n          \"recipes.bin6_sp\",\n          \"recipes.bin7_sp\",\n          \"recipes.bin8_sp\",\n          \"recipes.bin9_sp\",\n          \"recipes.bin10_sp\",\n          \"recipes.bin11_sp\",\n          \"recipes.bin12_sp\"\n        ]\n      },\n      \"total_ach_wt_kg\": {\n        \"op\": \"SUM\",\n        \"over\": [\n          \"recipes.bin1_act\",\n          \"recipes.bin2_act\",\n          \"recipes.bin3_act\",\n          \"recipes.bin4_act\",\n          \"recipes.bin5_act\",\n          \"recipes.bin6_act\",\n          \"recipes.bin7_act\",\n          \"recipes.bin8_act\",\n          \"recipes.bin9_act\",\n          \"recipes.bin10_act\",\n          \"recipes.bin11_act\",\n          \"recipes.bin12_act\"\n        ]\n      }\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167415,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 7339,
    "prompt_tokens": 3698,
    "total_tokens": 11037,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 5440,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:19:04Z - llm_call_3_5

```json
{
  "id": "chatcmpl-CTaVaY6jQvrzoOHA5fUCDhaDXCPsm",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"final_template_html\": \"\\n<html>\\n<head>\\n<meta charset=\\\"utf-8\\\" />\\n<title>Consumption report</title>\\n<style>\\n  @page { size: A4; margin: 14mm; }\\n  :root{\\n    --row-gap: 2.5mm;\\n\\n    /* Column widths must sum to page content width (~182mm) */\\n    --col-slno-w: 12mm;\\n    --col-material-w: 78mm;\\n    --col-set-w: 30mm;\\n    --col-ach-w: 30mm;\\n    --col-errkg-w: 18mm;\\n    --col-errpct-w: 14mm;\\n  }\\n\\n  html,body{\\n    font-family:\\\"Times New Roman\\\", serif;\\n    color:#000;\\n    font-size:11pt;\\n    line-height:1.25;\\n  }\\n  h1{\\n    font-size:16.5pt;\\n    margin:0;\\n    font-weight:bold;\\n    text-align:center;\\n    line-height:1.15;\\n  }\\n  small{font-size:9.5pt;}\\n\\n  /* Header box */\\n  #report-header{\\n    border:1px solid #000;\\n    padding:4.8mm 6mm 4.2mm;\\n    margin-bottom:2.8mm;\\n  }\\n  #header-row{\\n    display:grid;\\n    grid-template-columns: 1fr 1fr;\\n    column-gap: 18mm;\\n    align-items:start;\\n  }\\n  #header-left table,\\n  #header-right table{\\n    width:100%;\\n    border-collapse:collapse;\\n    table-layout:fixed;\\n  }\\n  #header-left td,\\n  #header-right td{\\n    padding:0.7mm 0;\\n    vertical-align:top;\\n  }\\n  #header-left td.label,\\n  #header-right td.label{\\n    width:30mm;\\n    white-space:nowrap;\\n  }\\n  #title-wrap{\\n    margin-top:2mm;\\n    margin-bottom:1.4mm;\\n  }\\n\\n  /* Main data table */\\n  #data-table{\\n    width:100%;\\n    border-collapse:collapse;\\n    table-layout:fixed;\\n    font-variant-numeric: tabular-nums;\\n  }\\n  #data-table th, #data-table td{\\n    border:1px solid #000;\\n    vertical-align:middle;\\n  }\\n  #data-table thead th{\\n    text-align:center;\\n    font-weight:bold;\\n    white-space:nowrap;\\n    padding:2mm 2mm 2mm 2mm;\\n    font-size:11pt;\\n  }\\n  #data-table tbody td{\\n    padding:1.8mm 2mm;\\n    font-size:11pt;\\n  }\\n  #data-table tfoot td{\\n    padding:2mm 2mm;\\n  }\\n\\n  /* Column widths */\\n  #data-table col.slno{width:var(--col-slno-w);}\\n  #data-table col.material{width:var(--col-material-w);}\\n  #data-table col.set{width:var(--col-set-w);}\\n  #data-table col.ach{width:var(--col-ach-w);}\\n  #data-table col.errkg{width:var(--col-errkg-w);}\\n  #data-table col.errpct{width:var(--col-errpct-w);}\\n\\n  /* Alignments */\\n  .ta-right{text-align:right;}\\n  .ta-center{text-align:center;}\\n\\n  /* Totals */\\n  #report-totals td{\\n    font-weight:bold;\\n  }\\n\\n  /* Footer */\\n  footer{\\n    position:fixed;\\n    bottom:10.5mm;\\n    left:14mm;\\n    right:14mm;\\n    display:flex;\\n    justify-content:space-between;\\n    font-size:9.5pt;\\n  }\\n\\n  /* Prevent table breaks inside one logical block (future multiple rows) */\\n  tbody, tfoot{break-inside:avoid; page-break-inside:avoid;}\\n</style>\\n</head>\\n<body>\\n  <section id=\\\"report-header\\\">\\n    <div id=\\\"header-row\\\">\\n      <div id=\\\"header-left\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"label\\\">Plant name</td>\\n            <td>: SSR AQUA</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"label\\\">Location</td>\\n            <td>: Gudivada</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"label\\\">Print Date</td>\\n            <td>: {print_date}</td>\\n          </tr>\\n        </table>\\n      </div>\\n      <div id=\\\"header-right\\\">\\n        <table>\\n          <tr>\\n            <td class=\\\"label\\\">From Date</td>\\n            <td>: {from_date}\u00a0\u00a0\u00a0\u00a0To {to_date}</td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"label\\\">Recipe code</td>\\n            <td>: {recipe_code}</td>\\n          </tr>\\n        </table>\\n      </div>\\n    </div>\\n    <div id=\\\"title-wrap\\\">\\n      <h1>Consumption report</h1>\\n    </div>\\n  </section>\\n\\n  <table id=\\\"data-table\\\">\\n    <colgroup>\\n      <col class=\\\"slno\\\" />\\n      <col class=\\\"material\\\" />\\n      <col class=\\\"set\\\" />\\n      <col class=\\\"ach\\\" />\\n      <col class=\\\"errkg\\\" />\\n      <col class=\\\"errpct\\\" />\\n    </colgroup>\\n    <thead>\\n      <tr>\\n        <th data-label=\\\"sl_no\\\">Sl. No.</th>\\n        <th data-label=\\\"material_name\\\">Material name</th>\\n        <th data-label=\\\"set_wt_kg\\\">Set. wt(Kg)</th>\\n        <th data-label=\\\"ach_wt_kg\\\">Ach. wt(Kg)</th>\\n        <th data-label=\\\"error_kg\\\">Error(Kg)</th>\\n        <th data-label=\\\"error_pct\\\">Error %</th>\\n      </tr>\\n    </thead>\\n    <tbody>\\n      <tr>\\n        <td class=\\\"ta-center\\\">{sl_no}</td>\\n        <td>{material_name}</td>\\n        <td class=\\\"ta-right\\\">{set_wt_kg}</td>\\n        <td class=\\\"ta-right\\\">{ach_wt_kg}</td>\\n        <td class=\\\"ta-right\\\">{error_kg}</td>\\n        <td class=\\\"ta-right\\\">{error_pct}</td>\\n      </tr>\\n    </tbody>\\n    <tfoot id=\\\"report-totals\\\">\\n      <tr>\\n        <td colspan=\\\"2\\\" class=\\\"ta-center\\\">Total</td>\\n        <td class=\\\"ta-right\\\">{total_set_wt_kg}</td>\\n        <td class=\\\"ta-right\\\">{total_ach_wt_kg}</td>\\n        <td class=\\\"ta-right\\\">{total_error_kg}</td>\\n        <td class=\\\"ta-right\\\">{total_error_pct}</td>\\n      </tr>\\n    </tfoot>\\n  </table>\\n\\n  <footer>\\n    <div>Indian Industrial Machines Pvt. Ltd.</div>\\n    <div>Page {page_no} of {page_total}</div>\\n  </footer>\\n</body>\\n</html>\",\n  \"page_summary\": \"Applied user-requested changes: removed the horizontal rule under the title by deleting the #title-rule element; widened narrow table columns via CSS variables so headers fit without overflow. New column widths (sum 182mm): sl_no 12mm, material_name 78mm, set_wt_kg 30mm, ach_wt_kg 30mm, error_kg 18mm, error_pct 14mm. Constants inlined from INPUT_SAMPLE: plant_name = \\\"SSR AQUA\\\" and location = \\\"Gudivada\\\". All other tokens remain dynamic: print_date, from_date, to_date, recipe_code, sl_no, material_name, set_wt_kg, ach_wt_kg, error_kg, error_pct, total_set_wt_kg, total_ach_wt_kg, total_error_kg, total_error_pct, page_no, and page_total. Totals fields are still bound to SQL expressions; date and pagination fields are LATER_SELECTED. No numeric totals or dates were inlined beyond those constants, and there are no computed values resolved at this step.\"\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167886,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 4096,
    "prompt_tokens": 5418,
    "total_tokens": 9514,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 2112,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:23:02Z - contract_build_v2

```json
{
  "id": "chatcmpl-CTaXDbBDQePCFQwTX9hQDyIowr5ia",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"overview_md\": \"Executive Summary\\n- Goal: Build a consumption report by material for a selected recipe code and date range, derived from 12 per-batch bin columns in recipes. We must UNPIVOT the bin content/weights into long form, filter, then aggregate by material name to produce row-level set/ach weights and error metrics, plus overall totals.\\n- Reshaping: UNION ALL across recipes.bin1..bin12 for content (material), set (sp), and achieved (act) weights into a long_bins staging set. Drop blank/NULL material names before grouping.\\n- Grouping: Aggregate by normalized material name (TRIM) to compute per-material sums.\\n- Totals: Compute totals from the rows dataset (not directly from base columns) to guarantee consistency.\\n- Filters: Required key filter on recipe_code (equals recipes.recipe_name) and required date range filter on recipes.start_time between from_date and to_date (inclusive). These apply in header, rows, and totals entrypoints.\\n\\nToken Inventory\\n- Scalars: report_title, plant_name, location, print_date, from_date, to_date, recipe_code, page_no, page_total\\n- Row tokens: sl_no, material_name, set_wt_kg, ach_wt_kg, error_kg, error_pct\\n- Totals: total_set_wt_kg, total_ach_wt_kg, total_error_kg, total_error_pct\\n\\nMapping Table\\n- report_title -> PARAM:report_title\\n- plant_name -> PARAM:plant_name\\n- location -> PARAM:location\\n- print_date -> PARAM:print_date\\n- from_date -> PARAM:from_date\\n- to_date -> PARAM:to_date\\n- recipe_code -> PARAM:recipe_code\\n- page_no -> PARAM:page_no\\n- page_total -> PARAM:page_total\\n- sl_no -> ROW_NUMBER() OVER (ORDER BY rows.material_name ASC)\\n- material_name -> TRIM(long_bins.material_name)\\n- set_wt_kg -> SUM(long_bins.set_wt_kg)\\n- ach_wt_kg -> SUM(long_bins.ach_wt_kg)\\n- error_kg -> SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\\n- error_pct -> (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0)\\n- total_set_wt_kg -> SUM(rows.set_wt_kg)\\n- total_ach_wt_kg -> SUM(rows.ach_wt_kg)\\n- total_error_kg -> SUM(rows.error_kg)\\n- total_error_pct -> SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\\n\\nJoin & Date Rules\\n- Tables: Single source table recipes; no joins required.\\n- Date column: recipes.start_time. Apply DATE(recipes.start_time) BETWEEN :from_date AND :to_date in all entrypoints (header/rows/totals). This is dialect-friendly for sqlite/postgres.\\n- Key filter: recipe_code is required; apply recipes.recipe_name = :recipe_code in all entrypoints.\\n\\nTransformations\\n- Unpivot/Union strategy: Create a long_bins staging set via UNION ALL of 12 SELECTs, one per bin index i in 1..12, projecting material_name from recipes.bin{i}_content, set_wt_kg from recipes.bin{i}_sp, and ach_wt_kg from recipes.bin{i}_act. Apply required filters on recipes before the UNION to minimize data.\\n- Pre-aggregation filtering: Exclude rows where TRIM(material_name) IS NULL or TRIM(material_name) = ''. Optionally exclude rows where COALESCE(set_wt_kg,0)=0 AND COALESCE(ach_wt_kg,0)=0.\\n- Aggregation: Group by TRIM(material_name); compute set_wt_kg, ach_wt_kg via SUM; compute error_kg and error_pct using identical SQL expressions shown above.\\n- Row numbering: sl_no computed as ROW_NUMBER() OVER (ORDER BY rows.material_name ASC) after aggregation to ensure stable numbering aligned with display order.\\n- Totals: Derived from rows dataset sums to maintain consistency across entrypoints; total_error_pct uses the weighted logic SUM(error_kg)/NULLIF(SUM(set_wt_kg),0).\\n\\nParameters\\n- Required: from_date (date), to_date (date), recipe_code (string). These drive mandatory filters; equality on recipe_code and DATE-range predicate must be applied in header/rows/totals queries.\\n- Optional/pass-through: report_title (string), plant_name (string), location (string), print_date (date), page_no (integer), page_total (integer). These do not affect SQL filtering; they are for display.\\n- Examples: from_date=2024-03-24, to_date=2024-03-24, recipe_code='GANGADHAR-2024'.\\n\\nChecklist for Step 5\\n- Datasets\\n  - header columns (in order): report_title, plant_name, location, print_date, from_date, to_date, recipe_code, page_no, page_total\\n  - rows columns (in order): sl_no, material_name, set_wt_kg, ach_wt_kg, error_kg, error_pct\\n  - totals columns (in order): total_set_wt_kg, total_ach_wt_kg, total_error_kg, total_error_pct\\n- Apply filters before UNPIVOT: recipes.recipe_name = :recipe_code and DATE(recipes.start_time) BETWEEN :from_date AND :to_date.\\n- Exclude blank materials: NULL/empty TRIM(material_name) rows removed prior to grouping.\\n- Group by TRIM(long_bins.material_name).\\n- Ordering: ORDER BY material_name ASC; sl_no must use the same ORDER BY.\\n- NULLIF guard: Use NULLIF(SUM(set_wt_kg),0) in percent calculations to avoid divide-by-zero.\\n- Totals computed from rows dataset using identical expressions.\\n- Only reference allowed catalog columns from recipes.* when touching base tables.\\n\",\n  \"step5_requirements\": {\n    \"datasets\": {\n      \"header\": {\n        \"description\": \"One-row header dataset with pass-through display fields and selected parameter values.\",\n        \"columns\": [\n          \"report_title\",\n          \"plant_name\",\n          \"location\",\n          \"print_date\",\n          \"from_date\",\n          \"to_date\",\n          \"recipe_code\",\n          \"page_no\",\n          \"page_total\"\n        ]\n      },\n      \"rows\": {\n        \"description\": \"Detail rows aggregated by material name from unpivoted bin columns across matching recipes.\",\n        \"columns\": [\n          \"sl_no\",\n          \"material_name\",\n          \"set_wt_kg\",\n          \"ach_wt_kg\",\n          \"error_kg\",\n          \"error_pct\"\n        ],\n        \"grouping\": [\n          \"Group by normalized material name: TRIM(long_bins.material_name)\",\n          \"Drop records where TRIM(long_bins.material_name) IS NULL or = '' before grouping.\",\n          \"Optional pre-agg drop: COALESCE(long_bins.set_wt_kg,0) + COALESCE(long_bins.ach_wt_kg,0) <> 0 to avoid empty lines.\"\n        ],\n        \"ordering\": [\n          \"ORDER BY material_name ASC\",\n          \"sl_no computed as ROW_NUMBER() OVER (ORDER BY material_name ASC) to match this order\"\n        ]\n      },\n      \"totals\": {\n        \"description\": \"Totals aggregated from the rows dataset to ensure consistency.\",\n        \"columns\": [\n          \"total_set_wt_kg\",\n          \"total_ach_wt_kg\",\n          \"total_error_kg\",\n          \"total_error_pct\"\n        ]\n      }\n    },\n    \"semantics\": \"Required filters: recipe_code (equality on recipes.recipe_name) and date range (DATE(recipes.start_time) BETWEEN :from_date AND :to_date) must be applied in header, rows, and totals entrypoints. Optional/pass-through parameters (report_title, plant_name, location, print_date, page_no, page_total) are not used for filtering. Only apply optional filters if non-empty, but note there are no optional table filters in this report.\",\n    \"parameters\": {\n      \"required\": [\n        {\n          \"name\": \"from_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"to_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"recipe_code\",\n          \"type\": \"string\"\n        }\n      ],\n      \"optional\": [\n        {\n          \"name\": \"report_title\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"plant_name\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"location\",\n          \"type\": \"string\"\n        },\n        {\n          \"name\": \"print_date\",\n          \"type\": \"date\"\n        },\n        {\n          \"name\": \"page_no\",\n          \"type\": \"integer\"\n        },\n        {\n          \"name\": \"page_total\",\n          \"type\": \"integer\"\n        }\n      ]\n    },\n    \"transformations\": [\n      \"Build long_bins via UNION ALL of 12 SELECTs: for i in 1..12 select recipes.bin{i}_content AS material_name, recipes.bin{i}_sp AS set_wt_kg, recipes.bin{i}_act AS ach_wt_kg from recipes filtered by recipe_code and date range.\",\n      \"Pre-aggregation filters: remove rows where TRIM(material_name) IS NULL or ''. Optionally remove rows where both set_wt_kg and ach_wt_kg are zero.\",\n      \"Aggregate rows by TRIM(material_name) to compute set_wt_kg = SUM(long_bins.set_wt_kg), ach_wt_kg = SUM(long_bins.ach_wt_kg).\",\n      \"Compute error_kg = SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg).\",\n      \"Compute error_pct = (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0).\",\n      \"Compute sl_no as ROW_NUMBER() OVER (ORDER BY material_name ASC) in the final projection after aggregation.\",\n      \"Totals math mirrors rows aggregation: total_set_wt_kg = SUM(rows.set_wt_kg), total_ach_wt_kg = SUM(rows.ach_wt_kg), total_error_kg = SUM(rows.error_kg), total_error_pct = SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0).\"\n    ]\n  },\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"report_title\",\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\",\n        \"page_no\",\n        \"page_total\"\n      ],\n      \"row_tokens\": [\n        \"sl_no\",\n        \"material_name\",\n        \"set_wt_kg\",\n        \"ach_wt_kg\",\n        \"error_kg\",\n        \"error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt_kg\",\n        \"total_ach_wt_kg\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"report_title\": \"PARAM:report_title\",\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"print_date\": \"PARAM:print_date\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"page_no\": \"PARAM:page_no\",\n      \"page_total\": \"PARAM:page_total\",\n      \"sl_no\": \"ROW_NUMBER() OVER (ORDER BY rows.material_name ASC)\",\n      \"material_name\": \"TRIM(long_bins.material_name)\",\n      \"set_wt_kg\": \"SUM(long_bins.set_wt_kg)\",\n      \"ach_wt_kg\": \"SUM(long_bins.ach_wt_kg)\",\n      \"error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"error_pct\": \"(SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0)\",\n      \"total_set_wt_kg\": \"SUM(rows.set_wt_kg)\",\n      \"total_ach_wt_kg\": \"SUM(rows.ach_wt_kg)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\"\n    },\n    \"unresolved\": [],\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": null,\n      \"child_key\": null\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\",\n        \"date_range\": \"DATE(recipes.start_time) BETWEEN :from_date AND :to_date\"\n      },\n      \"optional\": {}\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce rows dataset from per-bin columns\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into a long form, apply filters first, trim material names, and drop blanks before grouping.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"(SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0)\"\n    },\n    \"totals_math\": {\n      \"total_set_wt_kg\": \"SUM(rows.set_wt_kg)\",\n      \"total_ach_wt_kg\": \"SUM(rows.ach_wt_kg)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\"\n    },\n    \"formatters\": {\n      \"error_pct\": \"percent(2)\",\n      \"total_error_pct\": \"percent(2)\",\n      \"print_date\": \"date(YYYY-MM-DD)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"material_name ASC\"\n      ]\n    },\n    \"notes\": \"All base columns must come from the recipes table per the provided catalog. Apply required filters (recipe_code equality and DATE(recipes.start_time) BETWEEN :from_date AND :to_date) before UNPIVOT. Grouping is by TRIM(material_name). sl_no uses the same ORDER BY as the final rows output. Totals are derived from the rows dataset to maintain consistency with displayed rows.\"\n  },\n  \"validation\": {\n    \"unknown_tokens\": [],\n    \"unknown_columns\": [],\n    \"token_coverage\": {\n      \"scalars_mapped_pct\": 100,\n      \"row_tokens_mapped_pct\": 100,\n      \"totals_mapped_pct\": 100\n    }\n  }\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761167987,
  "model": "gpt-5-2025-08-07",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": null,
  "usage": {
    "completion_tokens": 9853,
    "prompt_tokens": 9207,
    "total_tokens": 19060,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 6208,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

## 2025-10-22T21:25:12Z - generator_assets_v1

```json
{
  "id": "chatcmpl-CTaaMvtXD2nPC0bajk2VMfaQWvufy",
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "logprobs": null,
      "message": {
        "content": "{\n  \"contract\": {\n    \"tokens\": {\n      \"scalars\": [\n        \"report_title\",\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\",\n        \"page_no\",\n        \"page_total\"\n      ],\n      \"row_tokens\": [\n        \"sl_no\",\n        \"material_name\",\n        \"set_wt_kg\",\n        \"ach_wt_kg\",\n        \"error_kg\",\n        \"error_pct\"\n      ],\n      \"totals\": [\n        \"total_set_wt_kg\",\n        \"total_ach_wt_kg\",\n        \"total_error_kg\",\n        \"total_error_pct\"\n      ]\n    },\n    \"mapping\": {\n      \"report_title\": \"PARAM:report_title\",\n      \"plant_name\": \"PARAM:plant_name\",\n      \"location\": \"PARAM:location\",\n      \"print_date\": \"PARAM:print_date\",\n      \"from_date\": \"PARAM:from_date\",\n      \"to_date\": \"PARAM:to_date\",\n      \"recipe_code\": \"PARAM:recipe_code\",\n      \"page_no\": \"PARAM:page_no\",\n      \"page_total\": \"PARAM:page_total\",\n      \"sl_no\": \"ROW_NUMBER() OVER (ORDER BY rows.material_name ASC)\",\n      \"material_name\": \"TRIM(long_bins.material_name)\",\n      \"set_wt_kg\": \"SUM(long_bins.set_wt_kg)\",\n      \"ach_wt_kg\": \"SUM(long_bins.ach_wt_kg)\",\n      \"error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"error_pct\": \"(SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0)\",\n      \"total_set_wt_kg\": \"SUM(rows.set_wt_kg)\",\n      \"total_ach_wt_kg\": \"SUM(rows.ach_wt_kg)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\"\n    },\n    \"join\": {\n      \"parent_table\": \"recipes\",\n      \"parent_key\": \"id\",\n      \"child_table\": \"recipes\",\n      \"child_key\": \"id\"\n    },\n    \"date_columns\": {\n      \"recipes\": \"start_time\"\n    },\n    \"filters\": {\n      \"required\": {\n        \"recipe_code\": \"recipes.recipe_name\",\n        \"date_range\": \"DATE(recipes.start_time) BETWEEN :from_date AND :to_date\"\n      },\n      \"optional\": {}\n    },\n    \"reshape_rules\": [\n      {\n        \"purpose\": \"Produce rows dataset from per-bin columns\",\n        \"strategy\": \"UNION_ALL\",\n        \"explain\": \"Union bin1..bin12 columns into a long form, apply filters first, trim material names, and drop blanks before grouping.\",\n        \"columns\": [\n          {\n            \"as\": \"material_name\",\n            \"from\": [\n              \"recipes.bin1_content\",\n              \"recipes.bin2_content\",\n              \"recipes.bin3_content\",\n              \"recipes.bin4_content\",\n              \"recipes.bin5_content\",\n              \"recipes.bin6_content\",\n              \"recipes.bin7_content\",\n              \"recipes.bin8_content\",\n              \"recipes.bin9_content\",\n              \"recipes.bin10_content\",\n              \"recipes.bin11_content\",\n              \"recipes.bin12_content\"\n            ]\n          },\n          {\n            \"as\": \"set_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_sp\",\n              \"recipes.bin2_sp\",\n              \"recipes.bin3_sp\",\n              \"recipes.bin4_sp\",\n              \"recipes.bin5_sp\",\n              \"recipes.bin6_sp\",\n              \"recipes.bin7_sp\",\n              \"recipes.bin8_sp\",\n              \"recipes.bin9_sp\",\n              \"recipes.bin10_sp\",\n              \"recipes.bin11_sp\",\n              \"recipes.bin12_sp\"\n            ]\n          },\n          {\n            \"as\": \"ach_wt_kg\",\n            \"from\": [\n              \"recipes.bin1_act\",\n              \"recipes.bin2_act\",\n              \"recipes.bin3_act\",\n              \"recipes.bin4_act\",\n              \"recipes.bin5_act\",\n              \"recipes.bin6_act\",\n              \"recipes.bin7_act\",\n              \"recipes.bin8_act\",\n              \"recipes.bin9_act\",\n              \"recipes.bin10_act\",\n              \"recipes.bin11_act\",\n              \"recipes.bin12_act\"\n            ]\n          }\n        ]\n      }\n    ],\n    \"row_computed\": {\n      \"row_error_kg\": \"SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)\",\n      \"row_error_pct\": \"(SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0)\"\n    },\n    \"totals_math\": {\n      \"total_set_wt_kg\": \"SUM(rows.set_wt_kg)\",\n      \"total_ach_wt_kg\": \"SUM(rows.ach_wt_kg)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\"\n    },\n    \"formatters\": {\n      \"error_pct\": \"percent(2)\",\n      \"total_error_pct\": \"percent(2)\",\n      \"print_date\": \"date(YYYY-MM-DD)\"\n    },\n    \"order_by\": {\n      \"rows\": [\n        \"material_name ASC\"\n      ]\n    },\n    \"header_tokens\": [\n      \"report_title\",\n      \"plant_name\",\n      \"location\",\n      \"print_date\",\n      \"from_date\",\n      \"to_date\",\n      \"recipe_code\",\n      \"page_no\",\n      \"page_total\"\n    ],\n    \"row_tokens\": [\n      \"sl_no\",\n      \"material_name\",\n      \"set_wt_kg\",\n      \"ach_wt_kg\",\n      \"error_kg\",\n      \"error_pct\"\n    ],\n    \"totals\": {\n      \"total_set_wt_kg\": \"SUM(rows.set_wt_kg)\",\n      \"total_ach_wt_kg\": \"SUM(rows.ach_wt_kg)\",\n      \"total_error_kg\": \"SUM(rows.error_kg)\",\n      \"total_error_pct\": \"SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0)\"\n    },\n    \"row_order\": [\n      \"material_name ASC\"\n    ]\n  },\n  \"sql_pack\": {\n    \"dialect\": \"sqlite\",\n    \"script\": \"-- HEADER SELECT --\\nSELECT PARAM:report_title AS report_title, PARAM:plant_name AS plant_name, PARAM:location AS location, PARAM:print_date AS print_date, PARAM:from_date AS from_date, PARAM:to_date AS to_date, PARAM:recipe_code AS recipe_code, PARAM:page_no AS page_no, PARAM:page_total AS page_total\\n-- ROWS SELECT --\\nSELECT ROW_NUMBER() OVER (ORDER BY rows.material_name ASC) AS sl_no,\\n  TRIM(long_bins.material_name) AS material_name,\\n  SUM(long_bins.set_wt_kg) AS set_wt_kg,\\n  SUM(long_bins.ach_wt_kg) AS ach_wt_kg,\\n  SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) AS error_kg,\\n  (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0) AS error_pct\\nFROM (SELECT recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date) AS long_bins\\nGROUP BY TRIM(long_bins.material_name)\\nORDER BY material_name ASC\\n-- TOTALS SELECT --\\nSELECT SUM(rows.set_wt_kg) AS total_set_wt_kg,\\n  SUM(rows.ach_wt_kg) AS total_ach_wt_kg,\\n  SUM(rows.error_kg) AS total_error_kg,\\n  SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0) AS total_error_pct\\nFROM (SELECT ROW_NUMBER() OVER (ORDER BY rows.material_name ASC) AS sl_no,\\n  TRIM(long_bins.material_name) AS material_name,\\n  SUM(long_bins.set_wt_kg) AS set_wt_kg,\\n  SUM(long_bins.ach_wt_kg) AS ach_wt_kg,\\n  SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) AS error_kg,\\n  (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0) AS error_pct\\nFROM (SELECT recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date) AS long_bins\\nGROUP BY TRIM(long_bins.material_name)\\nORDER BY material_name ASC) AS rows\\n\",\n    \"entrypoints\": {\n      \"header\": \"SELECT PARAM:report_title AS report_title, PARAM:plant_name AS plant_name, PARAM:location AS location, PARAM:print_date AS print_date, PARAM:from_date AS from_date, PARAM:to_date AS to_date, PARAM:recipe_code AS recipe_code, PARAM:page_no AS page_no, PARAM:page_total AS page_total\",\n      \"rows\": \"SELECT ROW_NUMBER() OVER (ORDER BY rows.material_name ASC) AS sl_no,\\n  TRIM(long_bins.material_name) AS material_name,\\n  SUM(long_bins.set_wt_kg) AS set_wt_kg,\\n  SUM(long_bins.ach_wt_kg) AS ach_wt_kg,\\n  SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) AS error_kg,\\n  (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0) AS error_pct\\nFROM (SELECT recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date) AS long_bins\\nGROUP BY TRIM(long_bins.material_name)\\nORDER BY material_name ASC\",\n      \"totals\": \"SELECT SUM(rows.set_wt_kg) AS total_set_wt_kg,\\n  SUM(rows.ach_wt_kg) AS total_ach_wt_kg,\\n  SUM(rows.error_kg) AS total_error_kg,\\n  SUM(rows.error_kg) / NULLIF(SUM(rows.set_wt_kg), 0) AS total_error_pct\\nFROM (SELECT ROW_NUMBER() OVER (ORDER BY rows.material_name ASC) AS sl_no,\\n  TRIM(long_bins.material_name) AS material_name,\\n  SUM(long_bins.set_wt_kg) AS set_wt_kg,\\n  SUM(long_bins.ach_wt_kg) AS ach_wt_kg,\\n  SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg) AS error_kg,\\n  (SUM(long_bins.ach_wt_kg) - SUM(long_bins.set_wt_kg)) / NULLIF(SUM(long_bins.set_wt_kg), 0) AS error_pct\\nFROM (SELECT recipes.bin1_content AS material_name, recipes.bin1_sp AS set_wt_kg, recipes.bin1_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin2_content AS material_name, recipes.bin2_sp AS set_wt_kg, recipes.bin2_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin3_content AS material_name, recipes.bin3_sp AS set_wt_kg, recipes.bin3_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin4_content AS material_name, recipes.bin4_sp AS set_wt_kg, recipes.bin4_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin5_content AS material_name, recipes.bin5_sp AS set_wt_kg, recipes.bin5_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin6_content AS material_name, recipes.bin6_sp AS set_wt_kg, recipes.bin6_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin7_content AS material_name, recipes.bin7_sp AS set_wt_kg, recipes.bin7_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin8_content AS material_name, recipes.bin8_sp AS set_wt_kg, recipes.bin8_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin9_content AS material_name, recipes.bin9_sp AS set_wt_kg, recipes.bin9_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin10_content AS material_name, recipes.bin10_sp AS set_wt_kg, recipes.bin10_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin11_content AS material_name, recipes.bin11_sp AS set_wt_kg, recipes.bin11_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date\\nUNION ALL\\nSELECT recipes.bin12_content AS material_name, recipes.bin12_sp AS set_wt_kg, recipes.bin12_act AS ach_wt_kg FROM recipes WHERE recipes.recipe_name = :recipe_code AND DATE(recipes.start_time) BETWEEN :from_date AND :to_date) AS long_bins\\nGROUP BY TRIM(long_bins.material_name)\\nORDER BY material_name ASC) AS rows\"\n    },\n    \"params\": {\n      \"required\": [\n        \"from_date\",\n        \"to_date\",\n        \"recipe_code\"\n      ],\n      \"optional\": [\n        \"report_title\",\n        \"plant_name\",\n        \"location\",\n        \"print_date\",\n        \"page_no\",\n        \"page_total\"\n      ]\n    }\n  },\n  \"dialect\": \"sqlite\",\n  \"invalid\": false\n}",
        "refusal": null,
        "role": "assistant",
        "annotations": [],
        "audio": null,
        "function_call": null,
        "tool_calls": null
      }
    }
  ],
  "created": 1761168182,
  "model": "gpt-4o-mini-2024-07-18",
  "object": "chat.completion",
  "service_tier": "default",
  "system_fingerprint": "fp_560af6e559",
  "usage": {
    "completion_tokens": 5351,
    "prompt_tokens": 7341,
    "total_tokens": 12692,
    "completion_tokens_details": {
      "accepted_prediction_tokens": 0,
      "audio_tokens": 0,
      "reasoning_tokens": 0,
      "rejected_prediction_tokens": 0
    },
    "prompt_tokens_details": {
      "audio_tokens": 0,
      "cached_tokens": 0
    }
  }
}
```

