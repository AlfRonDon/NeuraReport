<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Batch report</title>
<style>
  @page { size: A4; margin: 12mm; }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: "Times New Roman", serif; color:#000; font-size: 12px; }
  .wrap { padding: 0; }

  /* Header */
  .header { margin-bottom: 4mm; }
  .header .topline { display: table; width: 100%; table-layout: fixed; }
  .header .col { display: table-cell; vertical-align: top; }
  .header .left { width: 60%; }
  .header .right { width: 40%; text-align: right; }
  .kv { line-height: 1.35; }
  .kv span.label { display: inline-block; min-width: 28mm; }
  .title { text-align: center; font-weight: 700; font-size: 20px; margin: 3mm 0; }
  .print-date { border: 1px solid #000; padding: 2mm 3mm; font-weight: 700; display: inline-block; margin-top: 2mm; }

  /* Batch section */
  .batch-block { break-inside: avoid; page-break-inside: avoid; margin: 6mm 0; }
  .batch-box { border: 1px solid #000; }
  .batch-head { width: 100%; border-bottom: 1px solid #000; table-layout: fixed; border-collapse: collapse; }
  .batch-head td { vertical-align: top; padding: 2mm 2.5mm; }
  .batch-info { width: 60%; }
  .batch-info .row { margin: 1mm 0; }
  .batch-info .label { display: inline-block; min-width: 26mm; }
  .scale-wrap { width: 40%; }
  .scale-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
  .scale-table th, .scale-table td { border: 1px solid #000; padding: 1.5mm 2mm; text-align: center; }
  .scale-table th { font-weight: 700; }
  .scale-table .split { border-left-width: 2px; } /* visual middle separator */

  /* Materials table */
  table.grid { width: 100%; border-collapse: collapse; table-layout: fixed; }
  table.grid th, table.grid td { border: 1px solid #000; padding: 1.8mm 2.2mm; }
  table.grid th { font-weight: 700; text-align: center; }
  .num { text-align: right; }
  .bin { width: 12mm; text-align: center; }
  .mat { width: auto; }
  .w-set, .w-ach, .w-err, .w-errp, .w-dur { width: 22mm; }
  .totals td { font-weight: 700; }
  .totals .label { text-align: right; }
  .totals .spacer { border-right: none; }
  .totals .labelcell { border-left: none; }

  /* Footer */
  .footer { margin-top: 8mm; display: table; width: 100%; table-layout: fixed; font-size: 12px; }
  .footer .fcol { display: table-cell; vertical-align: bottom; }
  .footer .left { text-align: left; }
  .footer .center { text-align: center; }
  .footer .right { text-align: right; }
</style>
</head>
<body>
<div class="wrap">

  <div class="header">
    <div class="topline">
      <div class="col left">
        <div class="kv"><span class="label">Plant name</span> : {plant}</div>
        <div class="kv"><span class="label">Location</span> : {location}</div>
      </div>
      <div class="col right">
        <div class="kv">Date: {report_date}</div>
        <div class="kv">Recipe : {recipe_header}</div>
        <div class="kv">Shift No: {report_shift_no}</div>
      </div>
    </div>
    <div class="title">Batch report</div>
    <div class="print-date">Print Date  :  {print_date}</div>
  </div>

  <!-- BEGIN:BLOCK_REPEAT batches -->
  <section class='batch-block'>
    <div class="batch-box">
      <table class="batch-head">
        <tr>
          <td class="batch-info">
            <div class="row"><span class="label">Batch No</span> : {batch[].batch_no}</div>
            <div class="row"><span class="label">Batch Date</span> : {batch[].batch_date}</div>
            <div class="row"><span class="label">Shift No</span> : {batch[].shift_no}</div>
            <div class="row"><span class="label">Recipe Name</span> : {batch[].recipe_name}</div>
            <div class="row"><span class="label">Recipe Code</span> : {batch[].recipe_code}</div>
            <div class="row"><span class="label">Recipe No</span> : {batch[].recipe_no}</div>
          </td>
          <td class="scale-wrap">
            <table class="scale-table">
              <thead>
                <tr>
                  <th>Scale</th>
                  <th>Start time</th>
                  <th>Dur(sec)</th>
                  <th class="split">Scale</th>
                  <th>Start time</th>
                  <th>Dur(sec)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Main1</td>
                  <td>{batch[].scale_main1_start}</td>
                  <td>{batch[].scale_main1_dur}</td>
                  <td class="split">Main2</td>
                  <td>{batch[].scale_main2_start}</td>
                  <td>{batch[].scale_main2_dur}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </table>

      <table class="grid">
        <colgroup>
          <col class="bin">
          <col class="mat">
          <col class="w-set">
          <col class="w-ach">
          <col class="w-err">
          <col class="w-errp">
          <col class="w-dur">
        </colgroup>
        <thead>
          <tr>
            <th>Bin No</th>
            <th>Material Name</th>
            <th>Set wt(Kg)</th>
            <th>Ach wt(Kg)</th>
            <th>Error(Kg)</th>
            <th>Error %</th>
            <th>Dosine Dur (sec)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="bin">{rows.sl}</td>
            <td class="mat">{rows.name}</td>
            <td class="num">{rows.set}</td>
            <td class="num">{rows.ach}</td>
            <td class="num">{rows.err}</td>
            <td class="num">{rows.errp}</td>
            <td class="num"></td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="totals">
            <td colspan="2" class="label labelcell">Total :</td>
            <td class="num">{batch[].total_set}</td>
            <td class="num">{batch[].total_ach}</td>
            <td class="num">{batch[].total_err}</td>
            <td class="num">{batch[].total_errp}</td>
            <td class="num">{batch[].total_dur}</td>
          </tr>
        </tfoot>
      </table>
    </div>
  </section>
  <!-- END:BLOCK_REPEAT -->

  <div class="footer">
    <div class="fcol left">{company}</div>
    <div class="fcol center">Page {page_no} of {page_count}</div>
    <div class="fcol right"></div>
  </div>

</div>
</body>
</html>