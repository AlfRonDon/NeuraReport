<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Batch report</title>
<style>
  @page { size: A4; margin: 12mm; }
  :root {
    --line: #000;
  }
  html, body { margin: 0; padding: 0; }
  body {
    font-family: "Times New Roman", Times, serif;
    font-size: 12.5px;
    color: #000;
    line-height: 1.25;
  }

  /* Header */
  .top-bar {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 10mm;
    align-items: start;
  }
  .kv {
    display: grid;
    grid-template-columns: 28mm auto;
    row-gap: 2mm;
  }
  .kv .label { white-space: nowrap; }
  .kv .sep::after { content: ":"; padding: 0 3px; }
  .right-kv {
    justify-self: end;
    width: 70mm;
    display: grid;
    grid-template-columns: 18mm auto;
    row-gap: 2mm;
  }
  h1.title {
    text-align: center;
    font-weight: bold;
    font-size: 22px;
    margin: 4mm 0 3mm 0;
  }
  .print-date {
    border-top: 1px solid var(--line);
    border-bottom: 1px solid var(--line);
    padding: 2mm 0;
    font-weight: bold;
  }

  /* Repeating block container */
  .batch-block { break-inside: avoid; page-break-inside: avoid; margin: 6mm 0; }

  /* Tables */
  table.grid {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    border: 1px solid var(--line);
  }
  table.grid th, table.grid td {
    border: 1px solid var(--line);
    padding: 2.5mm 2mm;
    vertical-align: middle;
  }
  .small-pad td, .small-pad th { padding: 2mm 2mm; }
  .num { text-align: right; }
  .center { text-align: center; }
  .right { text-align: right; }
  .strong { font-weight: bold; }

  /* Batch header table */
  table.batch-head { margin-bottom: 3mm; }
  table.batch-head th { font-weight: bold; }
  table.batch-head .lab { width: 26mm; white-space: nowrap; }
  table.batch-head .val { }
  table.batch-head .scl, table.batch-head .stime, table.batch-head .sdur { width: 20mm; text-align: center; }
  table.batch-head .scl2, table.batch-head .stime2, table.batch-head .sdur2 { width: 20mm; text-align: center; }

  /* Materials table */
  table.materials col.c-sl { width: 12mm; }
  table.materials col.c-name { width: auto; }
  table.materials col.c-set,
  table.materials col.c-ach,
  table.materials col.c-err { width: 24mm; }
  table.materials col.c-errp { width: 18mm; }
  table.materials col.c-dur { width: 24mm; }
  table.materials thead th { font-weight: bold; }
  table.materials tfoot td { font-weight: bold; }

  /* Footer */
  .footer {
    margin-top: 8mm;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    font-size: 12px;
  }
  .footer .left { justify-self: start; }
  .footer .center { justify-self: center; }
  .footer .right { justify-self: end; }
</style>
</head>
<body>

<div class="top-bar">
  <div class="kv">
    <div class="label">Plant name</div><div class="sep"></div><div>{plant}</div>
    <div class="label">Location</div><div class="sep"></div><div>{location}</div>
  </div>
  <div class="right-kv">
    <div class="label">Date</div><div class="sep"></div><div>{date}</div>
    <div class="label">Recipe</div><div class="sep"></div><div>{recipe}</div>
    <div class="label">Shift No</div><div class="sep"></div><div>{shift}</div>
  </div>
</div>

<h1 class="title">Batch report</h1>

<div class="print-date">Print Date : {print_date}</div>

<!-- BEGIN:BLOCK_REPEAT batches -->
<section class='batch-block'>
  <table class="grid batch-head small-pad">
    <colgroup>
      <col class="lab"><col class="val">
      <col class="scl"><col class="stime"><col class="sdur">
      <col class="scl2"><col class="stime2"><col class="sdur2">
    </colgroup>
    <thead>
      <tr>
        <td class="lab strong">Batch No</td>
        <td class="val">{batch_no}</td>
        <th>Scale</th><th>Start time</th><th>Dur(sec)</th>
        <th>Scale</th><th>Start time</th><th>Dur(sec)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="lab strong">Batch Date</td>
        <td class="val">{batch_date}</td>
        <td class="center">{scale1_name}</td>
        <td class="center">{scale1_start}</td>
        <td class="center">{scale1_dur}</td>
        <td class="center">{scale2_name}</td>
        <td class="center">{scale2_start}</td>
        <td class="center">{scale2_dur}</td>
      </tr>
      <tr>
        <td class="lab strong">Shift No</td>
        <td class="val">{shift}</td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
      </tr>
      <tr>
        <td class="lab strong">Recipe Name</td>
        <td class="val">{recipe_name}</td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
      </tr>
      <tr>
        <td class="lab strong">Recipe Code</td>
        <td class="val">{recipe_code}</td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
      </tr>
      <tr>
        <td class="lab strong">Recipe No</td>
        <td class="val">{recipe_no}</td>
        <td></td><td></td><td></td><td></td><td></td><td></td>
      </tr>
    </tbody>
  </table>

  <table class="grid materials">
    <colgroup>
      <col class="c-sl">
      <col class="c-name">
      <col class="c-set">
      <col class="c-ach">
      <col class="c-err">
      <col class="c-errp">
      <col class="c-dur">
    </colgroup>
    <thead>
      <tr>
        <th class="center">Bin No</th>
        <th class="center">Material Name</th>
        <th class="center">Set wt(Kg)</th>
        <th class="center">Ach wt(Kg)</th>
        <th class="center">Error(Kg)</th>
        <th class="center">Error %</th>
        <th class="center">Dosine Dur (sec)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="center">{sl}</td>
        <td>{name}</td>
        <td class="num">{set}</td>
        <td class="num">{ach}</td>
        <td class="num">{err}</td>
        <td class="num">{errp}</td>
        <td class="num">{dosing_dur_sec}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="2" class="right strong">Total :</td>
        <td class="num strong">{total_set}</td>
        <td class="num strong">{total_ach}</td>
        <td class="num strong">{total_err}</td>
        <td class="num strong">{total_errp}</td>
        <td class="num strong">{total_dosedur}</td>
      </tr>
    </tfoot>
  </table>
</section>
<!-- END:BLOCK_REPEAT -->

<div class="footer">
  <div class="left">{company}</div>
  <div class="center">Page {page} of {pages}</div>
  <div class="right"></div>
</div>

</body>
</html>