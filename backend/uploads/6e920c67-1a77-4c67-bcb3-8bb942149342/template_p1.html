<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>{report_title}</title>
<style>
  @page { size: A4; margin: 12mm 14mm; }
  html, body { margin: 0; padding: 0; }
  body {
    font-family: "Times New Roman", Times, serif;
    font-size: 12.5px;
    line-height: 1.3;
    color: #000;
  }
  h1 {
    font-size: 22px;
    margin: 4mm 0 3mm;
    text-align: center;
    font-weight: 700;
  }
  .top-info { margin-bottom: 2mm; }
  .top-info table { width: 100%; table-layout: fixed; border-collapse: collapse; }
  .top-info td { vertical-align: top; padding: 1mm 0; }
  .top-left .row,
  .top-right .row { display: flex; gap: 2mm; }
  .label { min-width: 28mm; }
  .colon { margin: 0 1mm; }
  .print-date { margin: 1mm 0 3mm; font-weight: 700; }
  .print-date .label { min-width: 22mm; display: inline-block; }

  /* Generic tables */
  table.grid {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }
  table.grid th, table.grid td {
    border: 1px solid #000;
    padding: 2.5mm 2mm;
    vertical-align: middle;
  }
  table.grid th { font-weight: 700; }

  /* Key/Value table (borderless) */
  table.kv { width: 100%; border-collapse: collapse; table-layout: fixed; }
  table.kv td { padding: 1.2mm 1mm; vertical-align: top; }
  table.kv .k { width: 30mm; white-space: nowrap; }
  table.kv .c { width: 4mm; text-align: center; }
  table.kv .v { width: auto; }

  /* Batch block containers */
  .batch-block { break-inside: avoid; page-break-inside: avoid; margin: 6mm 0; }
  .meta-box {
    border: 1px solid #000;
    padding: 2mm;
    margin-bottom: 2mm;
  }
  .meta-split { width: 100%; border-collapse: collapse; table-layout: fixed; }
  .meta-split td { vertical-align: top; }
  .meta-left { padding-right: 3mm; }
  .meta-right { padding-left: 3mm; }

  .scale-grid th, .scale-grid td { text-align: center; }
  .num { text-align: right; }

  /* Materials table column sizing */
  .materials col.bin { width: 12%; }
  .materials col.name { width: 40%; }
  .materials col.set,
  .materials col.ach,
  .materials col.err,
  .materials col.errp { width: 12%; }

  tfoot td { font-weight: 700; }

  /* Footer */
  .footer { margin-top: 8mm; display: flex; justify-content: space-between; align-items: center; font-size: 12px; }
  .footer .center { text-align: center; flex: 1; }
</style>
</head>
<body>

<div class="top-info">
  <table>
    <tr>
      <td class="top-left" style="width:60%;">
        <div class="row"><div class="label">Plant name</div><div class="colon">:</div><div class="value">{plant_name}</div></div>
        <div class="row"><div class="label">Location</div><div class="colon">:</div><div class="value">{location}</div></div>
      </td>
      <td class="top-right" style="width:40%;">
        <div class="row"><div class="label">Date</div><div class="colon">:</div><div class="value">{date}</div></div>
        <div class="row"><div class="label">Recipe</div><div class="colon">:</div><div class="value">{recipe}</div></div>
        <div class="row"><div class="label">Shift No</div><div class="colon">:</div><div class="value">{shift_no}</div></div>
      </td>
    </tr>
  </table>
</div>

<h1>{report_title}</h1>

<div class="print-date"><span class="label">Print Date</span> : {print_date}</div>

<!-- BEGIN:BLOCK_REPEAT batches -->
<section class='batch-block'>

  <div class="meta-box">
    <table class="meta-split">
      <tr>
        <td class="meta-left" style="width:60%;">
          <table class="kv">
            <tr><td class="k">Batch No</td><td class="c">:</td><td class="v">{batch_no}</td></tr>
            <tr><td class="k">Batch Date</td><td class="c">:</td><td class="v">{batch_date}</td></tr>
            <tr><td class="k">Shift No</td><td class="c">:</td><td class="v">{shift_no}</td></tr>
            <tr><td class="k">Recipe Name</td><td class="c">:</td><td class="v">{recipe_name}</td></tr>
            <tr><td class="k">Recipe Code</td><td class="c">:</td><td class="v">{recipe_code}</td></tr>
            <tr><td class="k">Recipe No</td><td class="c">:</td><td class="v">{recipe_no}</td></tr>
          </table>
        </td>
        <td class="meta-right" style="width:40%;">
          <table class="grid scale-grid">
            <colgroup>
              <col><col><col><col><col><col>
            </colgroup>
            <thead>
              <tr>
                <th>Scale</th><th>Start time</th><th>Dur(sec)</th>
                <th>Scale</th><th>Start time</th><th>Dur(sec)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{scale_a_label}</td><td>{scale_a_start}</td><td class="num">{scale_a_dur_sec}</td>
                <td>{scale_b_label}</td><td>{scale_b_start}</td><td class="num">{scale_b_dur_sec}</td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </table>
  </div>

  <table class="grid materials">
    <colgroup>
      <col class="bin"><col class="name"><col class="set"><col class="ach"><col class="err"><col class="errp">
    </colgroup>
    <thead>
      <tr>
        <th>Bin No</th>
        <th>Material Name</th>
        <th>Set wt(Kg)</th>
        <th>Ach wt(Kg)</th>
        <th>Error(Kg)</th>
        <th>Error %</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="num">{sl}</td>
        <td>{name}</td>
        <td class="num">{set}</td>
        <td class="num">{ach}</td>
        <td class="num">{err}</td>
        <td class="num">{errp}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="2">Total :</td>
        <td class="num">{total_set}</td>
        <td class="num">{total_ach}</td>
        <td class="num">{total_err}</td>
        <td class="num">{total_errp}</td>
      </tr>
    </tfoot>
  </table>

</section>
<!-- END:BLOCK_REPEAT -->

<div class="footer">
  <div>Indian Industrial Machines Pvt. Ltd.</div>
  <div class="center">Page {page} of {pages}</div>
  <div></div>
</div>

</body>
</html>