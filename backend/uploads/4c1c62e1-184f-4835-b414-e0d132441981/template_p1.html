<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Batch report</title>
<style>
  @page { size: A4; margin: 12mm 14mm; }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: "Times New Roman", serif; color: #000; font-size: 12pt; }
  .container { padding: 2mm 0 6mm; }

  .topbar { display: flex; justify-content: space-between; align-items: flex-start; }
  .topbar .block { line-height: 1.4; }
  .kv { white-space: nowrap; }
  .kv .label { display: inline-block; min-width: 28mm; }
  .kv .colon { padding: 0 2mm; }
  .title { text-align: center; font-size: 20pt; font-weight: 700; margin: 4mm 0 2mm; }

  .print-line { border-top: 1px solid #000; padding: 2mm 0; font-weight: 700; }
  .print-line .label { display: inline-block; min-width: 24mm; }
  .print-line .colon { padding: 0 2mm; }

  .batch-block { break-inside: avoid; page-break-inside: avoid; margin: 6mm 0; }

  table { width: 100%; border-collapse: collapse; table-layout: fixed; }
  th, td { border: 1px solid #000; padding: 2.2mm 2mm; vertical-align: middle; }
  th { font-weight: 700; }

  /* Meta table (batch header) */
  table.meta { margin-bottom: 3mm; }
  table.meta col.label { width: 28%; }
  table.meta col.value { width: 32%; }
  table.meta col.scalebox { width: 40%; }
  table.meta td.k { font-weight: 700; width: 28%; }
  table.meta td.v { width: 32%; }
  table.meta td.scale { padding: 0; }
  table.scales { border: none; }
  table.scales th, table.scales td { border-left: none; border-right: none; }
  table.scales thead th { text-align: center; }
  .center { text-align: center; }
  .num { text-align: right; }

  /* Items (materials) table */
  table.items thead th { text-align: center; }
  table.items col.bin { width: 10%; }
  table.items col.name { width: 42%; }
  table.items col.set { width: 12%; }
  table.items col.ach { width: 12%; }
  table.items col.err { width: 12%; }
  table.items col.errp { width: 12%; }
  .right { text-align: right; }
  .strong { font-weight: 700; }

  /* Footer */
  .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8mm; font-size: 10pt; }
  .footer .center { text-align: center; flex: 1; }
  .footer .left { min-width: 60mm; }
</style>
</head>
<body>
<div class="container">
  <div class="topbar">
    <div class="block">
      <div class="kv"><span class="label">Plant name</span><span class="colon">:</span><span class="value">{plant_name}</span></div>
      <div class="kv"><span class="label">Location</span><span class="colon">:</span><span class="value">{location}</span></div>
    </div>
    <div class="block" style="text-align:right;">
      <div class="kv"><span class="label">Date</span><span class="colon">:</span><span class="value">{report_date}</span></div>
      <div class="kv"><span class="label">Recipe</span><span class="colon">:</span><span class="value">{recipe_header}</span></div>
      <div class="kv"><span class="label">Shift No</span><span class="colon">:</span><span class="value">{shift_header}</span></div>
    </div>
  </div>

  <div class="title">Batch report</div>

  <div class="print-line">
    <span class="label">Print Date</span><span class="colon">:</span><span class="value">{print_date}</span>
  </div>

  <!-- BEGIN:BLOCK_REPEAT batches -->
  <section class='batch-block'>
    <table class="meta">
      <colgroup>
        <col class="label"><col class="value"><col class="scalebox">
      </colgroup>
      <tr>
        <td class="k">Batch No</td>
        <td class="v">{batch_no}</td>
        <td class="scale" rowspan="6">
          <table class="scales">
            <thead>
              <tr>
                <th>Scale</th>
                <th>Start time</th>
                <th>Dur(sec)</th>
                <th>Scale</th>
                <th>Start time</th>
                <th>Dur(sec)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="center">{scale1_name}</td>
                <td class="center">{scale1_start}</td>
                <td class="num">{scale1_dur}</td>
                <td class="center">{scale2_name}</td>
                <td class="center">{scale2_start}</td>
                <td class="num">{scale2_dur}</td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td class="k">Batch Date</td>
        <td class="v">{batch_date}</td>
      </tr>
      <tr>
        <td class="k">Shift No</td>
        <td class="v">{shift_no}</td>
      </tr>
      <tr>
        <td class="k">Recipe Name</td>
        <td class="v">{recipe_name}</td>
      </tr>
      <tr>
        <td class="k">Recipe Code</td>
        <td class="v">{recipe_code}</td>
      </tr>
      <tr>
        <td class="k">Recipe No</td>
        <td class="v">{recipe_no}</td>
      </tr>
    </table>

    <table class="items">
      <colgroup>
        <col class="bin"><col class="name"><col class="set"><col class="ach"><col class="err"><col class="errp">
      </colgroup>
      <thead>
        <tr>
          <th>Bin No</th>
          <th>Material Name</th>
          <th>Set wt(Kg)</th>
          <th>Ach wt(Kg)</th>
          <th>Error(Kg)</th>
          <th>Error %</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="center">{sl}</td>
          <td>{name}</td>
          <td class="num">{set}</td>
          <td class="num">{ach}</td>
          <td class="num">{err}</td>
          <td class="num">{errp}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="2" class="right strong">Total :</td>
          <td class="num strong">{total_set}</td>
          <td class="num strong">{total_ach}</td>
          <td class="num strong">{total_err}</td>
          <td class="num strong">{total_errp}</td>
        </tr>
      </tfoot>
    </table>
  </section>
  <!-- END:BLOCK_REPEAT -->

  <div class="footer">
    <div class="left">Indian Industrial Machines Pvt. Ltd.</div>
    <div class="center">Page {page_no} of {page_count}</div>
  </div>
</div>
</body>
</html>