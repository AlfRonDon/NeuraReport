import{c as he,j as e,e as Et,b as Ft,a4 as Pt,d as Bt,u as qe,r as n,f as re,a5 as Ut,a6 as Wt,i as Ot,R as A,I as L,a7 as Nt,a8 as _t,a9 as Vt,aa as Yt,ab as Ht,ac as Kt,ad as Gt,ae as Qt,af as Zt,B as v,T as h,S as D,D as qt,n as Jt,A as Xt,_ as B,a0 as ea,$ as U,ag as ta,ah as aa,F as Je,a1 as sa,ai as Ye,aj as He,a3 as w,v as ee,k as c,p as l,E as na,J as p,o as oa,a2 as ra,ak as la,al as ia,am as da,N as ca,an as pa,ao as ua,O as ga,K as Xe,s as ma}from"./index-B8Eu23bA.js";import{M as xa}from"./MoreVert-BRjwX6CI.js";import{C as ha}from"./ContentCopy-CetTCPv3.js";import{P as fa}from"./PictureAsPdf-Cva09OSx.js";import{D as ba}from"./DataTable-_yVGBakl.js";import{C as Ke}from"./ConfirmModal-Bm9QL03g.js";import{F as ya}from"./FavoriteButton-C4GlRvDk.js";import{R as Ca}from"./ReportGlossaryNotice-BhvvMaX1.js";import"./KeyboardArrowDown-C4qqpONU.js";import"./FilterList-lKi4AKs9.js";import"./Check-BATZaRrq.js";import"./TableRow-Gv3OwSlT.js";import"./TableContainer-CxteWhu6.js";import"./KeyboardArrowRight-BOQXGjwe.js";import"./CheckCircleOutline-BKKyaL-x.js";import"./WarningAmber-DtVJgAFk.js";import"./Star-BdvflhJ9.js";import"./StarBorder-fpAfr7cR.js";import"./Article-B2tsd32U.js";const ka=he(e.jsx("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5 6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z"})),ja=he(e.jsx("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z"})),Sa=he(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})),et=Xe`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,va=Xe`
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
`,Ta=p(v)(({theme:a})=>({padding:a.spacing(3),maxWidth:1400,margin:"0 auto",width:"100%",minHeight:"100vh",backgroundColor:a.palette.background.default})),Ge=p(ee)(({theme:a})=>({borderRadius:8,backgroundColor:l(a.palette.text.primary,.08),color:a.palette.text.secondary,fontSize:"0.75rem","& .MuiChip-deleteIcon":{color:a.palette.text.secondary,"&:hover":{color:a.palette.text.primary}}})),Da=p(ra)(({theme:a})=>({"& .MuiPaper-root":{backgroundColor:l(a.palette.background.paper,.95),backdropFilter:"blur(20px)",border:`1px solid ${l(a.palette.divider,.1)}`,borderRadius:8,boxShadow:`0 8px 32px ${l(a.palette.common.black,.15)}`,minWidth:180,animation:`${et} 0.2s ease-out`}})),W=p(w)(({theme:a})=>({borderRadius:8,margin:a.spacing(.5,1),padding:a.spacing(1,1.5),fontSize:"0.8125rem",transition:"all 0.15s ease","&:hover":{backgroundColor:a.palette.mode==="dark"?l(a.palette.text.primary,.08):c[300]},"& .MuiListItemIcon-root":{minWidth:32}})),Q=p(la)(({theme:a})=>({"& .MuiBackdrop-root":{backgroundColor:l(a.palette.common.black,.6),backdropFilter:"blur(8px)"},"& .MuiDialog-paper":{backgroundColor:l(a.palette.background.paper,.95),backdropFilter:"blur(20px)",border:`1px solid ${l(a.palette.divider,.1)}`,borderRadius:8,boxShadow:`0 24px 64px ${l(a.palette.common.black,.25)}`,animation:`${et} 0.3s ease-out`}})),Z=p(ia)(({theme:a})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:a.spacing(2.5,3),fontSize:"1.125rem",fontWeight:600})),q=p(da)(({theme:a})=>({padding:a.spacing(0,3,3)})),J=p(ua)(({theme:a})=>({padding:a.spacing(2,3),gap:a.spacing(1)})),X=p(ca)(({theme:a})=>({"& .MuiOutlinedInput-root":{borderRadius:8,backgroundColor:l(a.palette.background.paper,.6),transition:"all 0.2s ease","&:hover":{backgroundColor:l(a.palette.background.paper,.8)},"&.Mui-focused":{backgroundColor:a.palette.background.paper,boxShadow:`0 0 0 3px ${l(a.palette.text.primary,.08)}`}}})),Qe=p(pa)(({theme:a})=>({"& .MuiOutlinedInput-root":{borderRadius:8,backgroundColor:l(a.palette.background.paper,.6),transition:"all 0.2s ease","&:hover":{backgroundColor:l(a.palette.background.paper,.8)},"&.Mui-focused":{backgroundColor:a.palette.background.paper,boxShadow:`0 0 0 3px ${l(a.palette.text.primary,.08)}`}}})),tt=p(ma)(({theme:a})=>({borderRadius:8,textTransform:"none",fontWeight:500,fontSize:"0.875rem",padding:a.spacing(1,2.5),transition:"all 0.2s ease"})),le=p(tt)(({theme:a})=>({background:a.palette.mode==="dark"?c[1100]:c[1200],color:"#fff",boxShadow:`0 4px 14px ${l(a.palette.common.black,.15)}`,"&:hover":{background:a.palette.mode==="dark"?c[1e3]:c[1100],boxShadow:`0 6px 20px ${l(a.palette.common.black,.2)}`,transform:"translateY(-1px)"},"&:disabled":{background:a.palette.action.disabledBackground,color:a.palette.action.disabled,boxShadow:"none"}})),O=p(tt)(({theme:a})=>({borderColor:l(a.palette.divider,.3),"&:hover":{borderColor:a.palette.mode==="dark"?c[1e3]:c[1100],backgroundColor:a.palette.mode==="dark"?l(a.palette.text.primary,.04):c[200]}})),Ze=p(v,{shouldForwardProp:a=>a!=="iconColor"})(({theme:a})=>({width:36,height:36,borderRadius:10,backgroundColor:a.palette.mode==="dark"?l(a.palette.text.primary,.08):c[300],display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"})),wa=p(ee,{shouldForwardProp:a=>!["kindColor","kindBg"].includes(a)})(({theme:a,kindColor:f,kindBg:b})=>({borderRadius:8,fontWeight:600,fontSize:"0.6875rem",backgroundColor:b,color:f})),Ia=p(ee,{shouldForwardProp:a=>!["statusColor","statusBg"].includes(a)})(({theme:a,statusColor:f,statusBg:b})=>({borderRadius:8,fontWeight:600,fontSize:"0.6875rem",textTransform:"capitalize",backgroundColor:b,color:f})),Aa=p(ee)(({theme:a})=>({borderRadius:6,fontSize:"0.6875rem",backgroundColor:l(a.palette.text.primary,.08),color:a.palette.text.secondary})),La=p(oa)(({theme:a})=>({color:a.palette.text.secondary,transition:"all 0.2s ease","&:hover":{color:a.palette.text.primary,backgroundColor:a.palette.mode==="dark"?l(a.palette.text.primary,.08):c[300]}})),za=p(ga)(({theme:a})=>({borderRadius:4,height:6,backgroundColor:l(a.palette.text.primary,.1),"& .MuiLinearProgress-bar":{borderRadius:4,background:a.palette.mode==="dark"?c[1e3]:c[1200]}})),$a=p(v)(({theme:a})=>({padding:a.spacing(2),borderRadius:8,border:`1px solid ${l(a.palette.divider,.1)}`,cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:a.palette.mode==="dark"?c[1e3]:c[1100],backgroundColor:a.palette.mode==="dark"?l(a.palette.text.primary,.04):c[200],transform:"translateX(4px)"}})),Ra=p(Je)(({theme:a})=>({color:a.palette.text.secondary,animation:`${va} 2s infinite ease-in-out`})),xe=(a,f)=>{const b={pdf:{icon:fa,color:a.palette.text.secondary,bgColor:a.palette.mode==="dark"?l(a.palette.text.primary,.1):c[300]},excel:{icon:na,color:a.palette.text.secondary,bgColor:a.palette.mode==="dark"?l(a.palette.text.primary,.1):c[300]}};return b[f]||b.pdf},Ma=(a,f)=>{const b={approved:{color:a.palette.text.secondary,bgColor:a.palette.mode==="dark"?l(a.palette.text.primary,.1):c[300]},pending:{color:a.palette.text.secondary,bgColor:a.palette.mode==="dark"?l(a.palette.text.primary,.08):c[200]},draft:{color:a.palette.text.secondary,bgColor:a.palette.mode==="dark"?l(a.palette.text.primary,.08):c[200]},archived:{color:a.palette.text.secondary,bgColor:l(a.palette.text.secondary,.08)}};return b[f]||b.approved};function Ea(){const a=Et(),f=Ft(),[b,fe]=Pt(),i=Bt(),{execute:x}=qe(),te=n.useCallback((t,s,o={})=>f(t,{label:s,intent:{from:"templates",...o}}),[f]),R=re(t=>t.templates),T=re(t=>t.setTemplates),be=re(t=>t.removeTemplate),ye=re(t=>t.updateTemplate),[Ce,ke]=n.useState(!1),[at,ie]=n.useState(!1),[N,je]=n.useState(null),[Se,ve]=n.useState(null),[d,Te]=n.useState(null),[De,we]=n.useState(!1),[st,ae]=n.useState(!1),[_,nt]=n.useState(null),[j,V]=n.useState({name:"",description:"",tags:"",status:"approved"}),[de,Ie]=n.useState(!1),[ot,se]=n.useState(!1),[I,Ae]=n.useState(null),[ne,Le]=n.useState(""),[z,ze]=n.useState(!1),[$e,ce]=n.useState(0),[pe,rt]=n.useState([]),[g,Re]=n.useState([]),[lt,Y]=n.useState(!1),[it,H]=n.useState(!1),[ue,dt]=n.useState("approved"),[ct,K]=n.useState(!1),[ge,Me]=n.useState(""),[S,M]=n.useState(!1),G=n.useRef(null),Ee=n.useRef(!1),[pt,oe]=n.useState(!1),[Fe,ut]=n.useState(null),[Pe,Be]=n.useState([]),[gt,Ue]=n.useState(!1),[We,Oe]=n.useState(new Set),E=b.get("kind")||"",F=b.get("status")||"",mt=n.useMemo(()=>{let t=R;return E&&(t=t.filter(s=>(s.kind||"").toLowerCase()===E.toLowerCase())),F&&(t=t.filter(s=>(s.status||"").toLowerCase()===F.toLowerCase())),t},[R,E,F]),Ne=n.useCallback(t=>{const s=new URLSearchParams(b);s.delete(t),fe(s,{replace:!0})},[b,fe]),k=n.useCallback(async()=>{ke(!0);try{const[t,s,o]=await Promise.all([Ut(),Wt(),Ot().catch(()=>({templates:[]}))]);T(t),rt(s.tags||[]);const r=(o.templates||[]).map(u=>u.id);Oe(new Set(r))}catch(t){i.show(t.message||"Failed to load designs","error")}finally{ke(!1)}},[T,i]),_e=n.useCallback((t,s)=>{Oe(o=>{const r=new Set(o);return s?r.add(t):r.delete(t),r})},[]);n.useEffect(()=>{Ee.current||(Ee.current=!0,k())},[k]);const xt=n.useCallback((t,s)=>{t.stopPropagation(),ve(t.currentTarget),Te(s)},[]),C=n.useCallback(()=>{ve(null),Te(null)},[]),Ve=n.useCallback(()=>{te("/setup/wizard","Open setup wizard")},[f]),ht=n.useCallback(()=>{d&&te(`/templates/${d.id}/edit`,"Edit template",{templateId:d.id}),C()},[d,f,C]),ft=n.useCallback(()=>{je(d),ie(!0),C()},[d,C]),bt=n.useCallback(async()=>{if(!N)return;const t=N,s=R.find(o=>o.id===t.id);ie(!1),je(null),x({type:L.DELETE,label:`Delete design "${t.name||t.id}"`,reversibility:A.PARTIALLY_REVERSIBLE,action:async()=>{be(t.id);let o=!1;const r=setTimeout(async()=>{if(!o)try{await Nt(t.id)}catch(u){throw s&&T(m=>[...m,s]),u}},5e3);i.showWithUndo(`"${t.name||t.id}" removed`,()=>{o=!0,clearTimeout(r),s&&T(u=>[...u,s]),i.show("Design restored","success")},{severity:"info"})}})},[N,R,be,T,i,x]),yt=n.useCallback(async()=>{if(!d)return;const t=d;C(),x({type:L.DOWNLOAD,label:`Export design "${t.name||t.id}"`,reversibility:A.SYSTEM_MANAGED,successMessage:"Design exported",errorMessage:"Failed to export design",action:async()=>{await _t(t.id)}})},[d,C,x]),Ct=n.useCallback(async()=>{if(!d)return;const t=d;C(),x({type:L.CREATE,label:`Duplicate design "${t.name||t.id}"`,reversibility:A.FULLY_REVERSIBLE,errorMessage:"Failed to copy design",action:async()=>{we(!0);try{const o=(await Vt(t.id))?.name||(t.name?`${t.name} (Copy)`:"Design (Copy)");await k(),i.show(`Design copied as "${o}"`,"success")}finally{we(!1)}}})},[d,i,C,k,x]),kt=n.useCallback(()=>{d&&(nt(d),V({name:d.name||"",description:d.description||"",tags:Array.isArray(d.tags)?d.tags.join(", "):"",status:d.status||"approved"}),ae(!0),C())},[d,C]),jt=n.useCallback(async()=>{if(d){ut(d),oe(!0),Ue(!0),Be([]),C();try{const t=await Yt(d.id);Be(t.similar||[])}catch(t){console.error("Failed to fetch similar designs:",t),i.show("Failed to load similar designs","error")}finally{Ue(!1)}}},[d,C,i]),St=n.useCallback(t=>{oe(!1),te(`/reports?template=${t.id}`,"Open reports",{templateId:t.id})},[f]),vt=n.useCallback(async()=>{if(!_)return;const t=j.name.trim();if(!t){i.show("Design name is required","error");return}if(t.length>200){i.show("Design name must be 200 characters or less","error");return}const s=j.tags?j.tags.split(",").map(u=>u.trim()).filter(Boolean):[],o=s.find(u=>u.length>50);if(o){i.show(`Tag "${o.slice(0,20)}..." exceeds 50 character limit`,"error");return}const r={name:t,description:j.description.trim()||void 0,status:j.status,tags:s};x({type:L.UPDATE,label:`Update design details "${t}"`,reversibility:A.FULLY_REVERSIBLE,successMessage:"Design details updated",errorMessage:"Failed to update design details",action:async()=>{Ie(!0);try{const m=(await Ht(_.id,r))?.template||{..._,...r};ye(_.id,y=>({...y,...m})),ae(!1)}finally{Ie(!1)}}})},[_,j,ye,x]),Tt=n.useCallback(()=>{se(!0)},[]),Dt=n.useCallback(async()=>{if(!I){i.show("Select a design backup file first","error");return}const t=I.name||"";if(t.toLowerCase().split(".").pop()!=="zip"){i.show("Invalid file type. Please select a .zip file","error");return}const o=50*1024*1024;if(I.size>o){i.show("File too large. Maximum size is 50MB","error");return}x({type:L.UPLOAD,label:`Import design "${ne.trim()||t}"`,reversibility:A.FULLY_REVERSIBLE,blocksNavigation:!0,successMessage:"Design imported",errorMessage:"Failed to import design",action:async()=>{ze(!0),ce(0);try{await Kt({file:I,name:ne.trim()||void 0,onUploadProgress:r=>ce(r)}),await k(),se(!1),Ae(null),Le("")}finally{ze(!1),ce(0)}}})},[I,ne,k,x]),wt=n.useCallback(()=>{g.length&&Y(!0)},[g]),It=n.useCallback(async()=>{if(!g.length){Y(!1);return}const t=[...g],s=t.length,o=R.filter(r=>t.includes(r.id));if(!o.length){Y(!1);return}Y(!1),Re([]),G.current?.timeoutId&&(clearTimeout(G.current.timeoutId),G.current=null),x({type:L.DELETE,label:`Delete ${s} design${s!==1?"s":""}`,reversibility:A.PARTIALLY_REVERSIBLE,errorMessage:"Failed to remove designs",action:async()=>{T(m=>m.filter(y=>!t.includes(y.id)));let r=!1;const u=setTimeout(async()=>{if(!r){M(!0);try{const m=await Gt(t),y=m?.deletedCount??m?.deleted?.length??0,$=m?.failedCount??m?.failed?.length??0;$>0?i.show(`Removed ${y} design${y!==1?"s":""}, ${$} failed`,"warning"):i.show(`Removed ${y} design${y!==1?"s":""}`,"success"),await k()}catch(m){throw T(y=>{const $=new Set(y.map(me=>me.id)),P=o.filter(me=>!$.has(me.id));return P.length?[...y,...P]:y}),m}finally{M(!1)}}},5e3);G.current={timeoutId:u,ids:t,templates:o},i.showWithUndo(`Removed ${s} design${s!==1?"s":""}`,()=>{r=!0,clearTimeout(u),G.current=null,T(m=>{const y=new Set(m.map(P=>P.id)),$=o.filter(P=>!y.has(P.id));return $.length?[...m,...$]:m}),i.show("Designs restored","success")},{severity:"info"})}})},[g,R,i,k,x,T]),At=n.useCallback(async()=>{if(!g.length){H(!1);return}const t=g.length;H(!1),x({type:L.UPDATE,label:`Update status for ${t} design${t!==1?"s":""}`,reversibility:A.FULLY_REVERSIBLE,errorMessage:"Failed to update status",action:async()=>{M(!0);try{const s=await Qt(g,ue),o=s?.updatedCount??s?.updated?.length??0,r=s?.failedCount??s?.failed?.length??0;r>0?i.show(`Updated ${o} design${o!==1?"s":""}, ${r} failed`,"warning"):i.show(`Updated ${o} design${o!==1?"s":""}`,"success"),await k()}finally{M(!1)}}})},[g,ue,i,k,x]),Lt=n.useCallback(async()=>{if(!g.length){K(!1);return}const t=ge.split(",").map(r=>r.trim()).filter(Boolean);if(!t.length){i.show("Enter at least one tag","error");return}const s=t.find(r=>r.length>50);if(s){i.show(`Tag "${s.slice(0,20)}..." exceeds 50 character limit`,"error");return}const o=g.length;K(!1),x({type:L.UPDATE,label:`Add tags to ${o} design${o!==1?"s":""}`,reversibility:A.FULLY_REVERSIBLE,errorMessage:"Failed to add tags",action:async()=>{M(!0);try{const r=await Zt(g,t),u=r?.updatedCount??r?.updated?.length??0,m=r?.failedCount??r?.failed?.length??0;m>0?i.show(`Tagged ${u} design${u!==1?"s":""}, ${m} failed`,"warning"):i.show(`Tagged ${u} design${u!==1?"s":""}`,"success"),await k(),Me("")}finally{M(!1)}}})},[g,ge,i,k,x]),zt=n.useCallback(t=>{te(`/reports?template=${t.id}`,"Open reports",{templateId:t.id})},[f]),$t=n.useMemo(()=>[{field:"name",headerName:"Design",renderCell:(t,s)=>{const r=xe(a,s.kind).icon;return e.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ya,{entityType:"templates",entityId:s.id,initialFavorite:We.has(s.id),onToggle:u=>_e(s.id,u)}),e.jsx(Ze,{children:e.jsx(r,{sx:{color:"text.secondary",fontSize:18}})}),e.jsxs(v,{children:[e.jsx(h,{sx:{fontWeight:500,fontSize:"0.8125rem",color:"text.primary"},children:t||s.id}),e.jsx(h,{sx:{fontSize:"0.75rem",color:"text.secondary"},children:s.description||`${s.kind?.toUpperCase()||"PDF"} Design`})]})]})}},{field:"kind",headerName:"Type",width:100,renderCell:t=>{const s=xe(a,t);return e.jsx(wa,{label:t?.toUpperCase()||"PDF",size:"small",kindColor:s.color,kindBg:s.bgColor})}},{field:"status",headerName:"Status",width:120,renderCell:t=>{const s=Ma(a,t);return e.jsx(Ia,{label:t||"approved",size:"small",statusColor:s.color,statusBg:s.bgColor})}},{field:"mappingKeys",headerName:"Fields",width:80,renderCell:(t,s)=>{const o=Array.isArray(t)?t.length:Array.isArray(s.mappingKeys)?s.mappingKeys.length:s.tokens_count;return e.jsx(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o||"-"})}},{field:"tags",headerName:"Tags",width:180,renderCell:t=>{const s=Array.isArray(t)?t:[];return s.length?e.jsxs(D,{direction:"row",spacing:.5,sx:{flexWrap:"wrap"},children:[s.slice(0,2).map(o=>e.jsx(Aa,{label:o,size:"small"},o)),s.length>2&&e.jsxs(h,{variant:"caption",color:"text.secondary",children:["+",s.length-2]})]}):e.jsx(h,{sx:{fontSize:"0.75rem",color:"text.disabled"},children:"-"})}},{field:"createdAt",headerName:"Created",width:140,renderCell:(t,s)=>{const o=t||s.created_at;return e.jsx(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o?new Date(o).toLocaleDateString():"-"})}},{field:"lastRunAt",headerName:"Last Run",width:140,renderCell:(t,s)=>{const o=t||s.last_run_at;return e.jsx(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o?new Date(o).toLocaleDateString():"-"})}},{field:"updatedAt",headerName:"Updated",width:140,renderCell:(t,s)=>{const o=t||s.updated_at;return e.jsx(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o?new Date(o).toLocaleDateString():"-"})}}],[a,We,_e]),Rt=n.useMemo(()=>{const t=[{key:"kind",label:"Type",options:[{value:"pdf",label:"PDF"},{value:"excel",label:"Excel"}]},{key:"status",label:"Status",options:[{value:"approved",label:"Approved"},{value:"pending",label:"Pending"},{value:"draft",label:"Draft"},{value:"archived",label:"Archived"}]}];return pe.length>0&&t.push({key:"tags",label:"Tag",options:pe.map(s=>({value:s,label:s})),matchFn:(s,o)=>(Array.isArray(s.tags)?s.tags:[]).includes(o)}),t},[pe]),Mt=n.useMemo(()=>[{label:"Update Status",icon:e.jsx(ka,{sx:{fontSize:16}}),onClick:()=>H(!0),disabled:S},{label:"Add Tags",icon:e.jsx(ja,{sx:{fontSize:16}}),onClick:()=>K(!0),disabled:S}],[S]);return e.jsxs(Ta,{children:[(E||F)&&e.jsxs(D,{direction:"row",spacing:1,sx:{mb:1.5,flexWrap:"wrap"},children:[E&&e.jsx(Ge,{label:`Type: ${E.toUpperCase()}`,onDelete:()=>Ne("kind"),size:"small"}),F&&e.jsx(Ge,{label:`Status: ${F}`,onDelete:()=>Ne("status"),size:"small"})]}),e.jsx(v,{sx:{mb:2},children:e.jsx(Ca,{})}),e.jsx(ba,{title:"Report Designs",subtitle:"Upload and manage your report designs",columns:$t,data:mt,loading:Ce,searchPlaceholder:"Search designs...",filters:Rt,actions:[{label:"Upload Design",icon:e.jsx(Xt,{sx:{fontSize:18}}),variant:"contained",onClick:Ve},{label:"Import Backup",icon:e.jsx(Sa,{sx:{fontSize:18}}),variant:"outlined",onClick:Tt}],selectable:!0,onSelectionChange:Re,bulkActions:Mt,onBulkDelete:wt,onRowClick:zt,rowActions:t=>e.jsx(Jt,{title:"More actions",children:e.jsx(La,{size:"small",onClick:s=>xt(s,t),"aria-label":"More actions",children:e.jsx(xa,{sx:{fontSize:18}})})}),emptyState:{icon:qt,title:"No report designs yet",description:"Upload a PDF or Excel file as a report design.",actionLabel:"Upload Design",onAction:Ve}}),e.jsxs(Da,{anchorEl:Se,open:!!Se,onClose:C,children:[e.jsxs(W,{onClick:ht,children:[e.jsx(B,{children:e.jsx(ea,{sx:{fontSize:16}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Edit"})]}),e.jsxs(W,{onClick:kt,children:[e.jsx(B,{children:e.jsx(ta,{sx:{fontSize:16}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Edit Details"})]}),e.jsxs(W,{onClick:yt,children:[e.jsx(B,{children:e.jsx(aa,{sx:{fontSize:16}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Export"})]}),e.jsxs(W,{onClick:Ct,disabled:De,children:[e.jsx(B,{children:e.jsx(ha,{sx:{fontSize:16}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:De?"Duplicating...":"Duplicate"})]}),e.jsxs(W,{onClick:jt,children:[e.jsx(B,{children:e.jsx(Je,{sx:{fontSize:16}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"View Similar"})]}),e.jsxs(W,{onClick:ft,sx:{color:"text.primary"},children:[e.jsx(B,{children:e.jsx(sa,{sx:{fontSize:16,color:"text.secondary"}})}),e.jsx(U,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Delete"})]})]}),e.jsx(Ke,{open:at,onClose:()=>ie(!1),onConfirm:bt,title:"Remove Design",message:`Remove "${N?.name||N?.id}"? Past report files remain in History. You can undo this within a few seconds.`,confirmLabel:"Remove",severity:"error",loading:Ce}),e.jsx(Ke,{open:lt,onClose:()=>Y(!1),onConfirm:It,title:"Remove Designs",message:`Remove ${g.length} design${g.length!==1?"s":""}? Past report files remain in History. You can undo this within a few seconds.`,confirmLabel:"Remove",severity:"error",loading:S}),e.jsxs(Q,{open:st,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Z,{children:"Edit Design Details"}),e.jsx(q,{children:e.jsxs(D,{spacing:2,sx:{mt:1},children:[e.jsx(X,{label:"Name",value:j.name,onChange:t=>V(s=>({...s,name:t.target.value})),fullWidth:!0}),e.jsx(X,{label:"Description",value:j.description,onChange:t=>V(s=>({...s,description:t.target.value})),multiline:!0,minRows:2,fullWidth:!0}),e.jsx(X,{label:"Tags",value:j.tags,onChange:t=>V(s=>({...s,tags:t.target.value})),helperText:"Comma-separated (e.g. finance, monthly, ops)",fullWidth:!0}),e.jsxs(Qe,{fullWidth:!0,children:[e.jsx(Ye,{children:"Status"}),e.jsxs(He,{value:j.status,label:"Status",onChange:t=>V(s=>({...s,status:t.target.value})),children:[e.jsx(w,{value:"approved",children:"Approved"}),e.jsx(w,{value:"pending",children:"Pending"}),e.jsx(w,{value:"draft",children:"Draft"}),e.jsx(w,{value:"archived",children:"Archived"})]})]})]})}),e.jsxs(J,{children:[e.jsx(O,{variant:"outlined",onClick:()=>ae(!1),disabled:de,children:"Cancel"}),e.jsx(le,{onClick:vt,disabled:de||!j.name.trim(),children:de?"Saving...":"Save"})]})]}),e.jsxs(Q,{open:it,onClose:()=>H(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(Z,{children:"Update Status"}),e.jsx(q,{children:e.jsxs(D,{spacing:2,sx:{mt:1},children:[e.jsxs(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:["Update ",g.length," design",g.length!==1?"s":""," to:"]}),e.jsxs(Qe,{fullWidth:!0,children:[e.jsx(Ye,{children:"Status"}),e.jsxs(He,{value:ue,label:"Status",onChange:t=>dt(t.target.value),children:[e.jsx(w,{value:"approved",children:"Approved"}),e.jsx(w,{value:"pending",children:"Pending"}),e.jsx(w,{value:"draft",children:"Draft"}),e.jsx(w,{value:"archived",children:"Archived"})]})]})]})}),e.jsxs(J,{children:[e.jsx(O,{variant:"outlined",onClick:()=>H(!1),disabled:S,children:"Cancel"}),e.jsx(le,{onClick:At,disabled:S,children:S?"Updating...":"Update"})]})]}),e.jsxs(Q,{open:ct,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Z,{children:"Add Tags"}),e.jsx(q,{children:e.jsxs(D,{spacing:2,sx:{mt:1},children:[e.jsxs(h,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:["Add tags to ",g.length," design",g.length!==1?"s":"","."]}),e.jsx(X,{label:"Tags",value:ge,onChange:t=>Me(t.target.value),helperText:"Comma-separated (e.g. finance, monthly, ops)",fullWidth:!0})]})}),e.jsxs(J,{children:[e.jsx(O,{variant:"outlined",onClick:()=>K(!1),disabled:S,children:"Cancel"}),e.jsx(le,{onClick:Lt,disabled:S,children:S?"Updating...":"Add Tags"})]})]}),e.jsxs(Q,{open:ot,onClose:()=>!z&&se(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Z,{children:"Import Design Backup"}),e.jsx(q,{children:e.jsxs(D,{spacing:2,sx:{mt:1},children:[e.jsxs(O,{variant:"outlined",component:"label",disabled:z,children:[I?I.name:"Choose backup file (.zip)",e.jsx("input",{type:"file",hidden:!0,accept:".zip",onChange:t=>Ae(t.target.files?.[0]||null)})]}),e.jsx(X,{label:"Design Name (optional)",value:ne,onChange:t=>Le(t.target.value),fullWidth:!0,disabled:z}),z&&e.jsxs(v,{sx:{width:"100%"},children:[e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Uploading... ",$e,"%"]}),e.jsx(za,{variant:"determinate",value:$e})]})]})}),e.jsxs(J,{children:[e.jsx(O,{variant:"outlined",onClick:()=>se(!1),disabled:z,children:"Cancel"}),e.jsx(le,{onClick:Dt,disabled:z||!I,children:z?"Importing...":"Import"})]})]}),e.jsxs(Q,{open:pt,onClose:()=>oe(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(Z,{children:e.jsxs(D,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ra,{}),e.jsx("span",{children:"Similar Designs"})]})}),e.jsxs(q,{children:[e.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:['Designs similar to "',Fe?.name||Fe?.id,'"']}),gt?e.jsx(v,{sx:{py:4,textAlign:"center"},children:e.jsx(h,{color:"text.secondary",children:"Loading similar designs..."})}):Pe.length===0?e.jsx(v,{sx:{py:4,textAlign:"center"},children:e.jsx(h,{color:"text.secondary",children:"No similar designs found."})}):e.jsx(D,{spacing:1,children:Pe.map(t=>{const o=xe(a,t.kind).icon;return e.jsx($a,{onClick:()=>St(t),children:e.jsxs(D,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Ze,{children:e.jsx(o,{sx:{color:"text.secondary",fontSize:18}})}),e.jsxs(v,{sx:{flex:1},children:[e.jsx(h,{variant:"subtitle2",children:t.name||t.id}),e.jsx(h,{variant:"caption",color:"text.secondary",children:t.description||`${t.kind?.toUpperCase()||"PDF"} Design`})]}),t.similarity_score&&e.jsx(ee,{label:`${Math.round(t.similarity_score*100)}% match`,size:"small",variant:"outlined",sx:{borderRadius:8,bgcolor:r=>r.palette.mode==="dark"?l(r.palette.text.primary,.1):c[400],color:"text.secondary"}})]})},t.id)})})]}),e.jsx(J,{children:e.jsx(O,{variant:"outlined",onClick:()=>oe(!1),children:"Close"})})]})]})}function ts(){return qe(),e.jsx(Ea,{})}export{ts as default};
