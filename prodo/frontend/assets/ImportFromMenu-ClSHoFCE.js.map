{"version":3,"file":"ImportFromMenu-ClSHoFCE.js","sources":["../../node_modules/@mui/icons-material/esm/InputRounded.js","../../node_modules/@mui/icons-material/esm/MergeRounded.js","../../node_modules/@mui/icons-material/esm/SmartToyRounded.js","../../node_modules/@mui/icons-material/esm/StorageRounded.js","../../src/hooks/useIncomingTransfer.js","../../src/components/common/ImportFromMenu.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M21 3.01H3c-1.1 0-2 .9-2 2V8c0 .55.45 1 1 1s1-.45 1-1V5.99c0-.55.45-1 1-1h16c.55 0 1 .45 1 1v12.03c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V16c0-.55-.45-1-1-1s-1 .45-1 1v3.01c0 1.09.89 1.98 1.98 1.98H21c1.1 0 2-.9 2-2V5.01c0-1.1-.9-2-2-2m-9.15 12.14 2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.32-.85-.1-.85.35V11H2c-.55 0-1 .45-1 1s.45 1 1 1h9v1.79c0 .45.54.67.85.36\"\n}), 'InputRounded');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.71 7.71a.996.996 0 0 1 0-1.41l2.59-2.59c.39-.39 1.02-.39 1.41 0L15.3 6.3c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83l4.12 4.12c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L12 15.41l-4.88 4.88c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41l4.12-4.12c.75-.75 1.17-1.77 1.17-2.83v-5.1l-.88.88c-.39.39-1.02.39-1.41 0\"\n}), 'MergeRounded');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M15 17H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1m0-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13\"\n}), 'SmartToyRounded');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M4 20h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2m0-3h2v2H4zM2 6c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2m4 1H4V5h2zm-2 7h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2m0-3h2v2H4z\"\n}), 'StorageRounded');","/**\n * useIncomingTransfer – Auto-processes incoming cross-page transfers on mount.\n *\n * Usage in a consumer page:\n *\n *   useIncomingTransfer('docqa', {\n *     [TransferAction.CHAT_WITH]: async (payload) => {\n *       const session = await createSession(`Q&A: ${payload.title}`)\n *       await addDocument(session.id, { name: payload.title, content: payload.content })\n *     },\n *   })\n */\nimport { useEffect, useRef } from 'react'\nimport useCrossPageStore from '@/stores/crossPageStore'\nimport { useToast } from '@/components/ToastProvider'\nimport { FEATURE_LABELS } from '@/utils/crossPageTypes'\n\nexport default function useIncomingTransfer(featureKey, handlers) {\n  const consumeTransfer = useCrossPageStore((s) => s.consumeTransfer)\n  const toast = useToast()\n  const processedRef = useRef(false)\n  const handlersRef = useRef(handlers)\n  handlersRef.current = handlers\n\n  useEffect(() => {\n    if (processedRef.current) return\n    const transfer = consumeTransfer(featureKey)\n    if (!transfer) return\n    processedRef.current = true\n\n    const handler = handlersRef.current[transfer.action]\n    if (handler) {\n      const sourceLabel = FEATURE_LABELS[transfer.source] || transfer.source\n      Promise.resolve(handler(transfer.payload, transfer))\n        .then(() => toast.show(`Imported from ${sourceLabel}`, 'success'))\n        .catch((err) =>\n          toast.show(`Import failed: ${err?.message || 'Unknown error'}`, 'error'),\n        )\n    }\n  }, [consumeTransfer, featureKey, toast])\n}\n","/**\n * ImportFromMenu – \"Import from...\" dropdown button for consumer pages.\n *\n * Shows available outputs from other features in the output registry.\n *\n * Props:\n *   currentFeature – FeatureKey of the current page\n *   onImport       – (output) => void – callback when user selects an output\n *   label?         – button label (default: \"Import from...\")\n *   variant?       – MUI button variant (default: \"outlined\")\n *   size?          – MUI button size (default: \"small\")\n *   disabled?      – disable the button\n */\nimport { useState, useCallback } from 'react'\nimport {\n  Button,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Divider,\n} from '@mui/material'\nimport InputRoundedIcon from '@mui/icons-material/InputRounded'\nimport SmartToyRoundedIcon from '@mui/icons-material/SmartToyRounded'\nimport StorageRoundedIcon from '@mui/icons-material/StorageRounded'\nimport MergeRoundedIcon from '@mui/icons-material/MergeRounded'\nimport SummarizeRoundedIcon from '@mui/icons-material/SummarizeRounded'\nimport BarChartRoundedIcon from '@mui/icons-material/BarChartRounded'\nimport DescriptionRoundedIcon from '@mui/icons-material/DescriptionRounded'\nimport useCrossPageActions from '@/hooks/useCrossPageActions'\nimport { FEATURE_LABELS } from '@/utils/crossPageTypes'\n\nconst FEATURE_ICONS = {\n  agents: SmartToyRoundedIcon,\n  query: StorageRoundedIcon,\n  synthesis: MergeRoundedIcon,\n  summary: SummarizeRoundedIcon,\n  visualization: BarChartRoundedIcon,\n  federation: StorageRoundedIcon,\n  documents: DescriptionRoundedIcon,\n}\n\nfunction timeAgo(timestamp) {\n  if (!timestamp) return ''\n  const diff = Date.now() - timestamp\n  const mins = Math.floor(diff / 60_000)\n  if (mins < 1) return 'just now'\n  if (mins < 60) return `${mins}m ago`\n  const hours = Math.floor(mins / 60)\n  if (hours < 24) return `${hours}h ago`\n  return `${Math.floor(hours / 24)}d ago`\n}\n\nexport default function ImportFromMenu({\n  currentFeature,\n  onImport,\n  label = 'Import from\\u2026',\n  variant = 'outlined',\n  size = 'small',\n  disabled = false,\n}) {\n  const { getAvailableOutputs } = useCrossPageActions(currentFeature)\n  const [anchorEl, setAnchorEl] = useState(null)\n\n  const outputs = getAvailableOutputs()\n\n  const handleOpen = useCallback((e) => setAnchorEl(e.currentTarget), [])\n  const handleClose = useCallback(() => setAnchorEl(null), [])\n\n  const handleSelect = useCallback(\n    (output) => {\n      handleClose()\n      if (onImport) onImport(output)\n    },\n    [handleClose, onImport],\n  )\n\n  if (outputs.length === 0) return null\n\n  return (\n    <>\n      <Button\n        variant={variant}\n        size={size}\n        disabled={disabled}\n        startIcon={<InputRoundedIcon />}\n        onClick={handleOpen}\n        sx={{ textTransform: 'none', fontWeight: 500 }}\n      >\n        {label}\n      </Button>\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        slotProps={{ paper: { sx: { minWidth: 260 } } }}\n      >\n        <MenuItem disabled sx={{ opacity: '1 !important' }}>\n          <Typography variant=\"caption\" color=\"text.secondary\" fontWeight={600}>\n            Available outputs\n          </Typography>\n        </MenuItem>\n        <Divider />\n        {outputs.map((output) => {\n          const IconComp =\n            FEATURE_ICONS[output.featureKey] || DescriptionRoundedIcon\n          const sourceLabel =\n            FEATURE_LABELS[output.featureKey] || output.featureKey\n\n          return (\n            <MenuItem\n              key={`${output.featureKey}-${output.timestamp}`}\n              onClick={() => handleSelect(output)}\n            >\n              <ListItemIcon>\n                <IconComp fontSize=\"small\" />\n              </ListItemIcon>\n              <ListItemText\n                primary={\n                  <Typography variant=\"body2\" noWrap sx={{ maxWidth: 200 }}>\n                    {output.title || 'Untitled'}\n                  </Typography>\n                }\n                secondary={\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {sourceLabel} &middot; {timeAgo(output.timestamp)}\n                  </Typography>\n                }\n              />\n            </MenuItem>\n          )\n        })}\n      </Menu>\n    </>\n  )\n}\n"],"names":["InputRoundedIcon","createSvgIcon","_jsx","MergeRoundedIcon","SmartToyRoundedIcon","StorageRoundedIcon","useIncomingTransfer","featureKey","handlers","consumeTransfer","useCrossPageStore","s","toast","useToast","processedRef","useRef","handlersRef","useEffect","transfer","handler","sourceLabel","FEATURE_LABELS","err","FEATURE_ICONS","SummarizeRoundedIcon","BarChartRoundedIcon","DescriptionRoundedIcon","timeAgo","timestamp","diff","mins","hours","ImportFromMenu","currentFeature","onImport","label","variant","size","disabled","getAvailableOutputs","useCrossPageActions","anchorEl","setAnchorEl","useState","outputs","handleOpen","useCallback","handleClose","handleSelect","output","jsxs","Fragment","jsx","Button","Menu","MenuItem","Typography","Divider","IconComp","ListItemIcon","ListItemText"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}