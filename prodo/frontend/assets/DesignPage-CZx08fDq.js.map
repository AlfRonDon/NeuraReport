{"version":3,"file":"DesignPage-CZx08fDq.js","sources":["../../node_modules/@mui/icons-material/esm/Accessibility.js","../../node_modules/@mui/icons-material/esm/Brush.js","../../node_modules/@mui/icons-material/esm/DarkMode.js","../../node_modules/@mui/icons-material/esm/FileDownload.js","../../node_modules/@mui/icons-material/esm/FileUpload.js","../../node_modules/@mui/icons-material/esm/LightMode.js","../../src/api/design.js","../../src/stores/designStore.js","../../src/features/design/containers/DesignPageContainer.jsx","../../src/pages/design/DesignPage.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m9 7h-6v13h-2v-6h-2v6H9V9H3V7h18z\"\n}), 'Accessibility');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3m13.71-9.37-1.34-1.34a.996.996 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41\"\n}), 'Brush');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1\"\n}), 'DarkMode');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z\"\n}), 'FileDownload');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\"\n}), 'FileUpload');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z\"\n}), 'LightMode');","/**\n * Design API Client\n * Handles brand kits, themes, and design system operations.\n */\nimport { api } from './client';\n\nfunction asArray(payload, keys = []) {\n  if (Array.isArray(payload)) return payload;\n  if (!payload || typeof payload !== 'object') return [];\n  for (const key of keys) {\n    if (Array.isArray(payload[key])) return payload[key];\n  }\n  return [];\n}\n\n// ============================================\n// Brand Kits\n// ============================================\n\nexport async function createBrandKit(data) {\n  const response = await api.post('/design/brand-kits', data);\n  return response.data;\n}\n\nexport async function getBrandKit(brandKitId) {\n  const response = await api.get(`/design/brand-kits/${brandKitId}`);\n  return response.data;\n}\n\nexport async function listBrandKits({ limit, offset } = {}) {\n  const params = {};\n  if (limit != null) params.limit = limit;\n  if (offset != null) params.offset = offset;\n  const response = await api.get('/design/brand-kits', { params });\n  return asArray(response.data, ['brand_kits', 'kits', 'items', 'results']);\n}\n\nexport async function updateBrandKit(brandKitId, data) {\n  const response = await api.put(`/design/brand-kits/${brandKitId}`, data);\n  return response.data;\n}\n\nexport async function deleteBrandKit(brandKitId) {\n  const response = await api.delete(`/design/brand-kits/${brandKitId}`);\n  return response.data;\n}\n\nexport async function setDefaultBrandKit(brandKitId) {\n  const response = await api.post(`/design/brand-kits/${brandKitId}/set-default`);\n  return response.data;\n}\n\nexport async function applyBrandKit(brandKitId, documentId) {\n  const response = await api.post(`/design/brand-kits/${brandKitId}/apply`, {\n    document_id: documentId,\n  });\n  return response.data;\n}\n\n// ============================================\n// Themes\n// ============================================\n\nexport async function createTheme(data) {\n  const response = await api.post('/design/themes', data);\n  return response.data;\n}\n\nexport async function getTheme(themeId) {\n  const response = await api.get(`/design/themes/${themeId}`);\n  return response.data;\n}\n\nexport async function listThemes({ limit, offset } = {}) {\n  const params = {};\n  if (limit != null) params.limit = limit;\n  if (offset != null) params.offset = offset;\n  const response = await api.get('/design/themes', { params });\n  return asArray(response.data, ['themes', 'items', 'results']);\n}\n\nexport async function updateTheme(themeId, data) {\n  const response = await api.put(`/design/themes/${themeId}`, data);\n  return response.data;\n}\n\nexport async function deleteTheme(themeId) {\n  const response = await api.delete(`/design/themes/${themeId}`);\n  return response.data;\n}\n\nexport async function setActiveTheme(themeId) {\n  const response = await api.post(`/design/themes/${themeId}/activate`);\n  return response.data;\n}\n\n// ============================================\n// Color Palettes\n// ============================================\n\nexport async function generateColorPalette(baseColor, harmonyType = 'complementary', count = 5) {\n  const response = await api.post('/design/color-palette', {\n    base_color: baseColor,\n    harmony_type: harmonyType, // 'complementary', 'analogous', 'triadic', 'split-complementary', 'tetradic'\n    count,\n  });\n  return response.data;\n}\n\nexport async function getColorContrast(color1, color2) {\n  const response = await api.post('/design/colors/contrast', {\n    color1,\n    color2,\n  });\n  return response.data;\n}\n\nexport async function suggestAccessibleColors(backgroundColor) {\n  const response = await api.post('/design/colors/accessible', {\n    background_color: backgroundColor,\n  });\n  return response.data;\n}\n\n// ============================================\n// Typography\n// ============================================\n\nexport async function listFonts() {\n  const response = await api.get('/design/fonts');\n  return asArray(response.data, ['fonts', 'items', 'results']);\n}\n\nexport async function getFontPairings(primaryFont) {\n  const response = await api.get('/design/fonts/pairings', {\n    params: { primary: primaryFont },\n  });\n  return response.data;\n}\n\n// ============================================\n// Assets\n// ============================================\n\nexport async function uploadLogo(file, brandKitId) {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('brand_kit_id', brandKitId);\n\n  const response = await api.post('/design/assets/logo', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n  return response.data;\n}\n\nexport async function listAssets(brandKitId) {\n  const response = await api.get(`/design/brand-kits/${brandKitId}/assets`);\n  return asArray(response.data, ['assets', 'items', 'results']);\n}\n\nexport async function deleteAsset(assetId) {\n  const response = await api.delete(`/design/assets/${assetId}`);\n  return response.data;\n}\n\n// ============================================\n// Export\n// ============================================\n\nexport async function exportBrandKit(brandKitId, format = 'json') {\n  const response = await api.get(`/design/brand-kits/${brandKitId}/export`, {\n    params: { format },\n  });\n  return response.data;\n}\n\nexport async function getBrandKitCss(brandKitId) {\n  const response = await api.get(`/design/brand-kits/${brandKitId}/css`);\n  return response.data;\n}\n\nexport async function getDefaultBrandKitCss() {\n  const response = await api.get('/design/brand-kits/default/css');\n  return response.data;\n}\n\nexport async function importBrandKit(data) {\n  const response = await api.post('/design/brand-kits/import', data);\n  return response.data;\n}\n","/**\n * Design Store - Zustand store for brand kits, themes, and design system.\n */\nimport { create } from 'zustand';\nimport * as designApi from '../api/design';\n\nconst useDesignStore = create((set, get) => ({\n  // State\n  brandKits: [],\n  themes: [],\n  currentBrandKit: null,\n  currentTheme: null,\n  defaultBrandKit: null,\n  activeTheme: null,\n  fonts: [],\n  loading: false,\n  error: null,\n\n  // Actions\n  setLoading: (loading) => set({ loading }),\n  setError: (error) => set({ error }),\n\n  // Brand Kits\n  createBrandKit: async (data) => {\n    set({ loading: true, error: null });\n    try {\n      const brandKit = await designApi.createBrandKit(data);\n      set((state) => ({\n        brandKits: [brandKit, ...state.brandKits],\n        currentBrandKit: brandKit,\n        loading: false,\n      }));\n      return brandKit;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  fetchBrandKits: async () => {\n    set({ loading: true, error: null });\n    try {\n      const brandKits = await designApi.listBrandKits();\n      const defaultKit = brandKits.find((k) => k.is_default);\n      set({\n        brandKits: brandKits || [],\n        defaultBrandKit: defaultKit || null,\n        loading: false\n      });\n      return brandKits;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  getBrandKit: async (brandKitId) => {\n    set({ loading: true, error: null });\n    try {\n      const brandKit = await designApi.getBrandKit(brandKitId);\n      set({ currentBrandKit: brandKit, loading: false });\n      return brandKit;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  updateBrandKit: async (brandKitId, data) => {\n    set({ loading: true, error: null });\n    try {\n      const brandKit = await designApi.updateBrandKit(brandKitId, data);\n      set((state) => ({\n        brandKits: state.brandKits.map((k) => (k.id === brandKitId ? brandKit : k)),\n        currentBrandKit: state.currentBrandKit?.id === brandKitId ? brandKit : state.currentBrandKit,\n        loading: false,\n      }));\n      return brandKit;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  deleteBrandKit: async (brandKitId) => {\n    set({ loading: true, error: null });\n    try {\n      await designApi.deleteBrandKit(brandKitId);\n      set((state) => ({\n        brandKits: state.brandKits.filter((k) => k.id !== brandKitId),\n        currentBrandKit: state.currentBrandKit?.id === brandKitId ? null : state.currentBrandKit,\n        loading: false,\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  setDefaultBrandKit: async (brandKitId) => {\n    set({ loading: true, error: null });\n    try {\n      await designApi.setDefaultBrandKit(brandKitId);\n      set((state) => {\n        const updatedBrandKits = state.brandKits.map((k) => ({\n          ...k,\n          is_default: k.id === brandKitId,\n        }));\n        return {\n          brandKits: updatedBrandKits,\n          defaultBrandKit: updatedBrandKits.find((k) => k.id === brandKitId) || null,\n          loading: false,\n        };\n      });\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  applyBrandKit: async (brandKitId, documentId) => {\n    set({ loading: true, error: null });\n    try {\n      const result = await designApi.applyBrandKit(brandKitId, documentId);\n      set({ loading: false });\n      return result;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Themes\n  createTheme: async (data) => {\n    set({ loading: true, error: null });\n    try {\n      const theme = await designApi.createTheme(data);\n      set((state) => ({\n        themes: [theme, ...state.themes],\n        currentTheme: theme,\n        loading: false,\n      }));\n      return theme;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  fetchThemes: async () => {\n    set({ loading: true, error: null });\n    try {\n      const themes = await designApi.listThemes();\n      const active = themes.find((t) => t.is_active);\n      set({\n        themes: themes || [],\n        activeTheme: active || null,\n        loading: false\n      });\n      return themes;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  getTheme: async (themeId) => {\n    set({ loading: true, error: null });\n    try {\n      const theme = await designApi.getTheme(themeId);\n      set({ currentTheme: theme, loading: false });\n      return theme;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  updateTheme: async (themeId, data) => {\n    set({ loading: true, error: null });\n    try {\n      const theme = await designApi.updateTheme(themeId, data);\n      set((state) => ({\n        themes: state.themes.map((t) => (t.id === themeId ? theme : t)),\n        currentTheme: state.currentTheme?.id === themeId ? theme : state.currentTheme,\n        loading: false,\n      }));\n      return theme;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  deleteTheme: async (themeId) => {\n    set({ loading: true, error: null });\n    try {\n      await designApi.deleteTheme(themeId);\n      set((state) => ({\n        themes: state.themes.filter((t) => t.id !== themeId),\n        currentTheme: state.currentTheme?.id === themeId ? null : state.currentTheme,\n        loading: false,\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  setActiveTheme: async (themeId) => {\n    set({ loading: true, error: null });\n    try {\n      await designApi.setActiveTheme(themeId);\n      set((state) => {\n        const updatedThemes = state.themes.map((t) => ({\n          ...t,\n          is_active: t.id === themeId,\n        }));\n        return {\n          themes: updatedThemes,\n          activeTheme: updatedThemes.find((t) => t.id === themeId) || null,\n          loading: false,\n        };\n      });\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  // Color Palettes\n  generateColorPalette: async (baseColor, scheme = 'complementary') => {\n    set({ loading: true, error: null });\n    try {\n      const palette = await designApi.generateColorPalette(baseColor, scheme);\n      set({ loading: false });\n      return palette;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Typography\n  fetchFonts: async () => {\n    try {\n      const fonts = await designApi.listFonts();\n      set({ fonts: fonts || [] });\n      return fonts;\n    } catch (err) {\n      set({ error: err.message });\n      return [];\n    }\n  },\n\n  getFontPairings: async (primaryFont) => {\n    try {\n      const pairings = await designApi.getFontPairings(primaryFont);\n      return pairings;\n    } catch (err) {\n      set({ error: err.message });\n      return [];\n    }\n  },\n\n  // Assets\n  uploadLogo: async (file, brandKitId) => {\n    set({ loading: true, error: null });\n    try {\n      const result = await designApi.uploadLogo(file, brandKitId);\n      // Refresh brand kit to get updated logo\n      await get().getBrandKit(brandKitId);\n      set({ loading: false });\n      return result;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Accessibility\n  getColorContrast: async (foreground, background) => {\n    try {\n      const result = await designApi.getColorContrast(foreground, background);\n      return result;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  suggestAccessibleColors: async (baseColor, options = {}) => {\n    try {\n      const result = await designApi.suggestAccessibleColors(baseColor, options);\n      return result;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  // Assets\n  fetchAssets: async (brandKitId = null) => {\n    set({ loading: true, error: null });\n    try {\n      const assets = await designApi.listAssets(brandKitId);\n      set({ loading: false });\n      return assets;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  deleteAsset: async (assetId) => {\n    set({ loading: true, error: null });\n    try {\n      await designApi.deleteAsset(assetId);\n      set({ loading: false });\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  // Export/Import\n  exportBrandKit: async (brandKitId, format = 'json') => {\n    try {\n      const data = await designApi.exportBrandKit(brandKitId, format);\n      return data;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  importBrandKit: async (data) => {\n    set({ loading: true, error: null });\n    try {\n      const brandKit = await designApi.importBrandKit(data);\n      set((state) => ({\n        brandKits: [brandKit, ...state.brandKits],\n        loading: false,\n      }));\n      return brandKit;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Reset\n  reset: () => set({\n    currentBrandKit: null,\n    currentTheme: null,\n    error: null,\n  }),\n}));\n\nexport default useDesignStore;\n","/**\n * Design Page Container\n * Brand kit and theme management interface with color tools and typography explorer.\n */\nimport React, { useState, useEffect, useCallback, useRef } from 'react'\nimport {\n  Box,\n  Typography,\n  Button,\n  TextField,\n  Paper,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Chip,\n  Alert,\n  CircularProgress,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Tabs,\n  Tab,\n  Divider,\n  MenuItem,\n  Tooltip,\n  Collapse,\n  Stack,\n  InputAdornment,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport { neutral, primary } from '@/app/theme'\nimport {\n  Palette as PaletteIcon,\n  Brush as BrushIcon,\n  FormatColorFill as ColorIcon,\n  TextFields as FontIcon,\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  Check as CheckIcon,\n  Star as DefaultIcon,\n  Download as DownloadIcon,\n  Upload as UploadIcon,\n  ContentCopy as CopyIcon,\n  Contrast as ContrastIcon,\n  Accessibility as A11yIcon,\n  Close as CloseIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  FileDownload as ExportIcon,\n  FileUpload as ImportIcon,\n  DarkMode as DarkModeIcon,\n  LightMode as LightModeIcon,\n} from '@mui/icons-material'\nimport useDesignStore from '@/stores/designStore'\nimport useSharedData from '@/hooks/useSharedData'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  height: 'calc(100vh - 64px)',\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst Header = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(2, 3),\n  borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.8),\n}))\n\nconst ContentArea = styled(Box)(({ theme }) => ({\n  flex: 1,\n  padding: theme.spacing(3),\n  overflow: 'auto',\n}))\n\nconst BrandKitCard = styled(Card)(({ theme, isDefault }) => ({\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  border: isDefault\n    ? `2px solid ${theme.palette.mode === 'dark' ? neutral[500] : neutral[700]}`\n    : `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: `0 8px 24px ${alpha(theme.palette.text.primary, 0.15)}`,\n  },\n}))\n\nconst ColorSwatch = styled(Box)(({ color: bgColor, size = 40 }) => ({\n  width: size,\n  height: size,\n  borderRadius: 8,\n  backgroundColor: bgColor,\n  border: '2px solid rgba(0,0,0,0.1)',\n  cursor: 'pointer',\n  transition: 'transform 0.2s',\n  flexShrink: 0,\n  '&:hover': {\n    transform: 'scale(1.1)',\n  },\n}))\n\nconst ThemeCard = styled(Paper)(({ theme, isActive }) => ({\n  padding: theme.spacing(2),\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  border: isActive\n    ? `2px solid ${theme.palette.mode === 'dark' ? neutral[500] : neutral[700]}`\n    : `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '&:hover': {\n    backgroundColor:\n      theme.palette.mode === 'dark'\n        ? alpha(theme.palette.text.primary, 0.05)\n        : neutral[50],\n  },\n}))\n\nconst ActionButton = styled(Button)(() => ({\n  borderRadius: 8,\n  textTransform: 'none',\n  fontWeight: 500,\n}))\n\nconst ContrastBar = styled(Box)(({ ratio }) => {\n  const pct = Math.min((ratio / 21) * 100, 100)\n  const hue = ratio >= 7 ? 120 : ratio >= 4.5 ? 60 : 0\n  return {\n    height: 8,\n    borderRadius: 4,\n    background: `linear-gradient(90deg, hsl(${hue},70%,50%) ${pct}%, transparent ${pct}%)`,\n    backgroundColor: 'rgba(0,0,0,0.08)',\n    width: '100%',\n  }\n})\n\nconst FontSample = styled(Typography)(({ fontFamily }) => ({\n  fontFamily: `\"${fontFamily}\", sans-serif`,\n  lineHeight: 1.4,\n}))\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nconst COLOR_SCHEMES = [\n  { name: 'Complementary', value: 'complementary', desc: 'Opposite on the color wheel' },\n  { name: 'Analogous', value: 'analogous', desc: 'Adjacent colors' },\n  { name: 'Triadic', value: 'triadic', desc: 'Three equally spaced' },\n  { name: 'Split-Comp.', value: 'split-complementary', desc: 'Complementary with neighbors' },\n  { name: 'Tetradic', value: 'tetradic', desc: 'Four colors in rectangle' },\n]\n\nconst EMPTY_KIT_FORM = {\n  name: '',\n  description: '',\n  primary_color: '#1976d2',\n  secondary_color: '#dc004e',\n  accent_color: '#ff9800',\n  text_color: '#333333',\n  background_color: '#ffffff',\n  font_family: 'Inter',\n  heading_font: '',\n  body_font: '',\n}\n\nconst EMPTY_THEME_FORM = {\n  name: '',\n  description: '',\n  mode: 'light',\n  primary: '#1976d2',\n  secondary: '#dc004e',\n  background: '#ffffff',\n  surface: '#f5f5f5',\n  text: '#333333',\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function DesignPageContainer() {\n  const theme = useTheme()\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const { templates } = useSharedData()\n  const importRef = useRef(null)\n  const {\n    brandKits,\n    themes,\n    fonts,\n    loading,\n    error,\n    fetchBrandKits,\n    fetchThemes,\n    fetchFonts,\n    createBrandKit,\n    updateBrandKit,\n    deleteBrandKit,\n    setDefaultBrandKit,\n    createTheme,\n    deleteTheme,\n    setActiveTheme,\n    generateColorPalette,\n    getColorContrast,\n    suggestAccessibleColors,\n    getFontPairings,\n    exportBrandKit,\n    importBrandKit,\n    reset,\n  } = useDesignStore()\n\n  // --- Tab state ---\n  const [activeTab, setActiveTab] = useState(0) // 0: Brand Kits, 1: Themes, 2: Color Tools, 3: Typography\n\n  // --- Brand Kit dialog state ---\n  const [kitDialogOpen, setKitDialogOpen] = useState(false)\n  const [kitDialogMode, setKitDialogMode] = useState('create') // 'create' | 'edit'\n  const [editingKitId, setEditingKitId] = useState(null)\n  const [kitForm, setKitForm] = useState({ ...EMPTY_KIT_FORM })\n  const [kitFormExpanded, setKitFormExpanded] = useState(false)\n\n  // --- Theme dialog state ---\n  const [themeDialogOpen, setThemeDialogOpen] = useState(false)\n  const [themeForm, setThemeForm] = useState({ ...EMPTY_THEME_FORM })\n\n  // --- Color tools state ---\n  const [baseColor, setBaseColor] = useState(primary[500])\n  const [colorScheme, setColorScheme] = useState('complementary')\n  const [generatedPalette, setGeneratedPalette] = useState(null)\n  const [contrastFg, setContrastFg] = useState('#000000')\n  const [contrastBg, setContrastBg] = useState('#ffffff')\n  const [contrastResult, setContrastResult] = useState(null)\n  const [a11yBg, setA11yBg] = useState('#1976d2')\n  const [a11ySuggestions, setA11ySuggestions] = useState(null)\n\n  // --- Typography state ---\n  const [selectedFont, setSelectedFont] = useState('')\n  const [fontPairings, setFontPairings] = useState(null)\n  const [fontFilter, setFontFilter] = useState('')\n\n  useEffect(() => {\n    fetchBrandKits()\n    fetchThemes()\n    fetchFonts()\n    return () => reset()\n  }, [fetchBrandKits, fetchFonts, fetchThemes, reset])\n\n  // =========================================================================\n  // BRAND KIT HANDLERS\n  // =========================================================================\n\n  const openCreateKit = () => {\n    setKitDialogMode('create')\n    setEditingKitId(null)\n    setKitForm({ ...EMPTY_KIT_FORM })\n    setKitFormExpanded(false)\n    setKitDialogOpen(true)\n  }\n\n  const openEditKit = (kit) => {\n    setKitDialogMode('edit')\n    setEditingKitId(kit.id)\n    setKitForm({\n      name: kit.name || '',\n      description: kit.description || '',\n      primary_color: kit.primary_color || '#1976d2',\n      secondary_color: kit.secondary_color || '#dc004e',\n      accent_color: kit.accent_color || '#ff9800',\n      text_color: kit.text_color || '#333333',\n      background_color: kit.background_color || '#ffffff',\n      font_family: kit.typography?.font_family || 'Inter',\n      heading_font: kit.typography?.heading_font || '',\n      body_font: kit.typography?.body_font || '',\n    })\n    setKitFormExpanded(true)\n    setKitDialogOpen(true)\n  }\n\n  const handleSaveKit = useCallback(async () => {\n    if (!kitForm.name.trim()) return\n\n    const payload = {\n      name: kitForm.name,\n      description: kitForm.description || undefined,\n      primary_color: kitForm.primary_color,\n      secondary_color: kitForm.secondary_color,\n      accent_color: kitForm.accent_color,\n      text_color: kitForm.text_color,\n      background_color: kitForm.background_color,\n      typography: {\n        font_family: kitForm.font_family || 'Inter',\n        heading_font: kitForm.heading_font || undefined,\n        body_font: kitForm.body_font || undefined,\n      },\n    }\n\n    const isEdit = kitDialogMode === 'edit'\n    return execute({\n      type: isEdit ? InteractionType.UPDATE : InteractionType.CREATE,\n      label: isEdit ? 'Update brand kit' : 'Create brand kit',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'design', name: kitForm.name },\n      action: async () => {\n        if (isEdit) {\n          await updateBrandKit(editingKitId, payload)\n          toast.show('Brand kit updated', 'success')\n        } else {\n          await createBrandKit(payload)\n          toast.show('Brand kit created', 'success')\n        }\n        setKitDialogOpen(false)\n      },\n    })\n  }, [kitForm, kitDialogMode, editingKitId, createBrandKit, updateBrandKit, execute, toast])\n\n  const handleDeleteKit = useCallback(\n    async (kitId) => {\n      return execute({\n        type: InteractionType.DELETE,\n        label: 'Delete brand kit',\n        reversibility: Reversibility.SYSTEM_MANAGED,\n        intent: { source: 'design', brandKitId: kitId },\n        action: async () => {\n          await deleteBrandKit(kitId)\n          toast.show('Brand kit deleted', 'success')\n        },\n      })\n    },\n    [deleteBrandKit, execute, toast],\n  )\n\n  const handleSetDefault = useCallback(\n    async (kitId) => {\n      return execute({\n        type: InteractionType.UPDATE,\n        label: 'Set default brand kit',\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        intent: { source: 'design', brandKitId: kitId },\n        action: async () => {\n          await setDefaultBrandKit(kitId)\n          toast.show('Default brand kit updated', 'success')\n        },\n      })\n    },\n    [execute, setDefaultBrandKit, toast],\n  )\n\n  const handleExportKit = useCallback(\n    async (kitId) => {\n      const data = await exportBrandKit(kitId)\n      if (data) {\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `brand-kit-${kitId}.json`\n        a.click()\n        URL.revokeObjectURL(url)\n        toast.show('Brand kit exported', 'success')\n      }\n    },\n    [exportBrandKit, toast],\n  )\n\n  const handleImportKit = useCallback(\n    async (evt) => {\n      const file = evt.target.files?.[0]\n      if (!file) return\n      try {\n        const text = await file.text()\n        const data = JSON.parse(text)\n        // The exported format wraps the kit in { brand_kit: {...} }\n        const kitData = data.brand_kit || data\n        await execute({\n          type: InteractionType.CREATE,\n          label: 'Import brand kit',\n          reversibility: Reversibility.SYSTEM_MANAGED,\n          intent: { source: 'design', action: 'import' },\n          action: async () => {\n            await importBrandKit(kitData)\n            toast.show('Brand kit imported', 'success')\n          },\n        })\n      } catch {\n        toast.show('Invalid brand kit file', 'error')\n      }\n      // Reset file input\n      evt.target.value = ''\n    },\n    [execute, importBrandKit, toast],\n  )\n\n  // =========================================================================\n  // THEME HANDLERS\n  // =========================================================================\n\n  const openCreateTheme = () => {\n    setThemeForm({ ...EMPTY_THEME_FORM })\n    setThemeDialogOpen(true)\n  }\n\n  const handleSaveTheme = useCallback(async () => {\n    if (!themeForm.name.trim()) return\n\n    return execute({\n      type: InteractionType.CREATE,\n      label: 'Create theme',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'design', name: themeForm.name },\n      action: async () => {\n        await createTheme({\n          name: themeForm.name,\n          description: themeForm.description || undefined,\n          mode: themeForm.mode,\n          colors: {\n            primary: themeForm.primary,\n            secondary: themeForm.secondary,\n            background: themeForm.background,\n            surface: themeForm.surface,\n            text: themeForm.text,\n          },\n        })\n        toast.show('Theme created', 'success')\n        setThemeDialogOpen(false)\n      },\n    })\n  }, [createTheme, execute, themeForm, toast])\n\n  const handleDeleteTheme = useCallback(\n    async (themeId) => {\n      return execute({\n        type: InteractionType.DELETE,\n        label: 'Delete theme',\n        reversibility: Reversibility.SYSTEM_MANAGED,\n        intent: { source: 'design', themeId },\n        action: async () => {\n          await deleteTheme(themeId)\n          toast.show('Theme deleted', 'success')\n        },\n      })\n    },\n    [deleteTheme, execute, toast],\n  )\n\n  const handleActivateTheme = useCallback(\n    async (themeId) => {\n      return execute({\n        type: InteractionType.UPDATE,\n        label: 'Activate theme',\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        intent: { source: 'design', themeId },\n        action: async () => {\n          await setActiveTheme(themeId)\n          toast.show('Theme activated', 'success')\n        },\n      })\n    },\n    [execute, setActiveTheme, toast],\n  )\n\n  // =========================================================================\n  // COLOR TOOL HANDLERS\n  // =========================================================================\n\n  const handleGeneratePalette = useCallback(async () => {\n    return execute({\n      type: InteractionType.GENERATE,\n      label: 'Generate color palette',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: { source: 'design', baseColor, colorScheme, action: 'generate_palette' },\n      action: async () => {\n        const palette = await generateColorPalette(baseColor, colorScheme)\n        if (palette) {\n          setGeneratedPalette(palette)\n          toast.show('Palette generated', 'success')\n        }\n        return palette\n      },\n    })\n  }, [baseColor, colorScheme, generateColorPalette, toast, execute])\n\n  const handleCheckContrast = useCallback(async () => {\n    const result = await getColorContrast(contrastFg, contrastBg)\n    if (result) setContrastResult(result)\n  }, [contrastFg, contrastBg, getColorContrast])\n\n  const handleSuggestA11y = useCallback(async () => {\n    const result = await suggestAccessibleColors(a11yBg)\n    if (result) setA11ySuggestions(result)\n  }, [a11yBg, suggestAccessibleColors])\n\n  // =========================================================================\n  // TYPOGRAPHY HANDLERS\n  // =========================================================================\n\n  const handleGetPairings = useCallback(\n    async (fontName) => {\n      setSelectedFont(fontName)\n      const result = await getFontPairings(fontName)\n      if (result) setFontPairings(result)\n    },\n    [getFontPairings],\n  )\n\n  const handleCopyColor = (color) => {\n    if (navigator.clipboard?.writeText) {\n      navigator.clipboard.writeText(color)\n    } else {\n      const ta = Object.assign(document.createElement('textarea'), { value: color, style: 'position:fixed;opacity:0' })\n      document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove()\n    }\n    toast.show(`Copied ${color}`, 'success')\n  }\n\n  const filteredFonts = fonts.filter(\n    (f) =>\n      !fontFilter ||\n      f.name.toLowerCase().includes(fontFilter.toLowerCase()) ||\n      f.category.toLowerCase().includes(fontFilter.toLowerCase()),\n  )\n\n  // =========================================================================\n  // RENDER\n  // =========================================================================\n\n  return (\n    <PageContainer>\n      <Header>\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <PaletteIcon sx={{ color: 'text.secondary', fontSize: 28 }} />\n            <Box>\n              <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                Brand Kit\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Colors, fonts, themes & accessibility tools\n              </Typography>\n            </Box>\n          </Box>\n          <Stack direction=\"row\" spacing={1}>\n            {activeTab === 0 && (\n              <>\n                <input\n                  type=\"file\"\n                  ref={importRef}\n                  accept=\".json\"\n                  onChange={handleImportKit}\n                  style={{ display: 'none' }}\n                />\n                <ActionButton\n                  variant=\"outlined\"\n                  size=\"small\"\n                  startIcon={<ImportIcon />}\n                  onClick={() => importRef.current?.click()}\n                >\n                  Import\n                </ActionButton>\n                <ActionButton\n                  variant=\"contained\"\n                  startIcon={<AddIcon />}\n                  onClick={openCreateKit}\n                  data-testid=\"design-create-button\"\n                >\n                  New Brand Kit\n                </ActionButton>\n              </>\n            )}\n            {activeTab === 1 && (\n              <ActionButton\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={openCreateTheme}\n                data-testid=\"design-create-theme-button\"\n              >\n                New Theme\n              </ActionButton>\n            )}\n          </Stack>\n        </Box>\n      </Header>\n\n      <ContentArea>\n        <Tabs\n          value={activeTab}\n          onChange={(_, v) => setActiveTab(v)}\n          sx={{ mb: 3 }}\n          data-testid=\"design-tabs\"\n        >\n          <Tab\n            icon={<BrushIcon />}\n            label=\"Brand Kits\"\n            iconPosition=\"start\"\n            data-testid=\"design-tab-brand-kits\"\n          />\n          <Tab\n            icon={<ColorIcon />}\n            label=\"Themes\"\n            iconPosition=\"start\"\n            data-testid=\"design-tab-themes\"\n          />\n          <Tab\n            icon={<PaletteIcon />}\n            label=\"Color Tools\"\n            iconPosition=\"start\"\n            data-testid=\"design-tab-color-tools\"\n          />\n          <Tab\n            icon={<FontIcon />}\n            label=\"Typography\"\n            iconPosition=\"start\"\n            data-testid=\"design-tab-typography\"\n          />\n        </Tabs>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => {}}>\n            {error}\n          </Alert>\n        )}\n\n        {/* =============================================================== */}\n        {/* BRAND KITS TAB                                                  */}\n        {/* =============================================================== */}\n        {activeTab === 0 && (\n          <Grid container spacing={3}>\n            {brandKits.map((kit) => (\n              <Grid item xs={12} sm={6} md={4} key={kit.id}>\n                <BrandKitCard\n                  isDefault={kit.is_default}\n                  data-testid={`brand-kit-card-${kit.id}`}\n                >\n                  <CardContent>\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        mb: 1,\n                      }}\n                    >\n                      <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                        {kit.name}\n                      </Typography>\n                      {kit.is_default && (\n                        <Chip\n                          size=\"small\"\n                          label=\"Default\"\n                          icon={<DefaultIcon />}\n                          sx={{\n                            bgcolor:\n                              theme.palette.mode === 'dark'\n                                ? alpha(theme.palette.text.primary, 0.1)\n                                : neutral[200],\n                            color: 'text.secondary',\n                          }}\n                        />\n                      )}\n                    </Box>\n\n                    {kit.description && (\n                      <Typography\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        sx={{ mb: 1.5, display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical', overflow: 'hidden' }}\n                      >\n                        {kit.description}\n                      </Typography>\n                    )}\n\n                    {/* Color strip */}\n                    <Box sx={{ display: 'flex', gap: 0.5, mb: 1.5 }}>\n                      {[\n                        kit.primary_color,\n                        kit.secondary_color,\n                        kit.accent_color,\n                        kit.text_color,\n                        kit.background_color,\n                      ]\n                        .filter(Boolean)\n                        .map((c, i) => (\n                          <Tooltip key={i} title={c} arrow>\n                            <ColorSwatch\n                              color={c}\n                              size={28}\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                handleCopyColor(c)\n                              }}\n                            />\n                          </Tooltip>\n                        ))}\n                      {kit.colors?.slice(0, 3).map((c, i) => (\n                        <Tooltip key={`extra-${i}`} title={`${c.name}: ${c.hex}`} arrow>\n                          <ColorSwatch\n                            color={c.hex}\n                            size={28}\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleCopyColor(c.hex)\n                            }}\n                          />\n                        </Tooltip>\n                      ))}\n                    </Box>\n\n                    {/* Live mini preview */}\n                    <Box\n                      sx={{\n                        mt: 1,\n                        p: 1.5,\n                        borderRadius: 1,\n                        border: '1px solid rgba(0,0,0,0.08)',\n                        backgroundColor: kit.background_color || '#ffffff',\n                        overflow: 'hidden',\n                      }}\n                    >\n                      <Typography\n                        variant=\"caption\"\n                        sx={{\n                          fontFamily: `\"${kit.typography?.heading_font || kit.typography?.font_family || 'Inter'}\", sans-serif`,\n                          fontWeight: 700,\n                          color: kit.text_color || '#333',\n                          display: 'block',\n                          fontSize: 11,\n                          mb: 0.5,\n                        }}\n                      >\n                        Report Title Preview\n                      </Typography>\n                      <Box\n                        sx={{\n                          display: 'flex',\n                          gap: 0,\n                          borderRadius: 0.5,\n                          overflow: 'hidden',\n                          mb: 0.5,\n                        }}\n                      >\n                        <Box sx={{ flex: 1, height: 16, backgroundColor: kit.primary_color, display: 'flex', alignItems: 'center', px: 0.5 }}>\n                          <Typography sx={{ fontSize: 7, color: '#fff', fontWeight: 600 }}>Header</Typography>\n                        </Box>\n                        <Box sx={{ flex: 1, height: 16, backgroundColor: kit.secondary_color, display: 'flex', alignItems: 'center', px: 0.5 }}>\n                          <Typography sx={{ fontSize: 7, color: '#fff', fontWeight: 600 }}>Column</Typography>\n                        </Box>\n                        <Box sx={{ flex: 1, height: 16, backgroundColor: kit.accent_color, display: 'flex', alignItems: 'center', px: 0.5 }}>\n                          <Typography sx={{ fontSize: 7, color: '#fff', fontWeight: 600 }}>Accent</Typography>\n                        </Box>\n                      </Box>\n                      <Typography\n                        variant=\"caption\"\n                        sx={{\n                          fontFamily: `\"${kit.typography?.body_font || kit.typography?.font_family || 'Inter'}\", sans-serif`,\n                          color: alpha(kit.text_color || '#333', 0.7),\n                          fontSize: 9,\n                          lineHeight: 1.3,\n                        }}\n                      >\n                        Body text sample in {kit.typography?.font_family || 'Inter'}\n                      </Typography>\n                    </Box>\n\n                    {/* Font info */}\n                    <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\n                      <FontIcon\n                        fontSize=\"inherit\"\n                        sx={{ mr: 0.5, verticalAlign: 'middle' }}\n                      />\n                      {kit.typography?.font_family || 'Inter'}\n                      {kit.typography?.heading_font &&\n                        ` / ${kit.typography.heading_font}`}\n                    </Typography>\n                  </CardContent>\n                  <CardActions sx={{ px: 2, pb: 1.5 }}>\n                    {!kit.is_default && (\n                      <Button\n                        size=\"small\"\n                        onClick={() => handleSetDefault(kit.id)}\n                        data-testid=\"set-default-brand-kit\"\n                      >\n                        Set Default\n                      </Button>\n                    )}\n                    <Box sx={{ flex: 1 }} />\n                    <Tooltip title=\"Export\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleExportKit(kit.id)}\n                      >\n                        <ExportIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                    <Tooltip title=\"Edit\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => openEditKit(kit)}\n                        data-testid=\"edit-brand-kit\"\n                      >\n                        <EditIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                    <Tooltip title=\"Delete\">\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleDeleteKit(kit.id)}\n                        data-testid=\"delete-brand-kit\"\n                        aria-label=\"Delete brand kit\"\n                      >\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                  </CardActions>\n                </BrandKitCard>\n              </Grid>\n            ))}\n\n            {brandKits.length === 0 && !loading && (\n              <Grid item xs={12}>\n                <Box sx={{ textAlign: 'center', py: 8 }}>\n                  <BrushIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n                  <Typography variant=\"h6\" color=\"text.secondary\">\n                    No brand kits yet\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Create a brand kit to define your colors, fonts, and visual identity\n                  </Typography>\n                  <ActionButton variant=\"contained\" startIcon={<AddIcon />} onClick={openCreateKit}>\n                    Create Brand Kit\n                  </ActionButton>\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n        )}\n\n        {/* =============================================================== */}\n        {/* THEMES TAB                                                      */}\n        {/* =============================================================== */}\n        {activeTab === 1 && (\n          <Grid container spacing={2}>\n            {themes.map((t) => (\n              <Grid item xs={12} sm={6} md={4} key={t.id}>\n                <ThemeCard isActive={t.is_active} data-testid={`theme-card-${t.id}`}>\n                  <Box\n                    sx={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      mb: 1,\n                    }}\n                  >\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      {t.mode === 'dark' ? (\n                        <DarkModeIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n                      ) : (\n                        <LightModeIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n                      )}\n                      <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                        {t.name}\n                      </Typography>\n                    </Box>\n                    <Stack direction=\"row\" spacing={0.5} alignItems=\"center\">\n                      {t.is_active && (\n                        <Chip size=\"small\" label=\"Active\" icon={<CheckIcon />} color=\"default\" />\n                      )}\n                    </Stack>\n                  </Box>\n\n                  {t.description && (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1.5 }}>\n                      {t.description}\n                    </Typography>\n                  )}\n\n                  <Box sx={{ display: 'flex', gap: 0.5, mb: 1.5 }}>\n                    {Object.entries(t.colors || {}).map(([name, hex]) => (\n                      <Tooltip key={name} title={`${name}: ${hex}`} arrow>\n                        <ColorSwatch\n                          color={hex}\n                          size={28}\n                          onClick={() => handleCopyColor(hex)}\n                        />\n                      </Tooltip>\n                    ))}\n                    {(!t.colors || Object.keys(t.colors).length === 0) && (\n                      <Typography variant=\"caption\" color=\"text.disabled\">\n                        No colors defined\n                      </Typography>\n                    )}\n                  </Box>\n\n                  <Chip\n                    label={t.mode || 'light'}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    sx={{ mb: 1.5 }}\n                  />\n\n                  <Divider sx={{ my: 1 }} />\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', pt: 0.5 }}>\n                    {!t.is_active ? (\n                      <Button size=\"small\" onClick={() => handleActivateTheme(t.id)} data-testid=\"activate-theme\">\n                        Activate\n                      </Button>\n                    ) : (\n                      <Box />\n                    )}\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => handleDeleteTheme(t.id)}\n                      data-testid=\"delete-theme\"\n                      aria-label=\"Delete theme\"\n                    >\n                      <DeleteIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Box>\n                </ThemeCard>\n              </Grid>\n            ))}\n\n            {themes.length === 0 && !loading && (\n              <Grid item xs={12}>\n                <Box sx={{ textAlign: 'center', py: 8 }}>\n                  <ColorIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n                  <Typography variant=\"h6\" color=\"text.secondary\">\n                    No themes yet\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Create themes to switch between visual styles for your reports\n                  </Typography>\n                  <ActionButton variant=\"contained\" startIcon={<AddIcon />} onClick={openCreateTheme}>\n                    Create Theme\n                  </ActionButton>\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n        )}\n\n        {/* =============================================================== */}\n        {/* COLOR TOOLS TAB                                                 */}\n        {/* =============================================================== */}\n        {activeTab === 2 && (\n          <Grid container spacing={3}>\n            {/* --- Palette Generator --- */}\n            <Grid item xs={12}>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 2 }}>\n                Palette Generator\n              </Typography>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Paper sx={{ p: 3 }}>\n                <TextField\n                  fullWidth\n                  label=\"Base Color\"\n                  type=\"color\"\n                  value={baseColor}\n                  onChange={(e) => setBaseColor(e.target.value)}\n                  sx={{ mb: 2 }}\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <Typography variant=\"caption\" sx={{ fontFamily: 'monospace' }}>\n                          {baseColor}\n                        </Typography>\n                      </InputAdornment>\n                    ),\n                  }}\n                />\n                <TextField\n                  fullWidth\n                  select\n                  label=\"Harmony\"\n                  value={colorScheme}\n                  onChange={(e) => setColorScheme(e.target.value)}\n                  sx={{ mb: 2 }}\n                  SelectProps={{ native: false }}\n                >\n                  {COLOR_SCHEMES.map((s) => (\n                    <MenuItem key={s.value} value={s.value}>\n                      <Box>\n                        <Typography variant=\"body2\">{s.name}</Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {s.desc}\n                        </Typography>\n                      </Box>\n                    </MenuItem>\n                  ))}\n                </TextField>\n                <ActionButton\n                  variant=\"contained\"\n                  fullWidth\n                  onClick={handleGeneratePalette}\n                  disabled={loading}\n                  data-testid=\"generate-palette-button\"\n                >\n                  Generate Palette\n                </ActionButton>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} md={8}>\n              {generatedPalette ? (\n                <Paper sx={{ p: 3 }}>\n                  <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\n                    {colorScheme.charAt(0).toUpperCase() + colorScheme.slice(1)} palette from{' '}\n                    <code>{generatedPalette.base_color}</code>\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n                    {generatedPalette.colors?.map((color, index) => {\n                      const hex = typeof color === 'string' ? color : color.hex\n                      const name = typeof color === 'string' ? `Color ${index + 1}` : color.name\n                      return (\n                        <Box key={index} sx={{ textAlign: 'center' }}>\n                          <ColorSwatch\n                            color={hex}\n                            size={60}\n                            onClick={() => handleCopyColor(hex)}\n                            data-testid={`generated-color-${index}`}\n                          />\n                          <Typography variant=\"caption\" display=\"block\" sx={{ fontFamily: 'monospace', mt: 0.5 }}>\n                            {hex}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {name}\n                          </Typography>\n                        </Box>\n                      )\n                    })}\n                  </Box>\n                </Paper>\n              ) : (\n                <Paper\n                  sx={{\n                    height: 200,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    border: `1px dashed ${alpha(theme.palette.divider, 0.3)}`,\n                    backgroundColor: 'transparent',\n                  }}\n                  elevation={0}\n                >\n                  <Typography color=\"text.secondary\">\n                    Choose a base color and harmony type, then generate\n                  </Typography>\n                </Paper>\n              )}\n            </Grid>\n\n            {/* --- Contrast Checker --- */}\n            <Grid item xs={12}>\n              <Divider sx={{ my: 1 }} />\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mt: 2, mb: 2 }}>\n                WCAG Contrast Checker\n              </Typography>\n            </Grid>\n            <Grid item xs={12} md={5}>\n              <Paper sx={{ p: 3 }}>\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <TextField\n                      fullWidth\n                      type=\"color\"\n                      label=\"Foreground\"\n                      value={contrastFg}\n                      onChange={(e) => setContrastFg(e.target.value)}\n                    />\n                    <Typography variant=\"caption\" sx={{ fontFamily: 'monospace' }}>\n                      {contrastFg}\n                    </Typography>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <TextField\n                      fullWidth\n                      type=\"color\"\n                      label=\"Background\"\n                      value={contrastBg}\n                      onChange={(e) => setContrastBg(e.target.value)}\n                    />\n                    <Typography variant=\"caption\" sx={{ fontFamily: 'monospace' }}>\n                      {contrastBg}\n                    </Typography>\n                  </Grid>\n                </Grid>\n                <ActionButton\n                  variant=\"contained\"\n                  fullWidth\n                  sx={{ mt: 2 }}\n                  onClick={handleCheckContrast}\n                  disabled={loading}\n                  data-testid=\"check-contrast-button\"\n                >\n                  Check Contrast\n                </ActionButton>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} md={7}>\n              {contrastResult ? (\n                <Paper sx={{ p: 3 }}>\n                  {/* Preview */}\n                  <Box\n                    sx={{\n                      backgroundColor: contrastResult.color2,\n                      color: contrastResult.color1,\n                      p: 3,\n                      borderRadius: 2,\n                      mb: 2,\n                      textAlign: 'center',\n                    }}\n                  >\n                    <Typography variant=\"h5\" sx={{ fontWeight: 700, mb: 0.5 }}>\n                      Sample Text\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      The quick brown fox jumps over the lazy dog\n                    </Typography>\n                  </Box>\n\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1.5 }}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700, fontFamily: 'monospace' }}>\n                      {contrastResult.contrast_ratio}:1\n                    </Typography>\n                    <ContrastBar ratio={contrastResult.contrast_ratio} />\n                  </Box>\n\n                  <Grid container spacing={1}>\n                    {[\n                      { label: 'AA Normal (4.5:1)', pass: contrastResult.wcag_aa_normal },\n                      { label: 'AA Large (3:1)', pass: contrastResult.wcag_aa_large },\n                      { label: 'AAA Normal (7:1)', pass: contrastResult.wcag_aaa_normal },\n                      { label: 'AAA Large (4.5:1)', pass: contrastResult.wcag_aaa_large },\n                    ].map(({ label, pass }) => (\n                      <Grid item xs={6} key={label}>\n                        <Chip\n                          label={label}\n                          size=\"small\"\n                          icon={pass ? <CheckIcon /> : <CloseIcon />}\n                          color={pass ? 'success' : 'default'}\n                          variant={pass ? 'filled' : 'outlined'}\n                          sx={{ width: '100%', justifyContent: 'flex-start' }}\n                        />\n                      </Grid>\n                    ))}\n                  </Grid>\n                </Paper>\n              ) : (\n                <Paper\n                  sx={{\n                    height: 200,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    border: `1px dashed ${alpha(theme.palette.divider, 0.3)}`,\n                    backgroundColor: 'transparent',\n                  }}\n                  elevation={0}\n                >\n                  <Typography color=\"text.secondary\">\n                    Pick two colors and check their WCAG contrast ratio\n                  </Typography>\n                </Paper>\n              )}\n            </Grid>\n\n            {/* --- Accessible Color Suggestions --- */}\n            <Grid item xs={12}>\n              <Divider sx={{ my: 1 }} />\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mt: 2, mb: 2 }}>\n                Accessible Color Finder\n              </Typography>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Paper sx={{ p: 3 }}>\n                <TextField\n                  fullWidth\n                  type=\"color\"\n                  label=\"Background Color\"\n                  value={a11yBg}\n                  onChange={(e) => setA11yBg(e.target.value)}\n                  sx={{ mb: 1 }}\n                />\n                <Typography variant=\"caption\" sx={{ fontFamily: 'monospace', display: 'block', mb: 2 }}>\n                  {a11yBg}\n                </Typography>\n                <ActionButton\n                  variant=\"contained\"\n                  fullWidth\n                  onClick={handleSuggestA11y}\n                  disabled={loading}\n                  data-testid=\"suggest-a11y-button\"\n                  startIcon={<A11yIcon />}\n                >\n                  Find Accessible Text Colors\n                </ActionButton>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} md={8}>\n              {a11ySuggestions ? (\n                <Paper sx={{ p: 3 }}>\n                  <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\n                    Text colors that pass WCAG AA on{' '}\n                    <Box\n                      component=\"span\"\n                      sx={{\n                        display: 'inline-block',\n                        width: 14,\n                        height: 14,\n                        borderRadius: '50%',\n                        backgroundColor: a11ySuggestions.background_color,\n                        border: '1px solid rgba(0,0,0,0.2)',\n                        verticalAlign: 'middle',\n                        mr: 0.5,\n                      }}\n                    />\n                    <code>{a11ySuggestions.background_color}</code>\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 1.5, flexWrap: 'wrap' }}>\n                    {a11ySuggestions.colors?.map((s, i) => (\n                      <Tooltip\n                        key={i}\n                        title={`${s.label}  ${s.contrast_ratio}:1`}\n                        arrow\n                      >\n                        <Box\n                          sx={{ textAlign: 'center', cursor: 'pointer' }}\n                          onClick={() => handleCopyColor(s.hex)}\n                        >\n                          <Box\n                            sx={{\n                              width: 56,\n                              height: 56,\n                              borderRadius: 2,\n                              backgroundColor: a11ySuggestions.background_color,\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              border: '1px solid rgba(0,0,0,0.1)',\n                              mb: 0.5,\n                            }}\n                          >\n                            <Typography\n                              variant=\"body2\"\n                              sx={{ fontWeight: 700, color: s.hex }}\n                            >\n                              Aa\n                            </Typography>\n                          </Box>\n                          <Typography\n                            variant=\"caption\"\n                            display=\"block\"\n                            sx={{ fontFamily: 'monospace' }}\n                          >\n                            {s.hex}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {s.contrast_ratio}:1\n                          </Typography>\n                        </Box>\n                      </Tooltip>\n                    ))}\n                    {a11ySuggestions.colors?.length === 0 && (\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        No strongly accessible text colors found for this background.\n                      </Typography>\n                    )}\n                  </Box>\n                </Paper>\n              ) : (\n                <Paper\n                  sx={{\n                    height: 160,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    border: `1px dashed ${alpha(theme.palette.divider, 0.3)}`,\n                    backgroundColor: 'transparent',\n                  }}\n                  elevation={0}\n                >\n                  <Typography color=\"text.secondary\">\n                    Pick a background color to find accessible text colors\n                  </Typography>\n                </Paper>\n              )}\n            </Grid>\n          </Grid>\n        )}\n\n        {/* =============================================================== */}\n        {/* TYPOGRAPHY TAB                                                  */}\n        {/* =============================================================== */}\n        {activeTab === 3 && (\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={5}>\n              <Paper sx={{ p: 3 }}>\n                <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 2 }}>\n                  Font Library\n                </Typography>\n                <TextField\n                  fullWidth\n                  size=\"small\"\n                  placeholder=\"Search fonts...\"\n                  value={fontFilter}\n                  onChange={(e) => setFontFilter(e.target.value)}\n                  sx={{ mb: 2 }}\n                />\n                <Box sx={{ maxHeight: 480, overflow: 'auto' }}>\n                  {filteredFonts.map((f) => (\n                    <Box\n                      key={f.name}\n                      sx={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        py: 1,\n                        px: 1.5,\n                        borderRadius: 1,\n                        cursor: 'pointer',\n                        backgroundColor:\n                          selectedFont === f.name\n                            ? alpha(theme.palette.primary.main, 0.08)\n                            : 'transparent',\n                        '&:hover': {\n                          backgroundColor: alpha(theme.palette.primary.main, 0.04),\n                        },\n                      }}\n                      onClick={() => handleGetPairings(f.name)}\n                    >\n                      <Box>\n                        <FontSample variant=\"body1\" fontFamily={f.name} sx={{ fontWeight: 600 }}>\n                          {f.name}\n                        </FontSample>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {f.category} &middot; {f.weights?.length || 0} weights\n                        </Typography>\n                      </Box>\n                      <Chip label={f.category} size=\"small\" variant=\"outlined\" />\n                    </Box>\n                  ))}\n                  {filteredFonts.length === 0 && (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ p: 2, textAlign: 'center' }}>\n                      No fonts match your search\n                    </Typography>\n                  )}\n                </Box>\n              </Paper>\n            </Grid>\n\n            <Grid item xs={12} md={7}>\n              {selectedFont && fontPairings ? (\n                <Paper sx={{ p: 3 }}>\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 1 }}>\n                    Pairing suggestions for{' '}\n                    <FontSample component=\"span\" fontFamily={selectedFont}>\n                      {selectedFont}\n                    </FontSample>\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                    Recommended body fonts to pair with your heading font\n                  </Typography>\n\n                  {fontPairings.pairings?.map((p, i) => (\n                    <Box key={i} sx={{ mb: 3 }}>\n                      <Box\n                        sx={{\n                          border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n                          borderRadius: 2,\n                          p: 2.5,\n                          mb: 1,\n                        }}\n                      >\n                        <FontSample\n                          variant=\"h5\"\n                          fontFamily={selectedFont}\n                          sx={{ fontWeight: 700, mb: 1 }}\n                        >\n                          Heading in {selectedFont}\n                        </FontSample>\n                        <FontSample\n                          variant=\"body1\"\n                          fontFamily={p.font}\n                          sx={{ color: 'text.secondary' }}\n                        >\n                          Body text in {p.font}. The quick brown fox jumps over the lazy dog.\n                          Design is not just what it looks like  design is how it works.\n                        </FontSample>\n                      </Box>\n                      <Box\n                        sx={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'space-between',\n                        }}\n                      >\n                        <Box>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {p.font}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {p.category} &middot; {p.reason}\n                          </Typography>\n                        </Box>\n                      </Box>\n                    </Box>\n                  ))}\n                </Paper>\n              ) : (\n                <Paper\n                  sx={{\n                    height: 300,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    border: `1px dashed ${alpha(theme.palette.divider, 0.3)}`,\n                    backgroundColor: 'transparent',\n                  }}\n                  elevation={0}\n                >\n                  <FontIcon sx={{ fontSize: 48, color: 'text.disabled', mb: 1 }} />\n                  <Typography color=\"text.secondary\">\n                    Select a font to see pairing suggestions\n                  </Typography>\n                </Paper>\n              )}\n\n              {/* Type scale preview */}\n              {selectedFont && (\n                <Paper sx={{ p: 3, mt: 3 }}>\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600, mb: 2 }}>\n                    Type Scale Preview\n                  </Typography>\n                  {[\n                    { label: 'Display', variant: 'h3', weight: 800 },\n                    { label: 'Heading 1', variant: 'h4', weight: 700 },\n                    { label: 'Heading 2', variant: 'h5', weight: 600 },\n                    { label: 'Heading 3', variant: 'h6', weight: 600 },\n                    { label: 'Body', variant: 'body1', weight: 400 },\n                    { label: 'Caption', variant: 'caption', weight: 400 },\n                  ].map(({ label, variant, weight }) => (\n                    <Box key={label} sx={{ display: 'flex', alignItems: 'baseline', gap: 2, mb: 1 }}>\n                      <Typography\n                        variant=\"caption\"\n                        color=\"text.secondary\"\n                        sx={{ width: 80, flexShrink: 0 }}\n                      >\n                        {label}\n                      </Typography>\n                      <FontSample variant={variant} fontFamily={selectedFont} sx={{ fontWeight: weight }}>\n                        Almost before we knew it, we had left the ground.\n                      </FontSample>\n                    </Box>\n                  ))}\n                </Paper>\n              )}\n            </Grid>\n          </Grid>\n        )}\n\n        {loading && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress size={32} />\n          </Box>\n        )}\n      </ContentArea>\n\n      {/* ================================================================= */}\n      {/* BRAND KIT CREATE / EDIT DIALOG                                    */}\n      {/* ================================================================= */}\n      <Dialog\n        open={kitDialogOpen}\n        onClose={() => setKitDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          {kitDialogMode === 'edit' ? 'Edit Brand Kit' : 'Create Brand Kit'}\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"Name\"\n            value={kitForm.name}\n            onChange={(e) => setKitForm({ ...kitForm, name: e.target.value })}\n            sx={{ mt: 2, mb: 2 }}\n            required\n          />\n          <TextField\n            fullWidth\n            label=\"Description\"\n            value={kitForm.description}\n            onChange={(e) => setKitForm({ ...kitForm, description: e.target.value })}\n            sx={{ mb: 2 }}\n            multiline\n            rows={2}\n            placeholder=\"What is this brand kit for?\"\n          />\n\n          <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n            Colors\n          </Typography>\n          <Grid container spacing={2} sx={{ mb: 2 }}>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Primary\"\n                value={kitForm.primary_color}\n                onChange={(e) => setKitForm({ ...kitForm, primary_color: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Secondary\"\n                value={kitForm.secondary_color}\n                onChange={(e) => setKitForm({ ...kitForm, secondary_color: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Accent\"\n                value={kitForm.accent_color}\n                onChange={(e) => setKitForm({ ...kitForm, accent_color: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n          </Grid>\n\n          {/* Advanced section */}\n          <Box\n            sx={{ display: 'flex', alignItems: 'center', cursor: 'pointer', mb: 1 }}\n            onClick={() => setKitFormExpanded(!kitFormExpanded)}\n          >\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontWeight: 500 }}>\n              Advanced options\n            </Typography>\n            {kitFormExpanded ? (\n              <ExpandLessIcon fontSize=\"small\" sx={{ ml: 0.5 }} />\n            ) : (\n              <ExpandMoreIcon fontSize=\"small\" sx={{ ml: 0.5 }} />\n            )}\n          </Box>\n\n          <Collapse in={kitFormExpanded}>\n            <Grid container spacing={2} sx={{ mb: 2 }}>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  type=\"color\"\n                  label=\"Text Color\"\n                  value={kitForm.text_color}\n                  onChange={(e) => setKitForm({ ...kitForm, text_color: e.target.value })}\n                  size=\"small\"\n                />\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  type=\"color\"\n                  label=\"Background\"\n                  value={kitForm.background_color}\n                  onChange={(e) => setKitForm({ ...kitForm, background_color: e.target.value })}\n                  size=\"small\"\n                />\n              </Grid>\n            </Grid>\n\n            <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n              Typography\n            </Typography>\n            <TextField\n              fullWidth\n              select\n              label=\"Primary Font\"\n              value={kitForm.font_family}\n              onChange={(e) => setKitForm({ ...kitForm, font_family: e.target.value })}\n              sx={{ mb: 2 }}\n              size=\"small\"\n              SelectProps={{ native: false }}\n            >\n              {fonts.map((f) => (\n                <MenuItem key={f.name} value={f.name}>\n                  {f.name}\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 1 }}>\n                    ({f.category})\n                  </Typography>\n                </MenuItem>\n              ))}\n              {fonts.length === 0 && (\n                <MenuItem value={kitForm.font_family}>{kitForm.font_family}</MenuItem>\n              )}\n            </TextField>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  select\n                  label=\"Heading Font\"\n                  value={kitForm.heading_font}\n                  onChange={(e) => setKitForm({ ...kitForm, heading_font: e.target.value })}\n                  size=\"small\"\n                  SelectProps={{ native: false }}\n                >\n                  <MenuItem value=\"\">\n                    <em>Same as primary</em>\n                  </MenuItem>\n                  {fonts.map((f) => (\n                    <MenuItem key={f.name} value={f.name}>\n                      {f.name}\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  fullWidth\n                  select\n                  label=\"Body Font\"\n                  value={kitForm.body_font}\n                  onChange={(e) => setKitForm({ ...kitForm, body_font: e.target.value })}\n                  size=\"small\"\n                  SelectProps={{ native: false }}\n                >\n                  <MenuItem value=\"\">\n                    <em>Same as primary</em>\n                  </MenuItem>\n                  {fonts.map((f) => (\n                    <MenuItem key={f.name} value={f.name}>\n                      {f.name}\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </Grid>\n            </Grid>\n          </Collapse>\n\n          {/* Color preview strip */}\n          <Box sx={{ mt: 2, display: 'flex', gap: 1, justifyContent: 'center' }}>\n            {[kitForm.primary_color, kitForm.secondary_color, kitForm.accent_color, kitForm.text_color, kitForm.background_color]\n              .filter(Boolean)\n              .map((c, i) => (\n                <ColorSwatch key={i} color={c} size={32} />\n              ))}\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setKitDialogOpen(false)}>Cancel</Button>\n          <Button variant=\"contained\" onClick={handleSaveKit} disabled={!kitForm.name.trim()}>\n            {kitDialogMode === 'edit' ? 'Save' : 'Create'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* ================================================================= */}\n      {/* THEME CREATE DIALOG                                               */}\n      {/* ================================================================= */}\n      <Dialog\n        open={themeDialogOpen}\n        onClose={() => setThemeDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Create Theme</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"Name\"\n            value={themeForm.name}\n            onChange={(e) => setThemeForm({ ...themeForm, name: e.target.value })}\n            sx={{ mt: 2, mb: 2 }}\n            required\n          />\n          <TextField\n            fullWidth\n            label=\"Description\"\n            value={themeForm.description}\n            onChange={(e) => setThemeForm({ ...themeForm, description: e.target.value })}\n            sx={{ mb: 2 }}\n            placeholder=\"Describe this theme...\"\n          />\n          <TextField\n            fullWidth\n            select\n            label=\"Mode\"\n            value={themeForm.mode}\n            onChange={(e) => setThemeForm({ ...themeForm, mode: e.target.value })}\n            sx={{ mb: 2 }}\n            SelectProps={{ native: false }}\n          >\n            <MenuItem value=\"light\">\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <LightModeIcon fontSize=\"small\" /> Light\n              </Box>\n            </MenuItem>\n            <MenuItem value=\"dark\">\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <DarkModeIcon fontSize=\"small\" /> Dark\n              </Box>\n            </MenuItem>\n          </TextField>\n\n          <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n            Colors\n          </Typography>\n          <Grid container spacing={2} sx={{ mb: 2 }}>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Primary\"\n                value={themeForm.primary}\n                onChange={(e) => setThemeForm({ ...themeForm, primary: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Secondary\"\n                value={themeForm.secondary}\n                onChange={(e) => setThemeForm({ ...themeForm, secondary: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Background\"\n                value={themeForm.background}\n                onChange={(e) => setThemeForm({ ...themeForm, background: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n          </Grid>\n          <Grid container spacing={2}>\n            <Grid item xs={6}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Surface\"\n                value={themeForm.surface}\n                onChange={(e) => setThemeForm({ ...themeForm, surface: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <TextField\n                fullWidth\n                type=\"color\"\n                label=\"Text\"\n                value={themeForm.text}\n                onChange={(e) => setThemeForm({ ...themeForm, text: e.target.value })}\n                size=\"small\"\n              />\n            </Grid>\n          </Grid>\n\n          {/* Preview */}\n          <Box\n            sx={{\n              mt: 2,\n              p: 2,\n              borderRadius: 2,\n              backgroundColor: themeForm.background,\n              border: '1px solid rgba(0,0,0,0.1)',\n            }}\n          >\n            <Typography variant=\"body2\" sx={{ color: themeForm.text, fontWeight: 600, mb: 0.5 }}>\n              Theme Preview\n            </Typography>\n            <Box sx={{ backgroundColor: themeForm.surface, p: 1.5, borderRadius: 1, mb: 1 }}>\n              <Typography variant=\"caption\" sx={{ color: themeForm.text }}>\n                Surface area with text\n              </Typography>\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <Box sx={{ width: 24, height: 24, borderRadius: '50%', backgroundColor: themeForm.primary }} />\n              <Box sx={{ width: 24, height: 24, borderRadius: '50%', backgroundColor: themeForm.secondary }} />\n            </Box>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setThemeDialogOpen(false)}>Cancel</Button>\n          <Button variant=\"contained\" onClick={handleSaveTheme} disabled={!themeForm.name.trim()}>\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport DesignPageContainer from '@/features/design/containers/DesignPageContainer'\n\nexport default function DesignPage() {\n  useInteraction()\n  return <DesignPageContainer />\n}\n"],"names":["A11yIcon","createSvgIcon","_jsx","BrushIcon","DarkModeIcon","ExportIcon","ImportIcon","LightModeIcon","asArray","payload","keys","key","createBrandKit","data","api","getBrandKit","brandKitId","listBrandKits","limit","offset","params","response","updateBrandKit","deleteBrandKit","setDefaultBrandKit","applyBrandKit","documentId","createTheme","getTheme","themeId","listThemes","updateTheme","deleteTheme","setActiveTheme","generateColorPalette","baseColor","harmonyType","count","getColorContrast","color1","color2","suggestAccessibleColors","backgroundColor","listFonts","getFontPairings","primaryFont","uploadLogo","file","formData","listAssets","deleteAsset","assetId","exportBrandKit","format","importBrandKit","useDesignStore","create","set","get","loading","error","brandKit","designApi.createBrandKit","state","err","brandKits","designApi.listBrandKits","defaultKit","k","designApi.getBrandKit","designApi.updateBrandKit","designApi.deleteBrandKit","designApi.setDefaultBrandKit","updatedBrandKits","result","designApi.applyBrandKit","theme","designApi.createTheme","themes","designApi.listThemes","active","t","designApi.getTheme","designApi.updateTheme","designApi.deleteTheme","designApi.setActiveTheme","updatedThemes","scheme","palette","designApi.generateColorPalette","fonts","designApi.listFonts","designApi.getFontPairings","designApi.uploadLogo","foreground","background","designApi.getColorContrast","options","designApi.suggestAccessibleColors","assets","designApi.listAssets","designApi.deleteAsset","designApi.exportBrandKit","designApi.importBrandKit","PageContainer","styled","Box","Header","alpha","ContentArea","BrandKitCard","Card","isDefault","neutral","ColorSwatch","bgColor","size","ThemeCard","Paper","isActive","ActionButton","Button","ContrastBar","ratio","pct","FontSample","Typography","fontFamily","COLOR_SCHEMES","EMPTY_KIT_FORM","EMPTY_THEME_FORM","DesignPageContainer","useTheme","toast","useToast","execute","useInteraction","useSharedData","importRef","useRef","fetchBrandKits","fetchThemes","fetchFonts","reset","activeTab","setActiveTab","useState","kitDialogOpen","setKitDialogOpen","kitDialogMode","setKitDialogMode","editingKitId","setEditingKitId","kitForm","setKitForm","kitFormExpanded","setKitFormExpanded","themeDialogOpen","setThemeDialogOpen","themeForm","setThemeForm","setBaseColor","primary","colorScheme","setColorScheme","generatedPalette","setGeneratedPalette","contrastFg","setContrastFg","contrastBg","setContrastBg","contrastResult","setContrastResult","a11yBg","setA11yBg","a11ySuggestions","setA11ySuggestions","selectedFont","setSelectedFont","fontPairings","setFontPairings","fontFilter","setFontFilter","useEffect","openCreateKit","openEditKit","kit","handleSaveKit","useCallback","isEdit","InteractionType","Reversibility","handleDeleteKit","kitId","handleSetDefault","handleExportKit","blob","url","a","handleImportKit","evt","text","kitData","openCreateTheme","handleSaveTheme","handleDeleteTheme","handleActivateTheme","handleGeneratePalette","handleCheckContrast","handleSuggestA11y","handleGetPairings","fontName","handleCopyColor","color","ta","filteredFonts","f","jsx","jsxs","PaletteIcon","Stack","Fragment","AddIcon","Tabs","_","v","Tab","ColorIcon","FontIcon","Alert","Grid","CardContent","Chip","DefaultIcon","i","Tooltip","e","CardActions","IconButton","EditIcon","DeleteIcon","CheckIcon","name","hex","Divider","TextField","InputAdornment","s","MenuItem","index","label","pass","CloseIcon","p","variant","weight","CircularProgress","Dialog","DialogTitle","DialogContent","ExpandLessIcon","ExpandMoreIcon","Collapse","c","DialogActions","DesignPage"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}