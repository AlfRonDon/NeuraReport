import{bJ as C,ab as Me,r as w,u as pe,v as Ve,a as Ne,w as He,Z as Ge,bK as Xe,bL as Ye,_ as qe,R as ge,I as ke,n as s,j as t,B as _,C as Ae,o as T,q as U,H as Ze,m as Qe,S as et,M as tt,bF as at,aV as rt,z as it,E as nt,X as me,a7 as st,D as Y,t as ot,bM as Se,f as O,p as lt,aZ as ct,V as Ce,a6 as dt,N as ue,O as je,bh as We}from"./index-COTlR4Mk.js";import{T as pt}from"./TrendingUp-iS6-zk1M.js";import{T as ut}from"./TrendingDown-BblVF55f.js";import{G as k}from"./Grid-BMfuCMsI.js";import{a as he,T as mt}from"./Tabs-BjIVdfAN.js";import{f as q,L as ae,m as oe,i as ee,C as xe,A as ht,a as Z,b as Pe,c as xt,d as we,h as ft,e as yt,u as bt,g as be,G as vt,j as Oe,k as Te,D as jt,l as gt,X as le,Y as ce,n as kt,R as re,B as ze,o as fe,T as ie,p as ye,P as Ee,q as De,r as Le,s as Re}from"./PieChart-DGDMqPf8.js";import{C as $e}from"./CardContent-Cdyni_Bl.js";import"./KeyboardArrowRight-C1lIa1Bi.js";import"./string-GBVq1Gk0.js";import"./index-Chjiymov.js";import"./band-CquvqAHh.js";import"./init-Dmth1JHB.js";import"./ordinal-DILIJJjt.js";import"./linear-Btwmcagj.js";import"./defaultLocale-DX6XiGOO.js";import"./time-BWVVNhLt.js";var At=["layout","type","stroke","connectNulls","isRange","ref"],St=["key"],Fe;function te(e){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},te(e)}function Ue(e,r){if(e==null)return{};var i=Ct(e,r),a,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ct(e,r){if(e==null)return{};var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;i[a]=e[a]}return i}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},G.apply(this,arguments)}function Ie(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,a)}return i}function H(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Ie(Object(i),!0).forEach(function(a){W(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Pt(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _e(e,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Je(a.key),a)}}function wt(e,r,i){return r&&_e(e.prototype,r),i&&_e(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ot(e,r,i){return r=de(r),Tt(e,Ke()?Reflect.construct(r,i||[],de(e).constructor):r.apply(e,i))}function Tt(e,r){if(r&&(te(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}function zt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ke=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},de(e)}function Et(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ve(e,r)}function ve(e,r){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},ve(e,r)}function W(e,r,i){return r=Je(r),r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Je(e){var r=Dt(e,"string");return te(r)=="symbol"?r:r+""}function Dt(e,r){if(te(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,r);if(te(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var K=(function(e){function r(){var i;Pt(this,r);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return i=Ot(this,r,[].concat(n)),W(i,"state",{isAnimationFinished:!0}),W(i,"id",bt("recharts-area-")),W(i,"handleAnimationEnd",function(){var c=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),be(c)&&c()}),W(i,"handleAnimationStart",function(){var c=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),be(c)&&c()}),i}return Et(r,e),wt(r,[{key:"renderDots",value:function(a,n,l){var c=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(c&&!o)return null;var u=this.props,d=u.dot,x=u.points,h=u.dataKey,f=q(this.props,!1),z=q(d,!0),A=x.map(function(y,L){var P=H(H(H({key:"dot-".concat(L),r:3},f),z),{},{index:L,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:x});return r.renderDotItem(d,P)}),D={clipPath:a?"url(#clipPath-".concat(n?"":"dots-").concat(l,")"):null};return C.createElement(ae,G({className:"recharts-area-dots"},D),A)}},{key:"renderHorizontalRect",value:function(a){var n=this.props,l=n.baseLine,c=n.points,o=n.strokeWidth,u=c[0].x,d=c[c.length-1].x,x=a*Math.abs(u-d),h=oe(c.map(function(f){return f.y||0}));return ee(l)&&typeof l=="number"?h=Math.max(l,h):l&&Array.isArray(l)&&l.length&&(h=Math.max(oe(l.map(function(f){return f.y||0})),h)),ee(h)?C.createElement("rect",{x:u<d?u:u-x,y:0,width:x,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var n=this.props,l=n.baseLine,c=n.points,o=n.strokeWidth,u=c[0].y,d=c[c.length-1].y,x=a*Math.abs(u-d),h=oe(c.map(function(f){return f.x||0}));return ee(l)&&typeof l=="number"?h=Math.max(l,h):l&&Array.isArray(l)&&l.length&&(h=Math.max(oe(l.map(function(f){return f.x||0})),h)),ee(h)?C.createElement("rect",{x:0,y:u<d?u:u-x,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(x)}):null}},{key:"renderClipRect",value:function(a){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,n,l,c){var o=this.props,u=o.layout,d=o.type,x=o.stroke,h=o.connectNulls,f=o.isRange;o.ref;var z=Ue(o,At);return C.createElement(ae,{clipPath:l?"url(#clipPath-".concat(c,")"):null},C.createElement(xe,G({},q(z,!0),{points:a,connectNulls:h,type:d,baseLine:n,layout:u,stroke:"none",className:"recharts-area-area"})),x!=="none"&&C.createElement(xe,G({},q(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:a})),x!=="none"&&f&&C.createElement(xe,G({},q(this.props,!1),{className:"recharts-area-curve",layout:u,type:d,connectNulls:h,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(a,n){var l=this,c=this.props,o=c.points,u=c.baseLine,d=c.isAnimationActive,x=c.animationBegin,h=c.animationDuration,f=c.animationEasing,z=c.animationId,A=this.state,D=A.prevPoints,y=A.prevBaseLine;return C.createElement(ht,{begin:x,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var P=L.t;if(D){var N=D.length/o.length,v=o.map(function(b,R){var $=Math.floor(R*N);if(D[$]){var M=D[$],J=Z(M.x,b.x),V=Z(M.y,b.y);return H(H({},b),{},{x:J(P),y:V(P)})}return b}),S;if(ee(u)&&typeof u=="number"){var j=Z(y,u);S=j(P)}else if(Pe(u)||xt(u)){var B=Z(y,0);S=B(P)}else S=u.map(function(b,R){var $=Math.floor(R*N);if(y[$]){var M=y[$],J=Z(M.x,b.x),V=Z(M.y,b.y);return H(H({},b),{},{x:J(P),y:V(P)})}return b});return l.renderAreaStatically(v,S,a,n)}return C.createElement(ae,null,C.createElement("defs",null,C.createElement("clipPath",{id:"animationClipPath-".concat(n)},l.renderClipRect(P))),C.createElement(ae,{clipPath:"url(#animationClipPath-".concat(n,")")},l.renderAreaStatically(o,u,a,n)))})}},{key:"renderArea",value:function(a,n){var l=this.props,c=l.points,o=l.baseLine,u=l.isAnimationActive,d=this.state,x=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return u&&c&&c.length&&(!x&&f>0||!we(x,c)||!we(h,o))?this.renderAreaWithAnimation(a,n):this.renderAreaStatically(c,o,a,n)}},{key:"render",value:function(){var a,n=this.props,l=n.hide,c=n.dot,o=n.points,u=n.className,d=n.top,x=n.left,h=n.xAxis,f=n.yAxis,z=n.width,A=n.height,D=n.isAnimationActive,y=n.id;if(l||!o||!o.length)return null;var L=this.state.isAnimationFinished,P=o.length===1,N=Me("recharts-area",u),v=h&&h.allowDataOverflow,S=f&&f.allowDataOverflow,j=v||S,B=Pe(y)?this.id:y,b=(a=q(c,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},R=b.r,$=R===void 0?3:R,M=b.strokeWidth,J=M===void 0?2:M,V=ft(c)?c:{},F=V.clipDot,se=F===void 0?!0:F,X=$*2+J;return C.createElement(ae,{className:N},v||S?C.createElement("defs",null,C.createElement("clipPath",{id:"clipPath-".concat(B)},C.createElement("rect",{x:v?x:x-z/2,y:S?d:d-A/2,width:v?z:z*2,height:S?A:A*2})),!se&&C.createElement("clipPath",{id:"clipPath-dots-".concat(B)},C.createElement("rect",{x:x-X/2,y:d-X/2,width:z+X,height:A+X}))):null,P?null:this.renderArea(j,B),(c||P)&&this.renderDots(j,se,B),(!D||L)&&yt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,n){return a.animationId!==n.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:a.points!==n.curPoints||a.baseLine!==n.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(w.PureComponent);Fe=K;W(K,"displayName","Area");W(K,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!vt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});W(K,"getBaseValue",function(e,r,i,a){var n=e.layout,l=e.baseValue,c=r.props.baseValue,o=c??l;if(ee(o)&&typeof o=="number")return o;var u=n==="horizontal"?a:i,d=u.scale.domain();if(u.type==="number"){var x=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return o==="dataMin"?h:o==="dataMax"||x<0?x:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]});W(K,"getComposedData",function(e){var r=e.props,i=e.item,a=e.xAxis,n=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,o=e.bandSize,u=e.dataKey,d=e.stackedData,x=e.dataStartIndex,h=e.displayedData,f=e.offset,z=r.layout,A=d&&d.length,D=Fe.getBaseValue(r,i,a,n),y=z==="horizontal",L=!1,P=h.map(function(v,S){var j;A?j=d[x+S]:(j=Oe(v,u),Array.isArray(j)?L=!0:j=[D,j]);var B=j[1]==null||A&&Oe(v,u)==null;return y?{x:Te({axis:a,ticks:l,bandSize:o,entry:v,index:S}),y:B?null:n.scale(j[1]),value:j,payload:v}:{x:B?null:a.scale(j[1]),y:Te({axis:n,ticks:c,bandSize:o,entry:v,index:S}),value:j,payload:v}}),N;return A||L?N=P.map(function(v){var S=Array.isArray(v.value)?v.value[0]:null;return y?{x:v.x,y:S!=null&&v.y!=null?n.scale(S):null}:{x:S!=null?a.scale(S):null,y:v.y}}):N=y?n.scale(D):a.scale(D),H({points:P,baseLine:N,layout:z,isRange:L},f)});W(K,"renderDotItem",function(e,r){var i;if(C.isValidElement(e))i=C.cloneElement(e,r);else if(be(e))i=e(r);else{var a=Me("recharts-area-dot",typeof e!="boolean"?e.className:""),n=r.key,l=Ue(r,St);i=C.createElement(jt,G({},l,{key:n,className:a}))}return i});var Lt=gt({chartName:"AreaChart",GraphicalChild:K,axisComponents:[{axisType:"xAxis",AxisComp:le},{axisType:"yAxis",AxisComp:ce}],formatAxisMap:kt});const Be=ue(_)(({theme:e})=>({padding:e.spacing(3),maxWidth:1400,margin:"0 auto",width:"100%",minHeight:"100vh",backgroundColor:e.palette.background.default})),Rt=ue(U)(({theme:e})=>({marginBottom:e.spacing(3),animation:`${je} 0.5s ease-out`})),It=ue(mt)(({theme:e})=>({marginBottom:e.spacing(3),"& .MuiTab-root":{color:e.palette.mode==="dark"?e.palette.text.secondary:s[700],textTransform:"none",minWidth:100,fontWeight:500,transition:"all 0.2s cubic-bezier(0.22, 1, 0.36, 1)",padding:"8px 32px","&.Mui-selected":{color:e.palette.mode==="dark"?e.palette.text.primary:s[900],backgroundColor:e.palette.mode==="dark"?O(e.palette.text.primary,.08):s[100]},"&:hover":{color:e.palette.mode==="dark"?e.palette.text.primary:s[700],backgroundColor:e.palette.mode==="dark"?O(e.palette.text.primary,.04):s[50]}},"& .MuiTabs-indicator":{backgroundColor:e.palette.mode==="dark"?s[500]:s[900],height:2}})),_t=ue($e)(({theme:e})=>({padding:e.spacing(2.5),"&:last-child":{paddingBottom:e.spacing(2.5)}})),Bt=[{value:"day",label:"Last 24 hours"},{value:"week",label:"Last 7 days"},{value:"month",label:"Last 30 days"}],Mt=e=>[e.palette.mode==="dark"?s[500]:s[700],e.palette.mode==="dark"?s[500]:s[500],e.palette.mode==="dark"?s[300]:s[500],e.palette.mode==="dark"?s[700]:s[900],e.palette.mode==="dark"?s[300]:s[300],e.palette.text.secondary],Nt=e=>({completed:e.palette.mode==="dark"?s[500]:s[700],failed:e.palette.mode==="dark"?s[700]:s[900],pending:e.palette.mode==="dark"?s[300]:s[500],running:e.palette.mode==="dark"?s[500]:s[500],cancelled:e.palette.text.secondary});function I({title:e,value:r,subtitle:i,icon:a,trend:n,color:l,onClick:c}){const o=pe(),d=n>0?pt:ut,x=o.palette.text.secondary,h=l||(o.palette.mode==="dark"?s[500]:s[700]);return t.jsx(We,{onClick:c,sx:{height:"100%",cursor:c?"pointer":"default",animation:`${je} 0.5s ease-out`,"&:active":c?{transform:"scale(0.98)"}:{}},children:t.jsxs(_t,{children:[t.jsxs(U,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",children:[t.jsxs(_,{children:[t.jsx(T,{sx:{fontSize:"0.75rem",fontWeight:500,color:o.palette.text.secondary,textTransform:"uppercase",letterSpacing:"0.05em",mb:.5},children:e}),t.jsx(T,{sx:{fontSize:"1.75rem",fontWeight:600,color:o.palette.text.primary,lineHeight:1.2},children:r}),i&&t.jsx(T,{sx:{fontSize:"0.75rem",color:o.palette.text.secondary,mt:.5},children:i})]}),t.jsx(_,{sx:{width:40,height:40,borderRadius:2.5,bgcolor:O(h,.15),display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(a,{sx:{fontSize:20,color:h}})})]}),n!=null&&t.jsxs(U,{direction:"row",alignItems:"center",spacing:.5,sx:{mt:1.5},children:[t.jsx(d,{sx:{fontSize:14,color:x}}),t.jsxs(T,{sx:{fontSize:"0.75rem",color:x,fontWeight:500},children:[Math.abs(n),"%"]}),t.jsx(T,{sx:{fontSize:"0.75rem",color:o.palette.text.secondary},children:"vs previous period"})]})]})})}function Q({title:e,subtitle:r,children:i,height:a=280,actions:n}){const l=pe();return t.jsx(We,{sx:{height:"100%",animation:`${je} 0.5s ease-out 0.2s both`},children:t.jsxs($e,{sx:{p:2.5,height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs(U,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:2},children:[t.jsxs(_,{children:[t.jsx(T,{sx:{fontSize:"0.875rem",fontWeight:600,color:l.palette.text.primary},children:e}),r&&t.jsx(T,{sx:{fontSize:"0.75rem",color:l.palette.text.secondary,mt:.25},children:r})]}),n]}),t.jsx(_,{sx:{flex:1,minHeight:a},children:i})]})})}function ne({active:e,payload:r,label:i}){const a=pe();return!e||!r?.length?null:t.jsxs(_,{sx:{bgcolor:O(a.palette.background.paper,.95),backdropFilter:"blur(8px)",border:`1px solid ${O(a.palette.divider,.1)}`,borderRadius:1,p:1.5,boxShadow:`0 4px 12px ${O(a.palette.common.black,.15)}`},children:[t.jsx(T,{sx:{fontSize:"0.75rem",fontWeight:600,color:a.palette.text.primary,mb:.5},children:i}),r.map((n,l)=>t.jsxs(U,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(_,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:n.color}}),t.jsxs(T,{sx:{fontSize:"12px",color:a.palette.text.secondary},children:[n.name,": ",n.value]})]},l))]})}const Wt={overview:0,jobs:1,templates:2},$t=["overview","jobs","templates"];function Ft(){const e=pe(),r=Ve(),{execute:i}=Ne(),a=He(),[n,l]=Ge(),c=w.useRef(!1),o=w.useCallback((p,m,g={})=>a(p,{label:m,intent:{from:"stats",...g}}),[a]),u=n.get("tab")||"overview",d=Wt[u]??0,[x,h]=w.useState(!0),[f,z]=w.useState(n.get("period")||"week"),[A,D]=w.useState(null),[y,L]=w.useState(null),[P,N]=w.useState(null),v=w.useMemo(()=>Mt(e),[e]),S=w.useMemo(()=>Nt(e),[e]),j=w.useCallback(async()=>{h(!0);try{const[p,m,g]=await Promise.all([Xe(),Ye(f),qe({limit:100})]);D(p),L(m),N(g)}catch(p){r.show(p.message||"Failed to load statistics","error")}finally{h(!1)}},[f,r]),B=w.useCallback(()=>i({type:ke.EXECUTE,label:"Refresh usage statistics",reversibility:ge.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{period:f},action:j}),[i,j,f]);w.useEffect(()=>{c.current||(c.current=!0,j())},[j]),w.useEffect(()=>{c.current&&j()},[f,j]);const b=A?.summary||{},R=A?.metrics||{},$=A?.jobsTrend||[],M=A?.topTemplates||[],J=w.useMemo(()=>{const p=y?.byStatus||{};return Object.entries(p).map(([m,g])=>({name:m.charAt(0).toUpperCase()+m.slice(1),value:g,color:S[m]||e.palette.text.secondary}))},[y,S,e]),V=w.useMemo(()=>{const p=y?.byKind||{};return Object.entries(p).map(([m,g])=>({name:m.toUpperCase(),value:g,color:m==="pdf"?e.palette.mode==="dark"?s[700]:s[900]:e.palette.mode==="dark"?s[500]:s[700]}))},[y,e]),F=w.useMemo(()=>{const p=y?.templateBreakdown||[];return p.length>0?p:M.slice(0,6).map(m=>({name:m.name||m.id?.slice(0,12),count:m.runCount||0,kind:m.kind||"pdf"}))},[y,M]),se=w.useMemo(()=>{const p=P?.history||[],m={};return p.forEach(g=>{const E=g.createdAt?.split("T")[0];E&&(m[E]||(m[E]={date:E,completed:0,failed:0,total:0}),m[E].total+=1,g.status==="completed"?m[E].completed+=1:g.status==="failed"&&(m[E].failed+=1))}),Object.values(m).sort((g,E)=>g.date.localeCompare(E.date)).slice(-14)},[P]),X=w.useCallback(()=>i({type:ke.DOWNLOAD,label:"Export usage statistics",reversibility:ge.FULLY_REVERSIBLE,intent:{period:f},action:async()=>{const p={exportedAt:new Date().toISOString(),period:f,dashboard:A,usage:y,historyCount:P?.total||0},m=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),g=URL.createObjectURL(m),E=document.createElement("a");E.href=g,E.download=`neurareport-stats-${f}-${Date.now()}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(g)}}),[i,f,A,y,P]);return x&&!A?t.jsx(Be,{children:t.jsxs(_,{sx:{py:8,textAlign:"center"},children:[t.jsx(Ae,{size:40}),t.jsx(T,{sx:{mt:2,color:e.palette.text.secondary},children:"Loading statistics..."})]})}):t.jsxs(Be,{children:[t.jsxs(Rt,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsxs(_,{children:[t.jsx(T,{variant:"h5",fontWeight:600,sx:{color:e.palette.text.primary},children:"Usage Statistics"}),t.jsx(T,{variant:"body2",sx:{color:e.palette.text.secondary},children:"Detailed analytics and insights for your workspace"})]}),t.jsxs(U,{direction:"row",spacing:2,alignItems:"center",children:[t.jsxs(Ze,{size:"small",children:[t.jsx(Qe,{children:"Time Period"}),t.jsx(et,{value:f,onChange:p=>{const m=p.target.value;z(m);const g=new URLSearchParams(n);g.set("period",m),l(g,{replace:!0})},label:"Time Period",children:Bt.map(p=>t.jsx(tt,{value:p.value,children:p.label},p.value))})]}),t.jsx(at,{variant:"outlined",size:"small",startIcon:t.jsx(rt,{sx:{fontSize:16}}),onClick:X,children:"Export"}),t.jsx(it,{onClick:B,disabled:x,sx:{color:e.palette.text.secondary},children:x?t.jsx(Ae,{size:20}):t.jsx(nt,{})})]})]}),t.jsxs(k,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Total Jobs",value:b.totalJobs||0,subtitle:`${R.jobsThisWeek||0} this week`,icon:me,color:e.palette.mode==="dark"?s[500]:s[500],onClick:()=>o("/jobs","Open jobs")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Success Rate",value:`${(R.successRate||0).toFixed(1)}%`,subtitle:`${b.completedJobs||0} completed`,icon:st,color:e.palette.mode==="dark"?s[500]:s[700],onClick:()=>o("/history","Open history")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Templates",value:b.totalTemplates||0,subtitle:`${b.approvedTemplates||0} approved`,icon:Y,color:e.palette.mode==="dark"?s[300]:s[500],onClick:()=>o("/templates","Open templates")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Connections",value:b.totalConnections||0,subtitle:`${b.activeConnections||0} active`,icon:ot,color:e.palette.mode==="dark"?s[300]:s[300],onClick:()=>o("/connections","Open connections")})})]}),t.jsxs(It,{value:d,onChange:(p,m)=>{const g=new URLSearchParams(n);g.set("tab",$t[m]),l(g,{replace:!0})},children:[t.jsx(he,{label:"Overview",icon:t.jsx(Se,{sx:{fontSize:18}}),iconPosition:"start"}),t.jsx(he,{label:"Jobs",icon:t.jsx(me,{sx:{fontSize:18}}),iconPosition:"start"}),t.jsx(he,{label:"Templates",icon:t.jsx(Y,{sx:{fontSize:18}}),iconPosition:"start"})]}),d===0&&t.jsxs(k,{container:!0,spacing:2,children:[t.jsx(k,{size:{xs:12,lg:8},children:t.jsx(Q,{title:"Jobs Trend",subtitle:"Daily job completions over the past week",children:t.jsx(re,{width:"100%",height:"100%",children:t.jsxs(ze,{data:$,children:[t.jsx(fe,{strokeDasharray:"3 3",stroke:O(e.palette.divider,.3)}),t.jsx(le,{dataKey:"label",tick:{fill:e.palette.text.secondary,fontSize:12},axisLine:{stroke:O(e.palette.divider,.3)}}),t.jsx(ce,{tick:{fill:e.palette.text.secondary,fontSize:12},axisLine:{stroke:O(e.palette.divider,.3)}}),t.jsx(ie,{content:t.jsx(ne,{})}),t.jsx(ye,{dataKey:"completed",name:"Completed",fill:e.palette.mode==="dark"?s[500]:s[700],radius:[4,4,0,0]}),t.jsx(ye,{dataKey:"failed",name:"Failed",fill:e.palette.mode==="dark"?s[700]:s[900],radius:[4,4,0,0]})]})})})}),t.jsx(k,{size:{xs:12,lg:4},children:t.jsx(Q,{title:"Job Status",subtitle:"Distribution by status",children:t.jsx(re,{width:"100%",height:"100%",children:t.jsxs(Ee,{children:[t.jsx(De,{data:J,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:J.map((p,m)=>t.jsx(Le,{fill:p.color},`cell-${m}`))}),t.jsx(ie,{content:t.jsx(ne,{})}),t.jsx(Re,{verticalAlign:"bottom",height:36,formatter:p=>t.jsx("span",{style:{color:e.palette.text.secondary,fontSize:"0.75rem"},children:p})})]})})})}),t.jsx(k,{size:{xs:12,md:6},children:t.jsx(Q,{title:"Template Types",subtitle:"PDF vs Excel usage",children:t.jsx(re,{width:"100%",height:"100%",children:t.jsxs(Ee,{children:[t.jsx(De,{data:V,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:p,percent:m})=>`${p} ${(m*100).toFixed(0)}%`,labelLine:{stroke:e.palette.text.secondary},children:V.map((p,m)=>t.jsx(Le,{fill:p.color},`cell-${m}`))}),t.jsx(ie,{content:t.jsx(ne,{})})]})})})}),t.jsx(k,{size:{xs:12,md:6},children:t.jsx(Q,{title:"Top Templates",subtitle:"Most used templates",children:F.length===0?t.jsx(_,{sx:{py:6,textAlign:"center"},children:t.jsx(T,{sx:{color:e.palette.text.secondary,fontSize:"0.875rem"},children:"No template usage data"})}):t.jsx(U,{spacing:1.5,children:F.map((p,m)=>t.jsxs(_,{children:[t.jsxs(U,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:.5},children:[t.jsxs(U,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(T,{sx:{fontSize:"14px",color:e.palette.text.primary},children:p.name}),t.jsx(lt,{label:p.kind?.toUpperCase(),size:"small",sx:{height:18,fontSize:"10px",bgcolor:e.palette.mode==="dark"?O(e.palette.text.primary,.08):s[100],color:"text.secondary",borderRadius:1}})]}),t.jsxs(T,{sx:{fontSize:"0.75rem",color:e.palette.text.secondary},children:[p.count," runs"]})]}),t.jsx(ct,{variant:"determinate",value:F[0]?.count?p.count/F[0].count*100:0,sx:{height:6,borderRadius:3,bgcolor:O(e.palette.divider,.15),"& .MuiLinearProgress-bar":{bgcolor:v[m%v.length],borderRadius:3}}})]},m))})})})]}),d===1&&t.jsxs(k,{container:!0,spacing:2,children:[t.jsx(k,{size:12,children:t.jsx(Q,{title:"Jobs History",subtitle:"Job executions over the past 2 weeks",height:320,children:t.jsx(re,{width:"100%",height:"100%",children:t.jsxs(Lt,{data:se,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"colorCompleted",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:e.palette.mode==="dark"?s[500]:s[700],stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:e.palette.mode==="dark"?s[500]:s[700],stopOpacity:0})]}),t.jsxs("linearGradient",{id:"colorFailed",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:e.palette.mode==="dark"?s[700]:s[900],stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:e.palette.mode==="dark"?s[700]:s[900],stopOpacity:0})]})]}),t.jsx(fe,{strokeDasharray:"3 3",stroke:O(e.palette.divider,.3)}),t.jsx(le,{dataKey:"date",tick:{fill:e.palette.text.secondary,fontSize:10},axisLine:{stroke:O(e.palette.divider,.3)},tickFormatter:p=>p.slice(5)}),t.jsx(ce,{tick:{fill:e.palette.text.secondary,fontSize:12},axisLine:{stroke:O(e.palette.divider,.3)}}),t.jsx(ie,{content:t.jsx(ne,{})}),t.jsx(K,{type:"monotone",dataKey:"completed",name:"Completed",stroke:e.palette.mode==="dark"?s[500]:s[700],fill:"url(#colorCompleted)",strokeWidth:2}),t.jsx(K,{type:"monotone",dataKey:"failed",name:"Failed",stroke:e.palette.mode==="dark"?s[700]:s[900],fill:"url(#colorFailed)",strokeWidth:2}),t.jsx(Re,{verticalAlign:"top",height:36,formatter:p=>t.jsx("span",{style:{color:e.palette.text.secondary,fontSize:"0.75rem"},children:p})})]})})})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Jobs Today",value:R.jobsToday||0,icon:Ce,color:e.palette.mode==="dark"?s[500]:s[500],onClick:()=>o("/jobs","Open jobs")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Jobs This Week",value:R.jobsThisWeek||0,icon:me,color:e.palette.mode==="dark"?s[500]:s[700],onClick:()=>o("/jobs","Open jobs")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Jobs This Month",value:R.jobsThisMonth||0,icon:Se,color:e.palette.mode==="dark"?s[300]:s[500],onClick:()=>o("/jobs","Open jobs")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Failed Jobs",value:b.failedJobs||0,icon:dt,color:e.palette.mode==="dark"?s[700]:s[900],onClick:()=>o("/history?status=failed","Open failed history",{status:"failed"})})})]}),d===2&&t.jsxs(k,{container:!0,spacing:2,children:[t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Total Templates",value:b.totalTemplates||0,icon:Y,color:e.palette.mode==="dark"?s[500]:s[500],onClick:()=>o("/templates","Open templates")})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"PDF Templates",value:b.pdfTemplates||0,icon:Y,color:e.palette.mode==="dark"?s[700]:s[900],onClick:()=>o("/templates?kind=pdf","Open PDF templates",{kind:"pdf"})})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Excel Templates",value:b.excelTemplates||0,icon:Y,color:e.palette.mode==="dark"?s[500]:s[700],onClick:()=>o("/templates?kind=excel","Open Excel templates",{kind:"excel"})})}),t.jsx(k,{size:{xs:12,sm:6,md:3},children:t.jsx(I,{title:"Active Schedules",value:b.activeSchedules||0,icon:Ce,color:e.palette.mode==="dark"?s[300]:s[500],onClick:()=>o("/schedules","Open schedules")})}),t.jsx(k,{size:12,children:t.jsx(Q,{title:"Template Usage Breakdown",subtitle:"Jobs per template",height:400,children:F.length===0?t.jsxs(_,{sx:{py:8,textAlign:"center"},children:[t.jsx(Y,{sx:{fontSize:48,color:e.palette.text.disabled,mb:2}}),t.jsx(T,{sx:{color:e.palette.text.secondary,fontSize:"0.875rem"},children:"No template usage data available"})]}):t.jsx(re,{width:"100%",height:"100%",children:t.jsxs(ze,{data:F,layout:"vertical",children:[t.jsx(fe,{strokeDasharray:"3 3",stroke:O(e.palette.divider,.3)}),t.jsx(le,{type:"number",tick:{fill:e.palette.text.secondary,fontSize:12},axisLine:{stroke:O(e.palette.divider,.3)}}),t.jsx(ce,{type:"category",dataKey:"name",tick:{fill:e.palette.text.secondary,fontSize:12},axisLine:{stroke:O(e.palette.divider,.3)},width:120}),t.jsx(ie,{content:t.jsx(ne,{})}),t.jsx(ye,{dataKey:"count",name:"Jobs",fill:e.palette.mode==="dark"?s[500]:s[700],radius:[0,4,4,0]})]})})})})]})]})}function na(){return Ne(),t.jsx(Ft,{})}export{na as default};
