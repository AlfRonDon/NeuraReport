{"version":3,"file":"TemplatesPage-w9Ov2BmC.js","sources":["../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/icons-material/esm/Archive.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/icons-material/esm/Label.js","../../../home/rohith/desktop/NeuraReport/frontend/src/features/templates/containers/TemplatesPageContainer.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/pages/templates/TemplatesPage.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5 6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z\"\n}), 'Archive');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z\"\n}), 'Label');","/**\n * Premium Templates Page\n * Sophisticated template management with glassmorphism and animations\n */\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react'\nimport { useSearchParams } from 'react-router-dom'\nimport {\n  Box,\n  Chip,\n  IconButton,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Alert,\n  TextField,\n  Button,\n  Stack,\n  Typography,\n  InputLabel,\n  Select,\n  LinearProgress,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport AddIcon from '@mui/icons-material/Add'\nimport MoreVertIcon from '@mui/icons-material/MoreVert'\nimport EditIcon from '@mui/icons-material/Edit'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport DownloadIcon from '@mui/icons-material/Download'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport UploadFileIcon from '@mui/icons-material/UploadFile'\nimport SettingsIcon from '@mui/icons-material/Settings'\nimport DescriptionIcon from '@mui/icons-material/Description'\nimport TableChartIcon from '@mui/icons-material/TableChart'\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf'\nimport ArchiveIcon from '@mui/icons-material/Archive'\nimport LabelIcon from '@mui/icons-material/Label'\nimport AutoAwesomeIcon from '@mui/icons-material/AutoAwesome'\nimport CloseIcon from '@mui/icons-material/Close'\nimport { DataTable } from '@/components/DataTable'\nimport { ConfirmModal } from '@/components/Modal'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport FavoriteButton from '@/features/favorites/components/FavoriteButton.jsx'\nimport ReportGlossaryNotice from '@/components/ux/ReportGlossaryNotice.jsx'\nimport * as api from '@/api/client'\nimport * as recommendationsApi from '@/api/recommendations'\n// UX Governance - Enforced interaction API\nimport {\n  useInteraction,\n  InteractionType,\n  Reversibility,\n  useNavigateInteraction,\n} from '@/components/ux/governance'\nimport { neutral, palette, status as statusColors } from '@/app/theme'\nimport { fadeInUp, pulse, StyledFormControl } from '@/styles'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(3),\n  maxWidth: 1400,\n  margin: '0 auto',\n  width: '100%',\n  minHeight: '100vh',\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst QuickFilterChip = styled(Chip)(({ theme }) => ({\n  borderRadius: 8,\n  backgroundColor: alpha(theme.palette.text.primary, 0.08),\n  color: theme.palette.text.secondary,\n  fontSize: '0.75rem',\n  '& .MuiChip-deleteIcon': {\n    color: theme.palette.text.secondary,\n    '&:hover': {\n      color: theme.palette.text.primary,\n    },\n  },\n}))\n\nconst StyledMenu = styled(Menu)(({ theme }) => ({\n  '& .MuiPaper-root': {\n    backgroundColor: alpha(theme.palette.background.paper, 0.95),\n    backdropFilter: 'blur(20px)',\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    borderRadius: 8,  // Figma spec: 8px\n    boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.15)}`,\n    minWidth: 180,\n    animation: `${fadeInUp} 0.2s ease-out`,\n  },\n}))\n\nconst StyledMenuItem = styled(MenuItem)(({ theme }) => ({\n  borderRadius: 8,\n  margin: theme.spacing(0.5, 1),\n  padding: theme.spacing(1, 1.5),\n  fontSize: '14px',\n  transition: 'all 0.15s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  },\n  '& .MuiListItemIcon-root': {\n    minWidth: 32,\n  },\n}))\n\nconst StyledDialog = styled(Dialog)(({ theme }) => ({\n  '& .MuiBackdrop-root': {\n    backgroundColor: alpha(theme.palette.common.black, 0.6),\n    backdropFilter: 'blur(8px)',\n  },\n  '& .MuiDialog-paper': {\n    backgroundColor: alpha(theme.palette.background.paper, 0.95),\n    backdropFilter: 'blur(20px)',\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    borderRadius: 8,  // Figma spec: 8px\n    boxShadow: `0 24px 64px ${alpha(theme.palette.common.black, 0.25)}`,\n    animation: `${fadeInUp} 0.3s ease-out`,\n  },\n}))\n\nconst DialogHeader = styled(DialogTitle)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  padding: theme.spacing(2.5, 3),\n  fontSize: '1.125rem',\n  fontWeight: 600,\n}))\n\nconst StyledDialogContent = styled(DialogContent)(({ theme }) => ({\n  padding: theme.spacing(0, 3, 3),\n}))\n\nconst StyledDialogActions = styled(DialogActions)(({ theme }) => ({\n  padding: theme.spacing(2, 3),\n  gap: theme.spacing(1),\n}))\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    borderRadius: 8,  // Figma spec: 8px\n    backgroundColor: alpha(theme.palette.background.paper, 0.6),\n    transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.background.paper, 0.8),\n    },\n    '&.Mui-focused': {\n      backgroundColor: theme.palette.background.paper,\n      boxShadow: `0 0 0 3px ${alpha(theme.palette.text.primary, 0.08)}`,\n    },\n  },\n}))\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: 8,  // Figma spec: 8px\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.875rem',\n  padding: theme.spacing(1, 2.5),\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n}))\n\nconst PrimaryButton = styled(ActionButton)(({ theme }) => ({\n  background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n  color: theme.palette.common.white,\n  boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.15)}`,\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    boxShadow: `0 6px 20px ${alpha(theme.palette.common.black, 0.2)}`,\n    transform: 'translateY(-1px)',\n  },\n  '&:disabled': {\n    background: theme.palette.action.disabledBackground,\n    color: theme.palette.action.disabled,\n    boxShadow: 'none',\n  },\n}))\n\nconst SecondaryButton = styled(ActionButton)(({ theme }) => ({\n  borderColor: alpha(theme.palette.divider, 0.3),\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n  },\n}))\n\nconst KindIconContainer = styled(Box, {\n  shouldForwardProp: (prop) => prop !== 'iconColor',\n})(({ theme }) => ({\n  width: 36,\n  height: 36,\n  borderRadius: 10,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n}))\n\nconst KindChip = styled(Chip, {\n  shouldForwardProp: (prop) => !['kindColor', 'kindBg'].includes(prop),\n})(({ theme, kindColor, kindBg }) => ({\n  borderRadius: 8,\n  fontWeight: 600,\n  fontSize: '12px',\n  backgroundColor: kindBg,\n  color: kindColor,\n}))\n\nconst StatusChip = styled(Chip, {\n  shouldForwardProp: (prop) => !['statusColor', 'statusBg'].includes(prop),\n})(({ theme, statusColor, statusBg }) => ({\n  borderRadius: 8,\n  fontWeight: 600,\n  fontSize: '12px',\n  textTransform: 'capitalize',\n  backgroundColor: statusBg,\n  color: statusColor,\n}))\n\nconst TagChip = styled(Chip)(({ theme }) => ({\n  borderRadius: 6,\n  fontSize: '12px',\n  backgroundColor: alpha(theme.palette.text.primary, 0.08),\n  color: theme.palette.text.secondary,\n}))\n\nconst MoreActionsButton = styled(IconButton)(({ theme }) => ({\n  color: theme.palette.text.secondary,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    color: theme.palette.text.primary,\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  },\n}))\n\nconst StyledLinearProgress = styled(LinearProgress)(({ theme }) => ({\n  borderRadius: 4,\n  height: 6,\n  backgroundColor: alpha(theme.palette.text.primary, 0.1),\n  '& .MuiLinearProgress-bar': {\n    borderRadius: 4,\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[900],\n  },\n}))\n\nconst SimilarTemplateCard = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(2),\n  borderRadius: 8,  // Figma spec: 8px\n  border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n    transform: 'translateX(4px)',\n  },\n}))\n\nconst AiIcon = styled(AutoAwesomeIcon)(({ theme }) => ({\n  color: theme.palette.text.secondary,\n  animation: `${pulse} 2s infinite ease-in-out`,\n}))\n\n// =============================================================================\n// CONFIG HELPERS\n// =============================================================================\n\nconst getKindConfig = (theme, kind) => {\n  const configs = {\n    pdf: {\n      icon: PictureAsPdfIcon,\n      color: theme.palette.text.secondary,\n      bgColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n    },\n    excel: {\n      icon: TableChartIcon,\n      color: theme.palette.text.secondary,\n      bgColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n    },\n  }\n  return configs[kind] || configs.pdf\n}\n\nconst getStatusConfig = (theme, status) => {\n  const s = (status || '').toLowerCase()\n  const configs = {\n    approved: {\n      color: statusColors.success,\n      bgColor: alpha(statusColors.success, 0.1),\n    },\n    failed: {\n      color: statusColors.destructive,\n      bgColor: alpha(statusColors.destructive, 0.1),\n    },\n    pending: {\n      color: statusColors.warning,\n      bgColor: alpha(statusColors.warning, 0.1),\n    },\n    draft: {\n      color: theme.palette.text.secondary,\n      bgColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[50],\n    },\n    archived: {\n      color: theme.palette.text.secondary,\n      bgColor: alpha(theme.palette.text.secondary, 0.08),\n    },\n  }\n  return configs[s] || configs.approved\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function TemplatesPage() {\n  const theme = useTheme()\n  const navigate = useNavigateInteraction()\n  const [searchParams, setSearchParams] = useSearchParams()\n  const toast = useToast()\n  // UX Governance: Enforced interaction API - ALL user actions flow through this\n  const { execute } = useInteraction()\n  const handleNavigate = useCallback(\n    (path, label, intent = {}) =>\n      navigate(path, { label, intent: { from: 'templates', ...intent } }),\n    [navigate]\n  )\n  const templates = useAppStore((s) => s.templates)\n  const setTemplates = useAppStore((s) => s.setTemplates)\n  const removeTemplate = useAppStore((s) => s.removeTemplate)\n  const updateTemplate = useAppStore((s) => s.updateTemplate)\n\n  const [loading, setLoading] = useState(false)\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false)\n  const [deletingTemplate, setDeletingTemplate] = useState(null)\n  const [menuAnchor, setMenuAnchor] = useState(null)\n  const [menuTemplate, setMenuTemplate] = useState(null)\n  const [duplicating, setDuplicating] = useState(false)\n  const [metadataOpen, setMetadataOpen] = useState(false)\n  const [metadataTemplate, setMetadataTemplate] = useState(null)\n  const [metadataForm, setMetadataForm] = useState({ name: '', description: '', tags: '', status: 'approved' })\n  const [metadataSaving, setMetadataSaving] = useState(false)\n  const [importOpen, setImportOpen] = useState(false)\n  const [importFile, setImportFile] = useState(null)\n  const [importName, setImportName] = useState('')\n  const [importing, setImporting] = useState(false)\n  const [importProgress, setImportProgress] = useState(0)\n  const [allTags, setAllTags] = useState([])\n  const [selectedIds, setSelectedIds] = useState([])\n  const [bulkDeleteOpen, setBulkDeleteOpen] = useState(false)\n  const [bulkStatusOpen, setBulkStatusOpen] = useState(false)\n  const [bulkStatus, setBulkStatus] = useState('approved')\n  const [bulkTagsOpen, setBulkTagsOpen] = useState(false)\n  const [bulkTags, setBulkTags] = useState('')\n  const [bulkActionLoading, setBulkActionLoading] = useState(false)\n  const bulkDeleteUndoRef = useRef(null)\n  const didLoadRef = useRef(false)\n  const [similarOpen, setSimilarOpen] = useState(false)\n  const [similarTemplate, setSimilarTemplate] = useState(null)\n  const [similarTemplates, setSimilarTemplates] = useState([])\n  const [similarLoading, setSimilarLoading] = useState(false)\n  const [favorites, setFavorites] = useState(new Set())\n\n  const kindFilter = searchParams.get('kind') || ''\n  const statusParam = searchParams.get('status') || ''\n\n  const filteredTemplates = useMemo(() => {\n    let data = templates\n    if (kindFilter) {\n      data = data.filter((tpl) => (tpl.kind || '').toLowerCase() === kindFilter.toLowerCase())\n    }\n    if (statusParam) {\n      data = data.filter((tpl) => (tpl.status || '').toLowerCase() === statusParam.toLowerCase())\n    }\n    return data\n  }, [templates, kindFilter, statusParam])\n\n  const clearQuickFilter = useCallback((key) => {\n    const next = new URLSearchParams(searchParams)\n    next.delete(key)\n    setSearchParams(next, { replace: true })\n  }, [searchParams, setSearchParams])\n\n  const fetchTemplatesData = useCallback(async () => {\n    setLoading(true)\n    try {\n      const [templatesData, tagsData, favoritesData] = await Promise.all([\n        api.listTemplates(),\n        api.getAllTemplateTags(),\n        api.getFavorites().catch(() => ({ templates: [] })),\n      ])\n      setTemplates(templatesData)\n      setAllTags(tagsData.tags || [])\n      const favIds = (favoritesData.templates || []).map((t) => t.id)\n      setFavorites(new Set(favIds))\n    } catch (err) {\n      toast.show(err.message || 'Failed to load designs', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }, [setTemplates, toast])\n\n  const handleFavoriteToggle = useCallback((templateId, isFavorite) => {\n    setFavorites((prev) => {\n      const next = new Set(prev)\n      if (isFavorite) {\n        next.add(templateId)\n      } else {\n        next.delete(templateId)\n      }\n      return next\n    })\n  }, [])\n\n  useEffect(() => {\n    if (didLoadRef.current) return\n    didLoadRef.current = true\n    fetchTemplatesData()\n  }, [fetchTemplatesData])\n\n  const handleOpenMenu = useCallback((event, template) => {\n    event.stopPropagation()\n    setMenuAnchor(event.currentTarget)\n    setMenuTemplate(template)\n  }, [])\n\n  const handleCloseMenu = useCallback(() => {\n    setMenuAnchor(null)\n    setMenuTemplate(null)\n  }, [])\n\n  const handleAddTemplate = useCallback(() => {\n    handleNavigate('/setup/wizard', 'Open setup wizard')\n  }, [handleNavigate])\n\n  const handleCreateWithAi = useCallback(() => {\n    handleNavigate('/templates/new/chat', 'Create template with AI')\n  }, [handleNavigate])\n\n  const handleEditTemplate = useCallback(() => {\n    if (menuTemplate) {\n      handleNavigate(`/templates/${menuTemplate.id}/edit`, 'Edit template', { templateId: menuTemplate.id })\n    }\n    handleCloseMenu()\n  }, [menuTemplate, handleNavigate, handleCloseMenu])\n\n  const handleDeleteClick = useCallback(() => {\n    setDeletingTemplate(menuTemplate)\n    setDeleteConfirmOpen(true)\n    handleCloseMenu()\n  }, [menuTemplate, handleCloseMenu])\n\n  const handleDeleteConfirm = useCallback(async () => {\n    if (!deletingTemplate) return\n    const templateToDelete = deletingTemplate\n    const templateData = templates.find((t) => t.id === templateToDelete.id)\n\n    setDeleteConfirmOpen(false)\n    setDeletingTemplate(null)\n\n    // UX Governance: Delete action with tracking\n    execute({\n      type: InteractionType.DELETE,\n      label: `Delete design \"${templateToDelete.name || templateToDelete.id}\"`,\n      reversibility: Reversibility.PARTIALLY_REVERSIBLE,\n      action: async () => {\n        removeTemplate(templateToDelete.id)\n\n        let undone = false\n        const deleteTimeout = setTimeout(async () => {\n          if (undone) return\n          try {\n            await api.deleteTemplate(templateToDelete.id)\n          } catch (err) {\n            if (templateData) {\n              setTemplates((prev) => [...prev, templateData])\n            }\n            throw err\n          }\n        }, 5000)\n\n        toast.showWithUndo(\n          `\"${templateToDelete.name || templateToDelete.id}\" removed`,\n          () => {\n            undone = true\n            clearTimeout(deleteTimeout)\n            if (templateData) {\n              setTemplates((prev) => [...prev, templateData])\n            }\n            toast.show('Design restored', 'success')\n          },\n          { severity: 'info' }\n        )\n      },\n    })\n  }, [deletingTemplate, templates, removeTemplate, setTemplates, toast, execute])\n\n  const handleExport = useCallback(async () => {\n    if (!menuTemplate) return\n    const templateToExport = menuTemplate\n    handleCloseMenu()\n\n    // UX Governance: Download action with tracking\n    execute({\n      type: InteractionType.DOWNLOAD,\n      label: `Export design \"${templateToExport.name || templateToExport.id}\"`,\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      successMessage: 'Design exported',\n      errorMessage: 'Failed to export design',\n      action: async () => {\n        await api.exportTemplateZip(templateToExport.id)\n      },\n    })\n  }, [menuTemplate, handleCloseMenu, execute])\n\n  const handleDuplicate = useCallback(async () => {\n    if (!menuTemplate) return\n    const templateToDuplicate = menuTemplate\n    handleCloseMenu()\n\n    // UX Governance: Create action with tracking\n    execute({\n      type: InteractionType.CREATE,\n      label: `Duplicate design \"${templateToDuplicate.name || templateToDuplicate.id}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      errorMessage: 'Failed to copy design',\n      action: async () => {\n        setDuplicating(true)\n        try {\n          const result = await api.duplicateTemplate(templateToDuplicate.id)\n          const duplicatedName = result?.name || (templateToDuplicate.name ? `${templateToDuplicate.name} (Copy)` : 'Design (Copy)')\n          await fetchTemplatesData()\n          toast.show(`Design copied as \"${duplicatedName}\"`, 'success')\n        } finally {\n          setDuplicating(false)\n        }\n      },\n    })\n  }, [menuTemplate, toast, handleCloseMenu, fetchTemplatesData, execute])\n\n  const handleEditMetadata = useCallback(() => {\n    if (!menuTemplate) return\n    setMetadataTemplate(menuTemplate)\n    setMetadataForm({\n      name: menuTemplate.name || '',\n      description: menuTemplate.description || '',\n      tags: Array.isArray(menuTemplate.tags) ? menuTemplate.tags.join(', ') : '',\n      status: menuTemplate.status || 'approved',\n    })\n    setMetadataOpen(true)\n    handleCloseMenu()\n  }, [menuTemplate, handleCloseMenu])\n\n  const handleViewSimilar = useCallback(async () => {\n    if (!menuTemplate) return\n    setSimilarTemplate(menuTemplate)\n    setSimilarOpen(true)\n    setSimilarLoading(true)\n    setSimilarTemplates([])\n    handleCloseMenu()\n    try {\n      const response = await api.getSimilarTemplates(menuTemplate.id)\n      setSimilarTemplates(response.similar || [])\n    } catch (err) {\n      console.error('Failed to fetch similar designs:', err)\n      toast.show('Failed to load similar designs', 'error')\n    } finally {\n      setSimilarLoading(false)\n    }\n  }, [menuTemplate, handleCloseMenu, toast])\n\n  const handleSelectSimilarTemplate = useCallback((template) => {\n    setSimilarOpen(false)\n    handleNavigate(`/reports?template=${template.id}`, 'Open reports', { templateId: template.id })\n  }, [handleNavigate])\n\n  const handleMetadataSave = useCallback(async () => {\n    if (!metadataTemplate) return\n    const trimmedName = metadataForm.name.trim()\n    if (!trimmedName) {\n      toast.show('Design name is required', 'error')\n      return\n    }\n    if (trimmedName.length > 200) {\n      toast.show('Design name must be 200 characters or less', 'error')\n      return\n    }\n    const tags = metadataForm.tags\n      ? metadataForm.tags.split(',').map((tag) => tag.trim()).filter(Boolean)\n      : []\n    const invalidTag = tags.find((tag) => tag.length > 50)\n    if (invalidTag) {\n      toast.show(`Tag \"${invalidTag.slice(0, 20)}...\" exceeds 50 character limit`, 'error')\n      return\n    }\n\n    const payload = {\n      name: trimmedName,\n      description: metadataForm.description.trim() || undefined,\n      status: metadataForm.status,\n      tags,\n    }\n\n    // UX Governance: Update action with tracking\n    execute({\n      type: InteractionType.UPDATE,\n      label: `Update design details \"${trimmedName}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      successMessage: 'Design details updated',\n      errorMessage: 'Failed to update design details',\n      action: async () => {\n        setMetadataSaving(true)\n        try {\n          const result = await api.updateTemplateMetadata(metadataTemplate.id, payload)\n          const updated = result?.template || { ...metadataTemplate, ...payload }\n          updateTemplate(metadataTemplate.id, (tpl) => ({ ...tpl, ...updated }))\n          setMetadataOpen(false)\n        } finally {\n          setMetadataSaving(false)\n        }\n      },\n    })\n  }, [metadataTemplate, metadataForm, updateTemplate, execute])\n\n  const handleOpenImport = useCallback(() => {\n    setImportOpen(true)\n  }, [])\n\n  const handleImport = useCallback(async () => {\n    if (!importFile) {\n      toast.show('Select a design backup file first', 'error')\n      return\n    }\n    const fileName = importFile.name || ''\n    const ext = fileName.toLowerCase().split('.').pop()\n    if (ext !== 'zip') {\n      toast.show('Invalid file type. Please select a .zip file', 'error')\n      return\n    }\n    const maxSize = 50 * 1024 * 1024\n    if (importFile.size > maxSize) {\n      toast.show('File too large. Maximum size is 50MB', 'error')\n      return\n    }\n\n    // UX Governance: Upload action with tracking\n    execute({\n      type: InteractionType.UPLOAD,\n      label: `Import design \"${importName.trim() || fileName}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      blocksNavigation: true,\n      successMessage: 'Design imported',\n      errorMessage: 'Failed to import design',\n      action: async () => {\n        setImporting(true)\n        setImportProgress(0)\n        try {\n          await api.importTemplateZip({\n            file: importFile,\n            name: importName.trim() || undefined,\n            onUploadProgress: (percent) => setImportProgress(percent),\n          })\n          await fetchTemplatesData()\n          setImportOpen(false)\n          setImportFile(null)\n          setImportName('')\n        } finally {\n          setImporting(false)\n          setImportProgress(0)\n        }\n      },\n    })\n  }, [importFile, importName, fetchTemplatesData, execute])\n\n  const handleBulkDeleteOpen = useCallback(() => {\n    if (!selectedIds.length) return\n    setBulkDeleteOpen(true)\n  }, [selectedIds])\n\n  const handleBulkDeleteConfirm = useCallback(async () => {\n    if (!selectedIds.length) {\n      setBulkDeleteOpen(false)\n      return\n    }\n\n    const idsToDelete = [...selectedIds]\n    const count = idsToDelete.length\n    const removedTemplates = templates.filter((tpl) => idsToDelete.includes(tpl.id))\n    if (!removedTemplates.length) {\n      setBulkDeleteOpen(false)\n      return\n    }\n\n    setBulkDeleteOpen(false)\n    setSelectedIds([])\n\n    if (bulkDeleteUndoRef.current?.timeoutId) {\n      clearTimeout(bulkDeleteUndoRef.current.timeoutId)\n      bulkDeleteUndoRef.current = null\n    }\n\n    // UX Governance: Bulk delete action with tracking\n    execute({\n      type: InteractionType.DELETE,\n      label: `Delete ${count} design${count !== 1 ? 's' : ''}`,\n      reversibility: Reversibility.PARTIALLY_REVERSIBLE,\n      errorMessage: 'Failed to remove designs',\n      action: async () => {\n        setTemplates((prev) => prev.filter((tpl) => !idsToDelete.includes(tpl.id)))\n\n        let undone = false\n        const timeoutId = setTimeout(async () => {\n          if (undone) return\n          setBulkActionLoading(true)\n          try {\n            const result = await api.bulkDeleteTemplates(idsToDelete)\n            const deletedCount = result?.deletedCount ?? result?.deleted?.length ?? 0\n            const failedCount = result?.failedCount ?? result?.failed?.length ?? 0\n            if (failedCount > 0) {\n              toast.show(\n                `Removed ${deletedCount} design${deletedCount !== 1 ? 's' : ''}, ${failedCount} failed`,\n                'warning'\n              )\n            } else {\n              toast.show(`Removed ${deletedCount} design${deletedCount !== 1 ? 's' : ''}`, 'success')\n            }\n            await fetchTemplatesData()\n          } catch (err) {\n            setTemplates((prev) => {\n              const existing = new Set(prev.map((tpl) => tpl.id))\n              const restored = removedTemplates.filter((tpl) => !existing.has(tpl.id))\n              return restored.length ? [...prev, ...restored] : prev\n            })\n            throw err\n          } finally {\n            setBulkActionLoading(false)\n          }\n        }, 5000)\n\n        bulkDeleteUndoRef.current = { timeoutId, ids: idsToDelete, templates: removedTemplates }\n\n        toast.showWithUndo(\n          `Removed ${count} design${count !== 1 ? 's' : ''}`,\n          () => {\n            undone = true\n            clearTimeout(timeoutId)\n            bulkDeleteUndoRef.current = null\n            setTemplates((prev) => {\n              const existing = new Set(prev.map((tpl) => tpl.id))\n              const restored = removedTemplates.filter((tpl) => !existing.has(tpl.id))\n              return restored.length ? [...prev, ...restored] : prev\n            })\n            toast.show('Designs restored', 'success')\n          },\n          { severity: 'info' }\n        )\n      },\n    })\n  }, [selectedIds, templates, toast, fetchTemplatesData, execute, setTemplates])\n\n  const handleBulkStatusApply = useCallback(async () => {\n    if (!selectedIds.length) {\n      setBulkStatusOpen(false)\n      return\n    }\n\n    const count = selectedIds.length\n    setBulkStatusOpen(false)\n\n    // UX Governance: Bulk update action with tracking\n    execute({\n      type: InteractionType.UPDATE,\n      label: `Update status for ${count} design${count !== 1 ? 's' : ''}`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      errorMessage: 'Failed to update status',\n      action: async () => {\n        setBulkActionLoading(true)\n        try {\n          const result = await api.bulkUpdateTemplateStatus(selectedIds, bulkStatus)\n          const updatedCount = result?.updatedCount ?? result?.updated?.length ?? 0\n          const failedCount = result?.failedCount ?? result?.failed?.length ?? 0\n          if (failedCount > 0) {\n            toast.show(\n              `Updated ${updatedCount} design${updatedCount !== 1 ? 's' : ''}, ${failedCount} failed`,\n              'warning'\n            )\n          } else {\n            toast.show(\n              `Updated ${updatedCount} design${updatedCount !== 1 ? 's' : ''}`,\n              'success'\n            )\n          }\n          await fetchTemplatesData()\n        } finally {\n          setBulkActionLoading(false)\n        }\n      },\n    })\n  }, [selectedIds, bulkStatus, toast, fetchTemplatesData, execute])\n\n  const handleBulkTagsApply = useCallback(async () => {\n    if (!selectedIds.length) {\n      setBulkTagsOpen(false)\n      return\n    }\n    const tags = bulkTags\n      .split(',')\n      .map((tag) => tag.trim())\n      .filter(Boolean)\n    if (!tags.length) {\n      toast.show('Enter at least one tag', 'error')\n      return\n    }\n    const invalidTag = tags.find((tag) => tag.length > 50)\n    if (invalidTag) {\n      toast.show(`Tag \"${invalidTag.slice(0, 20)}...\" exceeds 50 character limit`, 'error')\n      return\n    }\n\n    const count = selectedIds.length\n    setBulkTagsOpen(false)\n\n    // UX Governance: Bulk update action with tracking\n    execute({\n      type: InteractionType.UPDATE,\n      label: `Add tags to ${count} design${count !== 1 ? 's' : ''}`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      errorMessage: 'Failed to add tags',\n      action: async () => {\n        setBulkActionLoading(true)\n        try {\n          const result = await api.bulkAddTemplateTags(selectedIds, tags)\n          const updatedCount = result?.updatedCount ?? result?.updated?.length ?? 0\n          const failedCount = result?.failedCount ?? result?.failed?.length ?? 0\n          if (failedCount > 0) {\n            toast.show(\n              `Tagged ${updatedCount} design${updatedCount !== 1 ? 's' : ''}, ${failedCount} failed`,\n              'warning'\n            )\n          } else {\n            toast.show(\n              `Tagged ${updatedCount} design${updatedCount !== 1 ? 's' : ''}`,\n              'success'\n            )\n          }\n          await fetchTemplatesData()\n          setBulkTags('')\n        } finally {\n          setBulkActionLoading(false)\n        }\n      },\n    })\n  }, [selectedIds, bulkTags, toast, fetchTemplatesData, execute])\n\n  const handleRowClick = useCallback((row) => {\n    handleNavigate(`/reports?template=${row.id}`, 'Open reports', { templateId: row.id })\n  }, [handleNavigate])\n\n  const columns = useMemo(() => [\n    {\n      field: 'name',\n      headerName: 'Design',\n      minWidth: 200,\n      flex: 1,\n      renderCell: (value, row) => {\n        const config = getKindConfig(theme, row.kind)\n        const Icon = config.icon\n        return (\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <FavoriteButton\n              entityType=\"templates\"\n              entityId={row.id}\n              initialFavorite={favorites.has(row.id)}\n              onToggle={(isFav) => handleFavoriteToggle(row.id, isFav)}\n            />\n            <KindIconContainer>\n              <Icon sx={{ color: 'text.secondary', fontSize: 18 }} />\n            </KindIconContainer>\n            <Box sx={{ minWidth: 0, overflow: 'hidden' }}>\n              <Typography sx={{\n                fontWeight: 500,\n                fontSize: '14px',\n                color: 'text.primary',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap',\n              }}>\n                {value || row.id}\n              </Typography>\n              <Typography sx={{\n                fontSize: '0.75rem',\n                color: 'text.secondary',\n                overflow: 'hidden',\n                textOverflow: 'ellipsis',\n                whiteSpace: 'nowrap',\n              }}>\n                {row.description || `${row.kind?.toUpperCase() || 'PDF'} Design`}\n              </Typography>\n            </Box>\n          </Box>\n        )\n      },\n    },\n    {\n      field: 'kind',\n      headerName: 'Type',\n      width: 100,\n      renderCell: (value) => {\n        const config = getKindConfig(theme, value)\n        return (\n          <KindChip\n            label={value?.toUpperCase() || 'PDF'}\n            size=\"small\"\n            kindColor={config.color}\n            kindBg={config.bgColor}\n          />\n        )\n      },\n    },\n    {\n      field: 'status',\n      headerName: 'Status',\n      width: 120,\n      renderCell: (value) => {\n        const config = getStatusConfig(theme, value)\n        return (\n          <StatusChip\n            label={value || 'approved'}\n            size=\"small\"\n            statusColor={config.color}\n            statusBg={config.bgColor}\n          />\n        )\n      },\n    },\n    {\n      field: 'mappingKeys',\n      headerName: 'Fields',\n      width: 80,\n      renderCell: (value, row) => {\n        const count = Array.isArray(value) ? value.length : Array.isArray(row.mappingKeys) ? row.mappingKeys.length : row.tokens_count\n        return (\n          <Typography sx={{ fontSize: '14px', color: 'text.secondary' }}>\n            {count || '-'}\n          </Typography>\n        )\n      },\n    },\n    {\n      field: 'tags',\n      headerName: 'Tags',\n      width: 180,\n      renderCell: (value) => {\n        const tags = Array.isArray(value) ? value : []\n        if (!tags.length) {\n          return <Typography sx={{ fontSize: '0.75rem', color: 'text.disabled' }}>-</Typography>\n        }\n        return (\n          <Stack direction=\"row\" spacing={0.5} sx={{ flexWrap: 'wrap' }}>\n            {tags.slice(0, 2).map((tag) => (\n              <TagChip key={tag} label={tag} size=\"small\" />\n            ))}\n            {tags.length > 2 && (\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                +{tags.length - 2}\n              </Typography>\n            )}\n          </Stack>\n        )\n      },\n    },\n    {\n      field: 'createdAt',\n      headerName: 'Created',\n      width: 120,\n      renderCell: (value, row) => {\n        const raw = value || row.created_at\n        if (!raw) return <Typography sx={{ fontSize: '14px', color: 'text.disabled' }}>-</Typography>\n        const d = new Date(raw)\n        const now = new Date()\n        const diffDay = Math.floor((now - d) / 86400000)\n        const relative = diffDay < 1 ? 'Today' : diffDay < 2 ? 'Yesterday' : diffDay < 7 ? `${diffDay}d ago` : d.toLocaleDateString()\n        return (\n          <Tooltip title={d.toLocaleString()} arrow>\n            <Typography sx={{ fontSize: '14px', color: 'text.secondary', cursor: 'default' }}>\n              {relative}\n            </Typography>\n          </Tooltip>\n        )\n      },\n    },\n    {\n      field: 'lastRunAt',\n      headerName: 'Last Run',\n      width: 120,\n      renderCell: (value, row) => {\n        const raw = value || row.last_run_at\n        if (!raw) return <Typography sx={{ fontSize: '14px', color: 'text.disabled' }}>-</Typography>\n        const d = new Date(raw)\n        const now = new Date()\n        const diffMs = now - d\n        const diffHr = Math.floor(diffMs / 3600000)\n        const diffDay = Math.floor(diffMs / 86400000)\n        const relative = diffHr < 1 ? 'Just now' : diffHr < 24 ? `${diffHr}h ago` : diffDay < 7 ? `${diffDay}d ago` : d.toLocaleDateString()\n        return (\n          <Tooltip title={d.toLocaleString()} arrow>\n            <Typography sx={{ fontSize: '14px', color: 'text.secondary', cursor: 'default' }}>\n              {relative}\n            </Typography>\n          </Tooltip>\n        )\n      },\n    },\n    {\n      field: 'updatedAt',\n      headerName: 'Updated',\n      width: 140,\n      renderCell: (value, row) => {\n        const raw = value || row.updated_at\n        return (\n          <Typography sx={{ fontSize: '14px', color: 'text.secondary' }}>\n            {raw ? new Date(raw).toLocaleDateString() : '-'}\n          </Typography>\n        )\n      },\n    },\n  ], [theme, favorites, handleFavoriteToggle])\n\n  const filters = useMemo(() => {\n    const baseFilters = [\n      {\n        key: 'kind',\n        label: 'Type',\n        options: [\n          { value: 'pdf', label: 'PDF' },\n          { value: 'excel', label: 'Excel' },\n        ],\n      },\n      {\n        key: 'status',\n        label: 'Status',\n        options: [\n          { value: 'approved', label: 'Approved' },\n          { value: 'pending', label: 'Pending' },\n          { value: 'draft', label: 'Draft' },\n          { value: 'archived', label: 'Archived' },\n        ],\n      },\n    ]\n\n    if (allTags.length > 0) {\n      baseFilters.push({\n        key: 'tags',\n        label: 'Tag',\n        options: allTags.map((tag) => ({ value: tag, label: tag })),\n        matchFn: (row, filterValue) => {\n          const rowTags = Array.isArray(row.tags) ? row.tags : []\n          return rowTags.includes(filterValue)\n        },\n      })\n    }\n\n    return baseFilters\n  }, [allTags])\n\n  const bulkActions = useMemo(() => ([\n    {\n      label: 'Update Status',\n      icon: <ArchiveIcon sx={{ fontSize: 16 }} />,\n      onClick: () => setBulkStatusOpen(true),\n      disabled: bulkActionLoading,\n    },\n    {\n      label: 'Add Tags',\n      icon: <LabelIcon sx={{ fontSize: 16 }} />,\n      onClick: () => setBulkTagsOpen(true),\n      disabled: bulkActionLoading,\n    },\n  ]), [bulkActionLoading])\n\n  return (\n    <PageContainer>\n      {(kindFilter || statusParam) && (\n        <Stack direction=\"row\" spacing={1} sx={{ mb: 1.5, flexWrap: 'wrap' }}>\n          {kindFilter && (\n            <QuickFilterChip\n              label={`Type: ${kindFilter.toUpperCase()}`}\n              onDelete={() => clearQuickFilter('kind')}\n              size=\"small\"\n            />\n          )}\n          {statusParam && (\n            <QuickFilterChip\n              label={`Status: ${statusParam}`}\n              onDelete={() => clearQuickFilter('status')}\n              size=\"small\"\n            />\n          )}\n        </Stack>\n      )}\n      <Box sx={{ mb: 2 }}>\n        <ReportGlossaryNotice />\n      </Box>\n      <DataTable\n        title=\"Report Designs\"\n        subtitle=\"Upload and manage your report designs\"\n        columns={columns}\n        data={filteredTemplates}\n        loading={loading}\n        searchPlaceholder=\"Search designs...\"\n        filters={filters}\n        actions={[\n          {\n            label: 'Create with AI',\n            icon: <AutoAwesomeIcon sx={{ fontSize: 18 }} />,\n            variant: 'contained',\n            onClick: handleCreateWithAi,\n          },\n          {\n            label: 'Upload Design',\n            icon: <AddIcon sx={{ fontSize: 18 }} />,\n            variant: 'outlined',\n            onClick: handleAddTemplate,\n          },\n          {\n            label: 'Import Backup',\n            icon: <UploadFileIcon sx={{ fontSize: 18 }} />,\n            variant: 'outlined',\n            onClick: handleOpenImport,\n          },\n        ]}\n        selectable\n        onSelectionChange={setSelectedIds}\n        bulkActions={bulkActions}\n        onBulkDelete={handleBulkDeleteOpen}\n        onRowClick={handleRowClick}\n        rowActions={(row) => (\n          <Tooltip title=\"More actions\">\n            <MoreActionsButton\n              size=\"small\"\n              onClick={(e) => handleOpenMenu(e, row)}\n              aria-label=\"More actions\"\n            >\n              <MoreVertIcon sx={{ fontSize: 18 }} />\n            </MoreActionsButton>\n          </Tooltip>\n        )}\n        emptyState={{\n          icon: DescriptionIcon,\n          title: 'No report designs yet',\n          description: 'Create a template with AI or upload a PDF/Excel file.',\n          actionLabel: 'Create with AI',\n          onAction: handleCreateWithAi,\n        }}\n      />\n\n      {/* Row Actions Menu */}\n      <StyledMenu\n        anchorEl={menuAnchor}\n        open={Boolean(menuAnchor)}\n        onClose={handleCloseMenu}\n      >\n        <StyledMenuItem onClick={handleEditTemplate}>\n          <ListItemIcon><EditIcon sx={{ fontSize: 16 }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>Edit</ListItemText>\n        </StyledMenuItem>\n        <StyledMenuItem onClick={handleEditMetadata}>\n          <ListItemIcon><SettingsIcon sx={{ fontSize: 16 }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>Edit Details</ListItemText>\n        </StyledMenuItem>\n        <StyledMenuItem onClick={handleExport}>\n          <ListItemIcon><DownloadIcon sx={{ fontSize: 16 }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>Export</ListItemText>\n        </StyledMenuItem>\n        <StyledMenuItem onClick={handleDuplicate} disabled={duplicating}>\n          <ListItemIcon><ContentCopyIcon sx={{ fontSize: 16 }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>{duplicating ? 'Duplicating...' : 'Duplicate'}</ListItemText>\n        </StyledMenuItem>\n        <StyledMenuItem onClick={handleViewSimilar}>\n          <ListItemIcon><AutoAwesomeIcon sx={{ fontSize: 16 }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>View Similar</ListItemText>\n        </StyledMenuItem>\n        <StyledMenuItem onClick={handleDeleteClick} sx={{ color: 'text.primary' }}>\n          <ListItemIcon><DeleteIcon sx={{ fontSize: 16, color: 'text.secondary' }} /></ListItemIcon>\n          <ListItemText primaryTypographyProps={{ fontSize: '14px' }}>Delete</ListItemText>\n        </StyledMenuItem>\n      </StyledMenu>\n\n      {/* Delete Confirmation */}\n      <ConfirmModal\n        open={deleteConfirmOpen}\n        onClose={() => setDeleteConfirmOpen(false)}\n        onConfirm={handleDeleteConfirm}\n        title=\"Remove Design\"\n        message={`Remove \"${deletingTemplate?.name || deletingTemplate?.id}\"? Past report files remain in History. You can undo this within a few seconds.`}\n        confirmLabel=\"Remove\"\n        severity=\"error\"\n        loading={loading}\n      />\n\n      <ConfirmModal\n        open={bulkDeleteOpen}\n        onClose={() => setBulkDeleteOpen(false)}\n        onConfirm={handleBulkDeleteConfirm}\n        title=\"Remove Designs\"\n        message={`Remove ${selectedIds.length} design${selectedIds.length !== 1 ? 's' : ''}? Past report files remain in History. You can undo this within a few seconds.`}\n        confirmLabel=\"Remove\"\n        severity=\"error\"\n        loading={bulkActionLoading}\n      />\n\n      {/* Edit Metadata Dialog */}\n      <StyledDialog open={metadataOpen} onClose={() => setMetadataOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogHeader>Edit Design Details</DialogHeader>\n        <StyledDialogContent>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <StyledTextField\n              label=\"Name\"\n              value={metadataForm.name}\n              onChange={(e) => setMetadataForm((prev) => ({ ...prev, name: e.target.value }))}\n              fullWidth\n            />\n            <StyledTextField\n              label=\"Description\"\n              value={metadataForm.description}\n              onChange={(e) => setMetadataForm((prev) => ({ ...prev, description: e.target.value }))}\n              multiline\n              minRows={2}\n              fullWidth\n            />\n            <StyledTextField\n              label=\"Tags\"\n              value={metadataForm.tags}\n              onChange={(e) => setMetadataForm((prev) => ({ ...prev, tags: e.target.value }))}\n              helperText=\"Comma-separated (e.g. finance, monthly, ops)\"\n              fullWidth\n            />\n            <StyledFormControl fullWidth>\n              <InputLabel>Status</InputLabel>\n              <Select\n                value={metadataForm.status}\n                label=\"Status\"\n                onChange={(e) => setMetadataForm((prev) => ({ ...prev, status: e.target.value }))}\n              >\n                <MenuItem value=\"approved\">Approved</MenuItem>\n                <MenuItem value=\"pending\">Pending</MenuItem>\n                <MenuItem value=\"draft\">Draft</MenuItem>\n                <MenuItem value=\"archived\">Archived</MenuItem>\n              </Select>\n            </StyledFormControl>\n          </Stack>\n        </StyledDialogContent>\n        <StyledDialogActions>\n          <SecondaryButton variant=\"outlined\" onClick={() => setMetadataOpen(false)} disabled={metadataSaving}>Cancel</SecondaryButton>\n          <PrimaryButton\n            onClick={handleMetadataSave}\n            disabled={metadataSaving || !metadataForm.name.trim()}\n          >\n            {metadataSaving ? 'Saving...' : 'Save'}\n          </PrimaryButton>\n        </StyledDialogActions>\n      </StyledDialog>\n\n      {/* Bulk Status Dialog */}\n      <StyledDialog open={bulkStatusOpen} onClose={() => setBulkStatusOpen(false)} maxWidth=\"xs\" fullWidth>\n        <DialogHeader>Update Status</DialogHeader>\n        <StyledDialogContent>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <Typography sx={{ fontSize: '14px', color: 'text.secondary' }}>\n              Update {selectedIds.length} design{selectedIds.length !== 1 ? 's' : ''} to:\n            </Typography>\n            <StyledFormControl fullWidth>\n              <InputLabel>Status</InputLabel>\n              <Select\n                value={bulkStatus}\n                label=\"Status\"\n                onChange={(e) => setBulkStatus(e.target.value)}\n              >\n                <MenuItem value=\"approved\">Approved</MenuItem>\n                <MenuItem value=\"pending\">Pending</MenuItem>\n                <MenuItem value=\"draft\">Draft</MenuItem>\n                <MenuItem value=\"archived\">Archived</MenuItem>\n              </Select>\n            </StyledFormControl>\n          </Stack>\n        </StyledDialogContent>\n        <StyledDialogActions>\n          <SecondaryButton variant=\"outlined\" onClick={() => setBulkStatusOpen(false)} disabled={bulkActionLoading}>Cancel</SecondaryButton>\n          <PrimaryButton\n            onClick={handleBulkStatusApply}\n            disabled={bulkActionLoading}\n          >\n            {bulkActionLoading ? 'Updating...' : 'Update'}\n          </PrimaryButton>\n        </StyledDialogActions>\n      </StyledDialog>\n\n      {/* Bulk Tags Dialog */}\n      <StyledDialog open={bulkTagsOpen} onClose={() => setBulkTagsOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogHeader>Add Tags</DialogHeader>\n        <StyledDialogContent>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <Typography sx={{ fontSize: '14px', color: 'text.secondary' }}>\n              Add tags to {selectedIds.length} design{selectedIds.length !== 1 ? 's' : ''}.\n            </Typography>\n            <StyledTextField\n              label=\"Tags\"\n              value={bulkTags}\n              onChange={(e) => setBulkTags(e.target.value)}\n              helperText=\"Comma-separated (e.g. finance, monthly, ops)\"\n              fullWidth\n            />\n          </Stack>\n        </StyledDialogContent>\n        <StyledDialogActions>\n          <SecondaryButton variant=\"outlined\" onClick={() => setBulkTagsOpen(false)} disabled={bulkActionLoading}>Cancel</SecondaryButton>\n          <PrimaryButton\n            onClick={handleBulkTagsApply}\n            disabled={bulkActionLoading}\n          >\n            {bulkActionLoading ? 'Updating...' : 'Add Tags'}\n          </PrimaryButton>\n        </StyledDialogActions>\n      </StyledDialog>\n\n      {/* Import Dialog */}\n      <StyledDialog open={importOpen} onClose={() => !importing && setImportOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogHeader>Import Design Backup</DialogHeader>\n        <StyledDialogContent>\n          <Stack spacing={2} sx={{ mt: 1 }}>\n            <SecondaryButton variant=\"outlined\" component=\"label\" disabled={importing}>\n              {importFile ? importFile.name : 'Choose backup file (.zip)'}\n              <input\n                type=\"file\"\n                hidden\n                accept=\".zip\"\n                onChange={(e) => setImportFile(e.target.files?.[0] || null)}\n              />\n            </SecondaryButton>\n            <StyledTextField\n              label=\"Design Name (optional)\"\n              value={importName}\n              onChange={(e) => setImportName(e.target.value)}\n              fullWidth\n              disabled={importing}\n            />\n            {importing && (\n              <Box sx={{ width: '100%' }}>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                  Uploading... {importProgress}%\n                </Typography>\n                <StyledLinearProgress variant=\"determinate\" value={importProgress} />\n              </Box>\n            )}\n          </Stack>\n        </StyledDialogContent>\n        <StyledDialogActions>\n          <SecondaryButton variant=\"outlined\" onClick={() => setImportOpen(false)} disabled={importing}>Cancel</SecondaryButton>\n          <PrimaryButton onClick={handleImport} disabled={importing || !importFile}>\n            {importing ? 'Importing...' : 'Import'}\n          </PrimaryButton>\n        </StyledDialogActions>\n      </StyledDialog>\n\n      {/* Similar Designs Dialog */}\n      <StyledDialog open={similarOpen} onClose={() => setSimilarOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogHeader>\n          <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n            <AiIcon />\n            <span>Similar Designs</span>\n          </Stack>\n        </DialogHeader>\n        <StyledDialogContent>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Designs similar to \"{similarTemplate?.name || similarTemplate?.id}\"\n          </Typography>\n          {similarLoading ? (\n            <Box sx={{ py: 4, textAlign: 'center' }}>\n              <Typography color=\"text.secondary\">Loading similar designs...</Typography>\n            </Box>\n          ) : similarTemplates.length === 0 ? (\n            <Box sx={{ py: 4, textAlign: 'center' }}>\n              <Typography color=\"text.secondary\">No similar designs found.</Typography>\n            </Box>\n          ) : (\n            <Stack spacing={1}>\n              {similarTemplates.map((template) => {\n                const config = getKindConfig(theme, template.kind)\n                const Icon = config.icon\n                return (\n                  <SimilarTemplateCard\n                    key={template.id}\n                    onClick={() => handleSelectSimilarTemplate(template)}\n                  >\n                    <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                      <KindIconContainer>\n                        <Icon sx={{ color: 'text.secondary', fontSize: 18 }} />\n                      </KindIconContainer>\n                      <Box sx={{ flex: 1 }}>\n                        <Typography variant=\"subtitle2\">{template.name || template.id}</Typography>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {template.description || `${template.kind?.toUpperCase() || 'PDF'} Design`}\n                        </Typography>\n                      </Box>\n                      {template.similarity_score && (\n                        <Chip\n                          label={`${Math.round(template.similarity_score * 100)}% match`}\n                          size=\"small\"\n                          variant=\"outlined\"\n                          sx={{ borderRadius: 8, bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                        />\n                      )}\n                    </Stack>\n                  </SimilarTemplateCard>\n                )\n              })}\n            </Stack>\n          )}\n        </StyledDialogContent>\n        <StyledDialogActions>\n          <SecondaryButton variant=\"outlined\" onClick={() => setSimilarOpen(false)}>Close</SecondaryButton>\n        </StyledDialogActions>\n      </StyledDialog>\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport TemplatesPageContainer from '@/features/templates/containers/TemplatesPageContainer'\n\nexport default function TemplatesPage() {\n  useInteraction()\n  return <TemplatesPageContainer />\n}\n"],"names":["ArchiveIcon","createSvgIcon","_jsx","LabelIcon","PageContainer","styled","Box","theme","QuickFilterChip","Chip","alpha","StyledMenu","Menu","fadeInUp","StyledMenuItem","MenuItem","neutral","StyledDialog","Dialog","DialogHeader","DialogTitle","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","StyledTextField","TextField","ActionButton","Button","PrimaryButton","SecondaryButton","KindIconContainer","prop","KindChip","kindColor","kindBg","StatusChip","statusColor","statusBg","TagChip","MoreActionsButton","IconButton","StyledLinearProgress","LinearProgress","SimilarTemplateCard","AiIcon","AutoAwesomeIcon","pulse","getKindConfig","kind","configs","PictureAsPdfIcon","TableChartIcon","getStatusConfig","status","s","statusColors","TemplatesPage","useTheme","navigate","useNavigateInteraction","searchParams","setSearchParams","useSearchParams","toast","useToast","execute","useInteraction","handleNavigate","useCallback","path","label","intent","templates","useAppStore","setTemplates","removeTemplate","updateTemplate","loading","setLoading","useState","deleteConfirmOpen","setDeleteConfirmOpen","deletingTemplate","setDeletingTemplate","menuAnchor","setMenuAnchor","menuTemplate","setMenuTemplate","duplicating","setDuplicating","metadataOpen","setMetadataOpen","metadataTemplate","setMetadataTemplate","metadataForm","setMetadataForm","metadataSaving","setMetadataSaving","importOpen","setImportOpen","importFile","setImportFile","importName","setImportName","importing","setImporting","importProgress","setImportProgress","allTags","setAllTags","selectedIds","setSelectedIds","bulkDeleteOpen","setBulkDeleteOpen","bulkStatusOpen","setBulkStatusOpen","bulkStatus","setBulkStatus","bulkTagsOpen","setBulkTagsOpen","bulkTags","setBulkTags","bulkActionLoading","setBulkActionLoading","bulkDeleteUndoRef","useRef","didLoadRef","similarOpen","setSimilarOpen","similarTemplate","setSimilarTemplate","similarTemplates","setSimilarTemplates","similarLoading","setSimilarLoading","favorites","setFavorites","kindFilter","statusParam","filteredTemplates","useMemo","data","tpl","clearQuickFilter","key","next","fetchTemplatesData","templatesData","tagsData","favoritesData","api.listTemplates","api.getAllTemplateTags","api.getFavorites","favIds","t","err","handleFavoriteToggle","templateId","isFavorite","prev","useEffect","handleOpenMenu","event","template","handleCloseMenu","handleAddTemplate","handleCreateWithAi","handleEditTemplate","handleDeleteClick","handleDeleteConfirm","templateToDelete","templateData","InteractionType","Reversibility","undone","deleteTimeout","api.deleteTemplate","handleExport","templateToExport","api.exportTemplateZip","handleDuplicate","templateToDuplicate","duplicatedName","api.duplicateTemplate","handleEditMetadata","handleViewSimilar","response","api.getSimilarTemplates","handleSelectSimilarTemplate","handleMetadataSave","trimmedName","tags","tag","invalidTag","payload","updated","api.updateTemplateMetadata","handleOpenImport","handleImport","fileName","maxSize","api.importTemplateZip","percent","handleBulkDeleteOpen","handleBulkDeleteConfirm","idsToDelete","count","removedTemplates","timeoutId","result","api.bulkDeleteTemplates","deletedCount","failedCount","existing","restored","handleBulkStatusApply","api.bulkUpdateTemplateStatus","updatedCount","handleBulkTagsApply","api.bulkAddTemplateTags","handleRowClick","row","columns","value","Icon","jsxs","jsx","FavoriteButton","isFav","Typography","config","Stack","raw","d","diffDay","relative","Tooltip","diffMs","diffHr","filters","baseFilters","filterValue","bulkActions","ReportGlossaryNotice","DataTable","AddIcon","UploadFileIcon","e","MoreVertIcon","DescriptionIcon","ListItemIcon","EditIcon","ListItemText","SettingsIcon","DownloadIcon","ContentCopyIcon","DeleteIcon","ConfirmModal","StyledFormControl","InputLabel","Select","TemplatesPageContainer"],"mappings":"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","x_google_ignoreList":[0,1]}