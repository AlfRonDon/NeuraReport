{"version":3,"file":"SynthesisPage-BVS5EpJ9.js","sources":["../../../home/rohith/desktop/NeuraReport/frontend/src/api/synthesis.js","../../../home/rohith/desktop/NeuraReport/frontend/src/stores/synthesisStore.js","../../../home/rohith/desktop/NeuraReport/frontend/src/features/synthesis/containers/SynthesisPageContainer.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/pages/synthesis/SynthesisPage.jsx"],"sourcesContent":["/**\n * Multi-Document Synthesis API Client\n */\nimport apiClient from './client';\n\nfunction asArray(payload, keys = []) {\n  if (Array.isArray(payload)) return payload;\n  if (!payload || typeof payload !== 'object') return [];\n  for (const key of keys) {\n    if (Array.isArray(payload[key])) return payload[key];\n  }\n  return [];\n}\n\n/**\n * Create a synthesis session\n */\nexport async function createSession(name) {\n  const response = await apiClient.post('/synthesis/sessions', { name });\n  return response.data;\n}\n\n/**\n * List all synthesis sessions\n */\nexport async function listSessions() {\n  const response = await apiClient.get('/synthesis/sessions');\n  const payload = response.data;\n  if (Array.isArray(payload)) {\n    return { sessions: payload, total: payload.length };\n  }\n  if (payload && typeof payload === 'object') {\n    const sessions = asArray(payload, ['sessions', 'items', 'results']);\n    return { ...payload, sessions, total: payload.total ?? sessions.length };\n  }\n  return { sessions: [], total: 0 };\n}\n\n/**\n * Get a synthesis session\n */\nexport async function getSession(sessionId) {\n  const response = await apiClient.get(`/synthesis/sessions/${sessionId}`);\n  return response.data;\n}\n\n/**\n * Delete a synthesis session\n */\nexport async function deleteSession(sessionId) {\n  const response = await apiClient.delete(`/synthesis/sessions/${sessionId}`);\n  return response.data;\n}\n\n/**\n * Add document to session\n */\nexport async function addDocument(sessionId, { name, content, docType = 'text', metadata }) {\n  const response = await apiClient.post(`/synthesis/sessions/${sessionId}/documents`, {\n    name,\n    content,\n    doc_type: docType,\n    metadata,\n  });\n  return response.data;\n}\n\n/**\n * Extract text from an uploaded file for synthesis\n */\nexport async function extractDocument(file, { docType } = {}) {\n  const formData = new FormData();\n  formData.append('file', file);\n  if (docType) formData.append('doc_type', docType);\n\n  const response = await apiClient.post('/synthesis/documents/extract', formData);\n  return response.data;\n}\n\n/**\n * Remove document from session\n */\nexport async function removeDocument(sessionId, documentId) {\n  const response = await apiClient.delete(`/synthesis/sessions/${sessionId}/documents/${documentId}`);\n  return response.data;\n}\n\n/**\n * Find inconsistencies in documents\n */\nexport async function findInconsistencies(sessionId) {\n  const response = await apiClient.get(`/synthesis/sessions/${sessionId}/inconsistencies`);\n  return response.data;\n}\n\n/**\n * Synthesize documents\n */\nexport async function synthesize(sessionId, { focusTopics, outputFormat = 'structured', includeSources = true, maxLength = 5000 }) {\n  const response = await apiClient.post(`/synthesis/sessions/${sessionId}/synthesize`, {\n    focus_topics: focusTopics,\n    output_format: outputFormat,\n    include_sources: includeSources,\n    max_length: maxLength,\n  });\n  return response.data;\n}\n\nexport default {\n  createSession,\n  listSessions,\n  getSession,\n  deleteSession,\n  addDocument,\n  extractDocument,\n  removeDocument,\n  findInconsistencies,\n  synthesize,\n};\n","/**\n * Multi-Document Synthesis Store\n */\nimport { create } from 'zustand';\nimport * as synthesisApi from '../api/synthesis';\n\nconst useSynthesisStore = create((set, get) => ({\n  // State\n  sessions: [],\n  currentSession: null,\n  inconsistencies: [],\n  synthesisResult: null,\n  loading: false,\n  error: null,\n\n  // Actions\n  setLoading: (loading) => set({ loading }),\n  setError: (error) => set({ error }),\n\n  // Fetch all sessions\n  fetchSessions: async () => {\n    set({ loading: true, error: null });\n    try {\n      const response = await synthesisApi.listSessions();\n      set({ sessions: response.sessions || [], loading: false });\n    } catch (err) {\n      set({ error: err.message, loading: false });\n    }\n  },\n\n  // Create session\n  createSession: async (name) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await synthesisApi.createSession(name);\n      const session = response.session;\n      set((state) => ({\n        sessions: [...state.sessions, session].slice(0, 100),\n        currentSession: session,\n        loading: false,\n      }));\n      return session;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Get session\n  getSession: async (sessionId) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await synthesisApi.getSession(sessionId);\n      set({ currentSession: response.session, loading: false });\n      return response.session;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Delete session\n  deleteSession: async (sessionId) => {\n    set({ loading: true, error: null });\n    try {\n      await synthesisApi.deleteSession(sessionId);\n      set((state) => ({\n        sessions: state.sessions.filter((s) => s.id !== sessionId),\n        currentSession: state.currentSession?.id === sessionId ? null : state.currentSession,\n        loading: false,\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  // Add document\n  addDocument: async (sessionId, documentData) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await synthesisApi.addDocument(sessionId, documentData);\n      // Refresh current session\n      await get().getSession(sessionId);\n      set({ loading: false });\n      return response.document;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Remove document\n  removeDocument: async (sessionId, documentId) => {\n    set({ loading: true, error: null });\n    try {\n      await synthesisApi.removeDocument(sessionId, documentId);\n      await get().getSession(sessionId);\n      set({ loading: false });\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  // Find inconsistencies\n  findInconsistencies: async (sessionId) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await synthesisApi.findInconsistencies(sessionId);\n      set({ inconsistencies: response.inconsistencies || [], loading: false });\n      return response.inconsistencies;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  // Synthesize documents\n  synthesize: async (sessionId, options = {}) => {\n    set({ loading: true, error: null, synthesisResult: null });\n    try {\n      const response = await synthesisApi.synthesize(sessionId, options);\n      set({ synthesisResult: response.result, loading: false });\n      return response.result;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  // Reset state\n  reset: () => set({\n    currentSession: null,\n    inconsistencies: [],\n    synthesisResult: null,\n    error: null,\n  }),\n}));\n\nexport default useSynthesisStore;\n","/**\n * Multi-Document Synthesis Page\n */\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  TextField,\n  Chip,\n  Alert,\n  CircularProgress,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  IconButton,\n  Tooltip,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n} from '@mui/material';\nimport { alpha } from '@mui/material/styles';\nimport { neutral, palette } from '@/app/theme';\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  Upload as UploadIcon,\n  Description as DocIcon,\n  Warning as WarningIcon,\n  AutoAwesome as SynthesizeIcon,\n  ExpandMore as ExpandMoreIcon,\n  Merge as MergeIcon,\n  Preview as PreviewIcon,\n} from '@mui/icons-material';\nimport useSynthesisStore from '@/stores/synthesisStore';\nimport useSharedData from '@/hooks/useSharedData';\nimport useCrossPageActions from '@/hooks/useCrossPageActions';\nimport ConnectionSelector from '@/components/common/ConnectionSelector';\nimport SendToMenu from '@/components/common/SendToMenu';\nimport { OutputType, FeatureKey } from '@/utils/crossPageTypes';\nimport ConfirmModal from '@/components/Modal/ConfirmModal';\nimport { useToast } from '@/components/ToastProvider';\nimport AiUsageNotice from '@/components/ai/AiUsageNotice';\n// UX Components for premium interactions\nimport DisabledTooltip from '@/components/ux/DisabledTooltip';\n// UX Governance - Enforced interaction API\nimport {\n  useInteraction,\n  InteractionType,\n  Reversibility,\n} from '@/components/ux/governance';\nimport { extractDocument as extractSynthesisDocument } from '@/api/synthesis';\n\nconst MAX_DOC_SIZE = 5 * 1024 * 1024;\nconst MIN_DOC_LENGTH = 10;\nconst MAX_NAME_LENGTH = 200;\nconst MAX_FOCUS_TOPICS = 10;\n\nexport default function SynthesisPage() {\n  const {\n    sessions,\n    currentSession,\n    inconsistencies,\n    synthesisResult,\n    loading,\n    error,\n    fetchSessions,\n    createSession,\n    getSession,\n    deleteSession,\n    addDocument,\n    removeDocument,\n    findInconsistencies,\n    synthesize,\n    reset,\n  } = useSynthesisStore();\n\n  const { connections, templates, activeConnectionId } = useSharedData();\n  const { registerOutput } = useCrossPageActions(FeatureKey.SYNTHESIS);\n  const [selectedConnectionId, setSelectedConnectionId] = useState(activeConnectionId);\n\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [addDocDialogOpen, setAddDocDialogOpen] = useState(false);\n  const [newSessionName, setNewSessionName] = useState('');\n  const [docName, setDocName] = useState('');\n  const [docContent, setDocContent] = useState('');\n  const [docType, setDocType] = useState('text');\n  const [outputFormat, setOutputFormat] = useState('structured');\n  const [focusTopics, setFocusTopics] = useState('');\n  const [previewDoc, setPreviewDoc] = useState(null);\n  const [previewOpen, setPreviewOpen] = useState(false);\n  const [deleteSessionConfirm, setDeleteSessionConfirm] = useState({ open: false, sessionId: null, sessionName: '' });\n  const [removeDocConfirm, setRemoveDocConfirm] = useState({ open: false, docId: null, docName: '' });\n  const toast = useToast();\n  const docCount = currentSession?.documents?.length || 0;\n  // UX Governance: Enforced interaction API - ALL user actions flow through this\n  const { execute } = useInteraction();\n\n  const [initialLoading, setInitialLoading] = useState(true);\n\n  useEffect(() => {\n    const init = async () => {\n      setInitialLoading(true);\n      await fetchSessions();\n      setInitialLoading(false);\n    };\n    init();\n    return () => reset();\n  }, [fetchSessions, reset]);\n\n  const handleCreateSession = () => {\n    if (!newSessionName) return;\n    if (newSessionName.length > MAX_NAME_LENGTH) {\n      toast.show(`Session name must be ${MAX_NAME_LENGTH} characters or less`, 'error');\n      return;\n    }\n    // UX Governance: Create action with tracking\n    execute({\n      type: InteractionType.CREATE,\n      label: `Create session \"${newSessionName}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      successMessage: 'Session created successfully',\n      action: async () => {\n        await createSession(newSessionName);\n        setCreateDialogOpen(false);\n        setNewSessionName('');\n      },\n    });\n  };\n\n  const handleAddDocument = () => {\n    if (!currentSession || !docName || !docContent) return;\n    if (docName.length > MAX_NAME_LENGTH) {\n      toast.show(`Document name must be ${MAX_NAME_LENGTH} characters or less`, 'error');\n      return;\n    }\n    if (docContent.trim().length < MIN_DOC_LENGTH) {\n      toast.show(`Document content must be at least ${MIN_DOC_LENGTH} characters`, 'error');\n      return;\n    }\n    if (docContent.length > MAX_DOC_SIZE) {\n      toast.show('Document content exceeds 5MB limit', 'error');\n      return;\n    }\n    // UX Governance: Upload action with tracking\n    execute({\n      type: InteractionType.UPLOAD,\n      label: `Add document \"${docName}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      successMessage: 'Document added successfully',\n      action: async () => {\n        await addDocument(currentSession.id, {\n          name: docName,\n          content: docContent,\n          docType,\n        });\n        setAddDocDialogOpen(false);\n        setDocName('');\n        setDocContent('');\n      },\n    });\n  };\n\n  const handleFileUpload = async (event) => {\n    const inputEl = event.target;\n    const file = inputEl.files?.[0];\n    if (!file) return;\n    if (file.name.length > MAX_NAME_LENGTH) {\n      toast.show(`File name must be ${MAX_NAME_LENGTH} characters or less`, 'error');\n      inputEl.value = '';\n      return;\n    }\n\n    // Check file size (max 5MB for text files)\n    if (file.size > MAX_DOC_SIZE) {\n      toast.show('File size exceeds 5MB limit', 'error');\n      inputEl.value = '';\n      return;\n    }\n\n    const ext = file.name.split('.').pop().toLowerCase();\n    const inferredType = ext === 'pdf'\n      ? 'pdf'\n      : ['xlsx', 'xls', 'csv'].includes(ext)\n        ? 'excel'\n        : ['doc', 'docx'].includes(ext)\n          ? 'word'\n          : ext === 'json'\n            ? 'json'\n            : 'text';\n\n    try {\n      const response = await extractSynthesisDocument(file, { docType: inferredType });\n      const extracted = response?.document;\n      const content = extracted?.content || '';\n      if (content.trim().length < MIN_DOC_LENGTH) {\n        toast.show(`Extracted content must be at least ${MIN_DOC_LENGTH} characters`, 'error');\n        inputEl.value = '';\n        return;\n      }\n\n      setDocName(extracted?.name || file.name);\n      setDocContent(content);\n      setDocType(extracted?.doc_type || inferredType);\n      if (extracted?.truncated) {\n        toast.show('File content was truncated to fit 5MB limit', 'warning');\n      } else {\n        toast.show('File processed successfully', 'success');\n      }\n    } catch (err) {\n      toast.show(err.message || 'Failed to process file', 'error');\n    } finally {\n      inputEl.value = '';\n    }\n  };\n\n  const handleSynthesize = () => {\n    if (!currentSession) return;\n    const topics = focusTopics\n      ? focusTopics.split(',').map((topic) => topic.trim()).filter(Boolean)\n      : undefined;\n    if (topics && topics.length > MAX_FOCUS_TOPICS) {\n      toast.show(`Focus topics must be ${MAX_FOCUS_TOPICS} items or less`, 'error');\n      return;\n    }\n\n    // UX Governance: Generate action with tracking and navigation blocking\n    execute({\n      type: InteractionType.GENERATE,\n      label: 'Synthesize documents',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      successMessage: 'Synthesis complete',\n      errorMessage: 'Synthesis failed',\n      action: async () => {\n        const result = await synthesize(currentSession.id, {\n          focusTopics: topics,\n          outputFormat,\n          connectionId: selectedConnectionId || undefined,\n        });\n        if (!result) throw new Error('Synthesis failed');\n        const synthTitle = result.synthesis?.title || currentSession.name || 'Synthesis';\n        const synthContent = [\n          result.synthesis?.executive_summary || '',\n          ...(result.synthesis?.key_insights || []),\n          ...(result.synthesis?.sections || []).map((s) => `${s.heading}\\n${s.content}`),\n        ].join('\\n\\n');\n        registerOutput({\n          type: OutputType.TEXT,\n          title: synthTitle,\n          summary: (result.synthesis?.executive_summary || '').substring(0, 200),\n          data: synthContent,\n          format: 'text',\n        });\n      },\n    });\n  };\n\n  const handleFindInconsistencies = () => {\n    if (!currentSession) return;\n\n    // UX Governance: Analyze action with tracking\n    execute({\n      type: InteractionType.ANALYZE,\n      label: 'Find inconsistencies',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      action: async () => {\n        const result = await findInconsistencies(currentSession.id);\n        if (result === null) throw new Error('Analysis failed');\n        if (result.length > 0) {\n          toast.show(`Found ${result.length} inconsistencies`, 'warning');\n        } else {\n          toast.show('No inconsistencies found', 'success');\n        }\n      },\n    });\n  };\n\n  const handleOpenPreview = (doc) => {\n    setPreviewDoc(doc);\n    setPreviewOpen(true);\n  };\n\n  const handleClosePreview = () => {\n    setPreviewOpen(false);\n    setPreviewDoc(null);\n  };\n\n  const getSeverityColor = (severity) => {\n    switch (severity) {\n      case 'critical': return 'error';\n      case 'high': return 'error';\n      case 'medium': return 'warning';\n      case 'low': return 'info';\n      default: return 'default';\n    }\n  };\n\n  // Show loading during initial fetch\n  if (initialLoading) {\n    return (\n      <Box sx={{ p: 3, maxWidth: 1400, mx: 'auto' }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n          <MergeIcon />\n          <Typography variant=\"h5\">Multi-Document Synthesis</Typography>\n        </Box>\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: 300 }}>\n          <CircularProgress />\n        </Box>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3, maxWidth: 1400, mx: 'auto' }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Box>\n          <Typography variant=\"h5\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <MergeIcon /> Multi-Document Synthesis\n          </Typography>\n          <Typography variant=\"body1\" color=\"text.secondary\">\n            Combine information from multiple documents with AI-powered analysis\n          </Typography>\n        </Box>\n        <Button\n          variant=\"contained\"\n          startIcon={<AddIcon />}\n          onClick={() => setCreateDialogOpen(true)}\n        >\n          New Session\n        </Button>\n      </Box>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => reset()}>\n          {error}\n        </Alert>\n      )}\n\n      {currentSession && (\n        <AiUsageNotice\n          title=\"AI synthesis\"\n          description=\"Outputs are generated from the documents in this session. Review before sharing.\"\n          chips={[\n            { label: `Source: ${docCount} document${docCount === 1 ? '' : 's'}`, color: 'info', variant: 'outlined' },\n            { label: 'Confidence: Review required', color: 'warning', variant: 'outlined' },\n            { label: 'Reversible: No source changes', color: 'success', variant: 'outlined' },\n          ]}\n          dense\n          sx={{ mb: 2 }}\n        />\n      )}\n\n      <Grid container spacing={3}>\n        {/* Sessions List */}\n        <Grid size={{ xs: 12, md: 3 }}>\n          <Paper sx={{ p: 2 }}>\n            <Typography variant=\"h6\" gutterBottom>\n              Sessions\n            </Typography>\n            {sessions.length === 0 ? (\n              <Typography color=\"text.secondary\" sx={{ py: 2, textAlign: 'center' }}>\n                No sessions yet\n              </Typography>\n            ) : (\n              <List dense>\n                {sessions.map((session) => (\n                  <ListItem\n                    key={session.id}\n                    button\n                    selected={currentSession?.id === session.id}\n                    onClick={() => getSession(session.id)}\n                  >\n                    <ListItemIcon>\n                      <MergeIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={session.name}\n                      secondary={`${session.documents?.length || 0} docs`}\n                    />\n                    <ListItemSecondaryAction>\n                      <IconButton\n                        size=\"small\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setDeleteSessionConfirm({ open: true, sessionId: session.id, sessionName: session.name });\n                        }}\n                      >\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </Paper>\n        </Grid>\n\n        {/* Main Content */}\n        <Grid size={{ xs: 12, md: 9 }}>\n          {currentSession ? (\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n              {/* Documents */}\n              <Paper sx={{ p: 3 }}>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                  <Typography variant=\"h6\">\n                    Documents ({currentSession.documents?.length || 0})\n                  </Typography>\n                  <Button\n                    variant=\"outlined\"\n                    startIcon={<AddIcon />}\n                    onClick={() => setAddDocDialogOpen(true)}\n                  >\n                    Add Document\n                  </Button>\n                </Box>\n\n                {currentSession.documents?.length === 0 ? (\n                  <Typography color=\"text.secondary\" sx={{ textAlign: 'center', py: 3 }}>\n                    Add documents to begin synthesis\n                  </Typography>\n                ) : (\n                  <Grid container spacing={2}>\n                    {currentSession.documents?.map((doc) => (\n                      <Grid size={{ xs: 12, sm: 6, md: 4 }} key={doc.id}>\n                        <Card variant=\"outlined\">\n                          <CardContent>\n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                              <DocIcon sx={{ color: 'text.secondary' }} />\n                              <Typography variant=\"subtitle2\" noWrap>\n                                {doc.name}\n                              </Typography>\n                            </Box>\n                            <Chip size=\"small\" label={doc.doc_type} />\n                          </CardContent>\n                          <CardActions>\n                            <Tooltip title=\"Preview\">\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleOpenPreview(doc)}\n                              >\n                                <PreviewIcon fontSize=\"small\" />\n                              </IconButton>\n                            </Tooltip>\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => setRemoveDocConfirm({ open: true, docId: doc.id, docName: doc.name })}\n                            >\n                              <DeleteIcon fontSize=\"small\" />\n                            </IconButton>\n                          </CardActions>\n                        </Card>\n                      </Grid>\n                    ))}\n                  </Grid>\n                )}\n              </Paper>\n\n              {/* Analysis Actions */}\n              {currentSession.documents?.length >= 2 && (\n                <Paper sx={{ p: 3 }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Analysis\n                  </Typography>\n                  <Grid container spacing={2} sx={{ mb: 2 }}>\n                    <Grid size={{ xs: 12 }}>\n                      <ConnectionSelector\n                        value={selectedConnectionId}\n                        onChange={setSelectedConnectionId}\n                        label=\"Enrich with Database (optional)\"\n                        showStatus\n                      />\n                    </Grid>\n                    <Grid size={{ xs: 12, sm: 6 }}>\n                      <FormControl fullWidth size=\"small\">\n                        <InputLabel>Output Format</InputLabel>\n                        <Select\n                          value={outputFormat}\n                          label=\"Output Format\"\n                          onChange={(e) => setOutputFormat(e.target.value)}\n                        >\n                          <MenuItem value=\"structured\">Structured</MenuItem>\n                          <MenuItem value=\"narrative\">Narrative</MenuItem>\n                          <MenuItem value=\"comparison\">Comparison</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid size={{ xs: 12, sm: 6 }}>\n                      <TextField\n                        fullWidth\n                        size=\"small\"\n                        label=\"Focus Topics (comma-separated)\"\n                        value={focusTopics}\n                        onChange={(e) => setFocusTopics(e.target.value)}\n                        placeholder=\"revenue, growth, risks\"\n                      />\n                    </Grid>\n                  </Grid>\n                  <Box sx={{ display: 'flex', gap: 2 }}>\n                    {/* UX: DisabledTooltip explains WHY buttons are disabled */}\n                    <DisabledTooltip\n                      disabled={loading || !currentSession?.documents?.length}\n                      reason={\n                        loading\n                          ? 'Please wait for the current operation to complete'\n                          : !currentSession?.documents?.length\n                            ? 'Add at least one document first'\n                            : undefined\n                      }\n                    >\n                      <Button\n                        variant=\"outlined\"\n                        startIcon={loading ? <CircularProgress size={20} /> : <WarningIcon />}\n                        onClick={handleFindInconsistencies}\n                        disabled={loading || !currentSession?.documents?.length}\n                      >\n                        Find Inconsistencies\n                      </Button>\n                    </DisabledTooltip>\n                    <DisabledTooltip\n                      disabled={loading || !currentSession?.documents?.length}\n                      reason={\n                        loading\n                          ? 'Please wait for the current operation to complete'\n                          : !currentSession?.documents?.length\n                            ? 'Add at least two documents to synthesize'\n                            : undefined\n                      }\n                    >\n                      <Button\n                        variant=\"contained\"\n                        startIcon={loading ? <CircularProgress size={20} /> : <SynthesizeIcon />}\n                        onClick={handleSynthesize}\n                        disabled={loading || !currentSession?.documents?.length}\n                      >\n                        Synthesize\n                      </Button>\n                    </DisabledTooltip>\n                  </Box>\n                </Paper>\n              )}\n\n              {/* Inconsistencies */}\n              {inconsistencies.length > 0 && (\n                <Paper sx={{ p: 3 }}>\n                  <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <WarningIcon sx={{ color: 'text.secondary' }} /> Inconsistencies Found ({inconsistencies.length})\n                  </Typography>\n                  {inconsistencies.map((item, idx) => (\n                    <Accordion key={idx} variant=\"outlined\">\n                      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                          <Chip\n                            size=\"small\"\n                            label={item.severity}\n                            sx={{ bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                          />\n                          <Typography>{item.field_or_topic}</Typography>\n                        </Box>\n                      </AccordionSummary>\n                      <AccordionDetails>\n                        <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                          {item.description}\n                        </Typography>\n                        {item.suggested_resolution && (\n                          <Alert severity=\"info\" sx={{ mt: 1 }}>\n                            <strong>Suggestion:</strong> {item.suggested_resolution}\n                          </Alert>\n                        )}\n                      </AccordionDetails>\n                    </Accordion>\n                  ))}\n                </Paper>\n              )}\n\n              {/* Synthesis Result */}\n              {synthesisResult && (\n                <Paper sx={{ p: 3 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n                    <Typography variant=\"h6\">\n                      Synthesis Result\n                    </Typography>\n                    <SendToMenu\n                      outputType={OutputType.TEXT}\n                      payload={{\n                        title: synthesisResult.synthesis?.title || currentSession?.name || 'Synthesis',\n                        content: [\n                          synthesisResult.synthesis?.executive_summary || '',\n                          ...(synthesisResult.synthesis?.key_insights || []),\n                          ...(synthesisResult.synthesis?.sections || []).map((s) => `${s.heading}\\n${s.content}`),\n                        ].join('\\n\\n'),\n                      }}\n                      sourceFeature={FeatureKey.SYNTHESIS}\n                    />\n                  </Box>\n                  <Box sx={{ bgcolor: neutral[50], p: 2, borderRadius: 1 }}>\n                    <Typography variant=\"h6\" gutterBottom>\n                      {synthesisResult.synthesis?.title}\n                    </Typography>\n                    <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                      {synthesisResult.synthesis?.executive_summary}\n                    </Typography>\n\n                    {synthesisResult.synthesis?.key_insights && (\n                      <Box sx={{ mb: 2 }}>\n                        <Typography variant=\"subtitle2\" gutterBottom>Key Insights</Typography>\n                        <ul style={{ margin: 0, paddingLeft: 20 }}>\n                          {synthesisResult.synthesis.key_insights.map((insight, idx) => (\n                            <li key={idx}><Typography variant=\"body2\">{insight}</Typography></li>\n                          ))}\n                        </ul>\n                      </Box>\n                    )}\n\n                    {synthesisResult.synthesis?.sections && (\n                      <Box>\n                        {synthesisResult.synthesis.sections.map((section, idx) => (\n                          <Box key={idx} sx={{ mb: 2 }}>\n                            <Typography variant=\"subtitle1\">{section.heading}</Typography>\n                            <Typography variant=\"body2\">{section.content}</Typography>\n                          </Box>\n                        ))}\n                      </Box>\n                    )}\n                  </Box>\n                </Paper>\n              )}\n            </Box>\n          ) : (\n            <Paper sx={{ p: 4, textAlign: 'center' }}>\n              <MergeIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n              <Typography color=\"text.secondary\">\n                Select a session or create a new one to begin\n              </Typography>\n            </Paper>\n          )}\n        </Grid>\n      </Grid>\n\n      {/* Create Session Dialog */}\n      <Dialog open={createDialogOpen} onClose={() => setCreateDialogOpen(false)}>\n        <DialogTitle>Create Synthesis Session</DialogTitle>\n        <DialogContent>\n          <TextField\n            fullWidth\n            label=\"Session Name\"\n            value={newSessionName}\n            onChange={(e) => setNewSessionName(e.target.value)}\n            sx={{ mt: 2 }}\n            inputProps={{ maxLength: MAX_NAME_LENGTH }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setCreateDialogOpen(false)}>Cancel</Button>\n          <Button variant=\"contained\" onClick={handleCreateSession} disabled={!newSessionName}>\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Add Document Dialog */}\n      <Dialog open={addDocDialogOpen} onClose={() => setAddDocDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Add Document</DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', gap: 2, mb: 2, mt: 2 }}>\n            <TextField\n              fullWidth\n              label=\"Document Name\"\n              value={docName}\n              onChange={(e) => setDocName(e.target.value)}\n              inputProps={{ maxLength: MAX_NAME_LENGTH }}\n            />\n            <FormControl sx={{ minWidth: 150 }}>\n              <InputLabel>Type</InputLabel>\n              <Select\n                value={docType}\n                label=\"Type\"\n                onChange={(e) => setDocType(e.target.value)}\n              >\n                <MenuItem value=\"text\">Text</MenuItem>\n                <MenuItem value=\"pdf\">PDF</MenuItem>\n                <MenuItem value=\"excel\">Excel</MenuItem>\n                <MenuItem value=\"word\">Word</MenuItem>\n                <MenuItem value=\"json\">JSON</MenuItem>\n              </Select>\n            </FormControl>\n          </Box>\n          <Button\n            variant=\"outlined\"\n            component=\"label\"\n            startIcon={<UploadIcon />}\n            sx={{ mb: 2 }}\n          >\n            Upload File\n            <input type=\"file\" hidden onChange={handleFileUpload} />\n          </Button>\n          <TextField\n            fullWidth\n            multiline\n            rows={10}\n            label=\"Document Content\"\n            value={docContent}\n            onChange={(e) => setDocContent(e.target.value)}\n            placeholder=\"Paste document content or upload a file...\"\n            inputProps={{ maxLength: MAX_DOC_SIZE }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setAddDocDialogOpen(false)}>Cancel</Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleAddDocument}\n            disabled={!docName || !docContent}\n          >\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Preview Document Dialog */}\n      <Dialog open={previewOpen} onClose={handleClosePreview} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Document Preview</DialogTitle>\n        <DialogContent dividers>\n          <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n            {previewDoc?.name || 'Document'}\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mb: 2 }}>\n            {previewDoc?.doc_type || previewDoc?.docType || 'text'}\n          </Typography>\n          <Paper sx={{ p: 2, bgcolor: neutral[50], maxHeight: 420, overflow: 'auto' }}>\n            <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>\n              {previewDoc?.content || 'No content available.'}\n            </Typography>\n          </Paper>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClosePreview}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      <ConfirmModal\n        open={deleteSessionConfirm.open}\n        onClose={() => setDeleteSessionConfirm({ open: false, sessionId: null, sessionName: '' })}\n        onConfirm={() => {\n          const sessionId = deleteSessionConfirm.sessionId;\n          const sessionName = deleteSessionConfirm.sessionName;\n          setDeleteSessionConfirm({ open: false, sessionId: null, sessionName: '' });\n\n          // UX Governance: Irreversible delete action with tracking\n          execute({\n            type: InteractionType.DELETE,\n            label: `Delete session \"${sessionName}\"`,\n            reversibility: Reversibility.IRREVERSIBLE,\n            successMessage: `Session \"${sessionName}\" deleted`,\n            errorMessage: 'Failed to delete session',\n            action: async () => {\n              const success = await deleteSession(sessionId);\n              if (!success) throw new Error('Delete failed');\n            },\n          });\n        }}\n        title=\"Delete Session\"\n        message={`Are you sure you want to delete \"${deleteSessionConfirm.sessionName}\"? All documents and analysis data will be permanently removed.`}\n        confirmLabel=\"Delete\"\n        severity=\"error\"\n      />\n\n      <ConfirmModal\n        open={removeDocConfirm.open}\n        onClose={() => setRemoveDocConfirm({ open: false, docId: null, docName: '' })}\n        onConfirm={() => {\n          const docId = removeDocConfirm.docId;\n          const docName = removeDocConfirm.docName;\n          setRemoveDocConfirm({ open: false, docId: null, docName: '' });\n\n          // UX Governance: Delete action with tracking\n          execute({\n            type: InteractionType.DELETE,\n            label: `Remove document \"${docName}\"`,\n            reversibility: Reversibility.PARTIALLY_REVERSIBLE,\n            successMessage: `Document \"${docName}\" removed`,\n            errorMessage: 'Failed to remove document',\n            action: async () => {\n              const success = await removeDocument(currentSession?.id, docId);\n              if (!success) throw new Error('Remove failed');\n            },\n          });\n        }}\n        title=\"Remove Document\"\n        message={`Are you sure you want to remove \"${removeDocConfirm.docName}\" from this session?`}\n        confirmLabel=\"Remove\"\n        severity=\"warning\"\n      />\n    </Box>\n  );\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport SynthesisPageContainer from '@/features/synthesis/containers/SynthesisPageContainer'\n\nexport default function SynthesisPage() {\n  useInteraction()\n  return <SynthesisPageContainer />\n}\n"],"names":["asArray","payload","keys","key","createSession","name","apiClient","listSessions","sessions","getSession","sessionId","deleteSession","addDocument","content","docType","metadata","extractDocument","file","formData","removeDocument","documentId","findInconsistencies","synthesize","focusTopics","outputFormat","includeSources","maxLength","useSynthesisStore","create","set","get","loading","error","response","synthesisApi.listSessions","err","session","synthesisApi.createSession","state","synthesisApi.getSession","synthesisApi.deleteSession","s","documentData","synthesisApi.addDocument","synthesisApi.removeDocument","synthesisApi.findInconsistencies","options","synthesisApi.synthesize","MAX_DOC_SIZE","MIN_DOC_LENGTH","MAX_NAME_LENGTH","MAX_FOCUS_TOPICS","SynthesisPage","currentSession","inconsistencies","synthesisResult","fetchSessions","reset","activeConnectionId","useSharedData","registerOutput","useCrossPageActions","FeatureKey","selectedConnectionId","setSelectedConnectionId","useState","createDialogOpen","setCreateDialogOpen","addDocDialogOpen","setAddDocDialogOpen","newSessionName","setNewSessionName","docName","setDocName","docContent","setDocContent","setDocType","setOutputFormat","setFocusTopics","previewDoc","setPreviewDoc","previewOpen","setPreviewOpen","deleteSessionConfirm","setDeleteSessionConfirm","removeDocConfirm","setRemoveDocConfirm","toast","useToast","docCount","execute","useInteraction","initialLoading","setInitialLoading","useEffect","handleCreateSession","InteractionType","Reversibility","handleAddDocument","handleFileUpload","event","inputEl","ext","inferredType","extracted","extractSynthesisDocument","handleSynthesize","topics","topic","result","synthTitle","synthContent","OutputType","handleFindInconsistencies","handleOpenPreview","doc","handleClosePreview","jsxs","Box","jsx","MergeIcon","Typography","CircularProgress","Button","AddIcon","Alert","AiUsageNotice","Grid","Paper","List","ListItem","ListItemIcon","ListItemText","ListItemSecondaryAction","IconButton","e","DeleteIcon","Card","CardContent","DocIcon","Chip","CardActions","Tooltip","PreviewIcon","ConnectionSelector","FormControl","InputLabel","Select","MenuItem","TextField","DisabledTooltip","WarningIcon","SynthesizeIcon","item","idx","Accordion","AccordionSummary","ExpandMoreIcon","theme","alpha","neutral","AccordionDetails","SendToMenu","insight","section","Dialog","DialogTitle","DialogContent","DialogActions","UploadIcon","ConfirmModal","sessionName","docId","SynthesisPageContainer"],"mappings":"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"}