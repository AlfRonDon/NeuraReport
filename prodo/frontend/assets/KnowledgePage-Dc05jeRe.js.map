{"version":3,"file":"KnowledgePage-Dc05jeRe.js","sources":["../../src/api/knowledge.js","../../src/stores/knowledgeStore.js","../../src/features/knowledge/containers/KnowledgePageContainer.jsx","../../src/pages/knowledge/KnowledgePage.jsx"],"sourcesContent":["/**\n * Knowledge API Client\n * Handles document library, collections, and knowledge management.\n */\nimport { api } from './client';\n\nfunction normalizeDocument(doc) {\n  if (!doc || typeof doc !== 'object') return doc;\n  const normalized = { ...doc };\n  if (normalized.file_type == null && normalized.document_type) {\n    normalized.file_type = normalized.document_type;\n  }\n  if (normalized.collection_ids == null && Array.isArray(normalized.collections)) {\n    normalized.collection_ids = normalized.collections;\n  }\n  return normalized;\n}\n\nfunction inferDocumentType(fileName) {\n  const ext = String(fileName || '').toLowerCase().split('.').pop();\n  switch (ext) {\n    case 'pdf':\n      return 'pdf';\n    case 'doc':\n    case 'docx':\n      return 'docx';\n    case 'xls':\n    case 'xlsx':\n      return 'xlsx';\n    case 'ppt':\n    case 'pptx':\n      return 'pptx';\n    case 'txt':\n      return 'txt';\n    case 'md':\n    case 'markdown':\n      return 'md';\n    case 'htm':\n    case 'html':\n      return 'html';\n    case 'png':\n    case 'jpg':\n    case 'jpeg':\n    case 'gif':\n    case 'webp':\n      return 'image';\n    default:\n      return 'other';\n  }\n}\n\n// ============================================\n// Documents\n// ============================================\n\nexport async function addDocument(data) {\n  const response = await api.post('/knowledge/documents', data);\n  return response.data;\n}\n\nexport async function uploadDocument(file, title, collectionId = null) {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('title', title || file.name);\n  formData.append('document_type', inferDocumentType(file?.name));\n  if (collectionId) {\n    formData.append('collection_id', collectionId);\n  }\n  const response = await api.post('/knowledge/documents', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n  return response.data;\n}\n\nexport async function getDocument(documentId) {\n  const response = await api.get(`/knowledge/documents/${documentId}`);\n  return response.data;\n}\n\nexport async function listDocuments(options = {}) {\n  const response = await api.get('/knowledge/documents', {\n    params: {\n      collection_id: options.collectionId,\n      tags: Array.isArray(options.tags) ? options.tags.join(',') : options.tags,\n      document_type: options.documentType,\n      limit: options.pageSize || 50,\n      offset: options.offset || 0,\n    },\n  });\n  const payload = response.data;\n  if (Array.isArray(payload)) {\n    const documents = payload.map(normalizeDocument);\n    return { documents, total: documents.length };\n  }\n  if (payload && Array.isArray(payload.documents)) {\n    const documents = payload.documents.map(normalizeDocument);\n    return { ...payload, documents, total: payload.total ?? documents.length };\n  }\n  return { documents: [], total: 0 };\n}\n\nexport async function updateDocument(documentId, data) {\n  const response = await api.put(`/knowledge/documents/${documentId}`, data);\n  return response.data;\n}\n\nexport async function deleteDocument(documentId) {\n  const response = await api.delete(`/knowledge/documents/${documentId}`);\n  return response.data;\n}\n\nexport async function toggleFavorite(documentId) {\n  const response = await api.post(`/knowledge/documents/${documentId}/favorite`);\n  return response.data;\n}\n\n// ============================================\n// Collections\n// ============================================\n\nexport async function createCollection(data) {\n  const response = await api.post('/knowledge/collections', data);\n  return response.data;\n}\n\nexport async function getCollection(collectionId) {\n  const response = await api.get(`/knowledge/collections/${collectionId}`);\n  return response.data;\n}\n\nexport async function listCollections() {\n  const response = await api.get('/knowledge/collections');\n  const payload = response.data;\n  if (Array.isArray(payload)) return payload;\n  if (payload && typeof payload === 'object') {\n    return Array.isArray(payload.collections) ? payload.collections : [];\n  }\n  return [];\n}\n\nexport async function updateCollection(collectionId, data) {\n  const response = await api.put(`/knowledge/collections/${collectionId}`, data);\n  return response.data;\n}\n\nexport async function deleteCollection(collectionId) {\n  const response = await api.delete(`/knowledge/collections/${collectionId}`);\n  return response.data;\n}\n\nexport async function addDocumentToCollection(collectionId, documentId) {\n  const response = await api.post(`/knowledge/collections/${collectionId}/documents`, {\n    document_id: documentId,\n  });\n  return response.data;\n}\n\nexport async function removeDocumentFromCollection(collectionId, documentId) {\n  const response = await api.delete(`/knowledge/collections/${collectionId}/documents/${documentId}`);\n  return response.data;\n}\n\n// ============================================\n// Tags\n// ============================================\n\nexport async function createTag(name, color = null) {\n  const response = await api.post('/knowledge/tags', { name, color });\n  return response.data;\n}\n\nexport async function listTags() {\n  const response = await api.get('/knowledge/tags');\n  const payload = response.data;\n  if (Array.isArray(payload)) return payload;\n  if (payload && typeof payload === 'object') {\n    return Array.isArray(payload.tags) ? payload.tags : [];\n  }\n  return [];\n}\n\nexport async function deleteTag(tagId) {\n  const response = await api.delete(`/knowledge/tags/${tagId}`);\n  return response.data;\n}\n\nexport async function addTagToDocument(documentId, tagId) {\n  const response = await api.post(`/knowledge/documents/${documentId}/tags`, {\n    tag_id: tagId,\n  });\n  return response.data;\n}\n\nexport async function removeTagFromDocument(documentId, tagId) {\n  const response = await api.delete(`/knowledge/documents/${documentId}/tags/${tagId}`);\n  return response.data;\n}\n\n// ============================================\n// Search\n// ============================================\n\nexport async function searchDocuments(query, options = {}) {\n  const response = await api.post('/knowledge/search', {\n    query,\n    collections: options.collectionId ? [options.collectionId] : [],\n    tags: options.tags || [],\n    date_from: options.dateFrom,\n    date_to: options.dateTo,\n    limit: options.pageSize || 50,\n    offset: options.offset || 0,\n  });\n  return response.data;\n}\n\nexport async function semanticSearch(query, options = {}) {\n  const response = await api.post('/knowledge/search/semantic', {\n    query,\n    top_k: options.limit || 10,\n    threshold: options.minSimilarity || 0.5,\n  });\n  return response.data;\n}\n\n// ============================================\n// AI Features\n// ============================================\n\nexport async function autoTag(documentId, maxTags = 5) {\n  const response = await api.post('/knowledge/auto-tag', {\n    document_id: documentId,\n    max_tags: maxTags,\n  });\n  return response.data;\n}\n\nexport async function findRelated(documentId, options = {}) {\n  const response = await api.post('/knowledge/related', {\n    document_id: documentId,\n    limit: options.limit || 10,\n  });\n  return response.data;\n}\n\nexport async function buildKnowledgeGraph(options = {}) {\n  const response = await api.post('/knowledge/knowledge-graph', {\n    document_ids: options.documentIds || [],\n    depth: options.depth || 2,\n    include_entities: options.includeEntities !== false,\n  });\n  return response.data;\n}\n\nexport async function generateFaq(options = {}) {\n  const documentIds = Array.isArray(options.documentIds)\n    ? options.documentIds.filter(Boolean)\n    : [];\n  const response = await api.post('/knowledge/faq', {\n    document_ids: documentIds,\n    max_questions: options.maxQuestions || 10,\n  }, {\n    params: {\n      background: options.background ?? false,\n    },\n  });\n  return response.data;\n}\n\n// ============================================\n// Analytics\n// ============================================\n\nexport async function getLibraryStats() {\n  const response = await api.get('/knowledge/stats');\n  return response.data;\n}\n\nexport async function getDocumentActivity(documentId, options = {}) {\n  const response = await api.get(`/knowledge/documents/${documentId}/activity`, {\n    params: {\n      days: options.days || 30,\n    },\n  });\n  return response.data;\n}\n","/**\n * Knowledge Store - Zustand store for document library and knowledge management.\n */\nimport { create } from 'zustand';\nimport * as knowledgeApi from '../api/knowledge';\n\nconst normalizeSearchResults = (response) => {\n  const rows = Array.isArray(response?.results) ? response.results : [];\n  return rows\n    .map((row) => {\n      const doc = row?.document && typeof row.document === 'object' ? row.document : row;\n      if (!doc || typeof doc !== 'object') return null;\n      return {\n        ...doc,\n        _score: row?.score,\n        _highlights: Array.isArray(row?.highlights) ? row.highlights : [],\n      };\n    })\n    .filter(Boolean);\n};\n\nconst normalizeRelatedDocuments = (response) => {\n  const rows = Array.isArray(response?.related) ? response.related : [];\n  return rows\n    .map((row) => row?.document)\n    .filter((doc) => doc && typeof doc === 'object');\n};\n\nconst normalizeFaq = (response) => {\n  if (Array.isArray(response?.faq?.items)) return response.faq.items;\n  if (Array.isArray(response?.items)) return response.items;\n  if (Array.isArray(response?.faq)) return response.faq;\n  return [];\n};\n\nconst useKnowledgeStore = create((set, get) => ({\n  // State\n  documents: [],\n  collections: [],\n  tags: [],\n  currentDocument: null,\n  currentCollection: null,\n  searchResults: [],\n  relatedDocuments: [],\n  knowledgeGraph: null,\n  faq: [],\n  stats: null,\n  totalDocuments: 0,\n  loading: false,\n  searching: false,\n  error: null,\n\n  // Actions\n  setLoading: (loading) => set({ loading }),\n  setError: (error) => set({ error }),\n\n  // Documents\n  addDocument: async (data) => {\n    set({ loading: true, error: null });\n    try {\n      const doc = await knowledgeApi.addDocument(data);\n      set((state) => ({\n        documents: [doc, ...state.documents].slice(0, 500),\n        currentDocument: doc,\n        loading: false,\n      }));\n      return doc;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  fetchDocuments: async (options = {}) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await knowledgeApi.listDocuments(options);\n      set({\n        documents: response.documents || [],\n        totalDocuments: response.total || 0,\n        loading: false\n      });\n      return response;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  getDocument: async (documentId) => {\n    set({ loading: true, error: null });\n    try {\n      const doc = await knowledgeApi.getDocument(documentId);\n      set({ currentDocument: doc, loading: false });\n      return doc;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  updateDocument: async (documentId, data) => {\n    set({ loading: true, error: null });\n    try {\n      const doc = await knowledgeApi.updateDocument(documentId, data);\n      set((state) => ({\n        documents: state.documents.map((d) => (d.id === documentId ? doc : d)),\n        currentDocument: state.currentDocument?.id === documentId ? doc : state.currentDocument,\n        loading: false,\n      }));\n      return doc;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  deleteDocument: async (documentId) => {\n    set({ loading: true, error: null });\n    try {\n      await knowledgeApi.deleteDocument(documentId);\n      set((state) => ({\n        documents: state.documents.filter((d) => d.id !== documentId),\n        currentDocument: state.currentDocument?.id === documentId ? null : state.currentDocument,\n        loading: false,\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  toggleFavorite: async (documentId) => {\n    try {\n      const result = await knowledgeApi.toggleFavorite(documentId);\n      set((state) => ({\n        documents: state.documents.map((d) =>\n          d.id === documentId ? { ...d, is_favorite: result.is_favorite } : d\n        ),\n        currentDocument: state.currentDocument?.id === documentId\n          ? { ...state.currentDocument, is_favorite: result.is_favorite }\n          : state.currentDocument,\n      }));\n      return result;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  // Collections\n  createCollection: async (data) => {\n    set({ loading: true, error: null });\n    try {\n      const collection = await knowledgeApi.createCollection(data);\n      set((state) => ({\n        collections: [collection, ...state.collections].slice(0, 200),\n        currentCollection: collection,\n        loading: false,\n      }));\n      return collection;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  fetchCollections: async () => {\n    set({ loading: true, error: null });\n    try {\n      const collections = await knowledgeApi.listCollections();\n      set({ collections: collections || [], loading: false });\n      return collections;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  getCollection: async (collectionId) => {\n    set({ loading: true, error: null });\n    try {\n      const collection = await knowledgeApi.getCollection(collectionId);\n      set({ currentCollection: collection, loading: false });\n      return collection;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  updateCollection: async (collectionId, data) => {\n    set({ loading: true, error: null });\n    try {\n      const collection = await knowledgeApi.updateCollection(collectionId, data);\n      set((state) => ({\n        collections: state.collections.map((c) => (c.id === collectionId ? collection : c)),\n        currentCollection: state.currentCollection?.id === collectionId ? collection : state.currentCollection,\n        loading: false,\n      }));\n      return collection;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  deleteCollection: async (collectionId) => {\n    set({ loading: true, error: null });\n    try {\n      await knowledgeApi.deleteCollection(collectionId);\n      set((state) => ({\n        collections: state.collections.filter((c) => c.id !== collectionId),\n        currentCollection: state.currentCollection?.id === collectionId ? null : state.currentCollection,\n        loading: false,\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return false;\n    }\n  },\n\n  addDocumentToCollection: async (collectionId, documentId) => {\n    try {\n      await knowledgeApi.addDocumentToCollection(collectionId, documentId);\n      // Refresh collection\n      await get().getCollection(collectionId);\n      return true;\n    } catch (err) {\n      set({ error: err.message });\n      return false;\n    }\n  },\n\n  removeDocumentFromCollection: async (collectionId, documentId) => {\n    try {\n      await knowledgeApi.removeDocumentFromCollection(collectionId, documentId);\n      // Refresh collection\n      await get().getCollection(collectionId);\n      return true;\n    } catch (err) {\n      set({ error: err.message });\n      return false;\n    }\n  },\n\n  // Tags\n  createTag: async (name, color = null) => {\n    set({ loading: true, error: null });\n    try {\n      const tag = await knowledgeApi.createTag(name, color);\n      set((state) => ({\n        tags: [tag, ...state.tags].slice(0, 500),\n        loading: false,\n      }));\n      return tag;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  fetchTags: async () => {\n    try {\n      const tags = await knowledgeApi.listTags();\n      set({ tags: tags || [] });\n      return tags;\n    } catch (err) {\n      set({ error: err.message });\n      return [];\n    }\n  },\n\n  deleteTag: async (tagId) => {\n    try {\n      await knowledgeApi.deleteTag(tagId);\n      set((state) => ({\n        tags: state.tags.filter((t) => t.id !== tagId),\n      }));\n      return true;\n    } catch (err) {\n      set({ error: err.message });\n      return false;\n    }\n  },\n\n  addTagToDocument: async (documentId, tagId) => {\n    try {\n      await knowledgeApi.addTagToDocument(documentId, tagId);\n      await get().getDocument(documentId);\n      return true;\n    } catch (err) {\n      set({ error: err.message });\n      return false;\n    }\n  },\n\n  removeTagFromDocument: async (documentId, tagId) => {\n    try {\n      await knowledgeApi.removeTagFromDocument(documentId, tagId);\n      await get().getDocument(documentId);\n      return true;\n    } catch (err) {\n      set({ error: err.message });\n      return false;\n    }\n  },\n\n  getDocumentActivity: async (documentId) => {\n    try {\n      const activity = await knowledgeApi.getDocumentActivity(documentId);\n      return activity;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  // Search\n  searchDocuments: async (query, options = {}) => {\n    set({ searching: true, error: null });\n    try {\n      const response = await knowledgeApi.searchDocuments(query, options);\n      set({ searchResults: normalizeSearchResults(response), searching: false });\n      return response;\n    } catch (err) {\n      set({ error: err.message, searching: false });\n      return null;\n    }\n  },\n\n  semanticSearch: async (query, options = {}) => {\n    set({ searching: true, error: null });\n    try {\n      const response = await knowledgeApi.semanticSearch(query, options);\n      set({ searchResults: normalizeSearchResults(response), searching: false });\n      return response;\n    } catch (err) {\n      set({ error: err.message, searching: false });\n      return null;\n    }\n  },\n\n  // AI Features\n  autoTag: async (documentId) => {\n    set({ loading: true, error: null });\n    try {\n      const result = await knowledgeApi.autoTag(documentId);\n      // Refresh document to get updated tags\n      await get().getDocument(documentId);\n      set({ loading: false });\n      return result;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  findRelated: async (documentId, options = {}) => {\n    set({ loading: true, error: null });\n    try {\n      const related = await knowledgeApi.findRelated(documentId, options);\n      set({ relatedDocuments: normalizeRelatedDocuments(related), loading: false });\n      return related;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  buildKnowledgeGraph: async (options = {}) => {\n    set({ loading: true, error: null });\n    try {\n      const graph = await knowledgeApi.buildKnowledgeGraph(options);\n      set({ knowledgeGraph: graph, loading: false });\n      return graph;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return null;\n    }\n  },\n\n  generateFaq: async (options = {}) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await knowledgeApi.generateFaq(options);\n      set({ faq: normalizeFaq(response), loading: false });\n      return response;\n    } catch (err) {\n      set({ error: err.message, loading: false });\n      return [];\n    }\n  },\n\n  // Analytics\n  fetchStats: async () => {\n    try {\n      const stats = await knowledgeApi.getLibraryStats();\n      set({ stats });\n      return stats;\n    } catch (err) {\n      set({ error: err.message });\n      return null;\n    }\n  },\n\n  // Reset\n  clearSearchResults: () => set({ searchResults: [] }),\n\n  reset: () => set({\n    currentDocument: null,\n    currentCollection: null,\n    searchResults: [],\n    relatedDocuments: [],\n    error: null,\n  }),\n}));\n\nexport default useKnowledgeStore;\n","/**\n * Knowledge Library Page Container\n * Document library and knowledge management interface.\n */\nimport React, { useState, useEffect, useCallback } from 'react'\nimport {\n  Box,\n  Typography,\n  Button,\n  TextField,\n  Paper,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Chip,\n  Alert,\n  CircularProgress,\n  IconButton,\n  InputAdornment,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Menu,\n  MenuItem,\n  Divider,\n  Tabs,\n  Tab,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport {\n  Search as SearchIcon,\n  Add as AddIcon,\n  Folder as FolderIcon,\n  FolderOpen as FolderOpenIcon,\n  Description as DocIcon,\n  Star as StarIcon,\n  StarBorder as StarBorderIcon,\n  LocalOffer as TagIcon,\n  MoreVert as MoreIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  AutoAwesome as AIIcon,\n  AccountTree as GraphIcon,\n  QuestionAnswer as FaqIcon,\n  FilterList as FilterIcon,\n  CloudUpload as UploadIcon,\n} from '@mui/icons-material'\nimport useKnowledgeStore from '@/stores/knowledgeStore'\nimport useSharedData from '@/hooks/useSharedData'\nimport useIncomingTransfer from '@/hooks/useIncomingTransfer'\nimport ImportFromMenu from '@/components/common/ImportFromMenu'\nimport { TransferAction, FeatureKey } from '@/utils/crossPageTypes'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\nimport { uploadDocument } from '@/api/knowledge'\nimport { neutral, palette } from '@/app/theme'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  height: 'calc(100vh - 64px)',\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst Header = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(2, 3),\n  borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.8),\n}))\n\nconst ContentArea = styled(Box)(({ theme }) => ({\n  flex: 1,\n  display: 'flex',\n  overflow: 'hidden',\n}))\n\nconst Sidebar = styled(Box)(({ theme }) => ({\n  width: 260,\n  borderRight: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.6),\n  display: 'flex',\n  flexDirection: 'column',\n}))\n\nconst MainPanel = styled(Box)(({ theme }) => ({\n  flex: 1,\n  padding: theme.spacing(3),\n  overflow: 'auto',\n}))\n\nconst DocumentCard = styled(Card)(({ theme }) => ({\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    transform: 'translateY(-2px)',\n    boxShadow: `0 8px 24px ${alpha(theme.palette.text.primary, 0.05)}`,\n  },\n}))\n\nconst CollectionItem = styled(ListItem)(({ theme, selected }) => ({\n  borderRadius: 8,\n  marginBottom: 4,\n  backgroundColor: selected ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100]) : 'transparent',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  },\n}))\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: 8,\n  textTransform: 'none',\n  fontWeight: 500,\n}))\n\nconst UploadDropzone = styled(Box)(({ theme, isDragActive }) => ({\n  border: `2px dashed ${isDragActive ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700]) : alpha(theme.palette.divider, 0.3)}`,\n  borderRadius: 8,  // Figma spec: 8px\n  padding: theme.spacing(6),\n  textAlign: 'center',\n  backgroundColor: isDragActive ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50]) : alpha(theme.palette.background.paper, 0.5),\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.02) : neutral[50],\n  },\n}))\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function KnowledgePageContainer() {\n  const theme = useTheme()\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const { connections, templates } = useSharedData()\n\n  // Cross-page: accept documents from other features (Agents, Synthesis, etc.)\n  useIncomingTransfer(FeatureKey.KNOWLEDGE, {\n    [TransferAction.SAVE_TO]: async (payload) => {\n      // Create a Blob from the content and upload it\n      const content = typeof payload.content === 'string' ? payload.content : JSON.stringify(payload.content)\n      const blob = new Blob([content], { type: 'text/plain' })\n      const file = new File([blob], `${payload.title || 'Imported'}.txt`, { type: 'text/plain' })\n      await uploadDocument(file, payload.title || 'Imported Document', selectedCollection?.id)\n      fetchDocuments()\n    },\n  })\n\n  const {\n    documents,\n    collections,\n    tags,\n    currentDocument,\n    currentCollection,\n    searchResults,\n    relatedDocuments,\n    knowledgeGraph,\n    faq,\n    stats,\n    totalDocuments,\n    loading,\n    searching,\n    error,\n    fetchDocuments,\n    fetchCollections,\n    fetchTags,\n    createCollection,\n    deleteDocument,\n    toggleFavorite,\n    searchDocuments,\n    autoTag,\n    findRelated,\n    buildKnowledgeGraph,\n    generateFaq,\n    fetchStats,\n    reset,\n  } = useKnowledgeStore()\n\n  const [searchQuery, setSearchQuery] = useState('')\n  const [selectedCollection, setSelectedCollection] = useState(null)\n  const [view, setView] = useState('all') // 'all', 'favorites', 'recent', 'graph', 'faq'\n  const [createCollectionOpen, setCreateCollectionOpen] = useState(false)\n  const [newCollectionName, setNewCollectionName] = useState('')\n  const [menuAnchor, setMenuAnchor] = useState(null)\n  const [selectedDoc, setSelectedDoc] = useState(null)\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false)\n  const [uploadFile, setUploadFile] = useState(null)\n  const [uploadTitle, setUploadTitle] = useState('')\n  const [uploading, setUploading] = useState(false)\n\n  useEffect(() => {\n    fetchDocuments()\n    fetchCollections()\n    fetchTags()\n    fetchStats()\n    return () => reset()\n  }, [fetchCollections, fetchDocuments, fetchStats, fetchTags, reset])\n\n  const handleSearch = useCallback(async () => {\n    if (!searchQuery.trim()) {\n      fetchDocuments()\n      return\n    }\n\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Search library',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: { source: 'knowledge', query: searchQuery },\n      action: () => searchDocuments(searchQuery),\n    })\n  }, [execute, fetchDocuments, searchDocuments, searchQuery])\n\n  const handleSelectCollection = useCallback((collection) => {\n    setSelectedCollection(collection)\n    if (collection) {\n      fetchDocuments({ collectionId: collection.id })\n    } else {\n      fetchDocuments()\n    }\n  }, [fetchDocuments])\n\n  const handleToggleFavorite = useCallback(async (docId) => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Toggle favorite',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      intent: { source: 'knowledge', documentId: docId },\n      action: () => toggleFavorite(docId),\n    })\n  }, [execute, toggleFavorite])\n\n  const handleDeleteDocument = useCallback(async (docId) => {\n    return execute({\n      type: InteractionType.DELETE,\n      label: 'Delete document',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'knowledge', documentId: docId },\n      action: async () => {\n        await deleteDocument(docId)\n        toast.show('Document deleted', 'success')\n      },\n    })\n  }, [deleteDocument, execute, toast])\n\n  const handleAutoTag = useCallback(async (docId) => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Auto-tag document',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      intent: { source: 'knowledge', documentId: docId },\n      action: async () => {\n        await autoTag(docId)\n        toast.show('Tags generated', 'success')\n      },\n    })\n  }, [autoTag, execute, toast])\n\n  const handleFindRelated = useCallback(async (docId) => {\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Find related documents',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      intent: { source: 'knowledge', documentId: docId },\n      action: () => findRelated(docId),\n    })\n  }, [execute, findRelated])\n\n  const handleBuildGraph = useCallback(async () => {\n    const documentIds = documents\n      .map((doc) => doc?.id)\n      .filter(Boolean)\n\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Build knowledge graph',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      blocksNavigation: true,\n      intent: { source: 'knowledge' },\n      action: async () => {\n        await buildKnowledgeGraph({ collectionId: selectedCollection?.id, documentIds })\n        setView('graph')\n        toast.show('Knowledge graph built', 'success')\n      },\n    })\n  }, [buildKnowledgeGraph, documents, execute, selectedCollection?.id, toast])\n\n  const handleGenerateFaq = useCallback(async () => {\n    const documentIds = documents\n      .map((doc) => doc?.id)\n      .filter(Boolean)\n\n    if (!documentIds.length) {\n      toast.show('Upload at least one document before generating FAQ', 'warning')\n      return null\n    }\n\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Generate FAQ',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      blocksNavigation: true,\n      intent: { source: 'knowledge' },\n      action: async () => {\n        const response = await generateFaq({\n          collectionId: selectedCollection?.id,\n          documentIds,\n          background: false,\n        })\n        if (response?.status === 'queued') {\n          toast.show('FAQ generation queued', 'info')\n        } else {\n          setView('faq')\n          toast.show('FAQ generated', 'success')\n        }\n      },\n    })\n  }, [documents, execute, generateFaq, selectedCollection?.id, toast])\n\n  const handleCreateCollection = useCallback(async () => {\n    if (!newCollectionName.trim()) return\n\n    return execute({\n      type: InteractionType.CREATE,\n      label: 'Create collection',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'knowledge', name: newCollectionName },\n      action: async () => {\n        await createCollection({ name: newCollectionName })\n        toast.show('Collection created', 'success')\n        setNewCollectionName('')\n        setCreateCollectionOpen(false)\n      },\n    })\n  }, [createCollection, execute, newCollectionName, toast])\n\n  const handleMenuOpen = (event, doc) => {\n    setMenuAnchor(event.currentTarget)\n    setSelectedDoc(doc)\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchor(null)\n    setSelectedDoc(null)\n  }\n\n  const handleUploadDocument = useCallback(async () => {\n    if (!uploadFile) {\n      toast.show('Please select a file to upload', 'warning')\n      return\n    }\n\n    return execute({\n      type: InteractionType.CREATE,\n      label: 'Upload document',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      intent: { source: 'knowledge', fileName: uploadFile.name },\n      action: async () => {\n        setUploading(true)\n        try {\n          await uploadDocument(\n            uploadFile,\n            uploadTitle || uploadFile.name,\n            selectedCollection?.id\n          )\n\n          toast.show('Document uploaded successfully!', 'success')\n          setUploadDialogOpen(false)\n          setUploadFile(null)\n          setUploadTitle('')\n          fetchDocuments()\n        } catch (err) {\n          toast.show(err.userMessage || err.message || 'Failed to upload document', 'error')\n        } finally {\n          setUploading(false)\n        }\n      },\n    })\n  }, [execute, fetchDocuments, selectedCollection, toast, uploadFile, uploadTitle])\n\n  const handleFileSelect = (event) => {\n    const file = event.target.files?.[0]\n    if (file) {\n      setUploadFile(file)\n      if (!uploadTitle) {\n        setUploadTitle(file.name.replace(/\\.[^/.]+$/, ''))\n      }\n    }\n  }\n\n  const displayedDocs = view === 'favorites'\n    ? documents.filter((d) => d.is_favorite)\n    : searchQuery && searchResults.length > 0\n    ? searchResults\n    : documents\n\n  return (\n    <PageContainer>\n      <Header>\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <FolderOpenIcon sx={{ color: 'text.secondary', fontSize: 28 }} />\n            <Box>\n              <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                Knowledge Library\n              </Typography>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 0.5 }}>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {stats?.total_documents || 0} documents in {stats?.total_collections || 0} collections\n                </Typography>\n                {connections.length > 0 && (\n                  <Chip label={`${connections.length} connections`} size=\"small\" variant=\"outlined\" />\n                )}\n                {templates.length > 0 && (\n                  <Chip label={`${templates.length} templates`} size=\"small\" variant=\"outlined\" />\n                )}\n              </Box>\n            </Box>\n          </Box>\n          <Box sx={{ display: 'flex', gap: 1 }}>\n            <ImportFromMenu\n              currentFeature={FeatureKey.KNOWLEDGE}\n              onImport={async (output) => {\n                const content = typeof output.data === 'string' ? output.data : JSON.stringify(output.data)\n                const blob = new Blob([content], { type: 'text/plain' })\n                const file = new File([blob], `${output.title || 'Imported'}.txt`, { type: 'text/plain' })\n                await uploadDocument(file, output.title || 'Imported', selectedCollection?.id)\n                fetchDocuments()\n                toast.show(`\"${output.title}\" saved to library`, 'success')\n              }}\n            />\n            <ActionButton\n              variant=\"contained\"\n              startIcon={<UploadIcon />}\n              onClick={() => setUploadDialogOpen(true)}\n            >\n              Upload Document\n            </ActionButton>\n            <ActionButton\n              startIcon={<GraphIcon />}\n              onClick={handleBuildGraph}\n              disabled={loading}\n            >\n              Knowledge Graph\n            </ActionButton>\n            <ActionButton\n              startIcon={<FaqIcon />}\n              onClick={handleGenerateFaq}\n              disabled={loading}\n            >\n              Generate FAQ\n            </ActionButton>\n          </Box>\n        </Box>\n      </Header>\n\n      <ContentArea>\n        {/* Sidebar */}\n        <Sidebar>\n          <Box sx={{ p: 2 }}>\n            <TextField\n              fullWidth\n              size=\"small\"\n              placeholder=\"Search...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon fontSize=\"small\" />\n                  </InputAdornment>\n                ),\n              }}\n            />\n          </Box>\n\n          {/* Quick Filters */}\n          <List dense sx={{ px: 1 }}>\n            <CollectionItem\n              button\n              selected={view === 'all' && !selectedCollection}\n              onClick={() => {\n                setView('all')\n                setSelectedCollection(null)\n                fetchDocuments()\n              }}\n            >\n              <ListItemIcon sx={{ minWidth: 36 }}>\n                <DocIcon fontSize=\"small\" />\n              </ListItemIcon>\n              <ListItemText primary=\"All Documents\" />\n            </CollectionItem>\n            <CollectionItem\n              button\n              selected={view === 'favorites'}\n              onClick={() => {\n                setView('favorites')\n                setSelectedCollection(null)\n                fetchDocuments({ favoritesOnly: true })\n              }}\n            >\n              <ListItemIcon sx={{ minWidth: 36 }}>\n                <StarIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n              </ListItemIcon>\n              <ListItemText primary=\"Favorites\" />\n            </CollectionItem>\n            <CollectionItem\n              button\n              selected={view === 'graph'}\n              onClick={() => setView('graph')}\n            >\n              <ListItemIcon sx={{ minWidth: 36 }}>\n                <GraphIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Knowledge Graph\"\n                secondary={knowledgeGraph ? `${knowledgeGraph.nodes?.length || 0} nodes` : null}\n              />\n            </CollectionItem>\n            <CollectionItem\n              button\n              selected={view === 'faq'}\n              onClick={() => setView('faq')}\n            >\n              <ListItemIcon sx={{ minWidth: 36 }}>\n                <FaqIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"FAQ\"\n                secondary={faq.length ? `${faq.length} items` : null}\n              />\n            </CollectionItem>\n          </List>\n\n          <Divider sx={{ my: 1 }} />\n\n          {/* Collections */}\n          <Box sx={{ px: 2, py: 1, display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n            <Typography variant=\"caption\" sx={{ fontWeight: 600 }}>\n              COLLECTIONS\n            </Typography>\n            <IconButton size=\"small\" onClick={() => setCreateCollectionOpen(true)}>\n              <AddIcon fontSize=\"small\" />\n            </IconButton>\n          </Box>\n          <List dense sx={{ px: 1, flex: 1, overflow: 'auto' }}>\n            {collections.map((collection) => (\n              <CollectionItem\n                key={collection.id}\n                button\n                selected={selectedCollection?.id === collection.id}\n                onClick={() => handleSelectCollection(collection)}\n              >\n                <ListItemIcon sx={{ minWidth: 36 }}>\n                  <FolderIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n                </ListItemIcon>\n                <ListItemText\n                  primary={collection.name}\n                  secondary={`${collection.document_count || 0} docs`}\n                />\n              </CollectionItem>\n            ))}\n          </List>\n\n          {/* Tags */}\n          <Box sx={{ p: 2, borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}` }}>\n            <Typography variant=\"caption\" sx={{ fontWeight: 600, display: 'block', mb: 1 }}>\n              TAGS\n            </Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n              {tags.slice(0, 10).map((tag) => (\n                <Chip\n                  key={tag.id}\n                  size=\"small\"\n                  label={tag.name}\n                  variant=\"filled\"\n                  onClick={() => fetchDocuments({ tags: [tag.name] })}\n                />\n              ))}\n            </Box>\n          </Box>\n        </Sidebar>\n\n        {/* Main Panel */}\n        <MainPanel>\n          {loading && !documents.length && view !== 'graph' && view !== 'faq' ? (\n            <Grid container spacing={2}>\n              {Array.from({ length: 6 }).map((_, i) => (\n                <Grid item xs={12} sm={6} md={4} key={i}>\n                  <Card variant=\"outlined\" sx={{ p: 2 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1.5 }}>\n                      <Box sx={{ width: '70%', height: 20, bgcolor: alpha(theme.palette.text.primary, 0.08), borderRadius: 1 }} />\n                      <Box sx={{ width: 24, height: 24, bgcolor: alpha(theme.palette.text.primary, 0.05), borderRadius: '50%' }} />\n                    </Box>\n                    <Box sx={{ width: '50%', height: 14, bgcolor: alpha(theme.palette.text.primary, 0.05), borderRadius: 1, mb: 1.5 }} />\n                    <Box sx={{ display: 'flex', gap: 0.5 }}>\n                      <Box sx={{ width: 48, height: 20, bgcolor: alpha(theme.palette.text.primary, 0.05), borderRadius: 1 }} />\n                      <Box sx={{ width: 56, height: 20, bgcolor: alpha(theme.palette.text.primary, 0.05), borderRadius: 1 }} />\n                    </Box>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          ) : view === 'graph' ? (\n            /* Knowledge Graph View */\n            knowledgeGraph ? (\n              <Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 3 }}>\n                  <Box>\n                    <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                      Knowledge Graph\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {knowledgeGraph.nodes?.length || 0} nodes, {knowledgeGraph.edges?.length || 0} relationships\n                    </Typography>\n                  </Box>\n                  <ActionButton\n                    startIcon={<GraphIcon />}\n                    onClick={handleBuildGraph}\n                    disabled={loading}\n                  >\n                    Rebuild\n                  </ActionButton>\n                </Box>\n\n                {/* Nodes */}\n                <Typography variant=\"overline\" sx={{ fontWeight: 600, display: 'block', mb: 1 }}>\n                  Entities\n                </Typography>\n                <Grid container spacing={1.5} sx={{ mb: 3 }}>\n                  {knowledgeGraph.nodes?.map((node) => (\n                    <Grid item xs={12} sm={6} md={4} key={node.id}>\n                      <Paper\n                        variant=\"outlined\"\n                        sx={{\n                          p: 2,\n                          borderRadius: 1,\n                          transition: 'all 0.15s cubic-bezier(0.22, 1, 0.36, 1)',\n                          '&:hover': { borderColor: 'text.secondary', transform: 'translateY(-1px)' },\n                        }}\n                      >\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}>\n                          <Chip\n                            size=\"small\"\n                            label={node.type}\n                            color={node.type === 'document' ? 'primary' : node.type === 'entity' ? 'secondary' : 'default'}\n                            variant=\"outlined\"\n                          />\n                        </Box>\n                        <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                          {node.label}\n                        </Typography>\n                        {node.properties?.description && (\n                          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 0.5, display: 'block' }}>\n                            {node.properties.description}\n                          </Typography>\n                        )}\n                      </Paper>\n                    </Grid>\n                  ))}\n                </Grid>\n\n                {/* Edges */}\n                {knowledgeGraph.edges?.length > 0 && (\n                  <>\n                    <Typography variant=\"overline\" sx={{ fontWeight: 600, display: 'block', mb: 1 }}>\n                      Relationships\n                    </Typography>\n                    <Paper variant=\"outlined\" sx={{ borderRadius: 1 }}>\n                      <List dense>\n                        {knowledgeGraph.edges.map((edge, idx) => {\n                          const sourceNode = knowledgeGraph.nodes?.find((n) => n.id === edge.source)\n                          const targetNode = knowledgeGraph.nodes?.find((n) => n.id === edge.target)\n                          return (\n                            <ListItem key={idx} divider={idx < knowledgeGraph.edges.length - 1}>\n                              <ListItemText\n                                primary={\n                                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flexWrap: 'wrap' }}>\n                                    <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                                      {sourceNode?.label || edge.source}\n                                    </Typography>\n                                    <Chip size=\"small\" label={edge.type} variant=\"outlined\" />\n                                    <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                                      {targetNode?.label || edge.target}\n                                    </Typography>\n                                  </Box>\n                                }\n                              />\n                            </ListItem>\n                          )\n                        })}\n                      </List>\n                    </Paper>\n                  </>\n                )}\n              </Box>\n            ) : (\n              <Box\n                sx={{\n                  height: '50vh',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <GraphIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n                <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                  No knowledge graph yet\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, textAlign: 'center', maxWidth: 400 }}>\n                  Build a knowledge graph to visualize relationships between your documents, entities, and concepts.\n                </Typography>\n                <ActionButton\n                  variant=\"contained\"\n                  size=\"large\"\n                  startIcon={<GraphIcon />}\n                  onClick={handleBuildGraph}\n                  disabled={loading || !documents.length}\n                >\n                  Build Knowledge Graph\n                </ActionButton>\n              </Box>\n            )\n          ) : view === 'faq' ? (\n            /* FAQ View */\n            faq.length > 0 ? (\n              <Box>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 3 }}>\n                  <Box>\n                    <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                      Frequently Asked Questions\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {faq.length} question{faq.length !== 1 ? 's' : ''} generated from your documents\n                    </Typography>\n                  </Box>\n                  <ActionButton\n                    startIcon={<FaqIcon />}\n                    onClick={handleGenerateFaq}\n                    disabled={loading}\n                  >\n                    Regenerate\n                  </ActionButton>\n                </Box>\n\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n                  {faq.map((item, idx) => (\n                    <Paper\n                      key={idx}\n                      variant=\"outlined\"\n                      sx={{ p: 2.5, borderRadius: 1 }}\n                    >\n                      <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 1.5 }}>\n                        <FaqIcon sx={{ color: 'text.secondary', fontSize: 20, mt: 0.25, flexShrink: 0 }} />\n                        <Box sx={{ flex: 1 }}>\n                          <Typography variant=\"body1\" sx={{ fontWeight: 600, mb: 1 }}>\n                            {item.question}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ lineHeight: 1.7 }}>\n                            {item.answer}\n                          </Typography>\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 1.5 }}>\n                            {item.category && (\n                              <Chip size=\"small\" label={item.category} variant=\"outlined\" />\n                            )}\n                            {item.confidence != null && (\n                              <Chip\n                                size=\"small\"\n                                label={`${Math.round(item.confidence * 100)}% confidence`}\n                                variant=\"outlined\"\n                                color={item.confidence >= 0.8 ? 'success' : item.confidence >= 0.5 ? 'warning' : 'default'}\n                              />\n                            )}\n                          </Box>\n                        </Box>\n                      </Box>\n                    </Paper>\n                  ))}\n                </Box>\n              </Box>\n            ) : (\n              <Box\n                sx={{\n                  height: '50vh',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <FaqIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n                <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                  No FAQ generated yet\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, textAlign: 'center', maxWidth: 400 }}>\n                  Generate FAQ from your documents to surface the most important questions and answers.\n                </Typography>\n                <ActionButton\n                  variant=\"contained\"\n                  size=\"large\"\n                  startIcon={<FaqIcon />}\n                  onClick={handleGenerateFaq}\n                  disabled={loading || !documents.length}\n                >\n                  Generate FAQ\n                </ActionButton>\n              </Box>\n            )\n          ) : (\n            /* Documents View (default) */\n            <>\n              <Grid container spacing={2}>\n                {displayedDocs.map((doc) => (\n                  <Grid item xs={12} sm={6} md={4} key={doc.id}>\n                    <DocumentCard>\n                      <CardContent>\n                        <Box sx={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'space-between' }}>\n                          <Box sx={{ flex: 1 }}>\n                            <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }} noWrap>\n                              {doc.title}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n                              {doc.file_type?.toUpperCase()} - {new Date(doc.updated_at).toLocaleDateString()}\n                            </Typography>\n                          </Box>\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => handleToggleFavorite(doc.id)}\n                          >\n                            {doc.is_favorite ? <StarIcon sx={{ color: 'text.secondary' }} /> : <StarBorderIcon />}\n                          </IconButton>\n                        </Box>\n                        {doc.tags?.length > 0 && (\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 1 }}>\n                            {doc.tags.slice(0, 3).map((tag) => (\n                              <Chip key={tag} size=\"small\" label={tag} variant=\"outlined\" />\n                            ))}\n                          </Box>\n                        )}\n                      </CardContent>\n                      <CardActions sx={{ justifyContent: 'flex-end', pt: 0 }}>\n                        <IconButton size=\"small\" onClick={(e) => handleMenuOpen(e, doc)}>\n                          <MoreIcon fontSize=\"small\" />\n                        </IconButton>\n                      </CardActions>\n                    </DocumentCard>\n                  </Grid>\n                ))}\n              </Grid>\n\n              {displayedDocs.length === 0 && !loading && (\n                <Box\n                  sx={{\n                    height: '50vh',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <FolderOpenIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n                  <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                    No documents found\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, textAlign: 'center', maxWidth: 400 }}>\n                    Upload your first document to start building your knowledge base.\n                    We support PDF, Word, Text, and Markdown files.\n                  </Typography>\n                  <ActionButton\n                    variant=\"contained\"\n                    size=\"large\"\n                    startIcon={<UploadIcon />}\n                    onClick={() => setUploadDialogOpen(true)}\n                  >\n                    Upload Your First Document\n                  </ActionButton>\n                </Box>\n              )}\n            </>\n          )}\n        </MainPanel>\n      </ContentArea>\n\n      {/* Context Menu */}\n      <Menu\n        anchorEl={menuAnchor}\n        open={Boolean(menuAnchor)}\n        onClose={handleMenuClose}\n      >\n        <MenuItem onClick={() => { handleAutoTag(selectedDoc?.id); handleMenuClose(); }}>\n          <ListItemIcon><AIIcon fontSize=\"small\" /></ListItemIcon>\n          <ListItemText>Auto-tag</ListItemText>\n        </MenuItem>\n        <MenuItem onClick={() => { handleFindRelated(selectedDoc?.id); handleMenuClose(); }}>\n          <ListItemIcon><SearchIcon fontSize=\"small\" /></ListItemIcon>\n          <ListItemText>Find Related</ListItemText>\n        </MenuItem>\n        <Divider />\n        <MenuItem onClick={() => { handleDeleteDocument(selectedDoc?.id); handleMenuClose(); }}>\n          <ListItemIcon><DeleteIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} /></ListItemIcon>\n          <ListItemText>Delete</ListItemText>\n        </MenuItem>\n      </Menu>\n\n      {/* Create Collection Dialog */}\n      <Dialog open={createCollectionOpen} onClose={() => setCreateCollectionOpen(false)}>\n        <DialogTitle>Create Collection</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"Collection Name\"\n            value={newCollectionName}\n            onChange={(e) => setNewCollectionName(e.target.value)}\n            sx={{ mt: 1 }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setCreateCollectionOpen(false)}>Cancel</Button>\n          <Button variant=\"contained\" onClick={handleCreateCollection}>Create</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Upload Document Dialog */}\n      <Dialog\n        open={uploadDialogOpen}\n        onClose={() => !uploading && setUploadDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Upload Document</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n            Upload a document to add it to your knowledge library. Supported formats: PDF, DOCX, TXT, MD, HTML\n          </Typography>\n\n          <UploadDropzone\n            onClick={() => document.getElementById('document-upload-input')?.click()}\n            sx={{ mb: 3 }}\n          >\n            <input\n              id=\"document-upload-input\"\n              type=\"file\"\n              accept=\".pdf,.docx,.doc,.txt,.md,.html\"\n              onChange={handleFileSelect}\n              style={{ display: 'none' }}\n            />\n            <UploadIcon sx={{ fontSize: 48, color: 'text.disabled', mb: 2 }} />\n            {uploadFile ? (\n              <>\n                <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                  {uploadFile.name}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {(uploadFile.size / 1024 / 1024).toFixed(2)} MB - Click to change\n                </Typography>\n              </>\n            ) : (\n              <>\n                <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                  Click to select a file\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  or drag and drop here\n                </Typography>\n              </>\n            )}\n          </UploadDropzone>\n\n          <TextField\n            fullWidth\n            label=\"Document Title\"\n            value={uploadTitle}\n            onChange={(e) => setUploadTitle(e.target.value)}\n            placeholder=\"Enter a title for this document\"\n            sx={{ mb: 2 }}\n          />\n\n          {selectedCollection && (\n            <Alert severity=\"info\">\n              This document will be added to the \"{selectedCollection.name}\" collection.\n            </Alert>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setUploadDialogOpen(false)} disabled={uploading}>\n            Cancel\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleUploadDocument}\n            disabled={!uploadFile || uploading}\n            startIcon={uploading ? <CircularProgress size={16} /> : <UploadIcon />}\n          >\n            {uploading ? 'Uploading...' : 'Upload'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ m: 2 }}>\n          {error}\n        </Alert>\n      )}\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport KnowledgePageContainer from '@/features/knowledge/containers/KnowledgePageContainer'\n\nexport default function KnowledgePage() {\n  useInteraction()\n  return <KnowledgePageContainer />\n}\n"],"names":["normalizeDocument","doc","normalized","inferDocumentType","fileName","addDocument","data","api","uploadDocument","file","title","collectionId","formData","getDocument","documentId","listDocuments","options","payload","documents","updateDocument","deleteDocument","toggleFavorite","createCollection","getCollection","listCollections","updateCollection","deleteCollection","addDocumentToCollection","removeDocumentFromCollection","createTag","name","color","listTags","deleteTag","tagId","addTagToDocument","removeTagFromDocument","searchDocuments","query","semanticSearch","autoTag","maxTags","findRelated","buildKnowledgeGraph","generateFaq","documentIds","getLibraryStats","getDocumentActivity","normalizeSearchResults","response","row","normalizeRelatedDocuments","normalizeFaq","useKnowledgeStore","create","set","get","loading","error","knowledgeApi.addDocument","state","err","knowledgeApi.listDocuments","knowledgeApi.getDocument","knowledgeApi.updateDocument","d","knowledgeApi.deleteDocument","result","knowledgeApi.toggleFavorite","collection","knowledgeApi.createCollection","collections","knowledgeApi.listCollections","knowledgeApi.getCollection","knowledgeApi.updateCollection","c","knowledgeApi.deleteCollection","knowledgeApi.addDocumentToCollection","knowledgeApi.removeDocumentFromCollection","tag","knowledgeApi.createTag","tags","knowledgeApi.listTags","knowledgeApi.deleteTag","t","knowledgeApi.addTagToDocument","knowledgeApi.removeTagFromDocument","knowledgeApi.getDocumentActivity","knowledgeApi.searchDocuments","knowledgeApi.semanticSearch","knowledgeApi.autoTag","related","knowledgeApi.findRelated","graph","knowledgeApi.buildKnowledgeGraph","knowledgeApi.generateFaq","stats","knowledgeApi.getLibraryStats","PageContainer","styled","Box","theme","Header","alpha","ContentArea","Sidebar","MainPanel","DocumentCard","Card","CollectionItem","ListItem","selected","neutral","ActionButton","Button","UploadDropzone","isDragActive","KnowledgePageContainer","useTheme","toast","useToast","execute","useInteraction","connections","templates","useSharedData","useIncomingTransfer","FeatureKey","TransferAction","content","blob","selectedCollection","fetchDocuments","currentDocument","currentCollection","searchResults","relatedDocuments","knowledgeGraph","faq","totalDocuments","searching","fetchCollections","fetchTags","fetchStats","reset","searchQuery","setSearchQuery","useState","setSelectedCollection","view","setView","createCollectionOpen","setCreateCollectionOpen","newCollectionName","setNewCollectionName","menuAnchor","setMenuAnchor","selectedDoc","setSelectedDoc","uploadDialogOpen","setUploadDialogOpen","uploadFile","setUploadFile","uploadTitle","setUploadTitle","uploading","setUploading","useEffect","handleSearch","useCallback","InteractionType","Reversibility","handleSelectCollection","handleToggleFavorite","docId","handleDeleteDocument","handleAutoTag","handleFindRelated","handleBuildGraph","handleGenerateFaq","handleCreateCollection","handleMenuOpen","event","handleMenuClose","handleUploadDocument","handleFileSelect","displayedDocs","jsx","jsxs","FolderOpenIcon","Typography","Chip","ImportFromMenu","output","UploadIcon","GraphIcon","FaqIcon","TextField","e","InputAdornment","SearchIcon","List","ListItemIcon","DocIcon","ListItemText","StarIcon","Divider","IconButton","AddIcon","FolderIcon","Grid","_","i","node","Paper","Fragment","edge","idx","sourceNode","n","targetNode","item","CardContent","StarBorderIcon","CardActions","MoreIcon","Menu","MenuItem","AIIcon","DeleteIcon","Dialog","DialogTitle","DialogContent","DialogActions","Alert","CircularProgress","KnowledgePage"],"mappings":"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"}