import{c as lt,j as t,e as it,d as ct,b as dt,u as Ie,r as s,R as w,I as v,at as ut,au as pt,l as bt,av as ft,aw as I,ax as mt,ay as ye,az as Ce,aA as se,aB as gt,aC as xt,T as S,B as j,aD as le,P as Te,W as ht,n as je,q as yt,_ as Y,$ as G,ah as ke,aE as Se,aF as Ct,aG as jt,S as kt,J as b,v as Ee,p as i,k as g,aH as we,Z as St,t as wt,aI as vt,O as Dt,o as Ae,a2 as Rt,a3 as It,ak as Tt,al as Et,am as At,aJ as zt,ao as Mt,s as Jt,K as X}from"./index-B8Eu23bA.js";import{M as Lt}from"./MoreVert-BRjwX6CI.js";import{P as _t}from"./Visibility-DQVh5lRN.js";import{D as $t}from"./DataTable-_yVGBakl.js";import{C as re}from"./ConfirmModal-Bm9QL03g.js";import"./KeyboardArrowDown-C4qqpONU.js";import"./FilterList-lKi4AKs9.js";import"./Check-BATZaRrq.js";import"./TableRow-Gv3OwSlT.js";import"./TableContainer-CxteWhu6.js";import"./KeyboardArrowRight-BOQXGjwe.js";import"./CheckCircleOutline-BKKyaL-x.js";import"./WarningAmber-DtVJgAFk.js";const ve=lt(t.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"})),ze=X`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;X`
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
`;X`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`;X`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`;const Pt=b(j)(({theme:e})=>({padding:e.spacing(3),maxWidth:1400,margin:"0 auto",width:"100%",minHeight:"100vh",backgroundColor:e.palette.background.default})),Bt=b(Rt)(({theme:e})=>({"& .MuiPaper-root":{backgroundColor:i(e.palette.background.paper,.95),backdropFilter:"blur(20px)",border:`1px solid ${i(e.palette.divider,.1)}`,borderRadius:8,boxShadow:`0 8px 32px ${i(e.palette.common.black,.15)}`,minWidth:180,animation:`${ze} 0.2s ease-out`}})),V=b(It)(({theme:e})=>({borderRadius:8,margin:e.spacing(.5,1),padding:e.spacing(1,1.5),fontSize:"0.8125rem",transition:"all 0.15s ease","&:hover":{backgroundColor:e.palette.mode==="dark"?i(e.palette.text.primary,.08):g[300]},"& .MuiListItemIcon-root":{minWidth:32}})),Nt=b(Tt)(({theme:e})=>({"& .MuiBackdrop-root":{backgroundColor:i(e.palette.common.black,.6),backdropFilter:"blur(8px)"},"& .MuiDialog-paper":{backgroundColor:i(e.palette.background.paper,.95),backdropFilter:"blur(20px)",border:`1px solid ${i(e.palette.divider,.1)}`,borderRadius:8,boxShadow:`0 24px 64px ${i(e.palette.common.black,.25)}`,animation:`${ze} 0.3s ease-out`}})),Ft=b(Et)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2.5,3),fontSize:"1.125rem",fontWeight:600})),Ot=b(Ae)(({theme:e})=>({width:32,height:32,borderRadius:8,color:e.palette.text.secondary,transition:"all 0.2s ease","&:hover":{backgroundColor:e.palette.mode==="dark"?i(e.palette.text.primary,.08):g[300],color:e.palette.text.primary,transform:"rotate(90deg)"}})),Wt=b(At)(({theme:e})=>({padding:e.spacing(0,3,3),borderTop:`1px solid ${i(e.palette.divider,.08)}`,borderBottom:`1px solid ${i(e.palette.divider,.08)}`})),Ut=b(Mt)(({theme:e})=>({padding:e.spacing(2,3),gap:e.spacing(1)})),T=b(S)(({theme:e})=>({fontSize:"0.6875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:e.palette.text.secondary,marginBottom:e.spacing(.5)})),ae=b(S)(({theme:e})=>({fontSize:"0.8125rem",color:e.palette.text.primary})),ne=b(S)(({theme:e})=>({fontFamily:"var(--font-mono, monospace)",fontSize:"0.75rem",color:e.palette.text.secondary})),De=b(Ee,{shouldForwardProp:e=>!["statusColor","statusBg"].includes(e)})(({theme:e,statusColor:n,statusBg:D})=>({borderRadius:8,fontWeight:600,fontSize:"0.6875rem",backgroundColor:D,color:n,"& .MuiChip-icon":{marginLeft:e.spacing(.5),color:n}})),Yt=b(Ee)(({theme:e})=>({borderRadius:8,fontWeight:500,fontSize:"0.6875rem",textTransform:"capitalize",backgroundColor:i(e.palette.text.primary,.08),color:e.palette.text.secondary})),Gt=b(Dt)(({theme:e})=>({borderRadius:4,height:6,backgroundColor:e.palette.mode==="dark"?i(e.palette.text.primary,.1):g[300],"& .MuiLinearProgress-bar":{borderRadius:4,background:e.palette.mode==="dark"?g[1e3]:g[1100]}})),H=b(Jt)(({theme:e})=>({borderRadius:8,textTransform:"none",fontWeight:500,fontSize:"0.8125rem",padding:e.spacing(.75,2),transition:"all 0.2s ease"}));b(H)(({theme:e})=>({background:e.palette.mode==="dark"?g[1100]:g[1200],color:"#fff",boxShadow:`0 4px 14px ${i(e.palette.common.black,.15)}`,"&:hover":{background:e.palette.mode==="dark"?g[1e3]:g[1100],boxShadow:`0 6px 20px ${i(e.palette.common.black,.2)}`,transform:"translateY(-1px)"}}));const Vt=b(j)(({theme:e})=>({marginTop:e.spacing(1),padding:e.spacing(1.5),backgroundColor:i(e.palette.background.paper,.4),borderRadius:8,border:`1px solid ${i(e.palette.divider,.1)}`,fontFamily:"var(--font-mono, monospace)",fontSize:"0.75rem",whiteSpace:"pre-wrap",color:e.palette.text.secondary,maxHeight:260,overflow:"auto","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:i(e.palette.text.primary,.2),borderRadius:1}})),E=b(zt)(({theme:e})=>({borderColor:i(e.palette.divider,.08),margin:e.spacing(2,0)})),Ht=b(Te)(({theme:e})=>({borderRadius:8,backgroundColor:e.palette.mode==="dark"?i(e.palette.text.primary,.08):g[300],border:`1px solid ${i(e.palette.divider,.2)}`,"& .MuiAlert-icon":{color:e.palette.text.secondary}})),Xt=b(Ae)(({theme:e})=>({color:e.palette.text.secondary,transition:"all 0.2s ease","&:hover":{color:e.palette.text.primary,backgroundColor:e.palette.mode==="dark"?i(e.palette.text.primary,.08):g[300]}})),Re=(e,n)=>{const D={pending:{icon:we,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.05):g[200],label:"Pending"},running:{icon:vt,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.1):g[300],label:"Running"},completed:{icon:wt,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.1):g[300],label:"Completed"},failed:{icon:St,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.05):g[300],label:"Failed"},cancelled:{icon:le,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.05):g[200],label:"Cancelled"},cancelling:{icon:we,color:e.palette.text.secondary,bgColor:e.palette.mode==="dark"?i(e.palette.text.primary,.05):g[200],label:"Cancelling..."}};return D[n]||D.pending};function qt(){const e=it(),n=ct(),D=dt(),{execute:x}=Ie(),Me=s.useCallback((o,r,a={})=>D(o,{label:r,intent:{from:"jobs",...a}}),[D]),c=s.useCallback((o,r,a={})=>x({type:v.EXECUTE,label:o,reversibility:w.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{from:"jobs",...a},action:r}),[x]),$=s.useCallback((o,r,a={})=>x({type:v.DOWNLOAD,label:o,reversibility:w.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{from:"jobs",...a},action:r}),[x]),[y,A]=s.useState([]),[Je,P]=s.useState(!1),[Le,q]=s.useState(!1),[J,ie]=s.useState(null),[ce,de]=s.useState(null),[u,ue]=s.useState(null),[_e,K]=s.useState(!1),[l,$e]=s.useState(null),[B,N]=s.useState(!1),[f,pe]=s.useState([]),[Pe,F]=s.useState(!1),[Be,L]=s.useState(!1),[O,W]=s.useState(!1),[be,Ne]=s.useState(()=>ut().autoRefreshJobs??!0),Z=s.useRef(null),z=s.useRef(null),Q=s.useRef(!0),C=s.useRef(!1),_=s.useRef(null);s.useEffect(()=>pt(r=>{Ne(r?.autoRefreshJobs??!0)}),[]);const h=s.useCallback(async(o=!1)=>{if(!(!o&&C.current)){_.current&&_.current.abort(),_.current=new AbortController;try{const r=await bt({limit:50});if(Q.current&&(o||!C.current)){const a=Array.isArray(r.jobs)?r.jobs.map(p=>ft(p)):[];A(a)}}catch(r){r.name!=="AbortError"&&console.error("Failed to fetch jobs:",r)}}},[]);s.useEffect(()=>(Q.current=!0,P(!0),h(!0).finally(()=>P(!1)),be&&(Z.current=setInterval(()=>h(!1),5e3)),()=>{Q.current=!1,Z.current&&clearInterval(Z.current),_.current&&_.current.abort()}),[h,be]);const fe=s.useCallback((o,r)=>{de(o),ue(r)},[]),k=s.useCallback(()=>{de(null),ue(null)},[]),U=s.useCallback(o=>{$e(o),K(!0)},[]),me=s.useCallback(()=>{K(!1)},[]),Fe=s.useCallback((o,r)=>{o.stopPropagation();const a=o.currentTarget;return c("Open job actions",()=>fe(a,r),{jobId:r?.id})},[c,fe]),Oe=s.useCallback(()=>c("Close job actions",()=>k()),[c,k]),ge=s.useCallback(()=>x({type:v.EXECUTE,label:"Refresh jobs",reversibility:w.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{from:"jobs",action:"refresh_jobs"},action:async()=>{P(!0);try{await h(),n.show("Progress updated","info")}finally{P(!1)}}}),[x,h,n]),We=s.useCallback(()=>{if(u)return c("Review cancel job",()=>{ie(u),q(!0),k()},{jobId:u.id})},[c,u,k]),Ue=s.useCallback(async()=>{J&&await x({type:v.UPDATE,label:"Cancel job",reversibility:w.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{jobId:J.id,action:"cancel_job"},action:async()=>{C.current=!0,A(o=>o.map(r=>r.id===J.id?{...r,status:I.CANCELLING}:r)),q(!1);try{await mt(J.id),n.show("Job cancelled","success")}catch(o){throw n.show(o.message||"Failed to cancel job","error"),o}finally{ie(null),C.current=!1,h(!0)}}})},[J,n,h,x]),Ye=s.useCallback(()=>$("Download job output",()=>{u?.artifacts?.html_url?window.open(ye(u.artifacts.html_url),"_blank"):n.show("Download not available","warning"),k()},{jobId:u?.id,format:"html"}),[$,u,n,k]),Ge=s.useCallback(()=>{if(u)return c("Open job details",()=>{U(u),k()},{jobId:u.id})},[c,u,U,k]),Ve=s.useCallback(o=>c("Open job details",()=>U(o),{jobId:o?.id,source:"jobs-table"}),[c,U]),He=s.useCallback(async()=>{u&&await x({type:v.UPDATE,label:"Retry job",reversibility:w.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{jobId:u.id,action:"retry_job"},action:async()=>{C.current=!0,N(!0),k();try{await Ce(u.id),n.show("Job restarted successfully","success")}catch(o){throw n.show(o.message||"Failed to retry job","error"),o}finally{N(!1),C.current=!1,h(!0)}}})},[u,n,h,k,x]),xe=s.useCallback(()=>{if(f.length)return c("Review cancel jobs",()=>{if(!f.some(r=>{const a=y.find(p=>p.id===r);return se(a?.status)})){n.show("Select running or pending jobs to cancel","warning");return}F(!0)},{count:f.length})},[c,y,f,n]),Xe=s.useCallback(async()=>{const o=f.filter(r=>{const a=y.find(p=>p.id===r);return se(a?.status)});if(!o.length){n.show("Select running or pending jobs to cancel","warning"),F(!1);return}await x({type:v.UPDATE,label:"Cancel selected jobs",reversibility:w.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{jobIds:o,action:"bulk_cancel_jobs"},action:async()=>{C.current=!0;const r=new Set(o);A(a=>a.map(p=>r.has(p.id)?{...p,status:I.CANCELLING}:p)),F(!1),W(!0);try{const a=await gt(o),p=a?.cancelledCount??a?.cancelled?.length??0,d=a?.failedCount??a?.failed?.length??0;return d>0?n.show(`Cancelled ${p} job${p!==1?"s":""}, ${d} failed`,"warning"):n.show(`Cancelled ${p} job${p!==1?"s":""}`,"success"),a}catch(a){throw n.show(a.message||"Failed to cancel jobs","error"),a}finally{W(!1),C.current=!1,h(!0)}}})},[f,y,n,h,x]),qe=s.useCallback(()=>{if(f.length)return c("Review delete jobs",()=>L(!0),{count:f.length})},[c,f]),Ke=s.useCallback(o=>c("Select jobs",()=>pe(o),{count:o.length}),[c]),Ze=s.useCallback(()=>c("Close cancel confirmation",()=>q(!1)),[c]),Qe=s.useCallback(()=>c("Close bulk cancel",()=>F(!1)),[c]),et=s.useCallback(()=>c("Close bulk delete",()=>L(!1)),[c]),ee=s.useCallback(()=>c("Close job details",()=>me()),[c,me]),tt=s.useCallback(()=>$("Download job output",()=>{const o=l?.artifacts?.html_url;o?window.open(ye(o),"_blank"):n.show("Download not available","warning")},{jobId:l?.id,format:"html"}),[$,l,n]),ot=s.useCallback(()=>{if(l)return x({type:v.UPDATE,label:"Retry job",reversibility:w.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{jobId:l.id,action:"retry_job",source:"details"},action:async()=>{N(!0);try{await Ce(l.id),n.show("Job restarted successfully","success"),K(!1),h()}catch(o){throw n.show(o.message||"Failed to retry job","error"),o}finally{N(!1)}}})},[l,n,h,x]),st=s.useCallback(async()=>{if(!f.length){L(!1);return}const o=[...f],r=y.filter(d=>o.includes(d.id));if(!r.length){L(!1);return}L(!1),pe([]),z.current?.timeoutId&&(clearTimeout(z.current.timeoutId),z.current=null),C.current=!0,A(d=>d.filter(m=>!o.includes(m.id)));let a=!1;const p=setTimeout(async()=>{a||await x({type:v.DELETE,label:"Delete jobs",reversibility:w.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{jobIds:o,action:"bulk_delete_jobs"},action:async()=>{W(!0);try{const d=await xt(o),m=d?.deletedCount??d?.deleted?.length??0,R=d?.failedCount??d?.failed?.length??0;return R>0?n.show(`Removed ${m} job${m!==1?"s":""}, ${R} failed`,"warning"):n.show(`Removed ${m} job${m!==1?"s":""}`,"success"),d}catch(d){throw A(m=>{const R=new Set(m.map(oe=>oe.id)),M=r.filter(oe=>!R.has(oe.id));return M.length?[...m,...M]:m}),n.show(d.message||"Failed to delete jobs","error"),d}finally{W(!1),C.current=!1,z.current=null,h(!0)}}})},5e3);z.current={timeoutId:p,ids:o,jobs:r},n.showWithUndo(`Removed ${o.length} job${o.length!==1?"s":""} from history`,()=>{a=!0,clearTimeout(p),z.current=null,A(d=>{const m=new Set(d.map(M=>M.id)),R=r.filter(M=>!m.has(M.id));return R.length?[...d,...R]:d}),C.current=!1,n.show("Jobs restored","success")},{severity:"info"})},[f,y,n,h,x]),rt=s.useMemo(()=>[{field:"id",headerName:"Job ID",width:160,renderCell:o=>t.jsxs(ne,{children:[o?.slice(0,12),"..."]})},{field:"type",headerName:"Type",width:120,renderCell:o=>t.jsx(Yt,{label:o||"report",size:"small"})},{field:"templateName",headerName:"Design",renderCell:(o,r)=>t.jsx(S,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o||r.templateId?.slice(0,12)||"-"})},{field:"status",headerName:"Status",width:140,renderCell:o=>{const r=Re(e,o),a=r.icon;return t.jsx(De,{icon:t.jsx(a,{sx:{fontSize:14}}),label:r.label,size:"small",statusColor:r.color,statusBg:r.bgColor})}},{field:"progress",headerName:"Progress",width:150,renderCell:(o,r)=>{if(r.status===I.COMPLETED)return t.jsx(S,{sx:{fontSize:"0.75rem",color:"text.secondary",fontWeight:600},children:"100%"});if(r.status===I.FAILED||r.status===I.CANCELLED)return t.jsx(S,{sx:{fontSize:"0.75rem",color:"text.disabled"},children:"-"});const a=o||0;return t.jsxs(j,{sx:{width:"100%",display:"flex",alignItems:"center",gap:1},children:[t.jsx(Gt,{variant:"determinate",value:a,sx:{flex:1}}),t.jsxs(S,{sx:{fontSize:"0.75rem",color:"text.secondary",minWidth:32},children:[a,"%"]})]})}},{field:"createdAt",headerName:"Started",width:180,renderCell:o=>t.jsx(S,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o?new Date(o).toLocaleString():"-"})},{field:"finishedAt",headerName:"Completed",width:180,renderCell:o=>t.jsx(S,{sx:{fontSize:"0.8125rem",color:"text.secondary"},children:o?new Date(o).toLocaleString():"-"})}],[e]),at=s.useMemo(()=>[{key:"status",label:"Status",options:[{value:"pending",label:"Pending"},{value:"running",label:"Running"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"cancelled",label:"Cancelled"}]},{key:"type",label:"Type",options:[{value:"run_report",label:"Report"},{value:"verify_template",label:"Verify Template"},{value:"verify_excel",label:"Verify Excel"},{value:"recommend_templates",label:"Recommendations"},{value:"summary_generate",label:"Summary"},{value:"summary_report",label:"Report Summary"},{value:"chart_analyze",label:"Chart Analyze"},{value:"chart_generate",label:"Chart Generate"}]}],[]),he=s.useMemo(()=>{const o=new Set(["running","pending"]),r=new Map(y.map(a=>[a.id,a.status]));return f.filter(a=>o.has(r.get(a))).length},[y,f]),nt=s.useMemo(()=>[{label:"Cancel",icon:t.jsx(le,{sx:{fontSize:16}}),onClick:xe,disabled:O}],[O,xe]),te=s.useMemo(()=>y.filter(o=>se(o.status)).length,[y]);return t.jsxs(Pt,{children:[t.jsx(Te,{severity:"info",sx:{mb:2,borderRadius:1},children:"Jobs track background report runs. Removing a job only clears it from this list; downloaded files remain in History."}),t.jsx($t,{title:"Report Progress",subtitle:te>0?`${te} report${te>1?"s":""} generating`:"All reports complete",columns:rt,data:y,loading:Je,searchPlaceholder:"Search reports...",filters:at,selectable:!0,onSelectionChange:Ke,onRowClick:Ve,bulkActions:nt,onBulkDelete:qe,actions:[{label:"Refresh",icon:t.jsx(yt,{sx:{fontSize:18}}),variant:"outlined",onClick:ge}],onRefresh:ge,rowActions:o=>t.jsx(je,{title:"More actions",children:t.jsx(Xt,{size:"small",onClick:r=>Fe(r,o),"aria-label":"More actions",children:t.jsx(Lt,{sx:{fontSize:18}})})}),emptyState:{icon:ht,title:"No reports in progress",description:"When you create a report, you can track its progress here.",actionLabel:"Create Report",onAction:()=>Me("/reports","Open reports")}}),t.jsxs(Bt,{anchorEl:ce,open:!!ce,onClose:Oe,children:[t.jsxs(V,{onClick:Ge,children:[t.jsx(Y,{children:t.jsx(_t,{sx:{fontSize:16}})}),t.jsx(G,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"View Details"})]}),u?.status===I.COMPLETED&&u?.artifacts?.html_url&&t.jsxs(V,{onClick:Ye,children:[t.jsx(Y,{children:t.jsx(ke,{sx:{fontSize:16}})}),t.jsx(G,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Download"})]}),Se(u?.status)&&t.jsxs(V,{onClick:He,disabled:B,children:[t.jsx(Y,{children:t.jsx(ve,{sx:{fontSize:16}})}),t.jsx(G,{primaryTypographyProps:{fontSize:"0.8125rem"},children:B?"Retrying...":"Retry"})]}),Ct(u?.status)&&t.jsxs(V,{onClick:We,sx:{color:"text.secondary"},children:[t.jsx(Y,{children:t.jsx(le,{sx:{fontSize:16,color:"text.secondary"}})}),t.jsx(G,{primaryTypographyProps:{fontSize:"0.8125rem"},children:"Cancel"})]})]}),t.jsx(re,{open:Le,onClose:Ze,onConfirm:Ue,title:"Cancel Job",message:"Are you sure you want to cancel this job? This action cannot be undone.",confirmLabel:"Cancel Job",severity:"warning"}),t.jsx(re,{open:Pe,onClose:Qe,onConfirm:Xe,title:"Cancel Jobs",message:`Cancel ${he} running job${he!==1?"s":""}?`,confirmLabel:"Cancel Jobs",severity:"warning",loading:O}),t.jsx(re,{open:Be,onClose:et,onConfirm:st,title:"Delete Jobs",message:(()=>{const a=y.filter(m=>f.includes(m.id)).slice(0,3).map(m=>m.templateName||m.id?.slice(0,8)||"Unknown").join(", "),p=f.length-3,d=p>0?` and ${p} more`:"";return`Remove ${f.length} job${f.length!==1?"s":""} (${a}${d}) from history? You can undo within a few seconds. Downloaded files are not affected.`})(),confirmLabel:"Delete Jobs",severity:"error",loading:O}),t.jsxs(Nt,{open:_e,onClose:ee,maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Ft,{children:["Job Details",t.jsx(je,{title:"Close",children:t.jsx(Ot,{size:"small",onClick:ee,"aria-label":"Close dialog",children:t.jsx(jt,{sx:{fontSize:18}})})})]}),t.jsx(Wt,{children:l&&t.jsxs(kt,{spacing:2,sx:{pt:2},children:[t.jsxs(j,{children:[t.jsx(T,{children:"Job ID"}),t.jsx(ne,{sx:{fontSize:"0.8125rem"},children:l.id})]}),t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Status"}),t.jsx(j,{sx:{mt:.5},children:(()=>{const o=Re(e,l.status),r=o.icon;return t.jsx(De,{icon:t.jsx(r,{sx:{fontSize:14}}),label:o.label,size:"small",statusColor:o.color,statusBg:o.bgColor})})()})]}),t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Template"}),t.jsx(ae,{children:l.templateName||l.templateId||l.template_id||"-"})]}),(l.connectionId||l.connection_id)&&t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Connection ID"}),t.jsx(ne,{children:l.connectionId||l.connection_id})]})]}),t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Created"}),t.jsx(ae,{children:l.createdAt?new Date(l.createdAt).toLocaleString():"-"})]}),(l.finishedAt||l.completed_at)&&t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Completed"}),t.jsx(ae,{children:new Date(l.finishedAt||l.completed_at).toLocaleString()})]})]}),l.error&&t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsx(Ht,{severity:"error",children:l.error})]}),(()=>{const o=l?.result&&Object.keys(l.result||{}).length?l.result:null;if(!o)return null;const a=(typeof o.summary=="string"?o.summary:null)||JSON.stringify(o,null,2);return t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsxs(j,{children:[t.jsx(T,{children:"Result"}),t.jsx(Vt,{component:"pre",children:a})]})]})})()]})}),t.jsxs(Ut,{children:[l?.status===I.COMPLETED&&l?.artifacts?.html_url&&t.jsx(H,{variant:"outlined",size:"small",startIcon:t.jsx(ke,{sx:{fontSize:16}}),onClick:tt,children:"Download"}),Se(l?.status)&&t.jsx(H,{variant:"outlined",size:"small",startIcon:t.jsx(ve,{sx:{fontSize:16}}),disabled:B,onClick:ot,children:B?"Retrying...":"Retry"}),t.jsx(H,{onClick:ee,children:"Close"})]})]})]})}function uo(){return Ie(),t.jsx(qt,{})}export{uo as default};
