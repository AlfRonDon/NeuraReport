{"version":3,"file":"QueryBuilderPage-BetREonN.js","sources":["../../../home/rohith/desktop/NeuraReport/frontend/node_modules/zustand/esm/middleware.mjs","../../../home/rohith/desktop/NeuraReport/frontend/src/api/nl2sql.js","../../../home/rohith/desktop/NeuraReport/frontend/src/stores/queryStore.js","../../../home/rohith/desktop/NeuraReport/frontend/src/features/query/containers/QueryBuilderPageContainer.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/pages/query/QueryBuilderPage.jsx"],"sourcesContent":["const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  let hydrationVersion = 0;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    const currentVersion = ++hydrationVersion;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      if (currentVersion !== hydrationVersion) {\n        return;\n      }\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      if (currentVersion !== hydrationVersion) {\n        return;\n      }\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      if (currentVersion !== hydrationVersion) {\n        return;\n      }\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nfunction ssrSafe(config, isSSR = typeof window === \"undefined\") {\n  return (set, get, api) => {\n    if (!isSSR) {\n      return config(set, get, api);\n    }\n    const ssrSet = () => {\n      throw new Error(\"Cannot set state of Zustand store in SSR\");\n    };\n    api.setState = ssrSet;\n    return config(ssrSet, get, api);\n  };\n}\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector, ssrSafe as unstable_ssrSafe };\n","/**\n * API client for Natural Language to SQL feature\n */\nimport { api, API_BASE } from './client'\n\nconst asArray = (payload, keys = []) => {\n  if (Array.isArray(payload)) return payload\n  if (!payload || typeof payload !== 'object') return []\n  for (const key of keys) {\n    if (Array.isArray(payload[key])) return payload[key]\n  }\n  return []\n}\n\n/**\n * Generate SQL from a natural language question\n * @param {Object} params\n * @param {string} params.question - Natural language question\n * @param {string} params.connectionId - Connection ID\n * @param {string[]} [params.tables] - Optional list of tables to query\n * @param {string} [params.context] - Optional additional context\n * @returns {Promise<Object>} Generated SQL with explanation\n */\nexport async function generateSQL({ question, connectionId, tables, context }) {\n  const { data } = await api.post('/nl2sql/generate', {\n    question,\n    connection_id: connectionId,\n    tables: tables?.length ? tables : undefined,\n    context: context || undefined,\n  })\n  return data\n}\n\n/**\n * Execute a SQL query\n * @param {Object} params\n * @param {string} params.sql - SQL query to execute\n * @param {string} params.connectionId - Connection ID\n * @param {number} [params.limit=100] - Max rows to return\n * @param {number} [params.offset=0] - Row offset\n * @returns {Promise<Object>} Query results\n */\nexport async function executeQuery({ sql, connectionId, limit = 100, offset = 0, includeTotal = false }) {\n  const { data } = await api.post('/nl2sql/execute', {\n    sql,\n    connection_id: connectionId,\n    limit,\n    offset,\n    include_total: includeTotal,\n  })\n  return data\n}\n\n/**\n * Get a natural language explanation of a SQL query\n * @param {string} sql - SQL query to explain\n * @returns {Promise<Object>} Explanation\n */\nexport async function explainQuery(sqlOrConnectionId, maybeSql) {\n  const sql = maybeSql ?? sqlOrConnectionId\n  const { data } = await api.post('/nl2sql/explain', null, {\n    params: { sql },\n  })\n  return data\n}\n\n/**\n * Save a query as a reusable data source\n * @param {Object} params\n * @param {string} params.name - Name for the saved query\n * @param {string} params.sql - SQL query\n * @param {string} params.connectionId - Connection ID\n * @param {string} [params.description] - Optional description\n * @param {string} [params.originalQuestion] - Original NL question\n * @param {string[]} [params.tags] - Optional tags\n * @returns {Promise<Object>} Saved query\n */\nexport async function saveQuery({ name, sql, connectionId, description, originalQuestion, tags }) {\n  const { data } = await api.post('/nl2sql/save', {\n    name,\n    sql,\n    connection_id: connectionId,\n    description: description || undefined,\n    original_question: originalQuestion || undefined,\n    tags: tags?.length ? tags : undefined,\n  })\n  return data\n}\n\n/**\n * List saved queries\n * @param {Object} [params]\n * @param {string} [params.connectionId] - Filter by connection\n * @param {string[]} [params.tags] - Filter by tags\n * @returns {Promise<Object>} List of saved queries\n */\nexport async function listSavedQueries({ connectionId, tags } = {}) {\n  const { data } = await api.get('/nl2sql/saved', {\n    params: {\n      connection_id: connectionId || undefined,\n      tags: tags?.length ? tags : undefined,\n    },\n  })\n  if (Array.isArray(data)) {\n    return { queries: data, total: data.length }\n  }\n  if (data && typeof data === 'object') {\n    const queries = asArray(data, ['queries', 'saved_queries', 'items', 'results'])\n    return { ...data, queries, total: data.total ?? data.count ?? queries.length }\n  }\n  return { queries: [], total: 0 }\n}\n\n/**\n * Get a saved query by ID\n * @param {string} queryId - Query ID\n * @returns {Promise<Object>} Saved query\n */\nexport async function getSavedQuery(queryId) {\n  const { data } = await api.get(`/nl2sql/saved/${encodeURIComponent(queryId)}`)\n  if (data && typeof data === 'object' && data.query) {\n    return data.query\n  }\n  return data\n}\n\n/**\n * Delete a saved query\n * @param {string} queryId - Query ID\n * @returns {Promise<Object>} Deletion result\n */\nexport async function deleteSavedQuery(queryId) {\n  const { data } = await api.delete(`/nl2sql/saved/${encodeURIComponent(queryId)}`)\n  return data\n}\n\n/**\n * Get query history\n * @param {Object} [params]\n * @param {string} [params.connectionId] - Filter by connection\n * @param {number} [params.limit=50] - Max entries to return\n * @returns {Promise<Object>} Query history\n */\nexport async function getQueryHistory(params = {}) {\n  const options = typeof params === 'string'\n    ? { connectionId: params, limit: 50 }\n    : (params || {})\n  const { connectionId, limit = 50 } = options\n  const { data } = await api.get('/nl2sql/history', {\n    params: {\n      connection_id: connectionId || undefined,\n      limit,\n    },\n  })\n  if (Array.isArray(data)) {\n    return { history: data, total: data.length }\n  }\n  if (data && typeof data === 'object') {\n    const history = asArray(data, ['history', 'queries', 'items', 'results'])\n    return { ...data, history, total: data.total ?? data.count ?? history.length }\n  }\n  return { history: [], total: 0 }\n}\n\n/**\n * Delete a query history entry\n * @param {string} entryId - History entry ID\n * @returns {Promise<Object>} Deletion result\n */\nexport async function deleteQueryHistoryEntry(entryId) {\n  const { data } = await api.delete(`/nl2sql/history/${encodeURIComponent(entryId)}`)\n  return data\n}\n","/**\n * Zustand store for Natural Language to SQL feature\n */\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport * as nl2sqlApi from '../api/nl2sql'\n\nconst useQueryStore = create(\n  persist(\n    (set, get) => ({\n      // Current query state\n      currentQuestion: '',\n      generatedSQL: '',\n      explanation: '',\n      confidence: 0,\n      warnings: [],\n\n      // Results\n      results: null,\n      columns: [],\n      totalCount: null,\n      executionTimeMs: null,\n\n      // Execution options\n      includeTotal: false,\n\n      // UI state\n      isGenerating: false,\n      isExecuting: false,\n      error: null,\n\n      // Saved queries\n      savedQueries: [],\n\n      // History\n      queryHistory: [],\n\n      // Selected connection\n      selectedConnectionId: null,\n      selectedTables: [],\n\n      // Actions\n      setCurrentQuestion: (question) => set({ currentQuestion: question }),\n\n      setGeneratedSQL: (sql) => set({ generatedSQL: sql }),\n\n      setSelectedConnection: (connectionId) => set({ selectedConnectionId: connectionId, selectedTables: [] }),\n\n      setSelectedTables: (tables) => set({ selectedTables: tables }),\n\n      setGenerationResult: ({ sql, explanation, confidence, warnings, originalQuestion }) =>\n        set({\n          generatedSQL: sql,\n          explanation,\n          confidence,\n          warnings: warnings || [],\n          currentQuestion: originalQuestion,\n          error: null,\n        }),\n\n      setExecutionResult: ({ columns, rows, rowCount, totalCount, executionTimeMs, truncated }) =>\n        set({\n          results: rows,\n          columns,\n          totalCount,\n          executionTimeMs,\n          error: null,\n        }),\n\n      setIncludeTotal: (includeTotal) => set({ includeTotal: Boolean(includeTotal) }),\n\n      setError: (error) => set({ error, isGenerating: false, isExecuting: false }),\n\n      setIsGenerating: (isGenerating) => set({ isGenerating }),\n\n      setIsExecuting: (isExecuting) => set({ isExecuting }),\n\n      clearResults: () =>\n        set({\n          results: null,\n          columns: [],\n          totalCount: null,\n          executionTimeMs: null,\n        }),\n\n      clearAll: () =>\n        set({\n          currentQuestion: '',\n          generatedSQL: '',\n          explanation: '',\n          confidence: 0,\n          warnings: [],\n          results: null,\n          columns: [],\n          totalCount: null,\n          executionTimeMs: null,\n          error: null,\n        }),\n\n      setSavedQueries: (queries) => set({ savedQueries: queries }),\n\n      addSavedQuery: (query) =>\n        set((state) => ({\n          savedQueries: [query, ...state.savedQueries],\n        })),\n\n      removeSavedQuery: (queryId) =>\n        set((state) => ({\n          savedQueries: state.savedQueries.filter((q) => q.id !== queryId),\n        })),\n\n      setQueryHistory: (history) => set({ queryHistory: history }),\n\n      addToHistory: (entry) =>\n        set((state) => ({\n          queryHistory: [entry, ...state.queryHistory].slice(0, 100),\n        })),\n\n      // NL2SQL API Actions\n      explainQuery: async (connectionId, sql) => {\n        set({ isGenerating: true, error: null });\n        try {\n          const result = await nl2sqlApi.explainQuery(connectionId, sql);\n          set({ explanation: result.explanation || '', isGenerating: false });\n          return result;\n        } catch (err) {\n          set({ error: err.message, isGenerating: false });\n          return null;\n        }\n      },\n\n      fetchSavedQuery: async (queryId) => {\n        try {\n          const query = await nl2sqlApi.getSavedQuery(queryId);\n          return query;\n        } catch (err) {\n          set({ error: err.message });\n          return null;\n        }\n      },\n\n      fetchQueryHistory: async (connectionId = null) => {\n        try {\n          const response = await nl2sqlApi.getQueryHistory({ connectionId });\n          const history = Array.isArray(response) ? response : (response?.history || []);\n          set({ queryHistory: history });\n          return history;\n        } catch (err) {\n          set({ error: err.message });\n          return [];\n        }\n      },\n\n      deleteQueryHistoryEntry: async (entryId) => {\n        try {\n          await nl2sqlApi.deleteQueryHistoryEntry(entryId);\n          set((state) => ({\n            queryHistory: state.queryHistory.filter((e) => e.id !== entryId),\n          }));\n          return true;\n        } catch (err) {\n          set({ error: err.message });\n          return false;\n        }\n      },\n\n      // Load saved query into editor\n      loadSavedQuery: (query) =>\n        set({\n          currentQuestion: query.original_question || '',\n          generatedSQL: query.sql,\n          selectedConnectionId: query.connection_id,\n          explanation: '',\n          confidence: 0,\n          warnings: [],\n          results: null,\n          columns: [],\n          error: null,\n        }),\n    }),\n    {\n      name: 'neura-query-store',\n      partialize: (state) => ({\n        selectedConnectionId: state.selectedConnectionId,\n        queryHistory: state.queryHistory.slice(0, 20), // Only persist recent history\n      }),\n      onRehydrateStorage: () => (state) => {\n        // Validate persisted selectedConnectionId is a non-empty string.\n        // The actual connection-existence check happens when the connection\n        // list loads; here we only reject clearly invalid values.\n        if (state && state.selectedConnectionId != null) {\n          const id = state.selectedConnectionId\n          if (typeof id !== 'string' || id.trim() === '') {\n            state.selectedConnectionId = null\n          }\n        }\n      },\n    }\n  )\n)\n\nexport default useQueryStore\n","/**\n * Premium Query Builder Page\n * Natural language to SQL interface with theme-based styling\n */\nimport { useEffect, useState, useCallback, useRef } from 'react'\nimport {\n  Box,\n  Typography,\n  Stack,\n  Button,\n  TextField,\n  Select,\n  MenuItem,\n  InputLabel,\n  Chip,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Alert,\n  Divider,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Collapse,\n  FormControlLabel,\n  Switch,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow'\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh'\nimport SaveIcon from '@mui/icons-material/Save'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport HistoryIcon from '@mui/icons-material/History'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess'\nimport StorageIcon from '@mui/icons-material/Storage'\nimport LightbulbIcon from '@mui/icons-material/Lightbulb'\nimport BookmarkIcon from '@mui/icons-material/Bookmark'\nimport BookmarkBorderIcon from '@mui/icons-material/BookmarkBorder'\n\nimport { neutral, palette } from '@/app/theme'\nimport { fadeInUp, GlassCard, StyledFormControl } from '@/styles'\nimport { useAppStore } from '@/stores'\nimport useQueryStore from '@/stores/queryStore'\nimport * as nl2sqlApi from '@/api/nl2sql'\nimport * as api from '@/api/client'\nimport DataTable from '@/components/DataTable/DataTable'\nimport ConfirmModal from '@/components/Modal/ConfirmModal'\nimport { useToast } from '@/components/ToastProvider'\nimport { getWriteOperation } from '@/utils/sqlSafety'\nimport AiUsageNotice from '@/components/ai/AiUsageNotice'\nimport useCrossPageActions from '@/hooks/useCrossPageActions'\nimport SendToMenu from '@/components/common/SendToMenu'\nimport { OutputType, FeatureKey } from '@/utils/crossPageTypes'\n// UX Components for premium interactions\nimport DisabledTooltip from '@/components/ux/DisabledTooltip'\n// UX Governance - Enforced interaction API\nimport {\n  useInteraction,\n  InteractionType,\n  Reversibility,\n  useConfirmedAction,\n} from '@/components/ux/governance'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(3),\n  maxWidth: 1400,\n  margin: '0 auto',\n  width: '100%',\n  minHeight: '100vh',\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst HeaderContainer = styled(Stack)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n  animation: `${fadeInUp} 0.5s ease-out`,\n}))\n\nconst HeaderButton = styled(Button)(({ theme }) => ({\n  borderRadius: 12,\n  textTransform: 'none',\n  fontWeight: 500,\n  borderColor: alpha(theme.palette.divider, 0.2),\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  },\n}))\n\nconst PrimaryButton = styled(Button)(({ theme }) => ({\n  borderRadius: 12,\n  textTransform: 'none',\n  fontWeight: 600,\n  background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n  color: theme.palette.common.white,\n  boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.15)}`,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    boxShadow: `0 6px 20px ${alpha(theme.palette.common.black, 0.2)}`,\n    transform: 'translateY(-1px)',\n  },\n  '&:active': {\n    transform: 'translateY(0)',\n  },\n  '&:disabled': {\n    background: alpha(theme.palette.text.disabled, 0.2),\n    color: theme.palette.text.disabled,\n    boxShadow: 'none',\n  },\n}))\n\nconst ExecuteButton = styled(Button)(({ theme }) => ({\n  borderRadius: 12,\n  textTransform: 'none',\n  fontWeight: 600,\n  background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n  color: theme.palette.common.white,\n  boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.15)}`,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[500],\n    boxShadow: `0 6px 20px ${alpha(theme.palette.common.black, 0.2)}`,\n    transform: 'translateY(-1px)',\n  },\n  '&:disabled': {\n    background: alpha(theme.palette.text.disabled, 0.2),\n    color: theme.palette.text.disabled,\n    boxShadow: 'none',\n  },\n}))\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    borderRadius: 12,\n    backgroundColor: alpha(theme.palette.background.default, 0.5),\n    transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.background.default, 0.7),\n    },\n    '&.Mui-focused': {\n      backgroundColor: alpha(theme.palette.background.default, 0.9),\n      boxShadow: `0 0 0 3px ${alpha(theme.palette.text.primary, 0.08)}`,\n    },\n  },\n}))\n\nconst SavedQueryItem = styled(Stack)(({ theme }) => ({\n  padding: theme.spacing(1),\n  borderRadius: 10,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n    transform: 'translateX(4px)',\n  },\n}))\n\nconst HistoryItem = styled(Stack)(({ theme }) => ({\n  padding: theme.spacing(1),\n  borderRadius: 10,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n    transform: 'translateX(4px)',\n  },\n}))\n\nconst ExplanationBox = styled(Box)(({ theme }) => ({\n  marginTop: theme.spacing(2),\n  padding: theme.spacing(1.5),\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  borderRadius: 12,\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n}))\n\nconst ConfidenceChip = styled(Chip)(({ theme, confidence }) => ({\n  height: 20,\n  fontSize: '12px',\n  fontWeight: 600,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n  color: theme.palette.text.secondary,\n  borderRadius: 6,\n}))\n\nconst StyledDialog = styled(Dialog)(({ theme }) => ({\n  '& .MuiBackdrop-root': {\n    backgroundColor: alpha(theme.palette.common.black, 0.6),\n    backdropFilter: 'blur(8px)',\n  },\n  '& .MuiDialog-paper': {\n    backgroundColor: alpha(theme.palette.background.paper, 0.95),\n    backdropFilter: 'blur(20px)',\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    borderRadius: 8,  // Figma spec: 8px\n    boxShadow: `0 24px 64px ${alpha(theme.palette.common.black, 0.25)}`,\n  },\n}))\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function QueryBuilderPage() {\n  const theme = useTheme()\n  const toast = useToast()\n  // UX Governance: Enforced interaction API - ALL user actions flow through this\n  const { execute } = useInteraction()\n  const confirmWriteQuery = useConfirmedAction('EXECUTE_WRITE_QUERY')\n  const { registerOutput } = useCrossPageActions(FeatureKey.QUERY)\n  const connections = useAppStore((s) => s.savedConnections)\n  const {\n    currentQuestion,\n    generatedSQL,\n    explanation,\n    confidence,\n    warnings,\n    results,\n    columns,\n    totalCount,\n    executionTimeMs,\n    includeTotal,\n    isGenerating,\n    isExecuting,\n    error,\n    selectedConnectionId,\n    savedQueries,\n    queryHistory,\n    setCurrentQuestion,\n    setGeneratedSQL,\n    setSelectedConnection,\n    setGenerationResult,\n    setExecutionResult,\n    setError,\n    setIsGenerating,\n    setIsExecuting,\n    clearResults,\n    clearAll,\n    setSavedQueries,\n    addSavedQuery,\n    removeSavedQuery,\n    setIncludeTotal,\n    setQueryHistory,\n    loadSavedQuery,\n  } = useQueryStore()\n\n  const [showSaveDialog, setShowSaveDialog] = useState(false)\n  const [saveName, setSaveName] = useState('')\n  const [saveDescription, setSaveDescription] = useState('')\n  const [showHistory, setShowHistory] = useState(false)\n  const [showSaved, setShowSaved] = useState(false)\n  const [schema, setSchema] = useState(null)\n  const [deleteSavedConfirm, setDeleteSavedConfirm] = useState({ open: false, queryId: null, queryName: '' })\n  const [deleteHistoryConfirm, setDeleteHistoryConfirm] = useState({ open: false, entryId: null, question: '' })\n  const schemaRequestIdRef = useRef(0)\n  const writeOperation = getWriteOperation(generatedSQL)\n  const selectedConnectionLabel = connections.find((conn) => conn.id === selectedConnectionId)?.name\n    || (selectedConnectionId ? 'Selected connection' : 'No connection selected')\n  const connectionLabelId = 'query-builder-connection-label'\n\n  // Fetch connections on mount\n  useEffect(() => {\n    const fetchConnections = async () => {\n      try {\n        const { connections: conns } = await api.listConnections()\n        useAppStore.getState().setSavedConnections(conns || [])\n      } catch (err) {\n        console.error('Failed to fetch connections:', err)\n        toast.show('Failed to load connections. Please refresh the page.', 'error')\n      }\n    }\n    fetchConnections()\n  }, [toast])\n\n  // Fetch schema when connection changes\n  useEffect(() => {\n    if (!selectedConnectionId) {\n      setSchema(null)\n      return\n    }\n\n    // Increment request ID to track this specific request\n    const requestId = ++schemaRequestIdRef.current\n\n    const fetchSchema = async () => {\n      try {\n        const result = await api.getConnectionSchema(selectedConnectionId)\n        // Only update state if this is still the latest request\n        if (requestId === schemaRequestIdRef.current) {\n          setSchema(result)\n        }\n      } catch (err) {\n        // Only log error if this is still the latest request\n        if (requestId === schemaRequestIdRef.current) {\n          console.error('Failed to fetch schema:', err)\n          toast.show('Failed to load database schema', 'warning')\n        }\n      }\n    }\n    fetchSchema()\n  }, [selectedConnectionId, toast])\n\n  // Fetch saved queries on mount\n  useEffect(() => {\n    const fetchSaved = async () => {\n      try {\n        const { queries } = await nl2sqlApi.listSavedQueries()\n        setSavedQueries(queries || [])\n      } catch (err) {\n        console.error('Failed to fetch saved queries:', err)\n      }\n    }\n    fetchSaved()\n  }, [setSavedQueries])\n\n  // Fetch history on mount\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const { history } = await nl2sqlApi.getQueryHistory({ limit: 50 })\n        setQueryHistory(history || [])\n      } catch (err) {\n        console.error('Failed to fetch history:', err)\n      }\n    }\n    fetchHistory()\n  }, [setQueryHistory])\n\n  const handleGenerate = useCallback(() => {\n    if (!currentQuestion.trim() || !selectedConnectionId) return\n\n    // UX Governance: Generate action with tracking\n    execute({\n      type: InteractionType.GENERATE,\n      label: 'Generate SQL query',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      action: async () => {\n        setIsGenerating(true)\n        setError(null)\n        clearResults()\n\n        try {\n          const result = await nl2sqlApi.generateSQL({\n            question: currentQuestion,\n            connectionId: selectedConnectionId,\n          })\n\n          setGenerationResult({\n            sql: result.sql,\n            explanation: result.explanation,\n            confidence: result.confidence,\n            warnings: result.warnings,\n            originalQuestion: result.original_question,\n          })\n        } catch (err) {\n          const errorMsg = err.response?.data?.message || err.message || 'Failed to generate SQL'\n          setError(errorMsg)\n          throw new Error(errorMsg)\n        } finally {\n          setIsGenerating(false)\n        }\n      },\n    })\n  }, [currentQuestion, selectedConnectionId, setIsGenerating, setError, clearResults, setGenerationResult, execute])\n\n  const runExecute = useCallback(() => {\n    // UX Governance: Execute action with tracking and navigation blocking\n    execute({\n      type: InteractionType.EXECUTE,\n      label: 'Execute SQL query',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      blocksNavigation: true,\n      successMessage: 'Query executed successfully',\n      action: async () => {\n        setIsExecuting(true)\n        setError(null)\n\n        try {\n          const result = await nl2sqlApi.executeQuery({\n            sql: generatedSQL,\n            connectionId: selectedConnectionId,\n            limit: 100,\n            includeTotal,\n          })\n\n          setExecutionResult({\n            columns: result.columns,\n            rows: result.rows,\n            rowCount: result.row_count,\n            totalCount: result.total_count,\n            executionTimeMs: result.execution_time_ms,\n            truncated: result.truncated,\n          })\n          registerOutput({\n            type: OutputType.TABLE,\n            title: `Query: ${currentQuestion.substring(0, 60)}`,\n            summary: `${result.row_count} rows, ${result.columns?.length || 0} columns`,\n            data: { columns: result.columns, rows: result.rows },\n            format: 'table',\n          })\n          toast.show(`Query returned ${result.row_count} rows`, 'success')\n        } catch (err) {\n          const errorMsg = err.response?.data?.detail || err.response?.data?.message || err.message || 'Failed to execute query'\n          setError(errorMsg)\n          throw new Error(errorMsg)\n        } finally {\n          setIsExecuting(false)\n        }\n      },\n    })\n  }, [execute, generatedSQL, includeTotal, selectedConnectionId, setError, setExecutionResult, setIsExecuting, toast])\n\n  const handleExecute = useCallback(() => {\n    if (!generatedSQL.trim() || !selectedConnectionId) return\n\n    if (writeOperation) {\n      const selectedConnection = connections.find((conn) => conn.id === selectedConnectionId)\n      const targetLabel = selectedConnection?.name || selectedConnectionId || 'selected connection'\n      confirmWriteQuery(targetLabel, runExecute)\n      return\n    }\n\n    runExecute()\n  }, [confirmWriteQuery, connections, generatedSQL, runExecute, selectedConnectionId, writeOperation])\n\n  const handleSave = useCallback(() => {\n    if (!saveName.trim() || !generatedSQL.trim() || !selectedConnectionId) return\n\n    // UX Governance: Create action with tracking\n    execute({\n      type: InteractionType.CREATE,\n      label: `Save query \"${saveName}\"`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      successMessage: 'Query saved successfully',\n      errorMessage: 'Failed to save query',\n      action: async () => {\n        const result = await nl2sqlApi.saveQuery({\n          name: saveName,\n          sql: generatedSQL,\n          connectionId: selectedConnectionId,\n          description: saveDescription || undefined,\n          originalQuestion: currentQuestion || undefined,\n        })\n\n        addSavedQuery(result.query)\n        setShowSaveDialog(false)\n        setSaveName('')\n        setSaveDescription('')\n      },\n    })\n  }, [saveName, saveDescription, generatedSQL, selectedConnectionId, currentQuestion, addSavedQuery, execute])\n\n  const handleDeleteSaved = useCallback(\n    (queryId) => {\n      // UX Governance: Delete action with tracking\n      execute({\n        type: InteractionType.DELETE,\n        label: 'Delete saved query',\n        reversibility: Reversibility.IRREVERSIBLE,\n        successMessage: 'Query deleted',\n        errorMessage: 'Failed to delete query',\n        action: async () => {\n          await nl2sqlApi.deleteSavedQuery(queryId)\n          removeSavedQuery(queryId)\n        },\n      })\n    },\n    [removeSavedQuery, execute]\n  )\n\n  const handleDeleteHistory = useCallback(\n    (entryId) => {\n      if (!entryId) return\n      // UX Governance: Delete action with tracking\n      execute({\n        type: InteractionType.DELETE,\n        label: 'Delete history entry',\n        reversibility: Reversibility.IRREVERSIBLE,\n        successMessage: 'History entry deleted',\n        errorMessage: 'Failed to delete history entry',\n        action: async () => {\n          await nl2sqlApi.deleteQueryHistoryEntry(entryId)\n          const current = useQueryStore.getState().queryHistory\n          setQueryHistory(current.filter((entry) => entry.id !== entryId))\n        },\n      })\n    },\n    [setQueryHistory, execute]\n  )\n\n  const handleCopySQL = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(generatedSQL)\n      toast.show('SQL copied to clipboard', 'success')\n    } catch (err) {\n      toast.show('Failed to copy to clipboard', 'error')\n    }\n  }, [generatedSQL, toast])\n\n  const tableColumns = columns.map((col) => ({\n    field: col,\n    header: col,\n    sortable: true,\n  }))\n\n  const executeDisabledReason = !generatedSQL.trim()\n    ? 'Generate SQL before executing'\n    : !selectedConnectionId\n      ? 'Select a connection first'\n      : null\n\n  return (\n    <PageContainer>\n      {/* Header */}\n      <HeaderContainer direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\n        <Box>\n          <Typography variant=\"h5\" fontWeight={600} sx={{ color: theme.palette.text.primary }}>\n            Query Builder\n          </Typography>\n          <Typography variant=\"body2\" sx={{ color: theme.palette.text.secondary }}>\n            Ask questions in natural language and get SQL queries\n          </Typography>\n        </Box>\n        <Stack direction=\"row\" spacing={1}>\n          <HeaderButton\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<BookmarkIcon />}\n            onClick={() => setShowSaved(!showSaved)}\n          >\n            Saved ({savedQueries.length})\n          </HeaderButton>\n          <HeaderButton\n            variant=\"outlined\"\n            size=\"small\"\n            startIcon={<HistoryIcon />}\n            onClick={() => setShowHistory(!showHistory)}\n          >\n            History\n          </HeaderButton>\n        </Stack>\n      </HeaderContainer>\n\n      <AiUsageNotice\n        title=\"AI query draft\"\n        description=\"AI turns questions into SQL using the selected connection's schema. Review the SQL before executing.\"\n        chips={[\n          { label: `Source: ${selectedConnectionLabel}`, variant: 'outlined' },\n          { label: 'Confidence: Varies per query', variant: 'outlined' },\n          { label: 'Read-only recommended', variant: 'outlined' },\n        ]}\n        dense\n        sx={{ mb: 2 }}\n      />\n\n      {/* Saved Queries Panel */}\n      <Collapse in={showSaved}>\n        <GlassCard>\n          <Typography variant=\"subtitle2\" sx={{ color: theme.palette.text.secondary, mb: 1 }}>\n            Saved Queries\n          </Typography>\n          {savedQueries.length === 0 ? (\n            <Typography variant=\"body2\" sx={{ color: theme.palette.text.disabled }}>\n              No saved queries yet\n            </Typography>\n          ) : (\n            <Stack spacing={1}>\n              {savedQueries.slice(0, 5).map((q) => (\n                <SavedQueryItem\n                  key={q.id}\n                  direction=\"row\"\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                >\n                  <Box sx={{ flex: 1 }} onClick={() => loadSavedQuery(q)}>\n                    <Typography variant=\"body2\" fontWeight={500} sx={{ color: theme.palette.text.primary }}>\n                      {q.name}\n                    </Typography>\n                    {q.description && (\n                      <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary }}>\n                        {q.description}\n                      </Typography>\n                    )}\n                  </Box>\n                  <Tooltip title=\"Delete saved query\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => setDeleteSavedConfirm({ open: true, queryId: q.id, queryName: q.name })}\n                      aria-label=\"Delete saved query\"\n                    >\n                      <DeleteIcon fontSize=\"small\" sx={{ color: theme.palette.text.secondary }} />\n                    </IconButton>\n                  </Tooltip>\n                </SavedQueryItem>\n              ))}\n            </Stack>\n          )}\n        </GlassCard>\n      </Collapse>\n\n      {/* History Panel */}\n      <Collapse in={showHistory}>\n        <GlassCard>\n          <Typography variant=\"subtitle2\" sx={{ color: theme.palette.text.secondary, mb: 1 }}>\n            Recent Queries\n          </Typography>\n          {queryHistory.length === 0 ? (\n            <Typography variant=\"body2\" sx={{ color: theme.palette.text.disabled }}>\n              No query history yet\n            </Typography>\n          ) : (\n            <Stack spacing={1}>\n              {queryHistory.slice(0, 5).map((h) => (\n                <HistoryItem\n                  key={h.id}\n                  direction=\"row\"\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                  onClick={() => {\n                    setCurrentQuestion(h.question)\n                    setGeneratedSQL(h.sql)\n                  }}\n                >\n                  <Box sx={{ flex: 1, minWidth: 0 }}>\n                    <Typography variant=\"body2\" sx={{ color: theme.palette.text.primary }} noWrap>\n                      {h.question}\n                    </Typography>\n                    <Stack direction=\"row\" spacing={1} mt={0.5}>\n                      <ConfidenceChip\n                        size=\"small\"\n                        label={`${Math.round(h.confidence * 100)}%`}\n                        confidence={h.confidence}\n                      />\n                      {h.success ? (\n                        <Chip\n                          size=\"small\"\n                          label=\"Success\"\n                          sx={{\n                            height: 20,\n                            fontSize: '12px',\n                            bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n                            color: theme.palette.text.secondary,\n                            borderRadius: 1.5,\n                          }}\n                        />\n                      ) : (\n                        <Chip\n                          size=\"small\"\n                          label=\"Failed\"\n                          sx={{\n                            height: 20,\n                            fontSize: '12px',\n                            bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n                            color: theme.palette.text.secondary,\n                            borderRadius: 1.5,\n                          }}\n                        />\n                      )}\n                    </Stack>\n                  </Box>\n                  <IconButton\n                    size=\"small\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      setDeleteHistoryConfirm({ open: true, entryId: h.id, question: h.question })\n                    }}\n                  >\n                    <DeleteIcon fontSize=\"small\" sx={{ color: theme.palette.text.secondary }} />\n                  </IconButton>\n                </HistoryItem>\n              ))}\n            </Stack>\n          )}\n        </GlassCard>\n      </Collapse>\n\n      {/* Connection Selector */}\n      <GlassCard>\n        <StyledFormControl fullWidth size=\"small\">\n          <InputLabel id={connectionLabelId}>Database Connection</InputLabel>\n          <Select\n            value={selectedConnectionId || ''}\n            label=\"Database Connection\"\n            labelId={connectionLabelId}\n            id=\"query-builder-connection-select\"\n            onChange={(e) => setSelectedConnection(e.target.value)}\n            startAdornment={<StorageIcon sx={{ mr: 1, color: theme.palette.text.secondary }} />}\n          >\n            {connections.map((conn) => (\n              <MenuItem key={conn.id} value={conn.id}>\n                {conn.name || conn.database_path}\n              </MenuItem>\n            ))}\n          </Select>\n        </StyledFormControl>\n\n        {schema && (\n          <Box mt={2}>\n            <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary }}>\n              Available tables: {schema.tables?.map((t) => t.name).join(', ')}\n            </Typography>\n          </Box>\n        )}\n      </GlassCard>\n\n      {/* Question Input */}\n      <GlassCard>\n        <StyledTextField\n          fullWidth\n          multiline\n          minRows={2}\n          maxRows={4}\n          placeholder=\"Ask a question about your data... (e.g., 'Show me all customers who made purchases last month')\"\n          value={currentQuestion}\n          onChange={(e) => setCurrentQuestion(e.target.value)}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && e.ctrlKey) {\n              handleGenerate()\n            }\n          }}\n        />\n        <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" mt={2}>\n          <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary }}>\n            Press Ctrl+Enter to generate\n          </Typography>\n          <PrimaryButton\n            startIcon={isGenerating ? <CircularProgress size={16} color=\"inherit\" /> : <AutoFixHighIcon />}\n            onClick={handleGenerate}\n            disabled={!currentQuestion.trim() || !selectedConnectionId || isGenerating}\n          >\n            {isGenerating ? 'Generating...' : 'Generate SQL'}\n          </PrimaryButton>\n        </Stack>\n      </GlassCard>\n\n      {/* Error Alert */}\n      {error && (\n        <Alert\n          severity=\"error\"\n          sx={{ mb: 2, borderRadius: 1 }}  // Figma spec: 8px\n          onClose={() => setError(null)}\n        >\n          {error}\n        </Alert>\n      )}\n\n      {/* Generated SQL */}\n      {generatedSQL && (\n        <GlassCard>\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={1}>\n            <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n              <Typography variant=\"subtitle2\" sx={{ color: theme.palette.text.secondary }}>\n                Generated SQL\n              </Typography>\n              {confidence > 0 && (\n                <ConfidenceChip\n                  size=\"small\"\n                  label={`${Math.round(confidence * 100)}% confidence`}\n                  confidence={confidence}\n                />\n              )}\n            </Stack>\n            <Stack direction=\"row\" spacing={1}>\n              <Tooltip title=\"Copy SQL\">\n                <IconButton size=\"small\" onClick={handleCopySQL} aria-label=\"Copy SQL\">\n                  <ContentCopyIcon fontSize=\"small\" sx={{ color: theme.palette.text.secondary }} />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Save Query\">\n                <IconButton size=\"small\" onClick={() => setShowSaveDialog(true)} aria-label=\"Save Query\">\n                  <SaveIcon fontSize=\"small\" sx={{ color: theme.palette.text.secondary }} />\n                </IconButton>\n              </Tooltip>\n            </Stack>\n          </Stack>\n\n          <StyledTextField\n            fullWidth\n            multiline\n            minRows={3}\n            maxRows={10}\n            value={generatedSQL}\n            onChange={(e) => setGeneratedSQL(e.target.value)}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                fontFamily: 'monospace',\n                fontSize: '0.875rem',\n              },\n            }}\n          />\n\n          {warnings.length > 0 && (\n            <Stack spacing={0.5} mt={1}>\n              {warnings.map((w, i) => (\n                <Alert key={i} severity=\"warning\" sx={{ py: 0, borderRadius: 1 }}>\n                  {w}\n                </Alert>\n              ))}\n            </Stack>\n          )}\n\n          {explanation && (\n            <ExplanationBox>\n              <Stack direction=\"row\" alignItems=\"flex-start\" spacing={1}>\n                <LightbulbIcon sx={{ color: theme.palette.text.secondary, fontSize: 18, mt: 0.25 }} />\n                <Typography variant=\"body2\" sx={{ color: theme.palette.text.secondary }}>\n                  {explanation}\n                </Typography>\n              </Stack>\n            </ExplanationBox>\n          )}\n\n          <Stack\n            direction={{ xs: 'column', sm: 'row' }}\n            alignItems={{ xs: 'stretch', sm: 'center' }}\n            justifyContent=\"space-between\"\n            mt={2}\n            spacing={1.5}\n          >\n            <FormControlLabel\n              control={\n                <Switch\n                  size=\"small\"\n                  checked={includeTotal}\n                  onChange={(event) => setIncludeTotal(event.target.checked)}\n                />\n              }\n              label=\"Include total row count (slower)\"\n              sx={{ color: theme.palette.text.secondary }}\n            />\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\" flexWrap=\"wrap\">\n              <Chip\n                size=\"small\"\n                label=\"Read-only recommended\"\n                variant=\"outlined\"\n                sx={{ fontSize: '12px' }}\n              />\n              {writeOperation && (\n                <Chip\n                  size=\"small\"\n                  label={`${writeOperation.toUpperCase()} detected`}\n                  sx={{ fontSize: '12px', bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                />\n              )}\n            </Stack>\n            {/* UX: DisabledTooltip explains WHY the button is disabled */}\n            <DisabledTooltip\n              disabled={Boolean(executeDisabledReason) || isExecuting}\n              reason={\n                isExecuting\n                  ? 'Query is currently running...'\n                  : executeDisabledReason\n              }\n              hint={\n                !selectedConnectionId\n                  ? 'Select a database from the dropdown above'\n                  : !generatedSQL.trim()\n                    ? 'Enter a question and click Generate first'\n                    : undefined\n              }\n            >\n              <ExecuteButton\n                startIcon={isExecuting ? <CircularProgress size={16} color=\"inherit\" /> : <PlayArrowIcon />}\n                onClick={handleExecute}\n                disabled={Boolean(executeDisabledReason) || isExecuting}\n              >\n                {isExecuting ? 'Executing...' : 'Execute Query'}\n              </ExecuteButton>\n            </DisabledTooltip>\n          </Stack>\n          {writeOperation && (\n            <Alert severity=\"warning\" sx={{ mt: 1.5, borderRadius: 1 }}>\n              Write queries can modify data and may not be reversible. You will be asked to confirm before execution.\n            </Alert>\n          )}\n        </GlassCard>\n      )}\n\n      {/* Results */}\n      {results && (\n        <GlassCard>\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={2}>\n            <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n              <Typography variant=\"subtitle2\" sx={{ color: theme.palette.text.secondary }}>\n                Results\n              </Typography>\n              <SendToMenu\n                outputType={OutputType.TABLE}\n                payload={{\n                  title: `Query: ${currentQuestion.substring(0, 60)}`,\n                  content: JSON.stringify({ columns, rows: results }),\n                  data: { columns, rows: results },\n                }}\n                sourceFeature={FeatureKey.QUERY}\n              />\n            </Stack>\n            <Stack direction=\"row\" spacing={2}>\n              {totalCount !== null && (\n                <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary }}>\n                  {totalCount} total rows\n                </Typography>\n              )}\n              {executionTimeMs !== null && (\n                <Typography variant=\"caption\" sx={{ color: theme.palette.text.secondary }}>\n                  {executionTimeMs}ms\n                </Typography>\n              )}\n            </Stack>\n          </Stack>\n\n          <DataTable columns={tableColumns} data={results} pageSize={10} loading={false} />\n        </GlassCard>\n      )}\n\n      {/* Save Dialog */}\n      <StyledDialog open={showSaveDialog} onClose={() => setShowSaveDialog(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle sx={{ color: theme.palette.text.primary }}>Save Query</DialogTitle>\n        <DialogContent>\n          <Stack spacing={2} mt={1}>\n            <StyledTextField\n              fullWidth\n              label=\"Name\"\n              value={saveName}\n              onChange={(e) => setSaveName(e.target.value)}\n              placeholder=\"e.g., Monthly Sales Report\"\n            />\n            <StyledTextField\n              fullWidth\n              multiline\n              rows={2}\n              label=\"Description (optional)\"\n              value={saveDescription}\n              onChange={(e) => setSaveDescription(e.target.value)}\n              placeholder=\"What does this query do?\"\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions sx={{ p: 2.5 }}>\n          <Button\n            onClick={() => setShowSaveDialog(false)}\n            sx={{ borderRadius: 1, textTransform: 'none' }}  // Figma spec: 8px\n          >\n            Cancel\n          </Button>\n          <PrimaryButton onClick={handleSave} disabled={!saveName.trim()}>\n            Save\n          </PrimaryButton>\n        </DialogActions>\n      </StyledDialog>\n\n      <ConfirmModal\n        open={deleteSavedConfirm.open}\n        onClose={() => setDeleteSavedConfirm({ open: false, queryId: null, queryName: '' })}\n        onConfirm={() => {\n          handleDeleteSaved(deleteSavedConfirm.queryId)\n          setDeleteSavedConfirm({ open: false, queryId: null, queryName: '' })\n        }}\n        title=\"Delete Saved Query\"\n        message={`Are you sure you want to delete \"${deleteSavedConfirm.queryName}\"? This action cannot be undone.`}\n        confirmLabel=\"Delete\"\n        severity=\"error\"\n      />\n\n      <ConfirmModal\n        open={deleteHistoryConfirm.open}\n        onClose={() => setDeleteHistoryConfirm({ open: false, entryId: null, question: '' })}\n        onConfirm={() => {\n          handleDeleteHistory(deleteHistoryConfirm.entryId)\n          setDeleteHistoryConfirm({ open: false, entryId: null, question: '' })\n        }}\n        title=\"Delete History Entry\"\n        message={`Are you sure you want to delete this history entry? \"${deleteHistoryConfirm.question?.substring(0, 50)}${deleteHistoryConfirm.question?.length > 50 ? '...' : ''}\"`}\n        confirmLabel=\"Delete\"\n        severity=\"warning\"\n      />\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport QueryBuilderPageContainer from '@/features/query/containers/QueryBuilderPageContainer'\n\nexport default function QueryBuilderPage() {\n  useInteraction()\n  return <QueryBuilderPageContainer />\n}\n"],"names":["createJSONStorage","getStorage","options","storage","name","_a","parse","str2","str","newValue","toThenable","fn","input","result","onFulfilled","_onRejected","e","_onFulfilled","onRejected","persistImpl","config","baseOptions","set","get","api","state","persistedState","currentState","hasHydrated","hydrationVersion","hydrationListeners","finishHydrationListeners","args","setItem","savedSetState","replace","configResult","stateFromStorage","hydrate","_b","currentVersion","cb","_a2","postRehydrationCallback","deserializedStorageValue","migration","migrationResult","migrated","migratedState","newOptions","persist","asArray","payload","keys","key","generateSQL","question","connectionId","tables","context","data","executeQuery","sql","limit","offset","includeTotal","explainQuery","sqlOrConnectionId","maybeSql","saveQuery","description","originalQuestion","tags","listSavedQueries","queries","getSavedQuery","queryId","deleteSavedQuery","getQueryHistory","params","history","deleteQueryHistoryEntry","entryId","useQueryStore","create","explanation","confidence","warnings","columns","rows","rowCount","totalCount","executionTimeMs","truncated","error","isGenerating","isExecuting","query","q","entry","nl2sqlApi.explainQuery","err","nl2sqlApi.getSavedQuery","response","nl2sqlApi.getQueryHistory","nl2sqlApi.deleteQueryHistoryEntry","id","PageContainer","styled","Box","theme","HeaderContainer","Stack","fadeInUp","HeaderButton","Button","alpha","neutral","PrimaryButton","ExecuteButton","StyledTextField","TextField","SavedQueryItem","HistoryItem","ExplanationBox","ConfidenceChip","Chip","StyledDialog","Dialog","QueryBuilderPage","useTheme","toast","useToast","execute","useInteraction","confirmWriteQuery","useConfirmedAction","registerOutput","useCrossPageActions","FeatureKey","connections","useAppStore","s","currentQuestion","generatedSQL","results","selectedConnectionId","savedQueries","queryHistory","setCurrentQuestion","setGeneratedSQL","setSelectedConnection","setGenerationResult","setExecutionResult","setError","setIsGenerating","setIsExecuting","clearResults","clearAll","setSavedQueries","addSavedQuery","removeSavedQuery","setIncludeTotal","setQueryHistory","loadSavedQuery","showSaveDialog","setShowSaveDialog","useState","saveName","setSaveName","saveDescription","setSaveDescription","showHistory","setShowHistory","showSaved","setShowSaved","schema","setSchema","deleteSavedConfirm","setDeleteSavedConfirm","deleteHistoryConfirm","setDeleteHistoryConfirm","schemaRequestIdRef","useRef","writeOperation","getWriteOperation","selectedConnectionLabel","conn","connectionLabelId","useEffect","conns","api.listConnections","requestId","api.getConnectionSchema","nl2sqlApi.listSavedQueries","handleGenerate","useCallback","InteractionType","Reversibility","nl2sqlApi.generateSQL","errorMsg","runExecute","nl2sqlApi.executeQuery","OutputType","handleExecute","targetLabel","handleSave","nl2sqlApi.saveQuery","handleDeleteSaved","nl2sqlApi.deleteSavedQuery","handleDeleteHistory","current","handleCopySQL","tableColumns","col","executeDisabledReason","jsxs","jsx","Typography","BookmarkIcon","HistoryIcon","AiUsageNotice","Collapse","GlassCard","Tooltip","IconButton","DeleteIcon","h","StyledFormControl","InputLabel","Select","StorageIcon","MenuItem","t","CircularProgress","AutoFixHighIcon","Alert","ContentCopyIcon","SaveIcon","w","i","LightbulbIcon","FormControlLabel","Switch","event","DisabledTooltip","PlayArrowIcon","SendToMenu","DataTable","DialogTitle","DialogContent","DialogActions","ConfirmModal","QueryBuilderPageContainer"],"mappings":"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","x_google_ignoreList":[0]}