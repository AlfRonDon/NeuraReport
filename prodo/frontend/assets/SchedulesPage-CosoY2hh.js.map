{"version":3,"file":"SchedulesPage-CosoY2hh.js","sources":["../../node_modules/@mui/icons-material/esm/CalendarMonth.js","../../node_modules/@mui/icons-material/esm/Info.js","../../node_modules/@mui/icons-material/esm/Pause.js","../../src/features/schedules/containers/SchedulesPageContainer.jsx","../../src/pages/schedules/SchedulesPage.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z\"\n}), 'CalendarMonth');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z\"\n}), 'Info');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19h4V5H6zm8-14v14h4V5z\"\n}), 'Pause');","/**\n * Premium Schedules Page\n * Sophisticated scheduling interface with premium styling\n */\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react'\nimport { useSearchParams } from 'react-router-dom'\nimport {\n  Box,\n  Container,\n  Chip,\n  IconButton,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Alert,\n  Stack,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  InputLabel,\n  Select,\n  Switch,\n  FormControlLabel,\n  Tooltip,\n  Fade,\n  Zoom,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport {\n  Add as AddIcon,\n  MoreVert as MoreVertIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  PlayArrow as PlayArrowIcon,\n  Pause as PauseIcon,\n  Schedule as ScheduleIcon,\n  CalendarMonth as CalendarIcon,\n  Email as EmailIcon,\n  AccessTime as TimeIcon,\n  CheckCircle as CheckCircleIcon,\n  Warning as WarningIcon,\n  Info as InfoIcon,\n} from '@mui/icons-material'\nimport { DataTable } from '@/components/DataTable'\nimport { ConfirmModal } from '@/components/Modal'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport * as api from '@/api/client'\n// UX Governance - Enforced interaction API\nimport {\n  useInteraction,\n  InteractionType,\n  Reversibility,\n} from '@/components/ux/governance'\nimport { neutral, palette } from '@/app/theme'\nimport { fadeInUp, StyledFormControl } from '@/styles'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(3),\n  animation: `${fadeInUp} 0.4s ease-out`,\n}))\n\nconst StyledDialog = styled(Dialog)(({ theme }) => ({\n  '& .MuiDialog-paper': {\n    backgroundColor: alpha(theme.palette.background.paper, 0.95),\n    backdropFilter: 'blur(20px)',\n    borderRadius: 8,  // Figma spec: 8px\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    boxShadow: `0 24px 48px ${alpha(theme.palette.common.black, 0.2)}`,\n  },\n  '& .MuiBackdrop-root': {\n    backgroundColor: alpha(theme.palette.common.black, 0.5),\n    backdropFilter: 'blur(4px)',\n  },\n}))\n\nconst DialogHeader = styled(DialogTitle)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(2),\n  padding: theme.spacing(3),\n  borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n}))\n\nconst DialogIconContainer = styled(Box)(({ theme }) => ({\n  width: 48,\n  height: 48,\n  borderRadius: 14,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  '& svg': {\n    fontSize: 24,\n    color: theme.palette.text.secondary,\n  },\n}))\n\nconst StyledDialogContent = styled(DialogContent)(({ theme }) => ({\n  padding: theme.spacing(3),\n}))\n\nconst StyledDialogActions = styled(DialogActions)(({ theme }) => ({\n  padding: theme.spacing(2, 3),\n  borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.3),\n  gap: theme.spacing(1),\n}))\n\nconst SectionLabel = styled(Typography)(({ theme }) => ({\n  fontSize: '0.75rem',\n  fontWeight: 600,\n  textTransform: 'uppercase',\n  letterSpacing: '0.05em',\n  color: theme.palette.text.disabled,\n  marginBottom: theme.spacing(2),\n  marginTop: theme.spacing(3),\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(1),\n  '&:first-of-type': {\n    marginTop: 0,\n  },\n}))\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    borderRadius: 12,\n    transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n    '&:hover .MuiOutlinedInput-notchedOutline': {\n      borderColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.3) : neutral[300],\n    },\n    '&.Mui-focused': {\n      '& .MuiOutlinedInput-notchedOutline': {\n        borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n        borderWidth: 2,\n      },\n    },\n  },\n}))\n\nconst StatusChip = styled(Chip, {\n  shouldForwardProp: (prop) => prop !== 'active',\n})(({ theme, active }) => ({\n  borderRadius: 8,\n  fontWeight: 500,\n  fontSize: '0.75rem',\n  backgroundColor: active\n    ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100])\n    : (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.06) : neutral[50]),\n  color: theme.palette.text.secondary,\n  border: `1px solid ${active\n    ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.15) : neutral[200])\n    : alpha(theme.palette.divider, 0.2)}`,\n}))\n\nconst FrequencyChip = styled(Chip)(({ theme }) => ({\n  borderRadius: 8,\n  fontWeight: 500,\n  fontSize: '0.75rem',\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  color: theme.palette.text.secondary,\n  border: `1px solid ${theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.12) : neutral[200]}`,\n}))\n\nconst StyledSwitch = styled(Switch)(({ theme }) => ({\n  '& .MuiSwitch-switchBase.Mui-checked': {\n    color: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    '& + .MuiSwitch-track': {\n      backgroundColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    },\n  },\n}))\n\nconst StyledMenu = styled(Menu)(({ theme }) => ({\n  '& .MuiPaper-root': {\n    backgroundColor: alpha(theme.palette.background.paper, 0.95),\n    backdropFilter: 'blur(20px)',\n    borderRadius: 12,\n    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n    boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.15)}`,\n    minWidth: 180,\n  },\n}))\n\nconst StyledMenuItem = styled(MenuItem)(({ theme }) => ({\n  borderRadius: 8,\n  margin: theme.spacing(0.5, 1),\n  padding: theme.spacing(1, 1.5),\n  transition: 'all 0.15s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[50],\n  },\n}))\n\nconst SchedulerStatusBanner = styled(Box, {\n  shouldForwardProp: (prop) => prop !== 'status',\n})(({ theme, status }) => {\n  const neutralColor = theme.palette.mode === 'dark' ? neutral[500] : neutral[700]\n  const neutralBg = theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100]\n  const colors = {\n    ok: { bg: neutralBg, border: neutralColor, text: neutralColor },\n    warning: { bg: neutralBg, border: neutralColor, text: neutralColor },\n    disabled: { bg: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.06) : neutral[50], border: alpha(theme.palette.divider, 0.3), text: theme.palette.text.secondary },\n    error: { bg: neutralBg, border: neutralColor, text: neutralColor },\n  }\n  const colorScheme = colors[status] || colors.warning\n  return {\n    display: 'flex',\n    alignItems: 'center',\n    gap: theme.spacing(1.5),\n    padding: theme.spacing(1.5, 2),\n    marginBottom: theme.spacing(2),\n    borderRadius: 8,\n    backgroundColor: colorScheme.bg,\n    border: `1px solid ${colorScheme.border}`,\n    color: colorScheme.text,\n  }\n})\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: 10,\n  textTransform: 'none',\n  fontWeight: 500,\n  padding: theme.spacing(1, 2.5),\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n}))\n\nconst PrimaryButton = styled(ActionButton)(({ theme }) => ({\n  background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n  color: theme.palette.common.white,\n  boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.15)}`,\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    boxShadow: `0 6px 20px ${alpha(theme.palette.common.black, 0.2)}`,\n    transform: 'translateY(-1px)',\n  },\n  '&:disabled': {\n    background: alpha(theme.palette.text.primary, 0.1),\n    color: alpha(theme.palette.text.primary, 0.4),\n    boxShadow: 'none',\n  },\n}))\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nconst FREQUENCY_OPTIONS = [\n  { value: 'daily', label: 'Daily' },\n  { value: 'weekly', label: 'Weekly' },\n  { value: 'monthly', label: 'Monthly' },\n]\n\nconst FREQUENCY_INTERVALS = {\n  daily: 1440,\n  weekly: 10080,\n  monthly: 43200,\n}\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\nconst extractDateOnly = (value) => {\n  if (!value) return ''\n  const match = String(value).match(/^(\\d{4}-\\d{2}-\\d{2})/)\n  return match ? match[1] : ''\n}\n\nconst buildDateTime = (dateValue, endOfDay = false) => {\n  if (!dateValue) return ''\n  const time = endOfDay ? '23:59:59' : '00:00:00'\n  return `${dateValue} ${time}`\n}\n\nconst parseEmailList = (raw) => {\n  if (!raw) return []\n  return raw\n    .split(/[;,]/)\n    .map((entry) => entry.trim())\n    .filter(Boolean)\n}\n\nconst formatEmailList = (list) => {\n  if (!Array.isArray(list)) return ''\n  return list.filter(Boolean).join(', ')\n}\n\nconst isValidEmail = (email) => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\nconst isSchedulableTemplate = (template) => {\n  if (!template || typeof template !== 'object') return false\n  const status = String(template.status || '').toLowerCase()\n  return status === 'approved' || status === 'active'\n}\n\n// =============================================================================\n// SCHEDULE DIALOG COMPONENT\n// =============================================================================\n\nfunction ScheduleDialog({\n  open,\n  onClose,\n  schedule,\n  templates,\n  connections,\n  defaultTemplateId,\n  defaultConnectionId,\n  onSave,\n  onError,\n}) {\n  const theme = useTheme()\n  const [form, setForm] = useState({\n    name: '',\n    templateId: '',\n    connectionId: '',\n    startDate: '',\n    endDate: '',\n    frequency: 'daily',\n    emailRecipients: '',\n    emailSubject: '',\n    emailMessage: '',\n    active: true,\n  })\n  const [saving, setSaving] = useState(false)\n  const editing = Boolean(schedule)\n\n  useEffect(() => {\n    if (schedule) {\n      setForm({\n        name: schedule.name || '',\n        templateId: schedule.template_id || '',\n        connectionId: schedule.connection_id || '',\n        startDate: extractDateOnly(schedule.start_date),\n        endDate: extractDateOnly(schedule.end_date),\n        frequency: schedule.frequency || 'daily',\n        emailRecipients: formatEmailList(schedule.email_recipients),\n        emailSubject: schedule.email_subject || '',\n        emailMessage: schedule.email_message || '',\n        active: schedule.active !== false,\n      })\n      return\n    }\n    const fallbackTemplate = defaultTemplateId || templates[0]?.id || ''\n    const fallbackConnection = defaultConnectionId || connections[0]?.id || ''\n    setForm({\n      name: '',\n      templateId: fallbackTemplate,\n      connectionId: fallbackConnection,\n      startDate: '',\n      endDate: '',\n      frequency: 'daily',\n      emailRecipients: '',\n      emailSubject: '',\n      emailMessage: '',\n      active: true,\n    })\n  }, [schedule, templates, connections, open, defaultTemplateId, defaultConnectionId])\n\n  const handleChange = (field) => (e) => {\n    const value = e.target.type === 'checkbox' ? e.target.checked : e.target.value\n    setForm((prev) => ({ ...prev, [field]: value }))\n  }\n\n  const handleSubmit = async () => {\n    const intervalMinutes = FREQUENCY_INTERVALS[form.frequency] || FREQUENCY_INTERVALS.daily\n    const emailRecipients = parseEmailList(form.emailRecipients)\n    const startDate = buildDateTime(form.startDate)\n    const endDate = buildDateTime(form.endDate, true)\n    const templateAllowed = templates.some((tpl) => tpl.id === form.templateId)\n    const connectionAvailable = connections.some((conn) => conn.id === form.connectionId)\n\n    if (form.startDate && form.endDate && form.endDate < form.startDate) {\n      onError?.('End date must be on or after start date')\n      return\n    }\n\n    if (!templateAllowed) {\n      onError?.('Selected template is not approved for scheduling. Choose an approved template.')\n      return\n    }\n\n    if (!connectionAvailable) {\n      onError?.('Selected connection is no longer available. Choose another connection.')\n      return\n    }\n\n    if (emailRecipients.length > 0) {\n      const invalidEmail = emailRecipients.find((email) => !isValidEmail(email))\n      if (invalidEmail) {\n        onError?.(`Invalid email address: ${invalidEmail}`)\n        return\n      }\n    }\n\n    setSaving(true)\n    try {\n      await onSave({\n        name: form.name,\n        templateId: form.templateId,\n        connectionId: form.connectionId,\n        startDate,\n        endDate,\n        frequency: form.frequency,\n        intervalMinutes,\n        emailRecipients: emailRecipients.length ? emailRecipients : undefined,\n        emailSubject: form.emailSubject || undefined,\n        emailMessage: form.emailMessage || undefined,\n        active: form.active,\n      })\n      onClose()\n    } catch {\n      // Keep dialog open on save failure; the interaction layer already\n      // reports the error message to the user.\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const disableSave =\n    saving || !form.name || !form.templateId || !form.connectionId || !form.startDate || !form.endDate\n\n  return (\n    <StyledDialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth TransitionComponent={Fade}>\n      <DialogHeader>\n        <DialogIconContainer>\n          <ScheduleIcon />\n        </DialogIconContainer>\n        <Box>\n          <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n            {editing ? 'Edit Schedule' : 'Create Schedule'}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {editing ? 'Update the schedule configuration' : 'Set up automated report generation'}\n          </Typography>\n        </Box>\n      </DialogHeader>\n\n      <StyledDialogContent>\n        <SectionLabel>\n          <ScheduleIcon sx={{ fontSize: 16 }} />\n          Basic Information\n        </SectionLabel>\n        <Stack spacing={2.5}>\n          <StyledTextField\n            label=\"Schedule Name\"\n            value={form.name}\n            onChange={handleChange('name')}\n            fullWidth\n            required\n            placeholder=\"e.g., Weekly Sales Report\"\n          />\n\n          <StyledFormControl fullWidth required>\n            <InputLabel>Template</InputLabel>\n            <Select value={form.templateId} onChange={handleChange('templateId')} label=\"Template\" disabled={editing}>\n              {templates.map((t) => (\n                <MenuItem key={t.id} value={t.id}>\n                  {t.name || t.id}\n                </MenuItem>\n              ))}\n            </Select>\n          </StyledFormControl>\n\n          <StyledFormControl fullWidth required>\n            <InputLabel>Connection</InputLabel>\n            <Select\n              value={form.connectionId}\n              onChange={handleChange('connectionId')}\n              label=\"Connection\"\n              disabled={editing}\n            >\n              {connections.map((conn) => (\n                <MenuItem key={conn.id} value={conn.id}>\n                  {conn.name || conn.id}\n                </MenuItem>\n              ))}\n            </Select>\n          </StyledFormControl>\n        </Stack>\n\n        <SectionLabel>\n          <CalendarIcon sx={{ fontSize: 16 }} />\n          Schedule Timing\n        </SectionLabel>\n        <Stack spacing={2.5}>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <StyledTextField\n              label=\"Start Date\"\n              type=\"date\"\n              value={form.startDate}\n              onChange={handleChange('startDate')}\n              InputLabelProps={{ shrink: true }}\n              fullWidth\n              required\n            />\n            <StyledTextField\n              label=\"End Date\"\n              type=\"date\"\n              value={form.endDate}\n              onChange={handleChange('endDate')}\n              InputLabelProps={{ shrink: true }}\n              fullWidth\n              required\n            />\n          </Stack>\n\n          <StyledFormControl fullWidth>\n            <InputLabel>Frequency</InputLabel>\n            <Select value={form.frequency} onChange={handleChange('frequency')} label=\"Frequency\">\n              {FREQUENCY_OPTIONS.map((opt) => (\n                <MenuItem key={opt.value} value={opt.value}>\n                  {opt.label}\n                </MenuItem>\n              ))}\n            </Select>\n          </StyledFormControl>\n        </Stack>\n\n        <SectionLabel>\n          <EmailIcon sx={{ fontSize: 16 }} />\n          Email Notifications (Optional)\n        </SectionLabel>\n        <Stack spacing={2.5}>\n          <StyledTextField\n            label=\"Email recipients\"\n            value={form.emailRecipients}\n            onChange={handleChange('emailRecipients')}\n            placeholder=\"ops@example.com, finance@example.com\"\n            helperText=\"Comma or semicolon separated list\"\n            fullWidth\n          />\n          <StyledTextField\n            label=\"Email subject\"\n            value={form.emailSubject}\n            onChange={handleChange('emailSubject')}\n            fullWidth\n          />\n          <StyledTextField\n            label=\"Email message\"\n            value={form.emailMessage}\n            onChange={handleChange('emailMessage')}\n            multiline\n            minRows={2}\n            fullWidth\n          />\n        </Stack>\n\n        <Box sx={{ mt: 3 }}>\n          <FormControlLabel\n            control={<StyledSwitch checked={form.active} onChange={handleChange('active')} />}\n            label={\n              <Box>\n                <Typography variant=\"body2\" fontWeight={500}>\n                  Active\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Enable this schedule to run automatically\n                </Typography>\n              </Box>\n            }\n          />\n        </Box>\n      </StyledDialogContent>\n\n      <StyledDialogActions>\n        <ActionButton onClick={onClose}>Cancel</ActionButton>\n        <PrimaryButton onClick={handleSubmit} disabled={disableSave}>\n          {saving ? 'Saving...' : editing ? 'Update Schedule' : 'Create Schedule'}\n        </PrimaryButton>\n      </StyledDialogActions>\n    </StyledDialog>\n  )\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function SchedulesPage() {\n  const theme = useTheme()\n  const toast = useToast()\n  // UX Governance: Enforced interaction API - ALL user actions flow through this\n  const { execute } = useInteraction()\n  const [searchParams, setSearchParams] = useSearchParams()\n  const templates = useAppStore((s) => s.templates)\n  const savedConnections = useAppStore((s) => s.savedConnections)\n  const activeConnectionId = useAppStore((s) => s.activeConnectionId)\n\n  const [schedules, setSchedules] = useState([])\n  const [schedulableTemplates, setSchedulableTemplates] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [dialogOpen, setDialogOpen] = useState(false)\n  const [editingSchedule, setEditingSchedule] = useState(null)\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false)\n  const [deletingSchedule, setDeletingSchedule] = useState(null)\n  const [menuAnchor, setMenuAnchor] = useState(null)\n  const [menuSchedule, setMenuSchedule] = useState(null)\n  const [togglingId, setTogglingId] = useState(null)\n  const [schedulerStatus, setSchedulerStatus] = useState(null)\n  const scheduleDeleteUndoRef = useRef(null)\n  const didLoadSchedulesRef = useRef(false)\n  const didLoadTemplatesRef = useRef(false)\n  const templatesFromStore = useMemo(\n    () => (Array.isArray(templates) ? templates.filter(isSchedulableTemplate) : []),\n    [templates]\n  )\n\n  const fetchSchedules = useCallback(async () => {\n    setLoading(true)\n    try {\n      const schedulesData = await api.listSchedules()\n      setSchedules(schedulesData || [])\n    } catch (err) {\n      toast.show(err.message || 'Failed to load schedules', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }, [toast])\n\n  const fetchSchedulerStatus = useCallback(async () => {\n    try {\n      const status = await api.getSchedulerStatus()\n      setSchedulerStatus(status)\n    } catch (err) {\n      // Silently fail - scheduler status is optional\n      console.warn('Failed to fetch scheduler status:', err)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (didLoadSchedulesRef.current) return\n    didLoadSchedulesRef.current = true\n    fetchSchedules()\n    fetchSchedulerStatus()\n  }, [fetchSchedules, fetchSchedulerStatus])\n\n  const fetchTemplates = useCallback(async () => {\n    try {\n      const templatesData = await api.listApprovedTemplates()\n      if (Array.isArray(templatesData) && templatesData.length > 0) {\n        setSchedulableTemplates(templatesData)\n        return\n      }\n      setSchedulableTemplates(templatesFromStore)\n    } catch (err) {\n      setSchedulableTemplates(templatesFromStore)\n      toast.show(err.userMessage || err.message || 'Failed to load templates', 'error')\n    }\n  }, [templatesFromStore, toast])\n\n  useEffect(() => {\n    if (didLoadTemplatesRef.current) return\n    didLoadTemplatesRef.current = true\n    fetchTemplates()\n  }, [fetchTemplates])\n\n  useEffect(() => {\n    if (schedulableTemplates.length > 0) return\n    if (templatesFromStore.length > 0) {\n      setSchedulableTemplates(templatesFromStore)\n    }\n  }, [schedulableTemplates.length, templatesFromStore])\n\n  const templateParam = searchParams.get('template')\n  const schedulableTemplateIds = useMemo(\n    () => new Set(schedulableTemplates.map((template) => template.id)),\n    [schedulableTemplates]\n  )\n  const defaultTemplateId = templateParam && schedulableTemplateIds.has(templateParam)\n    ? templateParam\n    : (schedulableTemplates[0]?.id || '')\n  const defaultConnectionId = activeConnectionId || savedConnections[0]?.id || ''\n  const canCreateSchedule = schedulableTemplates.length > 0 && savedConnections.length > 0\n\n  useEffect(() => {\n    if (!templateParam) return\n    if (schedulableTemplates.length > 0 && !schedulableTemplateIds.has(templateParam)) {\n      toast.show('Selected template is not approved for scheduling. Choose an approved template.', 'warning')\n    }\n    setEditingSchedule(null)\n    setDialogOpen(true)\n    const nextParams = new URLSearchParams(searchParams)\n    nextParams.delete('template')\n    setSearchParams(nextParams, { replace: true })\n  }, [templateParam, searchParams, schedulableTemplates, schedulableTemplateIds, setSearchParams, toast])\n\n  const handleOpenMenu = useCallback((event, schedule) => {\n    event.stopPropagation()\n    setMenuAnchor(event.currentTarget)\n    setMenuSchedule(schedule)\n  }, [])\n\n  const handleCloseMenu = useCallback(() => {\n    setMenuAnchor(null)\n    setMenuSchedule(null)\n  }, [])\n\n  const handleAddSchedule = useCallback(() => {\n    if (schedulableTemplates.length === 0) {\n      toast.show('No approved templates available. Approve a template first.', 'warning')\n      return\n    }\n    if (savedConnections.length === 0) {\n      toast.show('No connections available. Add a connection first.', 'warning')\n      return\n    }\n    setEditingSchedule(null)\n    setDialogOpen(true)\n  }, [schedulableTemplates.length, savedConnections.length, toast])\n\n  const handleEditSchedule = useCallback(() => {\n    setEditingSchedule(menuSchedule)\n    setDialogOpen(true)\n    handleCloseMenu()\n  }, [menuSchedule, handleCloseMenu])\n\n  const handleDeleteClick = useCallback(() => {\n    setDeletingSchedule(menuSchedule)\n    setDeleteConfirmOpen(true)\n    handleCloseMenu()\n  }, [menuSchedule, handleCloseMenu])\n\n  const handleToggleSchedule = useCallback(\n    async (schedule, nextActive) => {\n      if (!schedule) return\n\n      // UX Governance: Update action with tracking\n      execute({\n        type: InteractionType.UPDATE,\n        label: `${nextActive ? 'Enable' : 'Pause'} schedule \"${schedule.name || schedule.id}\"`,\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        successMessage: `Schedule ${nextActive ? 'enabled' : 'paused'}`,\n        errorMessage: 'Failed to update schedule',\n        action: async () => {\n          setTogglingId(schedule.id)\n          try {\n            await api.updateSchedule(schedule.id, { active: nextActive })\n            await fetchSchedules()\n          } finally {\n            setTogglingId(null)\n          }\n        },\n      })\n    },\n    [fetchSchedules, execute]\n  )\n\n  const handleToggleEnabled = useCallback(async () => {\n    if (!menuSchedule) return\n    const currentActive = menuSchedule.active ?? menuSchedule.enabled ?? true\n    const nextActive = !currentActive\n    await handleToggleSchedule(menuSchedule, nextActive)\n    handleCloseMenu()\n  }, [menuSchedule, handleCloseMenu, handleToggleSchedule])\n\n  const handleSaveSchedule = useCallback(\n    async (data) => {\n      const isEditing = !!editingSchedule\n\n      // UX Governance: Create/Update action with tracking\n      const result = await execute({\n        type: isEditing ? InteractionType.UPDATE : InteractionType.CREATE,\n        label: isEditing ? `Update schedule \"${data.name}\"` : `Create schedule \"${data.name}\"`,\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        successMessage: isEditing ? 'Schedule updated' : 'Schedule created',\n        errorMessage: 'Failed to save schedule',\n        action: async () => {\n          if (isEditing) {\n            await api.updateSchedule(editingSchedule.id, data)\n          } else {\n            await api.createSchedule(data)\n          }\n          await fetchSchedules()\n        },\n      })\n\n      if (!result?.success) {\n        throw result?.error || new Error('Failed to save schedule')\n      }\n    },\n    [editingSchedule, fetchSchedules, execute]\n  )\n\n  const handleDeleteConfirm = useCallback(async () => {\n    if (!deletingSchedule) return\n    const scheduleToDelete = deletingSchedule\n    const scheduleIndex = schedules.findIndex((item) => item.id === scheduleToDelete.id)\n\n    setDeleteConfirmOpen(false)\n    setDeletingSchedule(null)\n\n    if (scheduleDeleteUndoRef.current?.timeoutId) {\n      clearTimeout(scheduleDeleteUndoRef.current.timeoutId)\n      scheduleDeleteUndoRef.current = null\n    }\n\n    // UX Governance: Delete action with tracking\n    execute({\n      type: InteractionType.DELETE,\n      label: `Delete schedule \"${scheduleToDelete.name || scheduleToDelete.id}\"`,\n      reversibility: Reversibility.PARTIALLY_REVERSIBLE,\n      successMessage: 'Schedule removed',\n      errorMessage: 'Failed to delete schedule',\n      action: async () => {\n        setSchedules((prev) => prev.filter((item) => item.id !== scheduleToDelete.id))\n\n        let undone = false\n        const timeoutId = setTimeout(async () => {\n          if (undone) return\n          try {\n            await api.deleteSchedule(scheduleToDelete.id)\n            fetchSchedules()\n          } catch (err) {\n            setSchedules((prev) => {\n              if (prev.some((item) => item.id === scheduleToDelete.id)) return prev\n              const next = [...prev]\n              if (scheduleIndex >= 0 && scheduleIndex <= next.length) {\n                next.splice(scheduleIndex, 0, scheduleToDelete)\n              } else {\n                next.push(scheduleToDelete)\n              }\n              return next\n            })\n            throw err\n          } finally {\n            scheduleDeleteUndoRef.current = null\n          }\n        }, 5000)\n\n        scheduleDeleteUndoRef.current = { timeoutId, schedule: scheduleToDelete }\n\n        toast.showWithUndo(\n          `Schedule \"${scheduleToDelete.name || scheduleToDelete.id}\" removed`,\n          () => {\n            undone = true\n            clearTimeout(timeoutId)\n            scheduleDeleteUndoRef.current = null\n            setSchedules((prev) => {\n              if (prev.some((item) => item.id === scheduleToDelete.id)) return prev\n              const next = [...prev]\n              if (scheduleIndex >= 0 && scheduleIndex <= next.length) {\n                next.splice(scheduleIndex, 0, scheduleToDelete)\n              } else {\n                next.push(scheduleToDelete)\n              }\n              return next\n            })\n            toast.show('Schedule restored', 'success')\n          },\n          { severity: 'info' }\n        )\n      },\n    })\n  }, [deletingSchedule, schedules, fetchSchedules, execute, toast])\n\n  const columns = useMemo(\n    () => [\n      {\n        field: 'name',\n        headerName: 'Schedule',\n        renderCell: (value, row) => (\n          <Box>\n            <Typography variant=\"body2\" fontWeight={600}>\n              {value || row.id}\n            </Typography>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {templates.find((t) => t.id === row.template_id)?.name || row.template_name || row.template_id}\n            </Typography>\n          </Box>\n        ),\n      },\n      {\n        field: 'frequency',\n        headerName: 'Frequency',\n        width: 120,\n        renderCell: (value) => {\n          const option = FREQUENCY_OPTIONS.find((opt) => opt.value === value)\n          const label = option?.label || value || 'daily'\n          return <FrequencyChip label={label} size=\"small\" />\n        },\n      },\n      {\n        field: 'enabled',\n        headerName: 'Status',\n        width: 140,\n        renderCell: (value, row) => {\n          const active = row.active ?? value ?? true\n          return (\n            <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n              <StyledSwitch\n                size=\"small\"\n                checked={active}\n                disabled={togglingId === row.id}\n                onChange={(e) => {\n                  e.stopPropagation()\n                  handleToggleSchedule(row, e.target.checked)\n                }}\n              />\n              <StatusChip label={active ? 'Active' : 'Paused'} size=\"small\" active={active} />\n            </Stack>\n          )\n        },\n      },\n      {\n        field: 'last_run',\n        headerName: 'Last Run',\n        width: 180,\n        renderCell: (value, row) => {\n          const lastRun = value || row.last_run_at\n          return (\n            <Typography variant=\"body2\" color={lastRun ? 'text.primary' : 'text.secondary'}>\n              {lastRun ? new Date(lastRun).toLocaleString() : 'Never'}\n            </Typography>\n          )\n        },\n      },\n      {\n        field: 'next_run',\n        headerName: 'Next Run',\n        width: 180,\n        renderCell: (value, row) => {\n          const active = row.active ?? row.enabled ?? true\n          const nextRun = value || row.next_run_at\n          return (\n            <Typography variant=\"body2\" color={active && nextRun ? 'text.primary' : 'text.secondary'}>\n              {active && nextRun ? new Date(nextRun).toLocaleString() : '-'}\n            </Typography>\n          )\n        },\n      },\n    ],\n    [templates, handleToggleSchedule, togglingId]\n  )\n\n  const filters = useMemo(\n    () => [\n      {\n        key: 'frequency',\n        label: 'Frequency',\n        options: FREQUENCY_OPTIONS,\n      },\n      {\n        key: 'active',\n        label: 'Status',\n        options: [\n          { value: true, label: 'Active' },\n          { value: false, label: 'Paused' },\n        ],\n      },\n    ],\n    []\n  )\n\n  const menuScheduleActive = menuSchedule?.active ?? menuSchedule?.enabled ?? true\n\n  const renderSchedulerStatusBanner = () => {\n    if (!schedulerStatus) return null\n\n    const { scheduler, schedules: schedInfo } = schedulerStatus\n    const isRunning = scheduler?.running\n    const isEnabled = scheduler?.enabled\n\n    let statusIcon = <InfoIcon />\n    let statusText = ''\n    let bannerStatus = 'warning'\n\n    if (!isEnabled) {\n      statusIcon = <WarningIcon />\n      statusText = 'Scheduler is disabled. Schedules will not run automatically.'\n      bannerStatus = 'disabled'\n    } else if (!isRunning) {\n      statusIcon = <WarningIcon />\n      statusText = 'Scheduler is not running. Restart the server to enable automatic scheduling.'\n      bannerStatus = 'warning'\n    } else {\n      statusIcon = <CheckCircleIcon />\n      bannerStatus = 'ok'\n      if (schedInfo?.next_run) {\n        const nextRunTime = new Date(schedInfo.next_run.next_run_at).toLocaleString()\n        statusText = `Scheduler running. Next: \"${schedInfo.next_run.schedule_name}\" at ${nextRunTime}`\n      } else {\n        statusText = `Scheduler running (polling every ${scheduler?.poll_interval_seconds || 60}s). ${schedInfo?.active || 0} active schedule(s).`\n      }\n    }\n\n    return (\n      <SchedulerStatusBanner status={bannerStatus}>\n        {statusIcon}\n        <Typography variant=\"body2\" fontWeight={500}>\n          {statusText}\n        </Typography>\n      </SchedulerStatusBanner>\n    )\n  }\n\n  return (\n    <PageContainer>\n      <Container maxWidth=\"xl\">\n        {renderSchedulerStatusBanner()}\n        <Alert severity=\"info\" sx={{ mb: 2, borderRadius: 1 }}>\n          Schedules create future report runs. Progress appears in Jobs and finished reports show up in History.\n        </Alert>\n        <DataTable\n          title=\"Scheduled Reports\"\n          subtitle=\"Automate report generation on a schedule\"\n          columns={columns}\n          data={schedules}\n          loading={loading}\n          searchPlaceholder=\"Search schedules...\"\n          filters={filters}\n          actions={[\n            {\n              label: 'Create Schedule',\n              icon: <AddIcon />,\n              variant: 'contained',\n              onClick: handleAddSchedule,\n              disabled: !canCreateSchedule,\n            },\n          ]}\n          rowActions={(row) => (\n            <Tooltip title=\"More actions\" arrow TransitionComponent={Zoom}>\n              <IconButton size=\"small\" onClick={(e) => handleOpenMenu(e, row)} aria-label=\"More actions\">\n                <MoreVertIcon />\n              </IconButton>\n            </Tooltip>\n          )}\n          emptyState={{\n            icon: ScheduleIcon,\n            title: 'No schedules yet',\n            description: 'Create a schedule to automatically generate reports on a recurring basis.',\n            actionLabel: 'Create Schedule',\n            onAction: handleAddSchedule,\n          }}\n        />\n\n        <StyledMenu anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClose={handleCloseMenu} TransitionComponent={Fade}>\n          <StyledMenuItem onClick={handleEditSchedule}>\n            <ListItemIcon>\n              <EditIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>Edit</ListItemText>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={handleToggleEnabled}>\n            <ListItemIcon>\n              {menuScheduleActive ? <PauseIcon fontSize=\"small\" /> : <PlayArrowIcon fontSize=\"small\" />}\n            </ListItemIcon>\n            <ListItemText>{menuScheduleActive ? 'Pause' : 'Enable'}</ListItemText>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={handleDeleteClick} sx={{ color: 'error.main' }}>\n            <ListItemIcon>\n              <DeleteIcon fontSize=\"small\" sx={{ color: 'text.secondary' }} />\n            </ListItemIcon>\n            <ListItemText>Delete</ListItemText>\n          </StyledMenuItem>\n        </StyledMenu>\n\n        <ScheduleDialog\n          open={dialogOpen}\n          onClose={() => setDialogOpen(false)}\n          schedule={editingSchedule}\n          templates={schedulableTemplates}\n          connections={savedConnections}\n          defaultTemplateId={defaultTemplateId}\n          defaultConnectionId={defaultConnectionId}\n          onSave={handleSaveSchedule}\n          onError={(msg) => toast.show(msg, 'error')}\n        />\n\n        <ConfirmModal\n          open={deleteConfirmOpen}\n          onClose={() => setDeleteConfirmOpen(false)}\n          onConfirm={handleDeleteConfirm}\n          title=\"Delete Schedule\"\n          message={`Remove \"${deletingSchedule?.name || deletingSchedule?.id}\"? You can undo within a few seconds. This stops future runs; past downloads remain in History.`}\n          confirmLabel=\"Delete\"\n          severity=\"error\"\n        />\n      </Container>\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport SchedulesPageContainer from '@/features/schedules/containers/SchedulesPageContainer'\n\nexport default function SchedulesPage() {\n  useInteraction()\n  return <SchedulesPageContainer />\n}\n"],"names":["CalendarIcon","createSvgIcon","_jsx","InfoIcon","PauseIcon","PageContainer","styled","Box","theme","fadeInUp","StyledDialog","Dialog","alpha","DialogHeader","DialogTitle","DialogIconContainer","neutral","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","SectionLabel","Typography","StyledTextField","TextField","StatusChip","Chip","prop","active","FrequencyChip","StyledSwitch","Switch","StyledMenu","Menu","StyledMenuItem","MenuItem","SchedulerStatusBanner","status","neutralColor","neutralBg","colors","colorScheme","ActionButton","Button","PrimaryButton","FREQUENCY_OPTIONS","FREQUENCY_INTERVALS","extractDateOnly","value","match","buildDateTime","dateValue","endOfDay","parseEmailList","raw","entry","formatEmailList","list","isValidEmail","email","isSchedulableTemplate","template","ScheduleDialog","open","onClose","schedule","templates","connections","defaultTemplateId","defaultConnectionId","onSave","onError","useTheme","form","setForm","useState","saving","setSaving","editing","useEffect","fallbackTemplate","fallbackConnection","handleChange","field","e","prev","handleSubmit","intervalMinutes","emailRecipients","startDate","endDate","templateAllowed","tpl","connectionAvailable","conn","invalidEmail","disableSave","jsxs","Fade","jsx","ScheduleIcon","Stack","StyledFormControl","InputLabel","Select","t","opt","EmailIcon","FormControlLabel","SchedulesPage","toast","useToast","execute","useInteraction","searchParams","setSearchParams","useSearchParams","useAppStore","s","savedConnections","activeConnectionId","schedules","setSchedules","schedulableTemplates","setSchedulableTemplates","loading","setLoading","dialogOpen","setDialogOpen","editingSchedule","setEditingSchedule","deleteConfirmOpen","setDeleteConfirmOpen","deletingSchedule","setDeletingSchedule","menuAnchor","setMenuAnchor","menuSchedule","setMenuSchedule","togglingId","setTogglingId","schedulerStatus","setSchedulerStatus","scheduleDeleteUndoRef","useRef","didLoadSchedulesRef","didLoadTemplatesRef","templatesFromStore","useMemo","fetchSchedules","useCallback","schedulesData","api.listSchedules","err","fetchSchedulerStatus","api.getSchedulerStatus","fetchTemplates","templatesData","api.listApprovedTemplates","templateParam","schedulableTemplateIds","canCreateSchedule","nextParams","handleOpenMenu","event","handleCloseMenu","handleAddSchedule","handleEditSchedule","handleDeleteClick","handleToggleSchedule","nextActive","InteractionType","Reversibility","api.updateSchedule","handleToggleEnabled","handleSaveSchedule","data","isEditing","result","api.createSchedule","handleDeleteConfirm","scheduleToDelete","scheduleIndex","item","undone","timeoutId","api.deleteSchedule","next","columns","row","label","lastRun","nextRun","filters","menuScheduleActive","renderSchedulerStatusBanner","scheduler","schedInfo","isRunning","isEnabled","statusIcon","statusText","bannerStatus","WarningIcon","CheckCircleIcon","nextRunTime","Container","Alert","DataTable","AddIcon","Tooltip","Zoom","IconButton","MoreVertIcon","ListItemIcon","EditIcon","ListItemText","PlayArrowIcon","DeleteIcon","msg","ConfirmModal","SchedulesPageContainer"],"mappings":"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","x_google_ignoreList":[0,1,2]}