{"version":3,"file":"WorkflowBuilderPage-byAmGCsa.js","sources":["../../node_modules/@mui/icons-material/esm/CallSplit.js","../../node_modules/@mui/icons-material/esm/Loop.js","../../node_modules/@mui/icons-material/esm/Webhook.js","../../src/features/workflows/containers/WorkflowBuilderPageContainer.jsx","../../src/pages/workflows/WorkflowBuilderPage.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m14 4 2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z\"\n}), 'CallSplit');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z\"\n}), 'Loop');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 15h5.88c.27-.31.67-.5 1.12-.5.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5c-.44 0-.84-.19-1.12-.5H11.9c-.46 2.28-2.48 4-4.9 4-2.76 0-5-2.24-5-5 0-2.42 1.72-4.44 4-4.9v2.07c-1.16.41-2 1.53-2 2.83 0 1.65 1.35 3 3 3s3-1.35 3-3zm2.5-11c1.65 0 3 1.35 3 3h2c0-2.76-2.24-5-5-5s-5 2.24-5 5c0 1.43.6 2.71 1.55 3.62l-2.35 3.9c-.68.14-1.2.75-1.2 1.48 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.16-.02-.31-.07-.45l3.38-5.63C10.49 9.61 9.5 8.42 9.5 7c0-1.65 1.35-3 3-3m4.5 9c-.64 0-1.23.2-1.72.54l-3.05-5.07C11.53 8.35 11 7.74 11 7c0-.83.67-1.5 1.5-1.5S14 6.17 14 7c0 .15-.02.29-.06.43l2.19 3.65c.28-.05.57-.08.87-.08 2.76 0 5 2.24 5 5s-2.24 5-5 5c-1.85 0-3.47-1.01-4.33-2.5h2.67c.48.32 1.05.5 1.66.5 1.65 0 3-1.35 3-3s-1.35-3-3-3\"\n}), 'Webhook');","/**\n * Workflow Builder Page Container\n * Visual workflow automation builder.\n */\nimport React, { useState, useEffect, useCallback } from 'react'\nimport {\n  Box,\n  Typography,\n  Button,\n  TextField,\n  Chip,\n  Alert,\n  IconButton,\n  Tooltip,\n  Divider,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Paper,\n  Grid,\n  Card,\n  CardContent,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemSecondaryAction,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  AccountTree as WorkflowIcon,\n  Save as SaveIcon,\n  PlayArrow as RunIcon,\n  Stop as StopIcon,\n  Refresh as RetryIcon,\n  Schedule as ScheduleIcon,\n  Webhook as WebhookIcon,\n  Email as EmailIcon,\n  Code as CodeIcon,\n  CheckCircle as ApprovalIcon,\n  CallSplit as ConditionIcon,\n  Loop as LoopIcon,\n  Storage as DataIcon,\n  Notifications as NotifyIcon,\n  History as HistoryIcon,\n  BugReport as DebugIcon,\n} from '@mui/icons-material'\nimport useWorkflowStore from '@/stores/workflowStore'\nimport useSharedData from '@/hooks/useSharedData'\nimport ConnectionSelector from '@/components/common/ConnectionSelector'\nimport TemplateSelector from '@/components/common/TemplateSelector'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\nimport { neutral, palette } from '@/app/theme'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  height: 'calc(100vh - 64px)',\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst Toolbar = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  padding: theme.spacing(1.5, 2),\n  borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.8),\n}))\n\nconst WorkflowArea = styled(Box)(({ theme }) => ({\n  flex: 1,\n  display: 'flex',\n  overflow: 'hidden',\n}))\n\nconst NodePalette = styled(Box)(({ theme }) => ({\n  width: 260,\n  flexShrink: 0,\n  borderRight: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.6),\n  padding: theme.spacing(2),\n  overflow: 'auto',\n}))\n\nconst Canvas = styled(Box)(({ theme }) => ({\n  flex: 1,\n  padding: theme.spacing(3),\n  overflow: 'auto',\n  backgroundColor: theme.palette.background.default,\n  backgroundImage: `radial-gradient(${alpha(theme.palette.divider, 0.15)} 1px, transparent 1px)`,\n  backgroundSize: '20px 20px',\n}))\n\nconst Sidebar = styled(Box)(({ theme }) => ({\n  width: 300,\n  flexShrink: 0,\n  borderLeft: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.6),\n  display: 'flex',\n  flexDirection: 'column',\n}))\n\nconst NodeCard = styled(Card)(({ theme }) => ({\n  cursor: 'grab',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  marginBottom: theme.spacing(1),\n  '&:hover': {\n    transform: 'translateX(4px)',\n    boxShadow: `0 4px 12px ${alpha(theme.palette.common.black, 0.1)}`,\n  },\n}))\n\nconst WorkflowNode = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(2),\n  minWidth: 200,\n  borderRadius: 8,  // Figma spec: 8px\n  border: `2px solid ${alpha(theme.palette.divider, 0.3)}`,\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    boxShadow: `0 4px 20px ${alpha(theme.palette.common.black, 0.1)}`,\n  },\n}))\n\nconst ExecutionCard = styled(Paper)(({ theme, status }) => ({\n  padding: theme.spacing(2),\n  marginBottom: theme.spacing(1),\n  borderLeft: `4px solid ${\n    status === 'completed'\n      ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700])\n      : status === 'running'\n      ? (theme.palette.mode === 'dark' ? neutral[300] : neutral[500])\n      : status === 'failed'\n      ? theme.palette.text.secondary\n      : neutral[400]\n  }`,\n}))\n\nconst ActionButton = styled(Button)(({ theme }) => ({\n  borderRadius: 8,\n  textTransform: 'none',\n  fontWeight: 500,\n}))\n\nconst EmptyState = styled(Box)(({ theme }) => ({\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  padding: theme.spacing(4),\n  textAlign: 'center',\n}))\n\n// =============================================================================\n// NODE TYPES\n// =============================================================================\n\nconst NODE_TYPES = [\n  { type: 'trigger', label: 'Trigger', icon: ScheduleIcon, color: 'warning', category: 'Triggers' },\n  { type: 'webhook', label: 'Webhook', icon: WebhookIcon, color: 'info', category: 'Triggers' },\n  { type: 'action', label: 'Action', icon: CodeIcon, color: 'primary', category: 'Actions' },\n  { type: 'email', label: 'Send Email', icon: EmailIcon, color: 'secondary', category: 'Actions' },\n  { type: 'notify', label: 'Notification', icon: NotifyIcon, color: 'success', category: 'Actions' },\n  { type: 'condition', label: 'Condition', icon: ConditionIcon, color: 'info', category: 'Logic' },\n  { type: 'loop', label: 'Loop', icon: LoopIcon, color: 'warning', category: 'Logic' },\n  { type: 'approval', label: 'Approval', icon: ApprovalIcon, color: 'success', category: 'Logic' },\n  { type: 'data', label: 'Data Transform', icon: DataIcon, color: 'primary', category: 'Data' },\n]\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function WorkflowBuilderPage() {\n  const theme = useTheme()\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const {\n    workflows,\n    currentWorkflow,\n    executions,\n    currentExecution,\n    pendingApprovals,\n    loading,\n    executing,\n    error,\n    fetchWorkflows,\n    createWorkflow,\n    getWorkflow,\n    updateWorkflow,\n    deleteWorkflow,\n    executeWorkflow,\n    fetchExecutions,\n    cancelExecution,\n    retryExecution,\n    fetchPendingApprovals,\n    approveStep,\n    rejectStep,\n    reset,\n  } = useWorkflowStore()\n\n  const { connections, templates, activeConnectionId } = useSharedData()\n\n  const [createDialogOpen, setCreateDialogOpen] = useState(false)\n  const [newWorkflowName, setNewWorkflowName] = useState('')\n  const [selectedConnectionId, setSelectedConnectionId] = useState(activeConnectionId || '')\n  const [selectedTemplateId, setSelectedTemplateId] = useState('')\n  const [workflowNodes, setWorkflowNodes] = useState([])\n  const [selectedNode, setSelectedNode] = useState(null)\n  const [showExecutions, setShowExecutions] = useState(false)\n\n  useEffect(() => {\n    fetchWorkflows()\n    fetchPendingApprovals()\n    return () => reset()\n  }, [fetchWorkflows, fetchPendingApprovals, reset])\n\n  useEffect(() => {\n    if (currentWorkflow?.nodes) {\n      setWorkflowNodes(currentWorkflow.nodes)\n    }\n  }, [currentWorkflow])\n\n  const executeUI = useCallback((label, action, intent = {}) => {\n    return execute({\n      type: InteractionType.EXECUTE,\n      label,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'workflows', ...intent },\n      action,\n    })\n  }, [execute])\n\n  const handleOpenCreateDialog = useCallback(() => {\n    return executeUI('Open create workflow', () => setCreateDialogOpen(true))\n  }, [executeUI])\n\n  const handleCloseCreateDialog = useCallback(() => {\n    return executeUI('Close create workflow', () => setCreateDialogOpen(false))\n  }, [executeUI])\n\n  const handleCreateWorkflow = useCallback(() => {\n    if (!newWorkflowName) return undefined\n    return execute({\n      type: InteractionType.CREATE,\n      label: 'Create workflow',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', name: newWorkflowName },\n      action: async () => {\n        const workflow = await createWorkflow({\n          name: newWorkflowName,\n          connectionId: selectedConnectionId || undefined,\n          templateId: selectedTemplateId || undefined,\n          nodes: [],\n          edges: [],\n          triggers: [],\n        })\n        if (workflow) {\n          setCreateDialogOpen(false)\n          setNewWorkflowName('')\n          setSelectedConnectionId(activeConnectionId || '')\n          setSelectedTemplateId('')\n          toast.show('Workflow created', 'success')\n        }\n        return workflow\n      },\n    })\n  }, [activeConnectionId, createWorkflow, execute, newWorkflowName, selectedConnectionId, selectedTemplateId, toast])\n\n  const handleAddNode = useCallback((nodeType) => {\n    if (!currentWorkflow) return undefined\n    return executeUI('Add workflow node', () => {\n      const newNode = {\n        id: `node_${Date.now()}`,\n        type: nodeType.type,\n        label: nodeType.label,\n        config: {},\n        position: { x: 100 + workflowNodes.length * 50, y: 100 + workflowNodes.length * 50 },\n      }\n      setWorkflowNodes([...workflowNodes, newNode])\n      toast.show(`${nodeType.label} node added`, 'success')\n    }, { workflowId: currentWorkflow.id, nodeType: nodeType.type })\n  }, [currentWorkflow, executeUI, toast, workflowNodes])\n\n  const handleDeleteNode = useCallback((nodeId) => {\n    return execute({\n      type: InteractionType.DELETE,\n      label: 'Remove workflow node',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', nodeId },\n      action: async () => {\n        setWorkflowNodes(workflowNodes.filter((n) => n.id !== nodeId))\n        if (selectedNode?.id === nodeId) {\n          setSelectedNode(null)\n        }\n        toast.show('Node removed', 'success')\n      },\n    })\n  }, [execute, selectedNode?.id, toast, workflowNodes])\n\n  const handleSelectNode = useCallback((node) => {\n    return executeUI('Select workflow node', () => setSelectedNode(node), { nodeId: node?.id })\n  }, [executeUI])\n\n  const handleSaveWorkflow = useCallback(() => {\n    if (!currentWorkflow) return undefined\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Save workflow',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', workflowId: currentWorkflow.id },\n      action: async () => {\n        await updateWorkflow(currentWorkflow.id, {\n          nodes: workflowNodes,\n        })\n        toast.show('Workflow saved', 'success')\n      },\n    })\n  }, [currentWorkflow, execute, toast, updateWorkflow, workflowNodes])\n\n  const handleExecute = useCallback(() => {\n    if (!currentWorkflow) return undefined\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Run workflow',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      blocksNavigation: true,\n      intent: { source: 'workflows', workflowId: currentWorkflow.id },\n      action: async () => {\n        const execution = await executeWorkflow(currentWorkflow.id)\n        if (execution) {\n          toast.show('Workflow execution started', 'success')\n          setShowExecutions(true)\n          fetchExecutions(currentWorkflow.id)\n        }\n        return execution\n      },\n    })\n  }, [currentWorkflow, execute, executeWorkflow, fetchExecutions, toast])\n\n  const handleCancelExecution = useCallback((executionId) => {\n    if (!currentWorkflow) return undefined\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Cancel execution',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', workflowId: currentWorkflow.id, executionId },\n      action: async () => {\n        await cancelExecution(currentWorkflow.id, executionId)\n        toast.show('Execution cancelled', 'info')\n      },\n    })\n  }, [cancelExecution, currentWorkflow, execute, toast])\n\n  const handleRetryExecution = useCallback((executionId) => {\n    if (!currentWorkflow) return undefined\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Retry execution',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', workflowId: currentWorkflow.id, executionId },\n      action: async () => {\n        await retryExecution(currentWorkflow.id, executionId)\n        toast.show('Retry started', 'success')\n      },\n    })\n  }, [currentWorkflow, execute, retryExecution, toast])\n\n  const handleToggleExecutions = useCallback(() => {\n    if (!currentWorkflow) return undefined\n    return executeUI('Toggle executions', () => {\n      const next = !showExecutions\n      setShowExecutions(next)\n      if (next) fetchExecutions(currentWorkflow.id)\n    }, { workflowId: currentWorkflow.id, open: !showExecutions })\n  }, [currentWorkflow, executeUI, fetchExecutions, showExecutions])\n\n  const handleApproveStep = useCallback((executionId, stepId) => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Approve step',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', executionId, stepId },\n      action: async () => {\n        await approveStep(executionId, stepId)\n      },\n    })\n  }, [approveStep, execute])\n\n  const handleRejectStep = useCallback((executionId, stepId) => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Reject step',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      intent: { source: 'workflows', executionId, stepId },\n      action: async () => {\n        await rejectStep(executionId, stepId, 'Rejected')\n      },\n    })\n  }, [execute, rejectStep])\n\n  const handleSelectWorkflow = useCallback((workflowId) => {\n    return execute({\n      type: InteractionType.EXECUTE,\n      label: 'Open workflow',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'workflows', workflowId },\n      action: async () => {\n        await getWorkflow(workflowId)\n      },\n    })\n  }, [execute, getWorkflow])\n\n  const handleDismissError = useCallback(() => {\n    return executeUI('Dismiss workflow error', () => reset())\n  }, [executeUI, reset])\n\n  const groupedNodeTypes = NODE_TYPES.reduce((acc, node) => {\n    if (!acc[node.category]) acc[node.category] = []\n    acc[node.category].push(node)\n    return acc\n  }, {})\n\n  return (\n    <PageContainer>\n      {/* Toolbar */}\n      <Toolbar>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n          <WorkflowIcon sx={{ color: 'text.secondary' }} />\n          <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n            {currentWorkflow?.name || 'Workflows'}\n          </Typography>\n          {currentWorkflow && (\n            <Chip\n              size=\"small\"\n              label={`${workflowNodes.length} nodes`}\n              sx={{ borderRadius: 1 }}\n            />\n          )}\n        </Box>\n\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          {currentWorkflow ? (\n            <>\n              <ActionButton\n                size=\"small\"\n                startIcon={<HistoryIcon />}\n                onClick={handleToggleExecutions}\n              >\n                Executions\n              </ActionButton>\n              <ActionButton\n                size=\"small\"\n                variant=\"outlined\"\n                sx={{ color: 'text.secondary' }}\n                startIcon={executing ? <StopIcon /> : <RunIcon />}\n                onClick={handleExecute}\n                disabled={executing || workflowNodes.length === 0}\n              >\n                {executing ? 'Running...' : 'Run'}\n              </ActionButton>\n              <ActionButton\n                variant=\"contained\"\n                size=\"small\"\n                startIcon={<SaveIcon />}\n                onClick={handleSaveWorkflow}\n              >\n                Save\n              </ActionButton>\n            </>\n          ) : (\n            <ActionButton\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<AddIcon />}\n              onClick={handleOpenCreateDialog}\n            >\n              New Workflow\n            </ActionButton>\n          )}\n        </Box>\n      </Toolbar>\n\n      <WorkflowArea>\n        {currentWorkflow ? (\n          <>\n            {/* Node Palette */}\n            <NodePalette>\n              <Typography variant=\"subtitle2\" sx={{ mb: 2, fontWeight: 600 }}>\n                Add Node\n              </Typography>\n              {Object.entries(groupedNodeTypes).map(([category, nodes]) => (\n                <Box key={category} sx={{ mb: 2 }}>\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontWeight: 600 }}>\n                    {category}\n                  </Typography>\n                  {nodes.map((node) => (\n                    <NodeCard\n                      key={node.type}\n                      variant=\"outlined\"\n                      onClick={() => handleAddNode(node)}\n                    >\n                      <CardContent sx={{ p: 1.5, '&:last-child': { pb: 1.5 } }}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                          <node.icon color={node.color} fontSize=\"small\" />\n                          <Typography variant=\"body2\">{node.label}</Typography>\n                        </Box>\n                      </CardContent>\n                    </NodeCard>\n                  ))}\n                </Box>\n              ))}\n\n              {pendingApprovals.length > 0 && (\n                <>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 600 }}>\n                    Pending Approvals ({pendingApprovals.length})\n                  </Typography>\n                  {pendingApprovals.map((approval) => (\n                    <Paper key={approval.id} variant=\"outlined\" sx={{ p: 1.5, mb: 1 }}>\n                      <Typography variant=\"caption\" sx={{ fontWeight: 500 }}>\n                        {approval.workflow_name}\n                      </Typography>\n                      <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n                        <Button\n                          size=\"small\"\n                          variant=\"contained\"\n                          onClick={() => handleApproveStep(approval.execution_id, approval.step_id)}\n                        >\n                          Approve\n                        </Button>\n                        <Button\n                          size=\"small\"\n                          variant=\"outlined\"\n                          sx={{ color: 'text.secondary' }}\n                          onClick={() => handleRejectStep(approval.execution_id, approval.step_id)}\n                        >\n                          Reject\n                        </Button>\n                      </Box>\n                    </Paper>\n                  ))}\n                </>\n              )}\n            </NodePalette>\n\n            {/* Canvas */}\n            <Canvas>\n              {workflowNodes.length > 0 ? (\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, alignItems: 'center' }}>\n                  {workflowNodes.map((node, index) => {\n                    const nodeType = NODE_TYPES.find((t) => t.type === node.type)\n                    const NodeIcon = nodeType?.icon || CodeIcon\n                    return (\n                      <React.Fragment key={node.id}>\n                        <WorkflowNode\n                          onClick={() => handleSelectNode(node)}\n                          sx={{\n                            borderColor: selectedNode?.id === node.id\n                              ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700])\n                              : undefined,\n                          }}\n                        >\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5 }}>\n                            <Box\n                              sx={{\n                                width: 36,\n                                height: 36,\n                                borderRadius: 1,  // Figma spec: 8px\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                bgcolor: alpha(theme.palette[nodeType?.color || 'primary'].main, 0.1),\n                              }}\n                            >\n                              <NodeIcon color={nodeType?.color || 'primary'} />\n                            </Box>\n                            <Box sx={{ flex: 1 }}>\n                              <Typography variant=\"subtitle2\" sx={{ fontWeight: 600 }}>\n                                {node.label}\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                {node.type}\n                              </Typography>\n                            </Box>\n                            <IconButton\n                              size=\"small\"\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                handleDeleteNode(node.id)\n                              }}\n                            >\n                              <DeleteIcon fontSize=\"small\" />\n                            </IconButton>\n                          </Box>\n                        </WorkflowNode>\n                        {index < workflowNodes.length - 1 && (\n                          <Box\n                            sx={{\n                              width: 2,\n                              height: 40,\n                              bgcolor: alpha(theme.palette.divider, 0.5),\n                              borderRadius: 1,\n                            }}\n                          />\n                        )}\n                      </React.Fragment>\n                    )\n                  })}\n                </Box>\n              ) : (\n                <Box\n                  sx={{\n                    height: '100%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <Typography color=\"text.secondary\">\n                    Add nodes from the palette to build your workflow\n                  </Typography>\n                </Box>\n              )}\n            </Canvas>\n\n            {/* Executions Sidebar */}\n            {showExecutions && (\n              <Sidebar>\n                <Box sx={{ p: 2, borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}` }}>\n                  <Typography variant=\"subtitle1\" sx={{ fontWeight: 600 }}>\n                    Executions\n                  </Typography>\n                </Box>\n                <Box sx={{ flex: 1, overflow: 'auto', p: 2 }}>\n                  {executions.length > 0 ? (\n                    executions.map((exec) => (\n                      <ExecutionCard key={exec.id} status={exec.status} variant=\"outlined\">\n                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                          <Box>\n                            <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                              {exec.status}\n                            </Typography>\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              {new Date(exec.started_at).toLocaleString()}\n                            </Typography>\n                          </Box>\n                          <Box sx={{ display: 'flex', gap: 0.5 }}>\n                            {exec.status === 'running' && (\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleCancelExecution(exec.id)}\n                              >\n                                <StopIcon fontSize=\"small\" />\n                              </IconButton>\n                            )}\n                            {exec.status === 'failed' && (\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleRetryExecution(exec.id)}\n                              >\n                                <RetryIcon fontSize=\"small\" />\n                              </IconButton>\n                            )}\n                          </Box>\n                        </Box>\n                      </ExecutionCard>\n                    ))\n                  ) : (\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ textAlign: 'center', py: 4 }}>\n                      No executions yet\n                    </Typography>\n                  )}\n                </Box>\n              </Sidebar>\n            )}\n          </>\n        ) : (\n          <EmptyState sx={{ width: '100%' }}>\n            <WorkflowIcon sx={{ fontSize: 64, color: 'text.disabled', mb: 2 }} />\n            <Typography variant=\"h5\" sx={{ fontWeight: 600, mb: 1 }}>\n              No Workflow Selected\n            </Typography>\n            <Typography color=\"text.secondary\" sx={{ mb: 3 }}>\n              Create a new workflow to automate your processes.\n            </Typography>\n            <ActionButton\n              variant=\"contained\"\n              startIcon={<AddIcon />}\n              onClick={handleOpenCreateDialog}\n            >\n              Create Workflow\n            </ActionButton>\n\n            {workflows.length > 0 && (\n              <Box sx={{ mt: 4, width: '100%', maxWidth: 400 }}>\n                <Typography variant=\"subtitle2\" sx={{ mb: 2 }}>\n                  Recent Workflows\n                </Typography>\n                {workflows.slice(0, 5).map((wf) => (\n                  <Paper\n                    key={wf.id}\n                    sx={{\n                      p: 2,\n                      mb: 1,\n                      cursor: 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 2,\n                      '&:hover': { bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50] },\n                    }}\n                    variant=\"outlined\"\n                    onClick={() => handleSelectWorkflow(wf.id)}\n                  >\n                    <WorkflowIcon sx={{ color: 'text.secondary' }} />\n                    <Box>\n                      <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                        {wf.name}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        {wf.nodes?.length || 0} nodes\n                      </Typography>\n                    </Box>\n                  </Paper>\n                ))}\n              </Box>\n            )}\n          </EmptyState>\n        )}\n      </WorkflowArea>\n\n      {/* Create Workflow Dialog */}\n      <Dialog\n        open={createDialogOpen}\n        onClose={handleCloseCreateDialog}\n        maxWidth=\"xs\"\n        fullWidth\n      >\n        <DialogTitle>Create New Workflow</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            fullWidth\n            label=\"Workflow Name\"\n            value={newWorkflowName}\n            onChange={(e) => setNewWorkflowName(e.target.value)}\n            sx={{ mt: 2 }}\n          />\n          <ConnectionSelector\n            value={selectedConnectionId}\n            onChange={setSelectedConnectionId}\n            label=\"Database Connection\"\n            size=\"small\"\n            sx={{ mt: 2 }}\n          />\n          <TemplateSelector\n            value={selectedTemplateId}\n            onChange={setSelectedTemplateId}\n            label=\"Report Template\"\n            size=\"small\"\n            sx={{ mt: 2 }}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseCreateDialog}>Cancel</Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleCreateWorkflow}\n            disabled={!newWorkflowName || loading}\n          >\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {error && (\n        <Alert\n          severity=\"error\"\n          onClose={handleDismissError}\n          sx={{ position: 'fixed', bottom: 16, right: 16, maxWidth: 400 }}\n        >\n          {error}\n        </Alert>\n      )}\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport WorkflowBuilderPageContainer from '@/features/workflows/containers/WorkflowBuilderPageContainer'\n\nexport default function WorkflowBuilderPage() {\n  useInteraction()\n  return <WorkflowBuilderPageContainer />\n}\n"],"names":["ConditionIcon","createSvgIcon","_jsx","LoopIcon","WebhookIcon","PageContainer","styled","Box","theme","Toolbar","alpha","WorkflowArea","NodePalette","Canvas","Sidebar","NodeCard","Card","WorkflowNode","Paper","neutral","ExecutionCard","status","ActionButton","Button","EmptyState","NODE_TYPES","ScheduleIcon","CodeIcon","EmailIcon","NotifyIcon","ApprovalIcon","DataIcon","WorkflowBuilderPage","useTheme","toast","useToast","execute","useInteraction","workflows","currentWorkflow","executions","currentExecution","pendingApprovals","loading","executing","error","fetchWorkflows","createWorkflow","getWorkflow","updateWorkflow","deleteWorkflow","executeWorkflow","fetchExecutions","cancelExecution","retryExecution","fetchPendingApprovals","approveStep","rejectStep","reset","useWorkflowStore","activeConnectionId","useSharedData","createDialogOpen","setCreateDialogOpen","useState","newWorkflowName","setNewWorkflowName","selectedConnectionId","setSelectedConnectionId","selectedTemplateId","setSelectedTemplateId","workflowNodes","setWorkflowNodes","selectedNode","setSelectedNode","showExecutions","setShowExecutions","useEffect","executeUI","useCallback","label","action","intent","InteractionType","Reversibility","handleOpenCreateDialog","handleCloseCreateDialog","handleCreateWorkflow","workflow","handleAddNode","nodeType","newNode","handleDeleteNode","nodeId","n","handleSelectNode","node","handleSaveWorkflow","handleExecute","execution","handleCancelExecution","executionId","handleRetryExecution","handleToggleExecutions","next","handleApproveStep","stepId","handleRejectStep","handleSelectWorkflow","workflowId","handleDismissError","groupedNodeTypes","acc","jsxs","jsx","WorkflowIcon","Typography","Chip","Fragment","HistoryIcon","StopIcon","RunIcon","SaveIcon","AddIcon","category","nodes","CardContent","Divider","approval","index","t","NodeIcon","React","IconButton","e","DeleteIcon","exec","RetryIcon","wf","Dialog","DialogTitle","DialogContent","TextField","ConnectionSelector","TemplateSelector","DialogActions","Alert","WorkflowBuilderPageContainer"],"mappings":"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","x_google_ignoreList":[0,1,2]}