import{r as i,cq as wt,cW as Pe,cX as jt,cN as Lt,cs as Je,cT as _e,cY as Qe,cZ as tt,c_ as Be,a8 as Tt,a9 as Rt,j as t,ab as He,aa as At,cQ as Et,cR as ce,as as ue,ac as Pt,N as he,at as we,av as et,c$ as gt,bN as It,v as zt,w as Nt,a as xt,R as Ie,I as ze,B as T,o as z,s as Ze,K as ke,ba as Mt,J as Ht,A as rt,bc as Dt,P as Fe,b3 as $t,F as at,m as st,S as nt,M as ot,aJ as lt,ak as Ft,p as Ne,n as it,f as Ot,q as Vt,C as ct,V as Ut,T as ut,e as dt,G as qt,_ as _t}from"./index-DeRHNZar.js";import{q as Bt,g as Gt,a as Wt,b as Yt}from"./summary-oVzSlhUW.js";import{u as Kt}from"./useSharedData-BAHlW-1G.js";import{u as Xt,F as mt,O as pt}from"./useCrossPageActions-BCB3hlt6.js";import{S as Jt}from"./SendToMenu-ClkyGrK3.js";import{C as Qt}from"./ConfirmModal-BHWqBz2Z.js";import{A as Zt}from"./AiUsageNotice-BgIrRfUH.js";import{C as er}from"./ConnectionSelector-DMISq3nq.js";import{G as Me}from"./Grid-C8zRHJnX.js";import{C as tr}from"./CardContent-B7RWOLhy.js";import{C as rr}from"./ContentCopy-DTU7Akp1.js";import"./SummarizeRounded-qHrdYjfR.js";import"./CheckCircleOutline-BoLve1SG.js";import"./WarningAmber-Bt52ndVT.js";const ar={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function sr(e,r,o=(l,f)=>l===f){return e.length===r.length&&e.every((l,f)=>o(l,r[f]))}const nr=2;function Ce(e,r,o,l,f){return o===1?Math.min(e+r,f):Math.max(e-r,l)}function vt(e,r){return e-r}function ht(e,r){const{index:o}=e.reduce((l,f,v)=>{const R=Math.abs(r-f);return l===null||R<l.distance||R===l.distance?{distance:R,index:v}:l},null)??{};return o}function Oe(e,r){if(r.current!==void 0&&e.changedTouches){const o=e;for(let l=0;l<o.changedTouches.length;l+=1){const f=o.changedTouches[l];if(f.identifier===r.current)return{x:f.clientX,y:f.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ge(e,r,o){return(e-r)*100/(o-r)}function or(e,r,o){return(o-r)*e+r}function lr(e){if(Math.abs(e)<1){const o=e.toExponential().split("e-"),l=o[0].split(".")[1];return(l?l.length:0)+parseInt(o[1],10)}const r=e.toString().split(".")[1];return r?r.length:0}function ir(e,r,o){const l=Math.round((e-o)/r)*r+o;return Number(l.toFixed(lr(r)))}function ft({values:e,newValue:r,index:o}){const l=e.slice();return l[o]=r,l.sort(vt)}function Ve({sliderRef:e,activeIndex:r,setActive:o}){const l=_e(e.current);(!e.current?.contains(l.activeElement)||Number(l?.activeElement?.getAttribute("data-index"))!==r)&&e.current?.querySelector(`[type="range"][data-index="${r}"]`).focus(),o&&o(r)}function Ue(e,r){return typeof e=="number"&&typeof r=="number"?e===r:typeof e=="object"&&typeof r=="object"?sr(e,r):!1}const cr={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},ur=e=>e;let qe;function bt(){return qe===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?qe=CSS.supports("touch-action","none"):qe=!0),qe}function dr(e){const{"aria-labelledby":r,defaultValue:o,disabled:l=!1,disableSwap:f=!1,isRtl:v=!1,marks:R=!1,max:y=100,min:p=0,name:D,onChange:S,onChangeCommitted:X,orientation:oe="horizontal",rootRef:je,scale:W=ur,step:F=1,shiftStep:_=10,tabIndex:de,value:g}=e,N=i.useRef(void 0),[O,Z]=i.useState(-1),[Le,le]=i.useState(-1),[fe,me]=i.useState(!1),Y=i.useRef(0),ie=i.useRef(null),[$,A]=wt({controlled:g,default:o??p,name:"Slider"}),j=S&&((n,s,u)=>{const h=n.nativeEvent||n,m=new h.constructor(h.type,h);Object.defineProperty(m,"target",{writable:!0,value:{value:s,name:D}}),ie.current=s,S(m,s,u)}),J=Array.isArray($);let x=J?$.slice().sort(vt):[$];x=x.map(n=>n==null?p:Pe(n,p,y));const pe=R===!0&&F!==null?[...Array(Math.floor((y-p)/F)+1)].map((n,s)=>({value:p+F*s})):R||[],k=pe.map(n=>n.value),[K,V]=i.useState(-1),b=i.useRef(null),M=jt(je,b),Te=n=>s=>{const u=Number(s.currentTarget.getAttribute("data-index"));tt(s.target)&&V(u),le(u),n?.onFocus?.(s)},C=n=>s=>{tt(s.target)||V(-1),le(-1),n?.onBlur?.(s)},be=(n,s)=>{const u=Number(n.currentTarget.getAttribute("data-index")),h=x[u],m=k.indexOf(h);let d=s;if(pe&&F==null){const q=k[k.length-1];d>=q?d=q:d<=k[0]?d=k[0]:d=d<h?k[m-1]:k[m+1]}if(d=Pe(d,p,y),J){f&&(d=Pe(d,x[u-1]||-1/0,x[u+1]||1/0));const q=d;d=ft({values:x,newValue:d,index:u});let B=u;f||(B=d.indexOf(q)),Ve({sliderRef:b,activeIndex:B})}A(d),V(u),j&&!Ue(d,$)&&j(n,d,u),X&&X(n,ie.current??d)},Re=n=>s=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(s.key)){s.preventDefault();const u=Number(s.currentTarget.getAttribute("data-index")),h=x[u];let m=null;if(F!=null){const d=s.shiftKey?_:F;switch(s.key){case"ArrowUp":m=Ce(h,d,1,p,y);break;case"ArrowRight":m=Ce(h,d,v?-1:1,p,y);break;case"ArrowDown":m=Ce(h,d,-1,p,y);break;case"ArrowLeft":m=Ce(h,d,v?1:-1,p,y);break;case"PageUp":m=Ce(h,_,1,p,y);break;case"PageDown":m=Ce(h,_,-1,p,y);break;case"Home":m=p;break;case"End":m=y;break}}else if(pe){const d=k[k.length-1],q=k.indexOf(h),B=[v?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],L=[v?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];B.includes(s.key)?q===0?m=k[0]:m=k[q-1]:L.includes(s.key)&&(q===k.length-1?m=d:m=k[q+1])}m!=null&&be(s,m)}n?.onKeyDown?.(s)};Lt(()=>{l&&b.current.contains(document.activeElement)&&document.activeElement?.blur()},[l]),l&&O!==-1&&Z(-1),l&&K!==-1&&V(-1);const ye=n=>s=>{n.onChange?.(s),be(s,s.target.valueAsNumber)},ee=i.useRef(void 0);let te=oe;v&&oe==="horizontal"&&(te+="-reverse");const re=({finger:n,move:s=!1})=>{const{current:u}=b,{width:h,height:m,bottom:d,left:q}=u.getBoundingClientRect();let B;te.startsWith("vertical")?B=(d-n.y)/m:B=(n.x-q)/h,te.includes("-reverse")&&(B=1-B);let L;if(L=or(B,p,y),F)L=ir(L,F,p);else{const Ee=ht(k,L);L=k[Ee]}L=Pe(L,p,y);let Q=0;if(J){s?Q=ee.current:Q=ht(x,L),f&&(L=Pe(L,x[Q-1]||-1/0,x[Q+1]||1/0));const Ee=L;L=ft({values:x,newValue:L,index:Q}),f&&s||(Q=L.indexOf(Ee),ee.current=Q)}return{newValue:L,activeIndex:Q}},ae=Je(n=>{const s=Oe(n,N);if(!s)return;if(Y.current+=1,n.type==="mousemove"&&n.buttons===0){U(n);return}const{newValue:u,activeIndex:h}=re({finger:s,move:!0});Ve({sliderRef:b,activeIndex:h,setActive:Z}),A(u),!fe&&Y.current>nr&&me(!0),j&&!Ue(u,$)&&j(n,u,h)}),U=Je(n=>{const s=Oe(n,N);if(me(!1),!s)return;const{newValue:u}=re({finger:s,move:!0});Z(-1),n.type==="touchend"&&le(-1),X&&X(n,ie.current??u),N.current=void 0,se()}),E=Je(n=>{if(l)return;bt()||n.preventDefault();const s=n.changedTouches[0];s!=null&&(N.current=s.identifier);const u=Oe(n,N);if(u!==!1){const{newValue:m,activeIndex:d}=re({finger:u});Ve({sliderRef:b,activeIndex:d,setActive:Z}),A(m),j&&!Ue(m,$)&&j(n,m,d)}Y.current=0;const h=_e(b.current);h.addEventListener("touchmove",ae,{passive:!0}),h.addEventListener("touchend",U,{passive:!0})}),se=i.useCallback(()=>{const n=_e(b.current);n.removeEventListener("mousemove",ae),n.removeEventListener("mouseup",U),n.removeEventListener("touchmove",ae),n.removeEventListener("touchend",U)},[U,ae]);i.useEffect(()=>{const{current:n}=b;return n.addEventListener("touchstart",E,{passive:bt()}),()=>{n.removeEventListener("touchstart",E),se()}},[se,E]),i.useEffect(()=>{l&&se()},[l,se]);const Ae=n=>s=>{if(n.onMouseDown?.(s),l||s.defaultPrevented||s.button!==0)return;s.preventDefault();const u=Oe(s,N);if(u!==!1){const{newValue:m,activeIndex:d}=re({finger:u});Ve({sliderRef:b,activeIndex:d,setActive:Z}),A(m),j&&!Ue(m,$)&&j(s,m,d)}Y.current=0;const h=_e(b.current);h.addEventListener("mousemove",ae,{passive:!0}),h.addEventListener("mouseup",U)},ge=Ge(J?x[0]:p,p,y),P=Ge(x[x.length-1],p,y)-ge,a=(n={})=>{const s=Qe(n),u={onMouseDown:Ae(s||{})},h={...s,...u};return{...n,ref:M,...h}},c=n=>s=>{n.onMouseOver?.(s);const u=Number(s.currentTarget.getAttribute("data-index"));le(u)},H=n=>s=>{n.onMouseLeave?.(s),le(-1)},xe=(n={})=>{const s=Qe(n),u={onMouseOver:c(s||{}),onMouseLeave:H(s||{})};return{...n,...s,...u}},ve=n=>({pointerEvents:O!==-1&&O!==n?"none":void 0});let Se;return oe==="vertical"&&(Se=v?"vertical-rl":"vertical-lr"),{active:O,axis:te,axisProps:cr,dragging:fe,focusedThumbIndex:K,getHiddenInputProps:(n={})=>{const s=Qe(n),u={onChange:ye(s||{}),onFocus:Te(s||{}),onBlur:C(s||{}),onKeyDown:Re(s||{})},h={...s,...u};return{tabIndex:de,"aria-labelledby":r,"aria-orientation":oe,"aria-valuemax":W(y),"aria-valuemin":W(p),name:D,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:l,...n,...h,style:{...ar,direction:v?"rtl":"ltr",width:"100%",height:"100%",writingMode:Se}}},getRootProps:a,getThumbProps:xe,marks:pe,open:Le,range:J,rootRef:M,trackLeap:P,trackOffset:ge,values:x,getThumbStyle:ve}}const mr=e=>!e||!Be(e);function pr(e){return Tt("MuiSlider",e)}const G=Rt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),hr=e=>{const{open:r}=e;return{offset:He(r&&G.valueLabelOpen),circle:G.valueLabelCircle,label:G.valueLabelLabel}};function fr(e){const{children:r,className:o,value:l}=e,f=hr(e);return r?i.cloneElement(r,{className:r.props.className},t.jsxs(i.Fragment,{children:[r.props.children,t.jsx("span",{className:He(f.offset,o),"aria-hidden":!0,children:t.jsx("span",{className:f.circle,children:t.jsx("span",{className:f.label,children:l})})})]})):null}function yt(e){return e}const br=he("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[`color${ue(o.color)}`],o.size!=="medium"&&r[`size${ue(o.size)}`],o.marked&&r.marked,o.orientation==="vertical"&&r.vertical,o.track==="inverted"&&r.trackInverted,o.track===!1&&r.trackFalse]}})(we(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${G.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${G.dragging}`]:{[`& .${G.thumb}, & .${G.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(et()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),yr=he("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),gr=he("span",{name:"MuiSlider",slot:"Track"})(we(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(et()).map(([r])=>({props:{color:r,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${r}Track`],borderColor:e.vars.palette.Slider[`${r}Track`]}:{backgroundColor:e.lighten(e.palette[r].main,.62),borderColor:e.lighten(e.palette[r].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[r].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[r].main,.5)})}}}))]}))),xr=he("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.thumb,r[`thumbColor${ue(o.color)}`],o.size!=="medium"&&r[`thumbSize${ue(o.size)}`]]}})(we(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${G.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(et()).map(([r])=>({props:{color:r},style:{[`&:hover, &.${G.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[r].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${G.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[r].main,.16)}`}}}))]}))),vr=he(fr,{name:"MuiSlider",slot:"ValueLabel"})(we(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${G.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${G.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Sr=he("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>gt(e)&&e!=="markActive",overridesResolver:(e,r)=>{const{markActive:o}=e;return[r.mark,o&&r.markActive]}})(we(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),kr=he("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>gt(e)&&e!=="markLabelActive"})(we(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),Cr=e=>{const{disabled:r,dragging:o,marked:l,orientation:f,track:v,classes:R,color:y,size:p}=e,D={root:["root",r&&"disabled",o&&"dragging",l&&"marked",f==="vertical"&&"vertical",v==="inverted"&&"trackInverted",v===!1&&"trackFalse",y&&`color${ue(y)}`,p&&`size${ue(p)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",r&&"disabled",p&&`thumbSize${ue(p)}`,y&&`thumbColor${ue(y)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Pt(D,pr,R)},wr=({children:e})=>e,jr=i.forwardRef(function(r,o){const l=At({props:r,name:"MuiSlider"}),f=Et(),{"aria-label":v,"aria-valuetext":R,"aria-labelledby":y,component:p="span",components:D={},componentsProps:S={},color:X="primary",classes:oe,className:je,disableSwap:W=!1,disabled:F=!1,getAriaLabel:_,getAriaValueText:de,marks:g=!1,max:N=100,min:O=0,name:Z,onChange:Le,onChangeCommitted:le,orientation:fe="horizontal",shiftStep:me=10,size:Y="medium",step:ie=1,scale:$=yt,slotProps:A,slots:j,tabIndex:J,track:x="normal",value:pe,valueLabelDisplay:k="off",valueLabelFormat:K=yt,...V}=l,b={...l,isRtl:f,max:N,min:O,classes:oe,disabled:F,disableSwap:W,orientation:fe,marks:g,color:X,size:Y,step:ie,shiftStep:me,scale:$,track:x,valueLabelDisplay:k,valueLabelFormat:K},{axisProps:M,getRootProps:Te,getHiddenInputProps:C,getThumbProps:be,open:Re,active:ye,axis:ee,focusedThumbIndex:te,range:re,dragging:ae,marks:U,values:E,trackOffset:se,trackLeap:Ae,getThumbStyle:ge}=dr({...b,rootRef:o});b.marked=U.length>0&&U.some(w=>w.label),b.dragging=ae,b.focusedThumbIndex=te;const P=Cr(b),a=j?.root??D.Root??br,c=j?.rail??D.Rail??yr,H=j?.track??D.Track??gr,xe=j?.thumb??D.Thumb??xr,ve=j?.valueLabel??D.ValueLabel??vr,Se=j?.mark??D.Mark??Sr,De=j?.markLabel??D.MarkLabel??kr,n=j?.input??D.Input??"input",s=A?.root??S.root,u=A?.rail??S.rail,h=A?.track??S.track,m=A?.thumb??S.thumb,d=A?.valueLabel??S.valueLabel,q=A?.mark??S.mark,B=A?.markLabel??S.markLabel,L=A?.input??S.input,Q=ce({elementType:a,getSlotProps:Te,externalSlotProps:s,externalForwardedProps:V,additionalProps:{...mr(a)&&{as:p}},ownerState:{...b,...s?.ownerState},className:[P.root,je]}),Ee=ce({elementType:c,externalSlotProps:u,ownerState:b,className:P.rail}),St=ce({elementType:H,externalSlotProps:h,additionalProps:{style:{...M[ee].offset(se),...M[ee].leap(Ae)}},ownerState:{...b,...h?.ownerState},className:P.track}),We=ce({elementType:xe,getSlotProps:be,externalSlotProps:m,ownerState:{...b,...m?.ownerState},className:P.thumb}),kt=ce({elementType:ve,externalSlotProps:d,ownerState:{...b,...d?.ownerState},className:P.valueLabel}),Ye=ce({elementType:Se,externalSlotProps:q,ownerState:b,className:P.mark}),Ke=ce({elementType:De,externalSlotProps:B,ownerState:b,className:P.markLabel}),Ct=ce({elementType:n,getSlotProps:C,externalSlotProps:L,ownerState:b});return t.jsxs(a,{...Q,children:[t.jsx(c,{...Ee}),t.jsx(H,{...St}),U.filter(w=>w.value>=O&&w.value<=N).map((w,I)=>{const Xe=Ge(w.value,O,N),$e=M[ee].offset(Xe);let ne;return x===!1?ne=E.includes(w.value):ne=x==="normal"&&(re?w.value>=E[0]&&w.value<=E[E.length-1]:w.value<=E[0])||x==="inverted"&&(re?w.value<=E[0]||w.value>=E[E.length-1]:w.value>=E[0]),t.jsxs(i.Fragment,{children:[t.jsx(Se,{"data-index":I,...Ye,...!Be(Se)&&{markActive:ne},style:{...$e,...Ye.style},className:He(Ye.className,ne&&P.markActive)}),w.label!=null?t.jsx(De,{"aria-hidden":!0,"data-index":I,...Ke,...!Be(De)&&{markLabelActive:ne},style:{...$e,...Ke.style},className:He(P.markLabel,Ke.className,ne&&P.markLabelActive),children:w.label}):null]},I)}),E.map((w,I)=>{const Xe=Ge(w,O,N),$e=M[ee].offset(Xe),ne=k==="off"?wr:ve;return t.jsx(ne,{...!Be(ne)&&{valueLabelFormat:K,valueLabelDisplay:k,value:typeof K=="function"?K($(w),I):K,index:I,open:Re===I||ye===I||k==="on",disabled:F},...kt,children:t.jsx(xe,{"data-index":I,...We,className:He(P.thumb,We.className,ye===I&&P.active,te===I&&P.focusVisible),style:{...$e,...ge(I),...We.style},children:t.jsx(n,{"data-index":I,"aria-label":_?_(I):v,"aria-valuenow":$(w),"aria-labelledby":y,"aria-valuetext":de?de($(w),I):R,value:E[I],...Ct})})},I)})]})}),Lr=It(e=>({summary:null,loading:!1,error:null,history:[],setLoading:r=>e({loading:r}),setError:r=>e({error:r}),generateSummary:async({content:r,tone:o="formal",maxSentences:l=5,focusAreas:f})=>{e({loading:!0,error:null});try{const R=(await Yt({content:r,tone:o,maxSentences:l,focusAreas:f})).summary;return e(y=>({summary:R,history:[{id:Date.now(),summary:R,tone:o,maxSentences:l,focusAreas:f,contentPreview:r.substring(0,100)+(r.length>100?"...":""),createdAt:new Date().toISOString()},...y.history.slice(0,9)],loading:!1})),R}catch(v){return e({error:v.message,loading:!1}),null}},queueSummary:async({content:r,tone:o="formal",maxSentences:l=5,focusAreas:f})=>{e({error:null});try{return await Wt({content:r,tone:o,maxSentences:l,focusAreas:f})}catch(v){return e({error:v.message}),null}},getReportSummary:async r=>{e({loading:!0,error:null});try{const o=await Gt(r);return e({summary:o.summary,loading:!1}),o.summary}catch(o){return e({error:o.message,loading:!1}),null}},queueReportSummary:async r=>{e({error:null});try{return await Bt(r)}catch(o){return e({error:o.message}),null}},clearSummary:()=>e({summary:null,error:null}),clearHistory:()=>e({history:[]}),reset:()=>e({summary:null,error:null})})),Tr=[{value:"formal",label:"Formal",description:"Professional, business-appropriate tone"},{value:"conversational",label:"Conversational",description:"Friendly, easy-to-read tone"},{value:"technical",label:"Technical",description:"Detailed, precise terminology"}],Rr=["Key findings","Financial metrics","Trends","Recommendations","Risks","Opportunities","Performance","Growth"];function Ar(){const{summary:e,history:r,loading:o,error:l,generateSummary:f,queueSummary:v,clearSummary:R,clearHistory:y,reset:p}=Lr();Kt();const{registerOutput:D}=Xt(mt.SUMMARY),[S,X]=i.useState(""),[oe,je]=i.useState(""),[W,F]=i.useState("formal"),[_,de]=i.useState(5),[g,N]=i.useState([]),[O,Z]=i.useState(""),[Le,le]=i.useState(!1),[fe,me]=i.useState(!1),[Y,ie]=i.useState(!1),[$,A]=i.useState(null),[j,J]=i.useState(!1),[x,pe]=i.useState([]),[k,K]=i.useState(!1),V=zt(),b=Nt(),{execute:M}=xt(),Te=i.useCallback((a,c,H={})=>b(a,{label:c,intent:{from:"summary",...H}}),[b]),C=i.useCallback((a,c,H={})=>M({type:ze.EXECUTE,label:a,reversibility:Ie.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"summary",...H},action:c}),[M]);i.useEffect(()=>()=>p(),[p]),i.useEffect(()=>{let a=!1;return(async()=>{K(!0);try{const H=await _t({limit:20,status:"succeeded"});a||pe(H?.history||[])}catch(H){console.error("Failed to fetch report runs:",H)}finally{a||K(!1)}})(),()=>{a=!0}},[]);const be=async()=>{if(!S.trim())return;A(null);const a=S.trim();if(a.length<50){V.show("Content is too short. Please provide at least 50 characters.","error");return}if(a.length>5e4){V.show("Content exceeds maximum length of 50,000 characters.","error");return}await M({type:ze.GENERATE,label:"Generate summary",reversibility:Ie.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{action:"generate_summary"},action:async()=>{const c=await f({content:a,tone:W,maxSentences:_,focusAreas:g.length>0?g:void 0});if(!c)throw new Error("Summary generation failed");return D({type:pt.TEXT,title:`Executive Summary (${W})`,summary:(typeof c=="string"?c:"").substring(0,200),data:typeof c=="string"?c:JSON.stringify(c),format:"text"}),c}})},Re=async()=>{if(!S.trim())return;A(null);const a=S.trim();if(a.length<50){V.show("Content is too short. Please provide at least 50 characters.","error");return}if(a.length>5e4){V.show("Content exceeds maximum length of 50,000 characters.","error");return}await M({type:ze.GENERATE,label:"Queue summary",reversibility:Ie.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{action:"queue_summary"},action:async()=>{ie(!0);try{const c=await v({content:a,tone:W,maxSentences:_,focusAreas:g.length>0?g:void 0});if(c?.job_id)A(c.job_id),V.show("Summary queued. Track progress in Jobs.","success");else throw V.show("Failed to queue summary job.","error"),new Error("Failed to queue summary job");return c}finally{ie(!1)}}})},ye=i.useCallback(()=>C("Toggle summary history",()=>{le(a=>!a)}),[C]),ee=i.useCallback(()=>C("Open clear history confirmation",()=>{J(!0)}),[C]),te=i.useCallback(()=>C("Close clear history confirmation",()=>{J(!1)}),[C]),re=i.useCallback(a=>C("Add focus area",()=>{g.length<5&&!g.includes(a)&&N([...g,a])},{focus:a}),[C,g]),ae=i.useCallback(a=>C("Remove focus area",()=>{N(g.filter(c=>c!==a))},{focus:a}),[C,g]),U=i.useCallback(()=>C("Add custom focus area",()=>{const a=O.trim();a&&g.length<5&&!g.includes(a)&&(N([...g,a]),Z(""))}),[O,C,g]),E=i.useCallback(()=>C("Copy summary to clipboard",async()=>{e&&(await navigator.clipboard.writeText(e),me(!0),setTimeout(()=>me(!1),2e3))}),[C,e]),se=i.useCallback(()=>M({type:ze.DELETE,label:"Clear summary output",reversibility:Ie.PARTIALLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"summary",action:"clear_summary"},action:()=>R()}),[R,M]),Ae=i.useCallback(a=>C("Load summary from history",()=>{X(a.contentPreview.replace("...","")),F(a.tone),de(a.maxSentences),N(a.focusAreas||[])},{historyId:a.id}),[C]),ge=i.useCallback(()=>M({type:ze.DELETE,label:"Clear summary history",reversibility:Ie.IRREVERSIBLE,requiresConfirmation:!0,intent:{source:"summary",action:"clear_history"},action:()=>{y(),J(!1)}}),[y,M]),P=i.useCallback(()=>C("Dismiss summary error",()=>{p()}),[C,p]);return t.jsxs(T,{sx:{p:3,maxWidth:1400,mx:"auto"},children:[t.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsxs(T,{children:[t.jsxs(z,{variant:"h5",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ze,{})," Executive Summary Generator"]}),t.jsx(z,{variant:"body1",color:"text.secondary",children:"Generate concise executive summaries from your content using AI"})]}),r.length>0&&t.jsxs(ke,{variant:"outlined",startIcon:Le?t.jsx(Mt,{}):t.jsx(Ht,{}),onClick:ye,children:["History (",r.length,")"]})]}),l&&t.jsx(rt,{severity:"error",sx:{mb:2},onClose:P,children:l}),$&&t.jsxs(rt,{severity:"info",sx:{mb:2},action:t.jsx(ke,{size:"small",onClick:()=>Te("/jobs","Open jobs"),sx:{textTransform:"none"},children:"View Jobs"}),children:["Summary queued in background. Job ID: ",$]}),t.jsx(Zt,{title:"AI summary",description:"Summaries are generated from the text you provide. Review for accuracy before sharing.",chips:[{label:"Source: Pasted content",color:"info",variant:"outlined"},{label:"Confidence: Review required",color:"warning",variant:"outlined"},{label:"Reversible: Output only",color:"success",variant:"outlined"}],dense:!0,sx:{mb:2}}),t.jsx(Dt,{in:Le,children:t.jsxs(Fe,{sx:{p:2,mb:3},children:[t.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(z,{variant:"h6",children:"Recent Summaries"}),t.jsx(ke,{size:"small",onClick:ee,sx:{color:"text.secondary"},children:"Clear All"})]}),t.jsx(Me,{container:!0,spacing:2,children:r.map(a=>t.jsx(Me,{size:{xs:12,md:6},children:t.jsx($t,{variant:"outlined",sx:{cursor:"pointer"},onClick:()=>Ae(a),children:t.jsxs(tr,{sx:{py:1.5},children:[t.jsxs(z,{variant:"caption",color:"text.secondary",children:[new Date(a.createdAt).toLocaleString()," - ",a.tone]}),t.jsxs(z,{variant:"body2",sx:{mt:.5},noWrap:!0,children:[a.summary?.substring(0,150),"..."]})]})})},a.id))})]})}),t.jsxs(Me,{container:!0,spacing:3,children:[t.jsx(Me,{size:{xs:12,md:6},children:t.jsxs(Fe,{sx:{p:3,height:"100%"},children:[t.jsx(z,{variant:"h6",gutterBottom:!0,children:"Content to Summarize"}),x.length>0&&t.jsx(T,{sx:{mb:2},children:t.jsxs(at,{fullWidth:!0,size:"small",children:[t.jsx(st,{children:"Load from Report Run"}),t.jsx(nt,{value:"",label:"Load from Report Run",onChange:a=>{const c=x.find(H=>H.id===a.target.value);if(c){const H=[`Report: ${c.templateName||"Unknown"}`,c.startDate&&c.endDate?`Period: ${c.startDate} to ${c.endDate}`:null,c.connectionName?`Connection: ${c.connectionName}`:null,c.keyValues&&Object.keys(c.keyValues).length>0?`Parameters: ${Object.entries(c.keyValues).map(([xe,ve])=>`${xe}=${ve}`).join(", ")}`:null,c.artifacts?.html_url?`
Report content available at: ${c.artifacts.html_url}`:null].filter(Boolean);X(H.join(`
`)),V.show(`Loaded report "${c.templateName}" context`,"success")}},children:x.map(a=>t.jsx(ot,{value:a.id,children:t.jsxs(T,{children:[t.jsx(z,{variant:"body2",children:a.templateName||"Unknown Report"}),t.jsxs(z,{variant:"caption",color:"text.secondary",children:[a.createdAt?new Date(a.createdAt).toLocaleDateString():"",a.connectionName?` â€¢ ${a.connectionName}`:""]})]})},a.id))})]})}),t.jsx(er,{value:oe,onChange:je,label:"Pull from Connection (Optional)",size:"small",showStatus:!0,sx:{mb:2}}),t.jsx(lt,{fullWidth:!0,multiline:!0,rows:12,placeholder:"Paste your document content, report text, or any content you want to summarize...",value:S,onChange:a=>X(a.target.value),sx:{mb:2}}),t.jsxs(z,{variant:"caption",color:"text.secondary",children:[S.length," / 50,000 characters"]}),t.jsx(Ft,{sx:{my:2}}),t.jsx(z,{variant:"subtitle2",gutterBottom:!0,children:"Summary Options"}),t.jsxs(at,{fullWidth:!0,size:"small",sx:{mb:2},children:[t.jsx(st,{children:"Tone"}),t.jsx(nt,{value:W,label:"Tone",onChange:a=>F(a.target.value),children:Tr.map(a=>t.jsx(ot,{value:a.value,children:t.jsxs(T,{children:[t.jsx(z,{variant:"body2",children:a.label}),t.jsx(z,{variant:"caption",color:"text.secondary",children:a.description})]})},a.value))})]}),t.jsxs(T,{sx:{mb:2},children:[t.jsxs(z,{variant:"body2",gutterBottom:!0,children:["Summary Length: ",_," sentences"]}),t.jsx(jr,{value:_,onChange:(a,c)=>de(c),min:2,max:15,marks:[{value:2,label:"2"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"}],valueLabelDisplay:"auto"})]}),t.jsxs(T,{sx:{mb:2},children:[t.jsx(z,{variant:"body2",gutterBottom:!0,children:"Focus Areas (optional, max 5)"}),t.jsx(T,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:g.map(a=>t.jsx(Ne,{label:a,size:"small",onDelete:()=>ae(a),sx:{bgcolor:c=>c.palette.mode==="dark"?Ot(c.palette.text.primary,.1):it[200],color:"text.secondary"}},a))}),t.jsx(T,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:Rr.filter(a=>!g.includes(a)).map(a=>t.jsx(Ne,{label:a,size:"small",variant:"outlined",onClick:()=>re(a),disabled:g.length>=5},a))}),t.jsxs(T,{sx:{display:"flex",gap:1},children:[t.jsx(lt,{size:"small",placeholder:"Add custom focus...",value:O,onChange:a=>Z(a.target.value),onKeyDown:a=>a.key==="Enter"&&U(),disabled:g.length>=5,sx:{flex:1}}),t.jsx(ke,{variant:"outlined",size:"small",onClick:U,disabled:!O.trim()||g.length>=5,children:"Add"})]})]}),t.jsxs(Vt,{direction:{xs:"column",sm:"row"},spacing:1,children:[t.jsx(ke,{variant:"contained",fullWidth:!0,size:"large",startIcon:o?t.jsx(ct,{size:20,color:"inherit"}):t.jsx(Ze,{}),onClick:be,disabled:!S.trim()||S.length<10||o||Y,children:o?"Generating...":"Generate Summary"}),t.jsx(ke,{variant:"outlined",fullWidth:!0,size:"large",startIcon:Y?t.jsx(ct,{size:20,color:"inherit"}):t.jsx(Ut,{}),onClick:Re,disabled:!S.trim()||S.length<10||o||Y,children:Y?"Queueing...":"Queue in Background"})]})]})}),t.jsx(Me,{size:{xs:12,md:6},children:t.jsxs(Fe,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(z,{variant:"h6",children:"Generated Summary"}),e&&t.jsxs(T,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t.jsx(Jt,{outputType:pt.TEXT,payload:{title:`Executive Summary (${W})`,content:e},sourceFeature:mt.SUMMARY}),t.jsx(ut,{title:fe?"Copied!":"Copy to clipboard",children:t.jsx(dt,{size:"small",onClick:E,"aria-label":"Copy to clipboard",children:t.jsx(rr,{fontSize:"small"})})}),t.jsx(ut,{title:"Clear",children:t.jsx(dt,{size:"small",onClick:se,"aria-label":"Clear summary",children:t.jsx(qt,{fontSize:"small"})})})]})]}),e?t.jsxs(T,{sx:{flex:1},children:[t.jsx(Fe,{variant:"outlined",sx:{p:2,bgcolor:it[50],minHeight:200,whiteSpace:"pre-wrap"},children:t.jsx(z,{variant:"body1",children:e})}),t.jsxs(T,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:[t.jsx(Ne,{label:`Tone: ${W}`,size:"small",variant:"outlined"}),t.jsx(Ne,{label:`${_} sentences`,size:"small",variant:"outlined"}),g.map(a=>t.jsx(Ne,{label:a,size:"small",variant:"outlined",sx:{borderColor:"divider",color:"text.secondary"}},a))]})]}):t.jsx(T,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:300},children:t.jsxs(T,{sx:{textAlign:"center"},children:[t.jsx(Ze,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(z,{color:"text.secondary",children:'Enter your content and click "Generate Summary" to create an executive summary'})]})})]})})]}),t.jsx(Qt,{open:j,onClose:te,onConfirm:ge,title:"Clear History",message:"Are you sure you want to clear all summary history? This action cannot be undone.",confirmLabel:"Clear All",severity:"warning"})]})}function _r(){return xt(),t.jsx(Ar,{})}export{_r as default};
