import{g as m,j as s,ae as R,v as C,r as a,K as H,a_ as T,M as p,o as x,ak as E,aT as b,aU as L}from"./index-DeRHNZar.js";import{a as j,u as A}from"./useCrossPageActions-BCB3hlt6.js";import{D as v,B as k,S as V}from"./SummarizeRounded-qHrdYjfR.js";const $=m(s.jsx("path",{d:"M21 3.01H3c-1.1 0-2 .9-2 2V8c0 .55.45 1 1 1s1-.45 1-1V5.99c0-.55.45-1 1-1h16c.55 0 1 .45 1 1v12.03c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V16c0-.55-.45-1-1-1s-1 .45-1 1v3.01c0 1.09.89 1.98 1.98 1.98H21c1.1 0 2-.9 2-2V5.01c0-1.1-.9-2-2-2m-9.15 12.14 2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.32-.85-.1-.85.35V11H2c-.55 0-1 .45-1 1s.45 1 1 1h9v1.79c0 .45.54.67.85.36"})),z=m(s.jsx("path",{d:"M8.71 7.71a.996.996 0 0 1 0-1.41l2.59-2.59c.39-.39 1.02-.39 1.41 0L15.3 6.3c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83l4.12 4.12c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L12 15.41l-4.88 4.88c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41l4.12-4.12c.75-.75 1.17-1.77 1.17-2.83v-5.1l-.88.88c-.39.39-1.02.39-1.41 0"})),w=m(s.jsx("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M15 17H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1m0-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"})),g=m(s.jsx("path",{d:"M4 20h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2m0-3h2v2H4zM2 6c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2m4 1H4V5h2zm-2 7h16c1.1 0 2-.9 2-2s-.9-2-2-2H4c-1.1 0-2 .9-2 2s.9 2 2 2m0-3h2v2H4z"}));function K(r,c){const o=R(n=>n.consumeTransfer),t=C(),l=a.useRef(!1),u=a.useRef(c);u.current=c,a.useEffect(()=>{if(l.current)return;const n=o(r);if(!n)return;l.current=!0;const i=u.current[n.action];if(i){const d=j[n.source]||n.source;Promise.resolve(i(n.payload,n)).then(()=>t.show(`Imported from ${d}`,"success")).catch(h=>t.show(`Import failed: ${h?.message||"Unknown error"}`,"error"))}},[o,r,t])}const B={agents:w,query:g,synthesis:z,summary:V,visualization:k,federation:g,documents:v};function U(r){if(!r)return"";const c=Date.now()-r,o=Math.floor(c/6e4);if(o<1)return"just now";if(o<60)return`${o}m ago`;const t=Math.floor(o/60);return t<24?`${t}h ago`:`${Math.floor(t/24)}d ago`}function P({currentFeature:r,onImport:c,label:o="Import from…",variant:t="outlined",size:l="small",disabled:u=!1}){const{getAvailableOutputs:n}=A(r),[i,d]=a.useState(null),h=n(),I=a.useCallback(e=>d(e.currentTarget),[]),f=a.useCallback(()=>d(null),[]),y=a.useCallback(e=>{f(),c&&c(e)},[f,c]);return h.length===0?null:s.jsxs(s.Fragment,{children:[s.jsx(H,{variant:t,size:l,disabled:u,startIcon:s.jsx($,{}),onClick:I,sx:{textTransform:"none",fontWeight:500},children:o}),s.jsxs(T,{anchorEl:i,open:!!i,onClose:f,slotProps:{paper:{sx:{minWidth:260}}},children:[s.jsx(p,{disabled:!0,sx:{opacity:"1 !important"},children:s.jsx(x,{variant:"caption",color:"text.secondary",fontWeight:600,children:"Available outputs"})}),s.jsx(E,{}),h.map(e=>{const M=B[e.featureKey]||v,S=j[e.featureKey]||e.featureKey;return s.jsxs(p,{onClick:()=>y(e),children:[s.jsx(b,{children:s.jsx(M,{fontSize:"small"})}),s.jsx(L,{primary:s.jsx(x,{variant:"body2",noWrap:!0,sx:{maxWidth:200},children:e.title||"Untitled"}),secondary:s.jsxs(x,{variant:"caption",color:"text.secondary",children:[S," · ",U(e.timestamp)]})})]},`${e.featureKey}-${e.timestamp}`)})]})]})}export{P as I,K as u};
