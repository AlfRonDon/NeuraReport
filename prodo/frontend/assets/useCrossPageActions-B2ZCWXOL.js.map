{"version":3,"file":"useCrossPageActions-B2ZCWXOL.js","sources":["../../src/utils/crossPageTypes.js","../../src/hooks/useCrossPageActions.js"],"sourcesContent":["/**\n * Cross-page data flow type definitions.\n *\n * OutputType   – what kind of data a feature produced\n * TransferAction – what the consumer should do with the data\n * FeatureKey   – stable identifier for each feature\n * FEATURE_ACCEPTS – declarative map: which features accept which output types\n * FEATURE_ROUTES  – route path for each feature\n * FEATURE_LABELS  – human-readable label for each feature\n */\n\nexport const OutputType = {\n  TEXT: 'text',\n  RICH_TEXT: 'rich_text',\n  TABLE: 'table',\n  DOCUMENT: 'document',\n  DIAGRAM: 'diagram',\n  DATASET: 'dataset',\n  REPORT: 'report',\n  ANALYSIS: 'analysis',\n}\n\nexport const TransferAction = {\n  OPEN_IN: 'open_in',\n  ADD_TO: 'add_to',\n  CREATE_FROM: 'create_from',\n  CHAT_WITH: 'chat_with',\n  ENRICH: 'enrich',\n  VISUALIZE: 'visualize',\n  SAVE_TO: 'save_to',\n}\n\nexport const FeatureKey = {\n  AGENTS: 'agents',\n  DOCQA: 'docqa',\n  SYNTHESIS: 'synthesis',\n  SUMMARY: 'summary',\n  QUERY: 'query',\n  VISUALIZATION: 'visualization',\n  KNOWLEDGE: 'knowledge',\n  ENRICHMENT: 'enrichment',\n  FEDERATION: 'federation',\n  DOCUMENTS: 'documents',\n  SPREADSHEETS: 'spreadsheets',\n  DASHBOARDS: 'dashboards',\n  WORKFLOWS: 'workflows',\n  INGESTION: 'ingestion',\n  REPORTS: 'reports',\n  DESIGN: 'design',\n  SEARCH: 'search',\n}\n\nexport const FEATURE_ACCEPTS = {\n  [FeatureKey.DOCQA]: [OutputType.TEXT, OutputType.RICH_TEXT, OutputType.DOCUMENT, OutputType.REPORT],\n  [FeatureKey.SYNTHESIS]: [OutputType.TEXT, OutputType.RICH_TEXT, OutputType.DOCUMENT, OutputType.REPORT],\n  [FeatureKey.DOCUMENTS]: [OutputType.TEXT, OutputType.RICH_TEXT, OutputType.ANALYSIS, OutputType.REPORT],\n  [FeatureKey.SPREADSHEETS]: [OutputType.TABLE, OutputType.DATASET],\n  [FeatureKey.DASHBOARDS]: [OutputType.TABLE, OutputType.DIAGRAM, OutputType.DATASET],\n  [FeatureKey.KNOWLEDGE]: [OutputType.TEXT, OutputType.RICH_TEXT, OutputType.DOCUMENT, OutputType.ANALYSIS, OutputType.REPORT],\n  [FeatureKey.ENRICHMENT]: [OutputType.TABLE, OutputType.DATASET],\n  [FeatureKey.VISUALIZATION]: [OutputType.TABLE, OutputType.DATASET, OutputType.TEXT],\n  [FeatureKey.SUMMARY]: [OutputType.TEXT, OutputType.RICH_TEXT, OutputType.DOCUMENT],\n  [FeatureKey.REPORTS]: [OutputType.TABLE, OutputType.DATASET, OutputType.ANALYSIS],\n}\n\nexport const FEATURE_ROUTES = {\n  [FeatureKey.AGENTS]: '/agents',\n  [FeatureKey.DOCQA]: '/docqa',\n  [FeatureKey.SYNTHESIS]: '/synthesis',\n  [FeatureKey.SUMMARY]: '/summary',\n  [FeatureKey.QUERY]: '/query',\n  [FeatureKey.VISUALIZATION]: '/visualization',\n  [FeatureKey.KNOWLEDGE]: '/knowledge',\n  [FeatureKey.ENRICHMENT]: '/enrichment',\n  [FeatureKey.FEDERATION]: '/federation',\n  [FeatureKey.DOCUMENTS]: '/documents',\n  [FeatureKey.SPREADSHEETS]: '/spreadsheets',\n  [FeatureKey.DASHBOARDS]: '/dashboard-builder',\n  [FeatureKey.WORKFLOWS]: '/workflows',\n  [FeatureKey.INGESTION]: '/ingestion',\n  [FeatureKey.REPORTS]: '/reports',\n  [FeatureKey.DESIGN]: '/design',\n  [FeatureKey.SEARCH]: '/search',\n}\n\nexport const FEATURE_LABELS = {\n  [FeatureKey.AGENTS]: 'AI Agents',\n  [FeatureKey.DOCQA]: 'Chat with Docs',\n  [FeatureKey.SYNTHESIS]: 'Synthesis',\n  [FeatureKey.SUMMARY]: 'Summary',\n  [FeatureKey.QUERY]: 'Query Builder',\n  [FeatureKey.VISUALIZATION]: 'Visualization',\n  [FeatureKey.KNOWLEDGE]: 'Knowledge Base',\n  [FeatureKey.ENRICHMENT]: 'Enrichment',\n  [FeatureKey.FEDERATION]: 'Federation',\n  [FeatureKey.DOCUMENTS]: 'Documents',\n  [FeatureKey.SPREADSHEETS]: 'Spreadsheets',\n  [FeatureKey.DASHBOARDS]: 'Dashboard Builder',\n  [FeatureKey.WORKFLOWS]: 'Workflows',\n  [FeatureKey.INGESTION]: 'Ingestion',\n  [FeatureKey.REPORTS]: 'Reports',\n  [FeatureKey.DESIGN]: 'Design',\n  [FeatureKey.SEARCH]: 'Search',\n}\n\n/**\n * For each target feature, which transfer actions make sense.\n * Used by SendToMenu to build contextual action labels.\n */\nexport const FEATURE_ACTIONS = {\n  [FeatureKey.DOCQA]: { action: TransferAction.CHAT_WITH, label: 'Chat with this' },\n  [FeatureKey.SYNTHESIS]: { action: TransferAction.ADD_TO, label: 'Add to Synthesis' },\n  [FeatureKey.DOCUMENTS]: { action: TransferAction.CREATE_FROM, label: 'Create Document' },\n  [FeatureKey.SPREADSHEETS]: { action: TransferAction.OPEN_IN, label: 'Open in Spreadsheet' },\n  [FeatureKey.DASHBOARDS]: { action: TransferAction.ADD_TO, label: 'Add to Dashboard' },\n  [FeatureKey.KNOWLEDGE]: { action: TransferAction.SAVE_TO, label: 'Save to Knowledge' },\n  [FeatureKey.ENRICHMENT]: { action: TransferAction.ENRICH, label: 'Enrich Data' },\n  [FeatureKey.VISUALIZATION]: { action: TransferAction.VISUALIZE, label: 'Visualize' },\n  [FeatureKey.SUMMARY]: { action: TransferAction.OPEN_IN, label: 'Summarize' },\n  [FeatureKey.REPORTS]: { action: TransferAction.CREATE_FROM, label: 'Generate Report' },\n}\n","/**\n * useCrossPageActions – Primary hook for inter-page data flow.\n *\n * Producer pages use: registerOutput(), sendTo(), getAvailableTargets()\n * Consumer pages use: consumeIncoming(), getAvailableOutputs()\n */\nimport { useCallback } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport useCrossPageStore from '@/stores/crossPageStore'\nimport {\n  useInteraction,\n  InteractionType,\n  Reversibility,\n} from '@/components/ux/governance'\nimport { useToast } from '@/components/ToastProvider'\nimport {\n  FEATURE_ACCEPTS,\n  FEATURE_ROUTES,\n  FEATURE_LABELS,\n  FEATURE_ACTIONS,\n} from '@/utils/crossPageTypes'\n\nexport default function useCrossPageActions(currentFeatureKey) {\n  const navigate = useNavigate()\n  const { execute } = useInteraction()\n  const toast = useToast()\n  const setPendingTransfer = useCrossPageStore((s) => s.setPendingTransfer)\n  const consumeTransfer = useCrossPageStore((s) => s.consumeTransfer)\n  const registerOutputFn = useCrossPageStore((s) => s.registerOutput)\n  const getAllOutputs = useCrossPageStore((s) => s.getAllOutputs)\n\n  const sendTo = useCallback(\n    (targetFeatureKey, action, payload, options = {}) => {\n      const targetRoute = FEATURE_ROUTES[targetFeatureKey]\n      if (!targetRoute) return Promise.resolve()\n\n      const targetLabel = FEATURE_LABELS[targetFeatureKey] || targetFeatureKey\n\n      return execute({\n        type: InteractionType.EXECUTE,\n        label: options.label || `Send to ${targetLabel}`,\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        suppressSuccessToast: true,\n        intent: {\n          source: currentFeatureKey,\n          target: targetFeatureKey,\n          action,\n          crossPage: true,\n        },\n        action: async () => {\n          setPendingTransfer({\n            target: targetFeatureKey,\n            action,\n            payload,\n            source: currentFeatureKey,\n          })\n          navigate(targetRoute)\n          toast.show(\n            options.successMessage || `Opening in ${targetLabel}...`,\n            'info',\n          )\n        },\n      })\n    },\n    [currentFeatureKey, execute, navigate, setPendingTransfer, toast],\n  )\n\n  const consumeIncoming = useCallback(\n    () => consumeTransfer(currentFeatureKey),\n    [consumeTransfer, currentFeatureKey],\n  )\n\n  const registerOutput = useCallback(\n    (output) => registerOutputFn(currentFeatureKey, output),\n    [currentFeatureKey, registerOutputFn],\n  )\n\n  const getAvailableTargets = useCallback(\n    (outputType) =>\n      Object.entries(FEATURE_ACCEPTS)\n        .filter(\n          ([key, accepts]) =>\n            key !== currentFeatureKey && accepts.includes(outputType),\n        )\n        .map(([key]) => ({\n          key,\n          route: FEATURE_ROUTES[key],\n          label: FEATURE_LABELS[key] || key,\n          actionInfo: FEATURE_ACTIONS[key] || null,\n        })),\n    [currentFeatureKey],\n  )\n\n  const getAvailableOutputs = useCallback(() => {\n    const accepts = FEATURE_ACCEPTS[currentFeatureKey] || []\n    return getAllOutputs().filter(\n      (o) => o.featureKey !== currentFeatureKey && accepts.includes(o.type),\n    )\n  }, [currentFeatureKey, getAllOutputs])\n\n  return {\n    sendTo,\n    consumeIncoming,\n    registerOutput,\n    getAvailableTargets,\n    getAvailableOutputs,\n  }\n}\n"],"names":["OutputType","TransferAction","FeatureKey","FEATURE_ACCEPTS","FEATURE_ROUTES","FEATURE_LABELS","FEATURE_ACTIONS","useCrossPageActions","currentFeatureKey","navigate","useNavigate","execute","useInteraction","toast","useToast","setPendingTransfer","useCrossPageStore","s","consumeTransfer","registerOutputFn","getAllOutputs","sendTo","useCallback","targetFeatureKey","action","payload","options","targetRoute","targetLabel","InteractionType","Reversibility","consumeIncoming","registerOutput","output","getAvailableTargets","outputType","key","accepts","getAvailableOutputs","o"],"mappings":"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"}