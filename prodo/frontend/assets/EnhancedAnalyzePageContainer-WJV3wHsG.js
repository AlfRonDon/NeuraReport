import{g as P,j as e,cI as K,cJ as He,a$ as qe,u as R,r as m,v as Ve,a as Ye,R as L,I as D,B as x,n as s,q as d,c1 as u,f as n,o as i,K as $,C as z,aV as Ke,a_ as Je,M as Ze,E as Xe,a2 as V,b_ as et,bM as ae,af as H,bh as j,a3 as tt,bS as rt,p as S,a7 as st,aZ as nt,a4 as it,P as Y,bU as Ce,c8 as We,aJ as ze,cD as at,s as ot,cg as _e,bb as lt,c0 as ct,b3 as ce}from"./index-DeRHNZar.js";import{n as Ae,I as dt,Z as xt}from"./ZoomableChart-RyAmiUQg.js";import{W as pt}from"./WarningAmber-Bt52ndVT.js";import{T as oe}from"./TrendingUp-F-tC2Rsx.js";import{L as Q}from"./Lightbulb-D8H23Y3a.js";import{S as le}from"./Security-Cf-yV6AP.js";import{B as $e}from"./DataObject-B5R_V0-1.js";import{R as ht}from"./ReceiptLong-BO9SiLzb.js";import{K as mt}from"./Speed-D0QFa9nh.js";import{B as ut,R as Re}from"./RocketLaunch-D2n9A4hj.js";import{S as gt}from"./Psychology-BbnfWcqo.js";import{A as jt}from"./Article-qoKRFYGy.js";import{C as bt}from"./ConnectionSelector-DMISq3nq.js";import{T as yt}from"./TemplateSelector-25CXlVHt.js";import{A as ft}from"./AiUsageNotice-BgIrRfUH.js";import{T as vt,a as U}from"./Tabs-te2tfeGq.js";import{G as g}from"./Grid-C8zRHJnX.js";import{A as kt,a as wt,b as It}from"./AccordionSummary-C2JzanVw.js";import{C as de}from"./CardContent-B7RWOLhy.js";import"./PieChart-CHoWBHnY.js";import"./string-GBVq1Gk0.js";import"./index-Chjiymov.js";import"./band-CquvqAHh.js";import"./init-Dmth1JHB.js";import"./ordinal-DILIJJjt.js";import"./linear-Btwmcagj.js";import"./defaultLocale-DX6XiGOO.js";import"./time-BWVVNhLt.js";import"./KeyboardArrowRight-B-zFI2kH.js";const St=P(e.jsx("path",{d:"M14.06 9.94 12 9l2.06-.94L15 6l.94 2.06L18 9l-2.06.94L15 12zM4 14l.94-2.06L7 11l-2.06-.94L4 8l-.94 2.06L1 11l2.06.94zm4.5-5 1.09-2.41L12 5.5 9.59 4.41 8.5 2 7.41 4.41 5 5.5l2.41 1.09zm-4 11.5 6-6.01 4 4L23 8.93l-1.41-1.41-7.09 7.97-4-4L3 19z"})),Ct=P(e.jsx("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"})),Ee=P(e.jsx("path",{d:"M3 10h11v2H3zm0-4h11v2H3zm0 8h7v2H3zm17.59-2.07-4.25 4.24-2.12-2.12-1.41 1.41L16.34 19 22 13.34z"})),zt=P([e.jsx("path",{d:"M9 15.5h6v1H9z"},"0"),e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"1"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"2"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"3")]),At=P([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"2"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"3"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-2.5c2.33 0 4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2s-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5"},"4")]),$t=P([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),J=`${qe}/analyze/v2`;async function Wt({file:t,preferences:h={},onProgress:c,signal:a}){if(!t)throw new Error("No file provided for analysis");const p=new FormData;p.append("file",t),Object.keys(h).length>0&&p.append("preferences",JSON.stringify(h));const y=await K(`${J}/upload`,{method:"POST",body:p,signal:a});return He(y,{onEvent:c,errorMessage:"Enhanced document analysis failed"})}async function _t(t,{question:h,includeSources:c=!0,maxContextChunks:a=5}){if(!t)throw new Error("Analysis ID is required");if(!h)throw new Error("Question is required");const p=await K(`${J}/${encodeURIComponent(t)}/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:h,include_sources:c,max_context_chunks:a})});if(!p.ok){const y=await p.text().catch(()=>"");throw new Error(y||`Failed to ask question (${p.status})`)}return p.json()}async function Rt(t,{query:h,includeTrends:c=!0,includeForecasts:a=!1}){if(!t)throw new Error("Analysis ID is required");if(!h)throw new Error("Query is required");const p=await K(`${J}/${encodeURIComponent(t)}/charts/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:h,include_trends:c,include_forecasts:a})});if(!p.ok)throw new Error("Failed to generate charts");return p.json()}async function Et(t,{format:h="json",includeRawData:c=!0,includeCharts:a=!0}){const p=await K(`${J}/${encodeURIComponent(t)}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:h,include_raw_data:c,include_charts:a})});if(!p.ok)throw new Error("Failed to export analysis");return p.blob()}function W({icon:t,label:h,value:c,delay:a=0}){const p=R();return e.jsx(ct,{in:!0,timeout:500+a*100,children:e.jsx(ce,{sx:{minWidth:140,background:p.palette.mode==="dark"?`linear-gradient(135deg, ${n(p.palette.text.primary,.08)} 0%, ${n(p.palette.text.primary,.03)} 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 100%)`,border:`1px solid ${n(p.palette.divider,.15)}`,borderRadius:1,transition:"all 0.3s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{transform:"scale(1.05)",boxShadow:p.palette.mode==="dark"?`0 8px 24px ${n(p.palette.common.black,.3)}`:"0 8px 24px rgba(0,0,0,0.08)"}},children:e.jsx(de,{sx:{py:2,px:2.5,"&:last-child":{pb:2}},children:e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(u,{sx:{bgcolor:p.palette.mode==="dark"?n(p.palette.text.primary,.1):s[200],color:"text.secondary",width:40,height:40},children:t}),e.jsxs(x,{children:[e.jsx(i,{variant:"h5",fontWeight:600,color:"text.primary",children:c}),e.jsx(i,{variant:"caption",color:"text.secondary",fontWeight:500,children:h})]})]})})})})}function Tt({metric:t,index:h}){const c=R(),a=t.change>0,p=t.change<0;return e.jsx(_e,{in:!0,timeout:300+h*50,children:e.jsx(ce,{sx:{minWidth:220,background:`linear-gradient(145deg, ${c.palette.background.paper} 0%, ${n(c.palette.text.primary,.02)} 100%)`,border:`1px solid ${n(c.palette.divider,.1)}`,borderRadius:1,overflow:"hidden",position:"relative",transition:"all 0.3s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{transform:"translateY(-6px)",boxShadow:c.palette.mode==="dark"?`0 12px 32px ${n(c.palette.common.black,.3)}`:"0 12px 32px rgba(0,0,0,0.08)","& .metric-icon":{transform:"scale(1.2) rotate(10deg)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:c.palette.mode==="dark"?s[700]:s[900]}},children:e.jsx(de,{sx:{py:2.5,px:3},children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",fontWeight:600,sx:{textTransform:"uppercase",letterSpacing:.5},children:t.name}),e.jsx(i,{variant:"h4",fontWeight:600,sx:{mt:.5,color:c.palette.text.primary},children:t.raw_value}),t.change!==void 0&&t.change!==null&&e.jsx(S,{size:"small",icon:a?e.jsx(oe,{sx:{fontSize:14}}):p?e.jsx(oe,{sx:{fontSize:14,transform:"rotate(180deg)"}}):null,label:`${a?"+":""}${t.change}%`,sx:{mt:1,height:24,fontWeight:600,bgcolor:c.palette.mode==="dark"?n(c.palette.text.primary,.1):s[100],color:"text.secondary","& .MuiChip-icon":{color:"inherit"}}})]}),e.jsx(x,{className:"metric-icon",sx:{transition:"transform 0.3s cubic-bezier(0.22, 1, 0.36, 1)",color:n(c.palette.text.primary,.15)},children:e.jsx(St,{sx:{fontSize:48}})})]})})})})}function _({insight:t,type:h="insight",index:c=0}){const a=R(),p={insight:{gradient:a.palette.mode==="dark"?`linear-gradient(135deg, ${n(a.palette.text.primary,.08)} 0%, ${n(a.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 100%)`,borderColor:a.palette.mode==="dark"?s[500]:s[700],icon:e.jsx(Q,{}),iconBg:a.palette.mode==="dark"?n(a.palette.text.primary,.1):s[200]},risk:{gradient:a.palette.mode==="dark"?`linear-gradient(135deg, ${n(a.palette.text.primary,.08)} 0%, ${n(a.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 100%)`,borderColor:a.palette.mode==="dark"?s[500]:s[700],icon:e.jsx(le,{}),iconBg:a.palette.mode==="dark"?n(a.palette.text.primary,.1):s[200]},opportunity:{gradient:a.palette.mode==="dark"?`linear-gradient(135deg, ${n(a.palette.text.primary,.08)} 0%, ${n(a.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 100%)`,borderColor:a.palette.mode==="dark"?s[300]:s[500],icon:e.jsx(Re,{}),iconBg:a.palette.mode==="dark"?n(a.palette.text.primary,.1):s[200]},action:{gradient:a.palette.mode==="dark"?`linear-gradient(135deg, ${n(a.palette.text.primary,.08)} 0%, ${n(a.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 100%)`,borderColor:a.palette.mode==="dark"?s[300]:s[500],icon:e.jsx(Ee,{}),iconBg:a.palette.mode==="dark"?n(a.palette.text.primary,.1):s[200]}},{gradient:y,borderColor:f,icon:I,iconBg:M}=p[h]||p.insight,E={critical:{bg:a.palette.mode==="dark"?s[700]:s[900],text:"common.white"},high:{bg:a.palette.mode==="dark"?s[500]:s[700],text:"common.white"},medium:{bg:a.palette.mode==="dark"?s[500]:s[500],text:"common.white"},low:{bg:a.palette.mode==="dark"?s[300]:s[500],text:a.palette.mode==="dark"?s[900]:"common.white"}},A=E[t.priority?.toLowerCase()]||E.medium;return e.jsx(H,{in:!0,timeout:400+c*100,children:e.jsx(ce,{sx:{mb:2,background:y,borderLeft:`4px solid ${f}`,borderRadius:1,overflow:"hidden",transition:"all 0.3s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{transform:"translateX(8px)",boxShadow:`0 8px 24px ${n(f,.2)}`}},children:e.jsx(de,{sx:{py:2.5,px:3},children:e.jsxs(d,{direction:"row",spacing:2,children:[e.jsx(u,{sx:{bgcolor:M,color:f,width:48,height:48},children:I}),e.jsxs(x,{sx:{flex:1},children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1},children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,children:t.title}),t.priority&&e.jsx(S,{label:t.priority,size:"small",sx:{height:22,fontSize:10,fontWeight:600,textTransform:"uppercase",bgcolor:A.bg,color:A.text}}),t.confidence&&e.jsx(S,{label:`${Math.round(t.confidence*100)}% confident`,size:"small",variant:"outlined",sx:{height:22,fontSize:10}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6},children:t.description}),t.suggested_actions?.length>0&&e.jsxs(x,{sx:{mt:2,p:2,bgcolor:n(f,.08),borderRadius:1},children:[e.jsx(i,{variant:"caption",fontWeight:600,color:f,children:"SUGGESTED ACTIONS"}),e.jsx(d,{spacing:.5,sx:{mt:1},children:t.suggested_actions.map((Z,B)=>e.jsxs(d,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{sx:{width:6,height:6,borderRadius:"50%",bgcolor:f}}),e.jsx(i,{variant:"body2",children:Z})]},B))})]})]})]})})})})}function Lt({sentiment:t}){const h=R();if(!t)return null;const a=(y=>{const f=h.palette.mode==="dark"?s[500]:s[700],I=h.palette.mode==="dark"?`linear-gradient(135deg, ${n(h.palette.text.primary,.12)} 0%, ${n(h.palette.text.primary,.06)} 100%)`:`linear-gradient(135deg, ${s[200]} 0%, ${s[100]} 100%)`;return y?.includes("positive")?{icon:e.jsx(At,{sx:{fontSize:32}}),color:f,label:"Positive",gradient:I}:y?.includes("negative")?{icon:e.jsx($t,{sx:{fontSize:32}}),color:f,label:"Negative",gradient:I}:{icon:e.jsx(zt,{sx:{fontSize:32}}),color:f,label:"Neutral",gradient:I}})(t.overall_sentiment),p=Math.round((t.overall_score+1)*50);return e.jsx(j,{hover:!1,sx:{p:2.5},children:e.jsxs(d,{spacing:2,children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(u,{sx:{width:56,height:56,background:a.gradient,color:a.color},children:a.icon}),e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"overline",color:"text.secondary",fontWeight:600,children:"Document Sentiment"}),e.jsx(i,{variant:"h5",fontWeight:600,color:a.color,children:a.label})]}),e.jsx(x,{sx:{textAlign:"center"},children:e.jsxs(x,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(z,{variant:"determinate",value:p,size:60,thickness:6,sx:{color:a.color}}),e.jsx(x,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{variant:"body2",fontWeight:600,color:a.color,children:[p,"%"]})})]})})]}),e.jsxs(d,{direction:"row",spacing:2,children:[e.jsx(S,{size:"small",label:`Tone: ${t.emotional_tone||"Neutral"}`,sx:{bgcolor:h.palette.mode==="dark"?n(h.palette.text.primary,.08):s[100]}}),e.jsx(S,{size:"small",label:`Urgency: ${t.urgency_level||"Normal"}`,sx:{bgcolor:h.palette.mode==="dark"?n(h.palette.text.primary,.08):s[100]}})]})]})})}function Dt({quality:t}){const h=R();if(!t)return null;const c=Math.round((t.quality_score||0)*100),p=(y=>y>=80?h.palette.mode==="dark"?s[500]:s[700]:y>=60?h.palette.mode==="dark"?s[500]:s[500]:h.palette.mode==="dark"?s[300]:s[500])(c);return e.jsx(j,{hover:!1,sx:{p:2.5},children:e.jsxs(d,{spacing:2,children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:2,children:[e.jsxs(x,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(z,{variant:"determinate",value:100,size:80,thickness:6,sx:{color:n(p,.2)}}),e.jsx(z,{variant:"determinate",value:c,size:80,thickness:6,sx:{color:p,position:"absolute",left:0,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsxs(x,{sx:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(i,{variant:"h5",fontWeight:600,color:p,children:c}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Score"})]})]}),e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"overline",color:"text.secondary",fontWeight:600,children:"Data Quality"}),e.jsx(i,{variant:"h6",fontWeight:600,children:c>=80?"Excellent":c>=60?"Good":"Needs Attention"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[t.total_rows," rows, ",t.total_columns," columns"]})]})]}),t.recommendations?.length>0&&e.jsx(x,{sx:{p:1.5,bgcolor:n(p,.1),borderRadius:1},children:e.jsx(i,{variant:"caption",color:"text.secondary",children:t.recommendations[0]})})]})})}function G({children:t,value:h,index:c,...a}){return e.jsx("div",{role:"tabpanel",hidden:h!==c,...a,children:h===c&&e.jsx(H,{in:!0,timeout:300,children:e.jsx(x,{sx:{py:3},children:t})})})}function Pt({qa:t,index:h}){const c=R();return e.jsx(H,{in:!0,timeout:300+h*100,children:e.jsxs(x,{sx:{mb:3},children:[e.jsx(d,{direction:"row",justifyContent:"flex-end",sx:{mb:1.5},children:e.jsx(Y,{sx:{maxWidth:"80%",p:2,px:3,borderRadius:"20px 20px 4px 20px",background:c.palette.mode==="dark"?s[700]:s[900],color:"common.white",boxShadow:`0 4px 12px ${n(c.palette.common.black,.2)}`},children:e.jsx(i,{variant:"body1",fontWeight:500,children:t.question})})}),e.jsxs(d,{direction:"row",sx:{mb:1},children:[e.jsx(u,{sx:{width:36,height:36,mr:1.5,bgcolor:c.palette.mode==="dark"?n(c.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(We,{sx:{fontSize:20}})}),e.jsxs(Y,{sx:{maxWidth:"80%",p:2,px:3,borderRadius:"4px 20px 20px 20px",bgcolor:n(c.palette.background.paper,.8),backdropFilter:"blur(10px)",border:`1px solid ${n(c.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.7},children:t.answer}),t.sources?.length>0&&e.jsxs(x,{sx:{mt:2,pt:2,borderTop:`1px solid ${n(c.palette.divider,.1)}`},children:[e.jsx(i,{variant:"caption",fontWeight:600,color:"text.secondary",children:"Sources:"}),t.sources.slice(0,2).map((a,p)=>e.jsxs(i,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:.5},children:['"',a.content_preview?.slice(0,100),'..."']},p))]})]})]})]})})}function hr(){const t=R(),[h,c]=m.useState(0),[a,p]=m.useState(null),[y,f]=m.useState(!1),[I,M]=m.useState(!1),[E,A]=m.useState(0),[Z,B]=m.useState(""),[l,q]=m.useState(null),[xe,O]=m.useState(null),[Te,X]=m.useState([]),[T,ee]=m.useState(""),[te,pe]=m.useState(!1),[he,me]=m.useState([]),[F,ue]=m.useState(""),[re,ge]=m.useState(!1),[se,ne]=m.useState([]),[je,Le]=m.useState(""),[be,De]=m.useState(""),[ye,ie]=m.useState(null),[fe,ve]=m.useState(!1),[ke]=m.useState({analysis_depth:"standard",focus_areas:[],output_format:"executive",industry:null,enable_predictions:!0,auto_chart_generation:!0,max_charts:10}),N=m.useRef(null),we=m.useRef(null),v=Ve(),{execute:k}=Ye(),Pe=m.useCallback(r=>{r.preventDefault(),f(!0)},[]),Me=m.useCallback(r=>{r.preventDefault(),f(!1)},[]),Be=m.useCallback(r=>{r.preventDefault(),f(!1);const o=r.dataTransfer.files[0];o&&(p(o),O(null),q(null))},[]),Oe=m.useCallback(r=>{const o=r.target.files?.[0];o&&(p(o),O(null),q(null))},[]),Fe=m.useCallback(()=>{if(a)return k({type:D.ANALYZE,label:"Analyze document",reversibility:L.FULLY_REVERSIBLE,blocksNavigation:!0,suppressSuccessToast:!0,intent:{fileName:a?.name},action:async()=>{N.current=new AbortController,M(!0),A(0),B("Initializing AI analysis..."),O(null);try{const r=await Wt({file:a,preferences:ke,connectionId:je||void 0,templateId:be||void 0,signal:N.current?.signal,onProgress:o=>{o.event==="stage"&&(A(o.progress||0),B(o.detail||o.stage||"Processing..."))}});r.event==="result"&&(q(r),X(r.suggested_questions||[]),ne((r.chart_suggestions||[]).map((o,b)=>({...o,...Ae(o,b)})).filter(Boolean)),c(0),v.show("Analysis complete!","success"))}catch(r){r.name==="AbortError"?v.show("Analysis cancelled","info"):O(r.message||"Analysis failed")}finally{M(!1),A(100),N.current=null}}})},[k,a,ke,v]),Ne=m.useCallback(()=>k({type:D.UPDATE,label:"Cancel analysis",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"enhanced-analyze"},action:()=>{N.current&&(N.current.abort(),M(!1),A(0),B(""))}}),[k]),Ie=m.useCallback(()=>{if(!(!l?.analysis_id||!T.trim()))return k({type:D.ANALYZE,label:"Ask analysis question",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id},action:async()=>{pe(!0);try{const r=await _t(l.analysis_id,{question:T.trim(),includeSources:!0});me(o=>[...o,{question:T.trim(),answer:r.answer,sources:r.sources,timestamp:new Date}]),ee(""),r.suggested_followups?.length&&X(r.suggested_followups)}catch(r){v.show(r.message||"Failed to get answer","error")}finally{pe(!1)}}})},[l?.analysis_id,k,T,v]),Se=m.useCallback(()=>{if(!(!l?.analysis_id||!F.trim()))return k({type:D.GENERATE,label:"Generate charts",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id},action:async()=>{ge(!0);try{const r=await Rt(l.analysis_id,{query:F.trim(),includeTrends:!0,includeForecasts:!1});if(r.charts?.length){const o=r.charts.map((b,w)=>({...b,...Ae(b,w)})).filter(Boolean);ne(b=>[...o,...b]),ue(""),v.show(`Generated ${r.charts.length} chart(s)`,"success")}else v.show(r.message||"No charts could be generated for this query. Try a different request or re-analyze the document.","warning")}catch(r){v.show(r.message||"Failed to generate charts","error")}finally{ge(!1)}}})},[l?.analysis_id,F,k,v]),Ue=m.useCallback(r=>{if(l?.analysis_id)return k({type:D.DOWNLOAD,label:`Export analysis (${r.toUpperCase()})`,reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id,format:r},action:async()=>{ie(null),ve(!0);try{const o=await Et(l.analysis_id,{format:r}),b=URL.createObjectURL(o),w=document.createElement("a");w.href=b,w.download=`analysis_${l.analysis_id}.${r}`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(b),v.show(`Exported as ${r.toUpperCase()}`,"success")}catch(o){v.show(o.message||"Export failed","error")}finally{ve(!1)}}})},[l?.analysis_id,k,v]),Ge=m.useCallback(()=>k({type:D.UPDATE,label:"Reset analysis",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"enhanced-analyze"},action:()=>{p(null),q(null),O(null),X([]),me([]),ne([]),c(0)}}),[k]),C=m.useMemo(()=>l?{tables:l.total_tables||l.tables?.length||0,metrics:l.total_metrics||l.metrics?.length||0,entities:l.total_entities||l.entities?.length||0,insights:l.insights?.length||0,risks:l.risks?.length||0,opportunities:l.opportunities?.length||0,charts:se.length}:null,[l,se.length]);return e.jsxs(x,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?`linear-gradient(180deg, ${n(t.palette.text.primary,.02)} 0%, ${t.palette.background.default} 50%)`:`linear-gradient(180deg, ${s[50]} 0%, ${t.palette.background.default} 50%)`},children:[e.jsxs(x,{sx:{pt:4,pb:l?2:4,px:4,background:t.palette.mode==="dark"?`linear-gradient(135deg, ${n(t.palette.text.primary,.06)} 0%, ${n(t.palette.text.primary,.03)} 50%, transparent 100%)`:`linear-gradient(135deg, ${s[100]} 0%, ${s[50]} 50%, transparent 100%)`,borderBottom:`1px solid ${n(t.palette.divider,.1)}`},children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(u,{sx:{width:56,height:56,background:t.palette.mode==="dark"?s[700]:s[900],boxShadow:`0 8px 24px ${n(t.palette.common.black,.2)}`},children:e.jsx(gt,{sx:{fontSize:28}})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h5",fontWeight:600,color:"text.primary",children:"AI Document Analysis"}),e.jsx(i,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Intelligent extraction, analysis, visualization & insights powered by AI"})]})]}),e.jsx(d,{direction:"row",spacing:1.5,children:l&&e.jsxs(e.Fragment,{children:[e.jsx($,{variant:"outlined",startIcon:fe?e.jsx(z,{size:16,color:"inherit"}):e.jsx(Ke,{}),onClick:r=>ie(r.currentTarget),disabled:fe,sx:{borderRadius:1,textTransform:"none",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2}},children:"Export"}),e.jsx(Je,{anchorEl:ye,open:!!ye,onClose:()=>ie(null),PaperProps:{sx:{borderRadius:1,minWidth:140}},children:["json","excel","pdf","csv","markdown","html"].map(r=>e.jsx(Ze,{onClick:()=>Ue(r),children:r.toUpperCase()},r))}),e.jsx($,{variant:"contained",startIcon:e.jsx(Xe,{}),onClick:Ge,sx:{borderRadius:1,textTransform:"none",fontWeight:600,background:t.palette.mode==="dark"?s[700]:s[900],boxShadow:`0 4px 14px ${n(t.palette.common.black,.2)}`,"&:hover":{background:t.palette.mode==="dark"?s[500]:s[700]}},children:"New Analysis"})]})})]}),e.jsx(x,{sx:{mt:3},children:e.jsx(ft,{title:"AI analysis",description:"Uses the document you upload. Results are generated by AI; review before sharing.",chips:[{label:"Source: Uploaded document",color:"default",variant:"outlined"},{label:"Confidence: Review required",color:"warning",variant:"outlined"},{label:"Reversible: No source changes",color:"success",variant:"outlined"}],dense:!0})}),C&&e.jsxs(d,{direction:"row",spacing:2,sx:{mt:3,flexWrap:"wrap"},useFlexGap:!0,children:[e.jsx(W,{icon:e.jsx(V,{}),label:"Tables",value:C.tables,delay:0}),e.jsx(W,{icon:e.jsx(et,{}),label:"Metrics",value:C.metrics,delay:1}),e.jsx(W,{icon:e.jsx($e,{}),label:"Entities",value:C.entities,delay:2}),e.jsx(W,{icon:e.jsx(Q,{}),label:"Insights",value:C.insights,delay:3}),e.jsx(W,{icon:e.jsx(pt,{}),label:"Risks",value:C.risks,delay:4}),e.jsx(W,{icon:e.jsx(oe,{}),label:"Opportunities",value:C.opportunities,delay:5}),e.jsx(W,{icon:e.jsx(ae,{}),label:"Charts",value:C.charts,delay:6})]})]}),e.jsxs(x,{sx:{px:4,py:3,maxWidth:1400,mx:"auto",width:"100%"},children:[!l&&e.jsx(H,{in:!0,children:e.jsxs(x,{children:[e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:3},children:[e.jsx(bt,{value:je,onChange:Le,label:"Analyze from Connection (Optional)",size:"small",showStatus:!0}),e.jsx(yt,{value:be,onChange:De,label:"Report Template (Optional)",size:"small"})]}),e.jsxs(j,{gradient:!0,hover:!1,sx:{p:6,textAlign:"center",cursor:"pointer",border:`2px dashed ${y?t.palette.mode==="dark"?s[500]:s[700]:n(t.palette.divider,.3)}`,bgcolor:y?t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50]:void 0,transition:"all 0.3s cubic-bezier(0.22, 1, 0.36, 1)"},onDragOver:Pe,onDragLeave:Me,onDrop:Be,onClick:()=>we.current?.click(),children:[e.jsx("input",{ref:we,type:"file",hidden:!0,accept:".pdf,.xlsx,.xls,.csv,.doc,.docx,.png,.jpg,.jpeg",onChange:Oe}),!a&&!I&&e.jsxs(x,{children:[e.jsx(u,{sx:{width:100,height:100,mx:"auto",mb:3,background:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[200],animation:`${tt} 3s ease-in-out infinite`},children:e.jsx(rt,{sx:{fontSize:48,color:"text.secondary"}})}),e.jsx(i,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Drop your document here"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"or click to browse files"}),e.jsx(d,{direction:"row",spacing:1,justifyContent:"center",flexWrap:"wrap",children:["PDF","Excel","CSV","Word","Images"].map(r=>e.jsx(S,{label:r,size:"small",sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100]}},r))})]}),a&&!I&&e.jsxs(x,{children:[e.jsx(u,{sx:{width:80,height:80,mx:"auto",mb:3,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100]},children:e.jsx(st,{sx:{fontSize:40,color:"text.secondary"}})}),e.jsx(i,{variant:"h6",fontWeight:600,gutterBottom:!0,children:a.name}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:[(a.size/1024/1024).toFixed(2)," MB"]}),e.jsx($,{variant:"contained",size:"large",onClick:r=>{r.stopPropagation(),Fe()},startIcon:e.jsx(ut,{}),sx:{px:6,py:2,borderRadius:1,fontWeight:600,fontSize:"1.1rem",textTransform:"none",bgcolor:t.palette.mode==="dark"?s[700]:s[900],boxShadow:`0 8px 32px ${n(t.palette.common.black,.2)}`,transition:"all 0.3s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{transform:"scale(1.05)",bgcolor:t.palette.mode==="dark"?s[500]:s[700],boxShadow:`0 12px 40px ${n(t.palette.common.black,.25)}`}},children:"Analyze with AI"})]}),I&&e.jsxs(x,{children:[e.jsxs(x,{sx:{width:120,height:120,mx:"auto",mb:3,position:"relative"},children:[e.jsx(z,{variant:"determinate",value:100,size:120,thickness:4,sx:{color:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[200]}}),e.jsx(z,{variant:"determinate",value:E,size:120,thickness:4,sx:{position:"absolute",left:0,color:t.palette.mode==="dark"?s[500]:s[700],"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(x,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{variant:"h4",fontWeight:600,color:"text.primary",children:[E,"%"]})})]}),e.jsx(i,{variant:"h6",fontWeight:600,gutterBottom:!0,children:Z}),e.jsx(nt,{variant:"determinate",value:E,sx:{maxWidth:400,mx:"auto",mt:2,height:8,borderRadius:4,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[200],"& .MuiLinearProgress-bar":{borderRadius:4,background:t.palette.mode==="dark"?s[700]:s[900]}}}),e.jsx($,{variant:"outlined",startIcon:e.jsx(it,{}),onClick:r=>{r.stopPropagation(),Ne()},sx:{mt:3,borderRadius:1,textTransform:"none"},children:"Cancel"})]})]}),xe&&e.jsx(Y,{sx:{mt:2,p:2,bgcolor:t.palette.mode==="dark"?n(t.palette.error.main,.1):n(t.palette.error.main,.05),border:`1px solid ${n(t.palette.error.main,.3)}`,borderRadius:1},children:e.jsx(i,{color:"error.main",sx:{fontWeight:500},children:xe})})]})}),l&&e.jsx(H,{in:!0,children:e.jsxs(x,{children:[l.warnings?.length>0&&e.jsxs(Y,{sx:{mb:2,p:2,bgcolor:t.palette.mode==="dark"?n(t.palette.warning.main,.1):n(t.palette.warning.main,.05),border:`1px solid ${n(t.palette.warning.main,.3)}`,borderRadius:1},children:[e.jsx(i,{variant:"body2",color:"warning.main",sx:{fontWeight:500},children:"Analysis completed with warnings:"}),l.warnings.map((r,o)=>e.jsx(i,{variant:"body2",color:"text.secondary",sx:{ml:2,mt:.5},children:r},o))]}),e.jsx(j,{hover:!1,sx:{p:0,mb:3},children:e.jsxs(vt,{value:h,onChange:(r,o)=>c(o),variant:"scrollable",scrollButtons:"auto",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"16px",minHeight:64,transition:"all 0.2s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50]},"&.Mui-selected":{color:"text.primary"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0",background:t.palette.mode==="dark"?s[500]:s[900]}},children:[e.jsx(U,{icon:e.jsx(dt,{}),iconPosition:"start",label:"Overview"}),e.jsx(U,{icon:e.jsx(Ce,{}),iconPosition:"start",label:"Q&A"}),e.jsx(U,{icon:e.jsx(ae,{}),iconPosition:"start",label:"Charts"}),e.jsx(U,{icon:e.jsx(V,{}),iconPosition:"start",label:"Data"}),e.jsx(U,{icon:e.jsx(Q,{}),iconPosition:"start",label:"Insights"})]})}),e.jsx(G,{value:h,index:0,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{size:{xs:12,lg:8},children:e.jsxs(j,{sx:{height:"100%"},children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(jt,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Executive Summary"})]}),e.jsx(i,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.8,color:"text.secondary"},children:l.summaries?.executive?.content||l.summaries?.comprehensive?.content||"Summary not available"}),l.summaries?.executive?.bullet_points?.length>0&&e.jsxs(x,{sx:{mt:3,p:2.5,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50],borderRadius:1,border:`1px solid ${n(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,children:"Key Points"}),e.jsx(d,{spacing:1,children:l.summaries.executive.bullet_points.map((r,o)=>e.jsxs(d,{direction:"row",alignItems:"flex-start",spacing:1.5,children:[e.jsx(x,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:t.palette.mode==="dark"?s[700]:s[900],color:"common.white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:600,flexShrink:0,mt:.25},children:o+1}),e.jsx(i,{variant:"body2",children:r})]},o))})]})]})}),e.jsx(g,{size:{xs:12,lg:4},children:e.jsxs(d,{spacing:3,children:[e.jsx(Lt,{sentiment:l.sentiment}),e.jsx(Dt,{quality:l.data_quality})]})}),e.jsx(g,{size:12,children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(mt,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Key Metrics"})]}),e.jsx(d,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:l.metrics?.slice(0,8).map((r,o)=>e.jsx(Tt,{metric:r,index:o},r.id))})]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:r=>r.palette.mode==="dark"?n(r.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(Q,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Top Insights"})]}),l.insights?.slice(0,3).map((r,o)=>e.jsx(_,{insight:r,type:"insight",index:o},r.id))]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(le,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Risks & Opportunities"})]}),l.risks?.slice(0,2).map((r,o)=>e.jsx(_,{insight:r,type:"risk",index:o},r.id)),l.opportunities?.slice(0,2).map((r,o)=>e.jsx(_,{insight:r,type:"opportunity",index:o+2},r.id))]})})]})}),e.jsx(G,{value:h,index:1,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{size:{xs:12,lg:8},children:e.jsxs(j,{sx:{minHeight:500},children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(We,{})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h6",fontWeight:600,children:"Ask AI About Your Document"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Get instant answers with source citations"})]})]}),e.jsx(x,{sx:{minHeight:300,maxHeight:400,overflowY:"auto",mb:3,p:2,bgcolor:n(t.palette.background.default,.5),borderRadius:1},children:he.length===0?e.jsxs(x,{sx:{textAlign:"center",py:6},children:[e.jsx(u,{sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.08):s[100]},children:e.jsx(Ce,{sx:{fontSize:40,color:"text.secondary"}})}),e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Start a conversation"}),e.jsx(i,{variant:"body2",color:"text.disabled",children:"Ask questions about the document content"})]}):he.map((r,o)=>e.jsx(Pt,{qa:r,index:o},o))}),e.jsxs(d,{direction:"row",spacing:2,children:[e.jsx(ze,{fullWidth:!0,placeholder:"Ask a question about your document...",value:T,onChange:r=>ee(r.target.value),onKeyDown:r=>r.key==="Enter"&&!r.shiftKey&&Ie(),disabled:te,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:n(t.palette.background.paper,.8)}}}),e.jsx($,{variant:"contained",onClick:Ie,disabled:!T.trim()||te,sx:{minWidth:56,borderRadius:1,background:t.palette.mode==="dark"?s[700]:s[900],"&:hover":{background:t.palette.mode==="dark"?s[500]:s[700]}},children:te?e.jsx(z,{size:20,color:"inherit"}):e.jsx(at,{})})]})]})}),e.jsx(g,{size:{xs:12,lg:4},children:e.jsxs(j,{children:[e.jsx(i,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Suggested Questions"}),e.jsx(d,{spacing:1.5,children:Te.map((r,o)=>e.jsx($,{variant:"outlined",onClick:()=>ee(r),sx:{textTransform:"none",justifyContent:"flex-start",textAlign:"left",borderRadius:1,py:1.5,px:2,fontWeight:500,borderColor:n(t.palette.divider,.2),"&:hover":{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50],borderColor:t.palette.mode==="dark"?s[500]:s[700]}},children:r},o))})]})})]})}),e.jsxs(G,{value:h,index:2,children:[e.jsxs(j,{sx:{mb:3},children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(ot,{})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h6",fontWeight:600,children:"Generate Charts with Natural Language"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Describe the visualization you want and AI will create it"})]})]}),e.jsxs(d,{direction:"row",spacing:2,children:[e.jsx(ze,{fullWidth:!0,placeholder:'e.g., "Show revenue by quarter as a line chart" or "Compare categories in a pie chart"',value:F,onChange:r=>ue(r.target.value),onKeyDown:r=>r.key==="Enter"&&Se(),disabled:re,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx($,{variant:"contained",onClick:Se,disabled:!F.trim()||re,startIcon:re?e.jsx(z,{size:16,color:"inherit"}):e.jsx(ae,{}),sx:{minWidth:160,borderRadius:1,textTransform:"none",fontWeight:600,background:t.palette.mode==="dark"?s[700]:s[900],"&:hover":{background:t.palette.mode==="dark"?s[500]:s[700]}},children:"Generate"})]})]}),e.jsx(g,{container:!0,spacing:3,children:se.map((r,o)=>e.jsx(g,{size:{xs:12,md:6},children:e.jsx(_e,{in:!0,timeout:300+o*100,children:e.jsx(x,{children:e.jsxs(j,{children:[e.jsx(i,{variant:"h6",fontWeight:600,gutterBottom:!0,children:r.title}),r.description&&e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),e.jsx(x,{sx:{height:320},children:e.jsx(xt,{spec:r,data:r.data,height:300})}),r.ai_insights?.length>0&&e.jsxs(x,{sx:{mt:2,p:2,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.08):s[100],borderRadius:1,border:`1px solid ${n(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"caption",fontWeight:600,color:"text.secondary",children:"AI INSIGHTS"}),r.ai_insights.map((b,w)=>e.jsxs(i,{variant:"body2",sx:{mt:.5},children:["• ",b]},w))]})]})})})},r.id||o))})]}),e.jsx(G,{value:h,index:3,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{size:12,children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(V,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Extracted Tables (",l.tables?.length||0,")"]})]}),l.tables?.map(r=>e.jsxs(kt,{sx:{mb:2,borderRadius:"12px !important",overflow:"hidden","&:before":{display:"none"},boxShadow:"none",border:`1px solid ${n(t.palette.divider,.1)}`},children:[e.jsx(wt,{expandIcon:e.jsx(lt,{}),sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.03):s[50],"&:hover":{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.06):s[100]}},children:e.jsxs(d,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(V,{sx:{color:"text.secondary"}}),e.jsx(i,{fontWeight:600,children:r.title||r.id}),e.jsx(S,{label:`${r.row_count} rows`,size:"small",variant:"outlined",sx:{borderColor:o=>o.palette.mode==="dark"?n(o.palette.text.primary,.3):s[200],color:"text.secondary"}}),e.jsx(S,{label:`${r.column_count} cols`,size:"small",variant:"outlined"})]})}),e.jsx(It,{sx:{p:0},children:e.jsxs(x,{sx:{overflowX:"auto"},children:[e.jsxs(x,{component:"table",sx:{width:"100%",borderCollapse:"collapse","& th":{p:1.5,textAlign:"left",fontWeight:600,fontSize:"12px",textTransform:"uppercase",bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.08):s[100],borderBottom:`2px solid ${t.palette.mode==="dark"?s[700]:s[900]}`},"& td":{p:1.5,fontSize:"0.875rem",borderBottom:`1px solid ${n(t.palette.divider,.1)}`},"& tr:hover td":{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.02):s[50]}},children:[e.jsx("thead",{children:e.jsx("tr",{children:r.headers.map((o,b)=>e.jsx("th",{children:o},b))})}),e.jsx("tbody",{children:r.rows.slice(0,10).map((o,b)=>e.jsx("tr",{children:o.map((w,Qe)=>e.jsx("td",{children:w},Qe))},b))})]}),r.rows.length>10&&e.jsx(x,{sx:{p:2,textAlign:"center",bgcolor:n(s[500],.05)},children:e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Showing 10 of ",r.rows.length," rows"]})})]})})]},r.id))]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx($e,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Entities (",l.entities?.length||0,")"]})]}),e.jsx(d,{spacing:1.5,children:l.entities?.slice(0,20).map(r=>e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{p:1.5,borderRadius:1,bgcolor:n(t.palette.background.default,.5),transition:"all 0.2s cubic-bezier(0.22, 1, 0.36, 1)","&:hover":{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50]}},children:[e.jsx(S,{label:r.type,size:"small",sx:{minWidth:80,fontWeight:600,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontWeight:500,children:r.value}),r.normalized_value&&r.normalized_value!==r.value&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["→ ",r.normalized_value]})]},r.id))})]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(d,{spacing:3,children:[l.invoices?.length>0&&e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(ht,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Invoices Detected"})]}),l.invoices.map(r=>e.jsxs(x,{sx:{p:2,mb:2,borderRadius:1,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50],border:`1px solid ${n(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,children:r.vendor_name}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Invoice #",r.invoice_number," • ",r.invoice_date]}),e.jsxs(i,{variant:"h5",fontWeight:600,color:"text.primary",sx:{mt:1},children:[r.currency," ",r.grand_total]})]},r.id))]}),l.contracts?.length>0&&e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(Ct,{})}),e.jsx(i,{variant:"h6",fontWeight:600,children:"Contracts Detected"})]}),l.contracts.map(r=>e.jsxs(x,{sx:{p:2,borderRadius:1,bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.05):s[50],border:`1px solid ${n(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,children:r.contract_type}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[r.effective_date," → ",r.expiration_date]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Parties: ",r.parties?.map(o=>o.name).join(", ")]})]},r.id))]})]})})]})}),e.jsx(G,{value:h,index:4,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:r=>r.palette.mode==="dark"?n(r.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(Q,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Key Insights (",l.insights?.length||0,")"]})]}),l.insights?.map((r,o)=>e.jsx(_,{insight:r,type:"insight",index:o},r.id))]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(le,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Risks (",l.risks?.length||0,")"]})]}),l.risks?.map((r,o)=>e.jsx(_,{insight:r,type:"risk",index:o},r.id))]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(Re,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Opportunities (",l.opportunities?.length||0,")"]})]}),l.opportunities?.map((r,o)=>e.jsx(_,{insight:r,type:"opportunity",index:o},r.id))]})}),e.jsx(g,{size:{xs:12,md:6},children:e.jsxs(j,{children:[e.jsxs(d,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(u,{sx:{bgcolor:t.palette.mode==="dark"?n(t.palette.text.primary,.1):s[100],color:"text.secondary"},children:e.jsx(Ee,{})}),e.jsxs(i,{variant:"h6",fontWeight:600,children:["Action Items (",l.action_items?.length||0,")"]})]}),l.action_items?.map((r,o)=>e.jsx(_,{insight:r,type:"action",index:o},r.id))]})})]})})]})}),e.jsxs(x,{sx:{textAlign:"center",py:4,mt:4},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Supported formats: PDF, Excel (XLSX, XLS), CSV, Word, Images"}),e.jsx(i,{variant:"caption",color:"text.disabled",sx:{mt:.5,display:"block"},children:"AI-powered analysis with intelligent extraction, multi-mode summaries, Q&A, and visualization"})]})]})]})}export{hr as default};
