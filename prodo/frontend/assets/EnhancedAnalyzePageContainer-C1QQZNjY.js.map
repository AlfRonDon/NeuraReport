{"version":3,"file":"EnhancedAnalyzePageContainer-C1QQZNjY.js","sources":["../../node_modules/@mui/icons-material/esm/AutoGraph.js","../../node_modules/@mui/icons-material/esm/Gavel.js","../../node_modules/@mui/icons-material/esm/PlaylistAddCheck.js","../../node_modules/@mui/icons-material/esm/SentimentNeutral.js","../../node_modules/@mui/icons-material/esm/SentimentSatisfiedAlt.js","../../node_modules/@mui/icons-material/esm/SentimentVeryDissatisfied.js","../../src/features/analyze/services/enhancedAnalyzeApi.js","../../src/features/analyze/containers/EnhancedAnalyzePageContainer.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M14.06 9.94 12 9l2.06-.94L15 6l.94 2.06L18 9l-2.06.94L15 12zM4 14l.94-2.06L7 11l-2.06-.94L4 8l-.94 2.06L1 11l2.06.94zm4.5-5 1.09-2.41L12 5.5 9.59 4.41 8.5 2 7.41 4.41 5 5.5l2.41 1.09zm-4 11.5 6-6.01 4 4L23 8.93l-1.41-1.41-7.09 7.97-4-4L3 19z\"\n}), 'AutoGraph');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z\"\n}), 'Gavel');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 10h11v2H3zm0-4h11v2H3zm0 8h7v2H3zm17.59-2.07-4.25 4.24-2.12-2.12-1.41 1.41L16.34 19 22 13.34z\"\n}), 'PlaylistAddCheck');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 15.5h6v1H9z\"\n}, \"0\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"15.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"1\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"8.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"2\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8\"\n}, \"3\")], 'SentimentNeutral');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"circle\", {\n  cx: \"15.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"0\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"8.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"1\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"15.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"2\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"8.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"3\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-2.5c2.33 0 4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2s-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5\"\n}, \"4\")], 'SentimentSatisfiedAlt');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"circle\", {\n  cx: \"15.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"0\"), /*#__PURE__*/_jsx(\"circle\", {\n  cx: \"8.5\",\n  cy: \"9.5\",\n  r: \"1.5\"\n}, \"1\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5\"\n}, \"2\")], 'SentimentVeryDissatisfied');","/**\n * Enhanced Analyze API - Client for AI-powered document analysis\n *\n * Features:\n * - Document upload with streaming progress\n * - Natural language Q&A\n * - Chart generation from queries\n * - Multi-format export\n * - Collaboration features\n */\n\nimport { API_BASE, fetchWithIntent, handleStreamingResponse } from '@/api/client'\n\nconst API_V2 = `${API_BASE}/analyze/v2`\n\n/**\n * Upload and analyze a document with enhanced AI features\n *\n * @param {Object} options\n * @param {File} options.file - The document file to analyze\n * @param {Object} [options.preferences] - Analysis preferences\n * @param {Function} [options.onProgress] - Callback for progress events\n * @param {AbortSignal} [options.signal] - Abort signal for cancellation\n * @returns {Promise<Object>} The final analysis result\n */\nexport async function uploadAndAnalyzeEnhanced({\n  file,\n  preferences = {},\n  onProgress,\n  signal,\n}) {\n  if (!file) {\n    throw new Error('No file provided for analysis')\n  }\n\n  const form = new FormData()\n  form.append('file', file)\n\n  if (Object.keys(preferences).length > 0) {\n    form.append('preferences', JSON.stringify(preferences))\n  }\n\n  const res = await fetchWithIntent(`${API_V2}/upload`, {\n    method: 'POST',\n    body: form,\n    signal,\n  })\n\n  return handleStreamingResponse(res, {\n    onEvent: onProgress,\n    errorMessage: 'Enhanced document analysis failed',\n  })\n}\n\n/**\n * Get a previously computed analysis result\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} The analysis result\n */\nexport async function getEnhancedAnalysis(analysisId) {\n  if (!analysisId) throw new Error('Analysis ID is required')\n\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}`)\n  if (!res.ok) {\n    const text = await res.text().catch(() => '')\n    throw new Error(text || `Failed to get analysis (${res.status})`)\n  }\n  return res.json()\n}\n\n/**\n * Ask a natural language question about the analyzed document\n *\n * @param {string} analysisId - The analysis ID\n * @param {Object} options\n * @param {string} options.question - The question to ask\n * @param {boolean} [options.includeSources=true] - Include source citations\n * @param {number} [options.maxContextChunks=5] - Max context chunks to use\n * @returns {Promise<Object>} The answer with sources\n */\nexport async function askQuestion(analysisId, { question, includeSources = true, maxContextChunks = 5 }) {\n  if (!analysisId) throw new Error('Analysis ID is required')\n  if (!question) throw new Error('Question is required')\n\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/ask`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      question,\n      include_sources: includeSources,\n      max_context_chunks: maxContextChunks,\n    }),\n  })\n\n  if (!res.ok) {\n    const text = await res.text().catch(() => '')\n    throw new Error(text || `Failed to ask question (${res.status})`)\n  }\n  return res.json()\n}\n\n/**\n * Get suggested questions for an analysis\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Suggested questions\n */\nexport async function getSuggestedQuestions(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/suggested-questions`)\n  if (!res.ok) {\n    throw new Error('Failed to get suggested questions')\n  }\n  return res.json()\n}\n\n/**\n * Generate charts from natural language query\n *\n * @param {string} analysisId - The analysis ID\n * @param {Object} options\n * @param {string} options.query - Natural language chart request\n * @param {boolean} [options.includeTrends=true] - Include trend lines\n * @param {boolean} [options.includeForecasts=false] - Include forecasts\n * @returns {Promise<Object>} Generated charts\n */\nexport async function generateCharts(analysisId, { query, includeTrends = true, includeForecasts = false }) {\n  if (!analysisId) throw new Error('Analysis ID is required')\n  if (!query) throw new Error('Query is required')\n\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/charts/generate`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      query,\n      include_trends: includeTrends,\n      include_forecasts: includeForecasts,\n    }),\n  })\n\n  if (!res.ok) {\n    throw new Error('Failed to generate charts')\n  }\n  return res.json()\n}\n\n/**\n * Get all charts for an analysis\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Charts and suggestions\n */\nexport async function getCharts(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/charts`)\n  if (!res.ok) {\n    throw new Error('Failed to get charts')\n  }\n  return res.json()\n}\n\n/**\n * Get extracted tables\n *\n * @param {string} analysisId - The analysis ID\n * @param {number} [limit=10] - Maximum tables to return\n * @returns {Promise<Object>} Tables data\n */\nexport async function getTables(analysisId, limit = 10) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/tables?limit=${limit}`)\n  if (!res.ok) {\n    throw new Error('Failed to get tables')\n  }\n  return res.json()\n}\n\n/**\n * Get extracted metrics\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Metrics data\n */\nexport async function getMetrics(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/metrics`)\n  if (!res.ok) {\n    throw new Error('Failed to get metrics')\n  }\n  return res.json()\n}\n\n/**\n * Get extracted entities\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Entities data\n */\nexport async function getEntities(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/entities`)\n  if (!res.ok) {\n    throw new Error('Failed to get entities')\n  }\n  return res.json()\n}\n\n/**\n * Get insights, risks, and opportunities\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Insights data\n */\nexport async function getInsights(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/insights`)\n  if (!res.ok) {\n    throw new Error('Failed to get insights')\n  }\n  return res.json()\n}\n\n/**\n * Get data quality assessment\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Data quality report\n */\nexport async function getDataQuality(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/quality`)\n  if (!res.ok) {\n    throw new Error('Failed to get data quality')\n  }\n  return res.json()\n}\n\n/**\n * Get a specific summary mode\n *\n * @param {string} analysisId - The analysis ID\n * @param {string} mode - Summary mode (executive, data, quick, comprehensive, action_items, risks, opportunities)\n * @returns {Promise<Object>} Summary data\n */\nexport async function getSummary(analysisId, mode) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/summary/${mode}`)\n  if (!res.ok) {\n    throw new Error(`Failed to get ${mode} summary`)\n  }\n  return res.json()\n}\n\n/**\n * Export analysis in various formats\n *\n * @param {string} analysisId - The analysis ID\n * @param {Object} options\n * @param {string} options.format - Export format (json, csv, excel, pdf, markdown, html)\n * @param {boolean} [options.includeRawData=true] - Include raw data\n * @param {boolean} [options.includeCharts=true] - Include charts\n * @returns {Promise<Blob>} The exported file\n */\nexport async function exportAnalysis(analysisId, { format = 'json', includeRawData = true, includeCharts = true }) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/export`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      format,\n      include_raw_data: includeRawData,\n      include_charts: includeCharts,\n    }),\n  })\n\n  if (!res.ok) {\n    throw new Error('Failed to export analysis')\n  }\n\n  return res.blob()\n}\n\n/**\n * Compare two documents\n *\n * @param {string} analysisId1 - First analysis ID\n * @param {string} analysisId2 - Second analysis ID\n * @returns {Promise<Object>} Comparison result\n */\nexport async function compareDocuments(analysisId1, analysisId2) {\n  const res = await fetchWithIntent(`${API_V2}/compare`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      analysis_id_1: analysisId1,\n      analysis_id_2: analysisId2,\n    }),\n  })\n\n  if (!res.ok) {\n    throw new Error('Failed to compare documents')\n  }\n  return res.json()\n}\n\n/**\n * Add a comment to an analysis\n *\n * @param {string} analysisId - The analysis ID\n * @param {Object} options\n * @param {string} options.content - Comment content\n * @param {string} [options.elementType] - Type of element (table, chart, insight, metric)\n * @param {string} [options.elementId] - ID of the element\n * @param {string} [options.userId] - User ID\n * @param {string} [options.userName] - User name\n * @returns {Promise<Object>} Created comment\n */\nexport async function addComment(analysisId, { content, elementType, elementId, userId = 'anonymous', userName = 'Anonymous' }) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/comments`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      content,\n      element_type: elementType,\n      element_id: elementId,\n      user_id: userId,\n      user_name: userName,\n    }),\n  })\n\n  if (!res.ok) {\n    throw new Error('Failed to add comment')\n  }\n  return res.json()\n}\n\n/**\n * Get comments for an analysis\n *\n * @param {string} analysisId - The analysis ID\n * @returns {Promise<Object>} Comments\n */\nexport async function getComments(analysisId) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/comments`)\n  if (!res.ok) {\n    throw new Error('Failed to get comments')\n  }\n  return res.json()\n}\n\n/**\n * Create a share link for an analysis\n *\n * @param {string} analysisId - The analysis ID\n * @param {Object} options\n * @param {string} [options.accessLevel='view'] - Access level (view, comment, edit)\n * @param {number} [options.expiresHours] - Hours until expiration\n * @param {boolean} [options.passwordProtected=false] - Require password\n * @param {string[]} [options.allowedEmails=[]] - Allowed email addresses\n * @returns {Promise<Object>} Share link info\n */\nexport async function createShareLink(analysisId, { accessLevel = 'view', expiresHours, passwordProtected = false, allowedEmails = [] }) {\n  const res = await fetchWithIntent(`${API_V2}/${encodeURIComponent(analysisId)}/share`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({\n      access_level: accessLevel,\n      expires_hours: expiresHours,\n      password_protected: passwordProtected,\n      allowed_emails: allowedEmails,\n    }),\n  })\n\n  if (!res.ok) {\n    throw new Error('Failed to create share link')\n  }\n  return res.json()\n}\n\n/**\n * Get available industry options\n *\n * @returns {Promise<Object>} Industry options\n */\nexport async function getIndustryOptions() {\n  const res = await fetchWithIntent(`${API_V2}/config/industries`)\n  if (!res.ok) {\n    throw new Error('Failed to get industry options')\n  }\n  return res.json()\n}\n\n/**\n * Get available export formats\n *\n * @returns {Promise<Object>} Export formats\n */\nexport async function getExportFormats() {\n  const res = await fetchWithIntent(`${API_V2}/config/export-formats`)\n  if (!res.ok) {\n    throw new Error('Failed to get export formats')\n  }\n  return res.json()\n}\n\n/**\n * Get available chart types\n *\n * @returns {Promise<Object>} Chart types\n */\nexport async function getChartTypes() {\n  const res = await fetchWithIntent(`${API_V2}/config/chart-types`)\n  if (!res.ok) {\n    throw new Error('Failed to get chart types')\n  }\n  return res.json()\n}\n\n/**\n * Get available summary modes\n *\n * @returns {Promise<Object>} Summary modes\n */\nexport async function getSummaryModes() {\n  const res = await fetchWithIntent(`${API_V2}/config/summary-modes`)\n  if (!res.ok) {\n    throw new Error('Failed to get summary modes')\n  }\n  return res.json()\n}\n\nexport default {\n  uploadAndAnalyzeEnhanced,\n  getEnhancedAnalysis,\n  askQuestion,\n  getSuggestedQuestions,\n  generateCharts,\n  getCharts,\n  getTables,\n  getMetrics,\n  getEntities,\n  getInsights,\n  getDataQuality,\n  getSummary,\n  exportAnalysis,\n  compareDocuments,\n  addComment,\n  getComments,\n  createShareLink,\n  getIndustryOptions,\n  getExportFormats,\n  getChartTypes,\n  getSummaryModes,\n}\n","import { useCallback, useState, useRef, useMemo } from 'react'\nimport {\n  Box,\n  Typography,\n  Paper,\n  Tabs,\n  Tab,\n  Button,\n  Stack,\n  TextField,\n  CircularProgress,\n  Chip,\n  LinearProgress,\n  Grid,\n  Card,\n  CardContent,\n  IconButton,\n  Tooltip,\n  Menu,\n  MenuItem,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Avatar,\n  Fade,\n  Zoom,\n  Grow,\n  Skeleton,\n  alpha,\n  useTheme,\n} from '@mui/material'\nimport { float, GlassCard } from '@/styles'\nimport RefreshIcon from '@mui/icons-material/Refresh'\nimport AutoAwesomeIcon from '@mui/icons-material/AutoAwesome'\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload'\nimport InsightsOutlinedIcon from '@mui/icons-material/InsightsOutlined'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle'\nimport CancelIcon from '@mui/icons-material/Cancel'\nimport QuestionAnswerIcon from '@mui/icons-material/QuestionAnswer'\nimport BarChartIcon from '@mui/icons-material/BarChart'\nimport TableChartIcon from '@mui/icons-material/TableChart'\nimport WarningAmberIcon from '@mui/icons-material/WarningAmber'\nimport TrendingUpIcon from '@mui/icons-material/TrendingUp'\nimport LightbulbIcon from '@mui/icons-material/Lightbulb'\nimport DownloadIcon from '@mui/icons-material/Download'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport SendIcon from '@mui/icons-material/Send'\nimport AssessmentIcon from '@mui/icons-material/Assessment'\nimport SecurityIcon from '@mui/icons-material/Security'\nimport PlaylistAddCheckIcon from '@mui/icons-material/PlaylistAddCheck'\nimport SentimentSatisfiedAltIcon from '@mui/icons-material/SentimentSatisfiedAlt'\nimport SentimentVeryDissatisfiedIcon from '@mui/icons-material/SentimentVeryDissatisfied'\nimport SentimentNeutralIcon from '@mui/icons-material/SentimentNeutral'\nimport DescriptionIcon from '@mui/icons-material/Description'\nimport DataObjectIcon from '@mui/icons-material/DataObject'\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong'\nimport GavelIcon from '@mui/icons-material/Gavel'\nimport SpeedIcon from '@mui/icons-material/Speed'\nimport BoltIcon from '@mui/icons-material/Bolt'\nimport AutoGraphIcon from '@mui/icons-material/AutoGraph'\nimport PsychologyIcon from '@mui/icons-material/Psychology'\nimport SmartToyIcon from '@mui/icons-material/SmartToy'\nimport RocketLaunchIcon from '@mui/icons-material/RocketLaunch'\nimport ArticleIcon from '@mui/icons-material/Article'\n\nimport ZoomableChart from '../components/ZoomableChart'\nimport ConnectionSelector from '@/components/common/ConnectionSelector'\nimport TemplateSelector from '@/components/common/TemplateSelector'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\nimport AiUsageNotice from '@/components/ai/AiUsageNotice'\nimport {\n  uploadAndAnalyzeEnhanced,\n  askQuestion,\n  generateCharts,\n  exportAnalysis,\n} from '../services/enhancedAnalyzeApi'\nimport { neutral, palette } from '@/app/theme'\n\n// Animated stat card\nfunction StatCard({ icon, label, value, delay = 0 }) {\n  const theme = useTheme()\n  return (\n    <Grow in timeout={500 + delay * 100}>\n      <Card\n        sx={{\n          minWidth: 140,\n          background: theme.palette.mode === 'dark'\n            ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.08)} 0%, ${alpha(theme.palette.text.primary, 0.03)} 100%)`\n            : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 100%)`,\n          border: `1px solid ${alpha(theme.palette.divider, 0.15)}`,\n          borderRadius: 1,  // Figma spec: 8px\n          transition: 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n          '&:hover': {\n            transform: 'scale(1.05)',\n            boxShadow: theme.palette.mode === 'dark' ? `0 8px 24px ${alpha(theme.palette.common.black, 0.3)}` : '0 8px 24px rgba(0,0,0,0.08)',\n          },\n        }}\n      >\n        <CardContent sx={{ py: 2, px: 2.5, '&:last-child': { pb: 2 } }}>\n          <Stack direction=\"row\" alignItems=\"center\" spacing={1.5}>\n            <Avatar\n              sx={{\n                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n                color: 'text.secondary',\n                width: 40,\n                height: 40,\n              }}\n            >\n              {icon}\n            </Avatar>\n            <Box>\n              <Typography variant=\"h5\" fontWeight={600} color=\"text.primary\">\n                {value}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\" fontWeight={500}>\n                {label}\n              </Typography>\n            </Box>\n          </Stack>\n        </CardContent>\n      </Card>\n    </Grow>\n  )\n}\n\n// Enhanced metric card\nfunction MetricCard({ metric, index }) {\n  const theme = useTheme()\n  const isPositive = metric.change > 0\n  const isNegative = metric.change < 0\n\n  return (\n    <Zoom in timeout={300 + index * 50}>\n      <Card\n        sx={{\n          minWidth: 220,\n          background: `linear-gradient(145deg, ${theme.palette.background.paper} 0%, ${alpha(theme.palette.text.primary, 0.02)} 100%)`,\n          border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n          borderRadius: 1,  // Figma spec: 8px\n          overflow: 'hidden',\n          position: 'relative',\n          transition: 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n          '&:hover': {\n            transform: 'translateY(-6px)',\n            boxShadow: theme.palette.mode === 'dark' ? `0 12px 32px ${alpha(theme.palette.common.black, 0.3)}` : '0 12px 32px rgba(0,0,0,0.08)',\n            '& .metric-icon': {\n              transform: 'scale(1.2) rotate(10deg)',\n            },\n          },\n          '&::before': {\n            content: '\"\"',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            height: 4,\n            background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n          },\n        }}\n      >\n        <CardContent sx={{ py: 2.5, px: 3 }}>\n          <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"flex-start\">\n            <Box sx={{ flex: 1 }}>\n              <Typography\n                variant=\"caption\"\n                color=\"text.secondary\"\n                fontWeight={600}\n                sx={{ textTransform: 'uppercase', letterSpacing: 0.5 }}\n              >\n                {metric.name}\n              </Typography>\n              <Typography\n                variant=\"h4\"\n                fontWeight={600}\n                sx={{\n                  mt: 0.5,\n                  color: theme.palette.text.primary,\n                }}\n              >\n                {metric.raw_value}\n              </Typography>\n              {metric.change !== undefined && metric.change !== null && (\n                <Chip\n                  size=\"small\"\n                  icon={isPositive ? <TrendingUpIcon sx={{ fontSize: 14 }} /> : isNegative ? <TrendingUpIcon sx={{ fontSize: 14, transform: 'rotate(180deg)' }} /> : null}\n                  label={`${isPositive ? '+' : ''}${metric.change}%`}\n                  sx={{\n                    mt: 1,\n                    height: 24,\n                    fontWeight: 600,\n                    bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n                    color: 'text.secondary',\n                    '& .MuiChip-icon': {\n                      color: 'inherit',\n                    },\n                  }}\n                />\n              )}\n            </Box>\n            <Box\n              className=\"metric-icon\"\n              sx={{\n                transition: 'transform 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n                color: alpha(theme.palette.text.primary, 0.15),\n              }}\n            >\n              <AutoGraphIcon sx={{ fontSize: 48 }} />\n            </Box>\n          </Stack>\n        </CardContent>\n      </Card>\n    </Zoom>\n  )\n}\n\n// Enhanced insight card\nfunction InsightCard({ insight, type = 'insight', index = 0 }) {\n  const theme = useTheme()\n\n  const config = {\n    insight: {\n      gradient: theme.palette.mode === 'dark'\n        ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.08)} 0%, ${alpha(theme.palette.text.primary, 0.04)} 100%)`\n        : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 100%)`,\n      borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n      icon: <LightbulbIcon />,\n      iconBg: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n    },\n    risk: {\n      gradient: theme.palette.mode === 'dark'\n        ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.08)} 0%, ${alpha(theme.palette.text.primary, 0.04)} 100%)`\n        : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 100%)`,\n      borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n      icon: <SecurityIcon />,\n      iconBg: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n    },\n    opportunity: {\n      gradient: theme.palette.mode === 'dark'\n        ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.08)} 0%, ${alpha(theme.palette.text.primary, 0.04)} 100%)`\n        : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 100%)`,\n      borderColor: theme.palette.mode === 'dark' ? neutral[300] : neutral[500],\n      icon: <RocketLaunchIcon />,\n      iconBg: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n    },\n    action: {\n      gradient: theme.palette.mode === 'dark'\n        ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.08)} 0%, ${alpha(theme.palette.text.primary, 0.04)} 100%)`\n        : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 100%)`,\n      borderColor: theme.palette.mode === 'dark' ? neutral[300] : neutral[500],\n      icon: <PlaylistAddCheckIcon />,\n      iconBg: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n    },\n  }\n\n  const { gradient, borderColor, icon, iconBg } = config[type] || config.insight\n\n  const priorityColors = {\n    critical: { bg: theme.palette.mode === 'dark' ? neutral[700] : neutral[900], text: 'common.white' },\n    high: { bg: theme.palette.mode === 'dark' ? neutral[500] : neutral[700], text: 'common.white' },\n    medium: { bg: theme.palette.mode === 'dark' ? neutral[500] : neutral[500], text: 'common.white' },\n    low: { bg: theme.palette.mode === 'dark' ? neutral[300] : neutral[500], text: theme.palette.mode === 'dark' ? neutral[900] : 'common.white' },\n  }\n\n  const priorityConfig = priorityColors[insight.priority?.toLowerCase()] || priorityColors.medium\n\n  return (\n    <Fade in timeout={400 + index * 100}>\n      <Card\n        sx={{\n          mb: 2,\n          background: gradient,\n          borderLeft: `4px solid ${borderColor}`,\n          borderRadius: 1,  // Figma spec: 8px\n          overflow: 'hidden',\n          transition: 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n          '&:hover': {\n            transform: 'translateX(8px)',\n            boxShadow: `0 8px 24px ${alpha(borderColor, 0.2)}`,\n          },\n        }}\n      >\n        <CardContent sx={{ py: 2.5, px: 3 }}>\n          <Stack direction=\"row\" spacing={2}>\n            <Avatar\n              sx={{\n                bgcolor: iconBg,\n                color: borderColor,\n                width: 48,\n                height: 48,\n              }}\n            >\n              {icon}\n            </Avatar>\n            <Box sx={{ flex: 1 }}>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 1 }}>\n                <Typography variant=\"subtitle1\" fontWeight={600}>\n                  {insight.title}\n                </Typography>\n                {insight.priority && (\n                  <Chip\n                    label={insight.priority}\n                    size=\"small\"\n                    sx={{\n                      height: 22,\n                      fontSize: 10,\n                      fontWeight: 600,\n                      textTransform: 'uppercase',\n                      bgcolor: priorityConfig.bg,\n                      color: priorityConfig.text,\n                    }}\n                  />\n                )}\n                {insight.confidence && (\n                  <Chip\n                    label={`${Math.round(insight.confidence * 100)}% confident`}\n                    size=\"small\"\n                    variant=\"outlined\"\n                    sx={{ height: 22, fontSize: 10 }}\n                  />\n                )}\n              </Stack>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ lineHeight: 1.6 }}>\n                {insight.description}\n              </Typography>\n              {insight.suggested_actions?.length > 0 && (\n                <Box sx={{ mt: 2, p: 2, bgcolor: alpha(borderColor, 0.08), borderRadius: 1 }}>\n                  <Typography variant=\"caption\" fontWeight={600} color={borderColor}>\n                    SUGGESTED ACTIONS\n                  </Typography>\n                  <Stack spacing={0.5} sx={{ mt: 1 }}>\n                    {insight.suggested_actions.map((action, i) => (\n                      <Stack key={i} direction=\"row\" alignItems=\"center\" spacing={1}>\n                        <Box sx={{ width: 6, height: 6, borderRadius: '50%', bgcolor: borderColor }} />\n                        <Typography variant=\"body2\">{action}</Typography>\n                      </Stack>\n                    ))}\n                  </Stack>\n                </Box>\n              )}\n            </Box>\n          </Stack>\n        </CardContent>\n      </Card>\n    </Fade>\n  )\n}\n\n// Sentiment display component\nfunction SentimentDisplay({ sentiment }) {\n  const theme = useTheme()\n  if (!sentiment) return null\n\n  const getSentimentConfig = (level) => {\n    const neutralColor = theme.palette.mode === 'dark' ? neutral[500] : neutral[700]\n    const neutralGradient = theme.palette.mode === 'dark'\n      ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.12)} 0%, ${alpha(theme.palette.text.primary, 0.06)} 100%)`\n      : `linear-gradient(135deg, ${neutral[200]} 0%, ${neutral[100]} 100%)`\n    if (level?.includes('positive')) {\n      return {\n        icon: <SentimentSatisfiedAltIcon sx={{ fontSize: 32 }} />,\n        color: neutralColor,\n        label: 'Positive',\n        gradient: neutralGradient,\n      }\n    }\n    if (level?.includes('negative')) {\n      return {\n        icon: <SentimentVeryDissatisfiedIcon sx={{ fontSize: 32 }} />,\n        color: neutralColor,\n        label: 'Negative',\n        gradient: neutralGradient,\n      }\n    }\n    return {\n      icon: <SentimentNeutralIcon sx={{ fontSize: 32 }} />,\n      color: neutralColor,\n      label: 'Neutral',\n      gradient: neutralGradient,\n    }\n  }\n\n  const config = getSentimentConfig(sentiment.overall_sentiment)\n  const score = Math.round((sentiment.overall_score + 1) * 50) // Convert -1 to 1 â†’ 0 to 100\n\n  return (\n    <GlassCard hover={false} sx={{ p: 2.5 }}>\n      <Stack spacing={2}>\n        <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n          <Avatar\n            sx={{\n              width: 56,\n              height: 56,\n              background: config.gradient,\n              color: config.color,\n            }}\n          >\n            {config.icon}\n          </Avatar>\n          <Box sx={{ flex: 1 }}>\n            <Typography variant=\"overline\" color=\"text.secondary\" fontWeight={600}>\n              Document Sentiment\n            </Typography>\n            <Typography variant=\"h5\" fontWeight={600} color={config.color}>\n              {config.label}\n            </Typography>\n          </Box>\n          <Box sx={{ textAlign: 'center' }}>\n            <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n              <CircularProgress\n                variant=\"determinate\"\n                value={score}\n                size={60}\n                thickness={6}\n                sx={{ color: config.color }}\n              />\n              <Box\n                sx={{\n                  position: 'absolute',\n                  inset: 0,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <Typography variant=\"body2\" fontWeight={600} color={config.color}>\n                  {score}%\n                </Typography>\n              </Box>\n            </Box>\n          </Box>\n        </Stack>\n        <Stack direction=\"row\" spacing={2}>\n          <Chip\n            size=\"small\"\n            label={`Tone: ${sentiment.emotional_tone || 'Neutral'}`}\n            sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100] }}\n          />\n          <Chip\n            size=\"small\"\n            label={`Urgency: ${sentiment.urgency_level || 'Normal'}`}\n            sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100] }}\n          />\n        </Stack>\n      </Stack>\n    </GlassCard>\n  )\n}\n\n// Data quality gauge\nfunction DataQualityGauge({ quality }) {\n  const theme = useTheme()\n  if (!quality) return null\n\n  const score = Math.round((quality.quality_score || 0) * 100)\n  const getColor = (s) => {\n    if (s >= 80) return theme.palette.mode === 'dark' ? neutral[500] : neutral[700]\n    if (s >= 60) return theme.palette.mode === 'dark' ? neutral[500] : neutral[500]\n    return theme.palette.mode === 'dark' ? neutral[300] : neutral[500]\n  }\n  const color = getColor(score)\n\n  return (\n    <GlassCard hover={false} sx={{ p: 2.5 }}>\n      <Stack spacing={2}>\n        <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n          <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n            <CircularProgress\n              variant=\"determinate\"\n              value={100}\n              size={80}\n              thickness={6}\n              sx={{ color: alpha(color, 0.2) }}\n            />\n            <CircularProgress\n              variant=\"determinate\"\n              value={score}\n              size={80}\n              thickness={6}\n              sx={{\n                color: color,\n                position: 'absolute',\n                left: 0,\n                '& .MuiCircularProgress-circle': {\n                  strokeLinecap: 'round',\n                },\n              }}\n            />\n            <Box\n              sx={{\n                position: 'absolute',\n                inset: 0,\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n              }}\n            >\n              <Typography variant=\"h5\" fontWeight={600} color={color}>\n                {score}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Score\n              </Typography>\n            </Box>\n          </Box>\n          <Box sx={{ flex: 1 }}>\n            <Typography variant=\"overline\" color=\"text.secondary\" fontWeight={600}>\n              Data Quality\n            </Typography>\n            <Typography variant=\"h6\" fontWeight={600}>\n              {score >= 80 ? 'Excellent' : score >= 60 ? 'Good' : 'Needs Attention'}\n            </Typography>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {quality.total_rows} rows, {quality.total_columns} columns\n            </Typography>\n          </Box>\n        </Stack>\n        {quality.recommendations?.length > 0 && (\n          <Box sx={{ p: 1.5, bgcolor: alpha(color, 0.1), borderRadius: 1 }}>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {quality.recommendations[0]}\n            </Typography>\n          </Box>\n        )}\n      </Stack>\n    </GlassCard>\n  )\n}\n\n// Tab panel\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div role=\"tabpanel\" hidden={value !== index} {...other}>\n      {value === index && <Fade in timeout={300}><Box sx={{ py: 3 }}>{children}</Box></Fade>}\n    </div>\n  )\n}\n\n// Q&A Message bubble\nfunction QABubble({ qa, index }) {\n  const theme = useTheme()\n  return (\n    <Fade in timeout={300 + index * 100}>\n      <Box sx={{ mb: 3 }}>\n        {/* Question */}\n        <Stack direction=\"row\" justifyContent=\"flex-end\" sx={{ mb: 1.5 }}>\n          <Paper\n            sx={{\n              maxWidth: '80%',\n              p: 2,\n              px: 3,\n              borderRadius: '20px 20px 4px 20px',\n              background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n              color: 'common.white',\n              boxShadow: `0 4px 12px ${alpha(theme.palette.common.black, 0.2)}`,\n            }}\n          >\n            <Typography variant=\"body1\" fontWeight={500}>\n              {qa.question}\n            </Typography>\n          </Paper>\n        </Stack>\n\n        {/* Answer */}\n        <Stack direction=\"row\" sx={{ mb: 1 }}>\n          <Avatar\n            sx={{\n              width: 36,\n              height: 36,\n              mr: 1.5,\n              bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n              color: 'text.secondary',\n            }}\n          >\n            <SmartToyIcon sx={{ fontSize: 20 }} />\n          </Avatar>\n          <Paper\n            sx={{\n              maxWidth: '80%',\n              p: 2,\n              px: 3,\n              borderRadius: '4px 20px 20px 20px',\n              bgcolor: alpha(theme.palette.background.paper, 0.8),\n              backdropFilter: 'blur(10px)',\n              border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n            }}\n          >\n            <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap', lineHeight: 1.7 }}>\n              {qa.answer}\n            </Typography>\n            {qa.sources?.length > 0 && (\n              <Box sx={{ mt: 2, pt: 2, borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}` }}>\n                <Typography variant=\"caption\" fontWeight={600} color=\"text.secondary\">\n                  Sources:\n                </Typography>\n                {qa.sources.slice(0, 2).map((source, i) => (\n                  <Typography key={i} variant=\"caption\" display=\"block\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n                    \"{source.content_preview?.slice(0, 100)}...\"\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </Paper>\n        </Stack>\n      </Box>\n    </Fade>\n  )\n}\n\n// Main component\nexport default function EnhancedAnalyzePageContainer() {\n  const theme = useTheme()\n  const [activeTab, setActiveTab] = useState(0)\n  const [selectedFile, setSelectedFile] = useState(null)\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [isAnalyzing, setIsAnalyzing] = useState(false)\n  const [analysisProgress, setAnalysisProgress] = useState(0)\n  const [progressStage, setProgressStage] = useState('')\n  const [analysisResult, setAnalysisResult] = useState(null)\n  const [error, setError] = useState(null)\n  const [suggestedQuestions, setSuggestedQuestions] = useState([])\n\n  // Q&A state\n  const [question, setQuestion] = useState('')\n  const [isAskingQuestion, setIsAskingQuestion] = useState(false)\n  const [qaHistory, setQaHistory] = useState([])\n\n  // Chart generation state\n  const [chartQuery, setChartQuery] = useState('')\n  const [isGeneratingCharts, setIsGeneratingCharts] = useState(false)\n  const [generatedCharts, setGeneratedCharts] = useState([])\n\n  // Data source selectors\n  const [selectedConnectionId, setSelectedConnectionId] = useState('')\n  const [selectedTemplateId, setSelectedTemplateId] = useState('')\n\n  // Export state\n  const [exportMenuAnchor, setExportMenuAnchor] = useState(null)\n  const [isExporting, setIsExporting] = useState(false)\n\n  // Preferences\n  const [preferences] = useState({\n    analysis_depth: 'standard',\n    focus_areas: [],\n    output_format: 'executive',\n    industry: null,\n    enable_predictions: true,\n    auto_chart_generation: true,\n    max_charts: 10,\n  })\n\n  const abortControllerRef = useRef(null)\n  const fileInputRef = useRef(null)\n  const toast = useToast()\n  const { execute } = useInteraction()\n\n  const handleDragOver = useCallback((e) => {\n    e.preventDefault()\n    setIsDragOver(true)\n  }, [])\n\n  const handleDragLeave = useCallback((e) => {\n    e.preventDefault()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback((e) => {\n    e.preventDefault()\n    setIsDragOver(false)\n    const file = e.dataTransfer.files[0]\n    if (file) {\n      setSelectedFile(file)\n      setError(null)\n      setAnalysisResult(null)\n    }\n  }, [])\n\n  const handleFileSelect = useCallback((e) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setSelectedFile(file)\n      setError(null)\n      setAnalysisResult(null)\n    }\n  }, [])\n\n  const handleAnalyze = useCallback(() => {\n    if (!selectedFile) return undefined\n\n    return execute({\n      type: InteractionType.ANALYZE,\n      label: 'Analyze document',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      blocksNavigation: true,\n      suppressSuccessToast: true,\n      intent: { fileName: selectedFile?.name },\n      action: async () => {\n        abortControllerRef.current = new AbortController()\n\n        setIsAnalyzing(true)\n        setAnalysisProgress(0)\n        setProgressStage('Initializing AI analysis...')\n        setError(null)\n\n        try {\n          const result = await uploadAndAnalyzeEnhanced({\n            file: selectedFile,\n            preferences,\n            connectionId: selectedConnectionId || undefined,\n            templateId: selectedTemplateId || undefined,\n            signal: abortControllerRef.current?.signal,\n            onProgress: (event) => {\n              if (event.event === 'stage') {\n                setAnalysisProgress(event.progress || 0)\n                setProgressStage(event.detail || event.stage || 'Processing...')\n              }\n            },\n          })\n\n          if (result.event === 'result') {\n            setAnalysisResult(result)\n            setSuggestedQuestions(result.suggested_questions || [])\n            setGeneratedCharts(result.chart_suggestions || [])\n            setActiveTab(0)\n            toast.show('Analysis complete!', 'success')\n          }\n        } catch (err) {\n          if (err.name === 'AbortError') {\n            toast.show('Analysis cancelled', 'info')\n          } else {\n            setError(err.message || 'Analysis failed')\n          }\n        } finally {\n          setIsAnalyzing(false)\n          setAnalysisProgress(100)\n          abortControllerRef.current = null\n        }\n      },\n    })\n  }, [execute, selectedFile, preferences, toast])\n\n  const handleCancelAnalysis = useCallback(() => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Cancel analysis',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'enhanced-analyze' },\n      action: () => {\n        if (abortControllerRef.current) {\n          abortControllerRef.current.abort()\n          setIsAnalyzing(false)\n          setAnalysisProgress(0)\n          setProgressStage('')\n        }\n      },\n    })\n  }, [execute])\n\n  const handleAskQuestion = useCallback(() => {\n    if (!analysisResult?.analysis_id || !question.trim()) return undefined\n\n    return execute({\n      type: InteractionType.ANALYZE,\n      label: 'Ask analysis question',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: { analysisId: analysisResult.analysis_id },\n      action: async () => {\n        setIsAskingQuestion(true)\n        try {\n          const response = await askQuestion(analysisResult.analysis_id, {\n            question: question.trim(),\n            includeSources: true,\n          })\n\n          setQaHistory((prev) => [\n            ...prev,\n            {\n              question: question.trim(),\n              answer: response.answer,\n              sources: response.sources,\n              timestamp: new Date(),\n            },\n          ])\n          setQuestion('')\n\n          if (response.suggested_followups?.length) {\n            setSuggestedQuestions(response.suggested_followups)\n          }\n        } catch (err) {\n          toast.show(err.message || 'Failed to get answer', 'error')\n        } finally {\n          setIsAskingQuestion(false)\n        }\n      },\n    })\n  }, [analysisResult?.analysis_id, execute, question, toast])\n\n  const handleGenerateCharts = useCallback(() => {\n    if (!analysisResult?.analysis_id || !chartQuery.trim()) return undefined\n\n    return execute({\n      type: InteractionType.GENERATE,\n      label: 'Generate charts',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: { analysisId: analysisResult.analysis_id },\n      action: async () => {\n        setIsGeneratingCharts(true)\n        try {\n          const response = await generateCharts(analysisResult.analysis_id, {\n            query: chartQuery.trim(),\n            includeTrends: true,\n            includeForecasts: false,\n          })\n\n          if (response.charts?.length) {\n            setGeneratedCharts((prev) => [...response.charts, ...prev])\n            setChartQuery('')\n            toast.show(`Generated ${response.charts.length} chart(s)`, 'success')\n          } else {\n            toast.show(response.message || 'No charts could be generated for this query. Try a different request or re-analyze the document.', 'warning')\n          }\n        } catch (err) {\n          toast.show(err.message || 'Failed to generate charts', 'error')\n        } finally {\n          setIsGeneratingCharts(false)\n        }\n      },\n    })\n  }, [analysisResult?.analysis_id, chartQuery, execute, toast])\n\n  const handleExport = useCallback((format) => {\n    if (!analysisResult?.analysis_id) return undefined\n\n    return execute({\n      type: InteractionType.DOWNLOAD,\n      label: `Export analysis (${format.toUpperCase()})`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: { analysisId: analysisResult.analysis_id, format },\n      action: async () => {\n        setExportMenuAnchor(null)\n        setIsExporting(true)\n\n        try {\n          const blob = await exportAnalysis(analysisResult.analysis_id, { format })\n          const url = URL.createObjectURL(blob)\n          const a = document.createElement('a')\n          a.href = url\n          a.download = `analysis_${analysisResult.analysis_id}.${format}`\n          document.body.appendChild(a)\n          a.click()\n          document.body.removeChild(a)\n          URL.revokeObjectURL(url)\n          toast.show(`Exported as ${format.toUpperCase()}`, 'success')\n        } catch (err) {\n          toast.show(err.message || 'Export failed', 'error')\n        } finally {\n          setIsExporting(false)\n        }\n      },\n    })\n  }, [analysisResult?.analysis_id, execute, toast])\n\n  const handleReset = useCallback(() => {\n    return execute({\n      type: InteractionType.UPDATE,\n      label: 'Reset analysis',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'enhanced-analyze' },\n      action: () => {\n        setSelectedFile(null)\n        setAnalysisResult(null)\n        setError(null)\n        setSuggestedQuestions([])\n        setQaHistory([])\n        setGeneratedCharts([])\n        setActiveTab(0)\n      },\n    })\n  }, [execute])\n\n  // Stats\n  const stats = useMemo(() => {\n    if (!analysisResult) return null\n    return {\n      tables: analysisResult.total_tables || analysisResult.tables?.length || 0,\n      metrics: analysisResult.total_metrics || analysisResult.metrics?.length || 0,\n      entities: analysisResult.total_entities || analysisResult.entities?.length || 0,\n      insights: analysisResult.insights?.length || 0,\n      risks: analysisResult.risks?.length || 0,\n      opportunities: analysisResult.opportunities?.length || 0,\n      charts: generatedCharts.length,\n    }\n  }, [analysisResult, generatedCharts.length])\n\n  return (\n    <Box\n      sx={{\n        minHeight: '100vh',\n        background: theme.palette.mode === 'dark'\n          ? `linear-gradient(180deg, ${alpha(theme.palette.text.primary, 0.02)} 0%, ${theme.palette.background.default} 50%)`\n          : `linear-gradient(180deg, ${neutral[50]} 0%, ${theme.palette.background.default} 50%)`,\n      }}\n    >\n      {/* Hero Header */}\n      <Box\n        sx={{\n          pt: 4,\n          pb: analysisResult ? 2 : 4,\n          px: 4,\n          background: theme.palette.mode === 'dark'\n            ? `linear-gradient(135deg, ${alpha(theme.palette.text.primary, 0.06)} 0%, ${alpha(theme.palette.text.primary, 0.03)} 50%, transparent 100%)`\n            : `linear-gradient(135deg, ${neutral[100]} 0%, ${neutral[50]} 50%, transparent 100%)`,\n          borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n        }}\n      >\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\n          <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n            <Avatar\n              sx={{\n                width: 56,\n                height: 56,\n                background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                boxShadow: `0 8px 24px ${alpha(theme.palette.common.black, 0.2)}`,\n              }}\n            >\n              <PsychologyIcon sx={{ fontSize: 28 }} />\n            </Avatar>\n            <Box>\n              <Typography\n                variant=\"h5\"\n                fontWeight={600}\n                color=\"text.primary\"\n              >\n                AI Document Analysis\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" fontWeight={500}>\n                Intelligent extraction, analysis, visualization & insights powered by AI\n              </Typography>\n            </Box>\n          </Stack>\n          <Stack direction=\"row\" spacing={1.5}>\n            {analysisResult && (\n              <>\n                <Button\n                  variant=\"outlined\"\n                  startIcon={isExporting ? <CircularProgress size={16} color=\"inherit\" /> : <DownloadIcon />}\n                  onClick={(e) => setExportMenuAnchor(e.currentTarget)}\n                  disabled={isExporting}\n                  sx={{\n                    borderRadius: 1,\n                    textTransform: 'none',\n                    fontWeight: 600,\n                    borderWidth: 2,\n                    '&:hover': { borderWidth: 2 },\n                  }}\n                >\n                  Export\n                </Button>\n                <Menu\n                  anchorEl={exportMenuAnchor}\n                  open={Boolean(exportMenuAnchor)}\n                  onClose={() => setExportMenuAnchor(null)}\n                  PaperProps={{\n                    sx: { borderRadius: 1, minWidth: 140 },\n                  }}\n                >\n                  {['json', 'excel', 'pdf', 'csv', 'markdown', 'html'].map((fmt) => (\n                    <MenuItem key={fmt} onClick={() => handleExport(fmt)}>\n                      {fmt.toUpperCase()}\n                    </MenuItem>\n                  ))}\n                </Menu>\n                <Button\n                  variant=\"contained\"\n                  startIcon={<RefreshIcon />}\n                  onClick={handleReset}\n                  sx={{\n                    borderRadius: 1,\n                    textTransform: 'none',\n                    fontWeight: 600,\n                    background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                    boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.2)}`,\n                    '&:hover': {\n                      background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                    },\n                  }}\n                >\n                  New Analysis\n                </Button>\n              </>\n            )}\n          </Stack>\n        </Stack>\n\n        <Box sx={{ mt: 3 }}>\n          <AiUsageNotice\n            title=\"AI analysis\"\n            description=\"Uses the document you upload. Results are generated by AI; review before sharing.\"\n            chips={[\n              { label: 'Source: Uploaded document', color: 'default', variant: 'outlined' },\n              { label: 'Confidence: Review required', color: 'warning', variant: 'outlined' },\n              { label: 'Reversible: No source changes', color: 'success', variant: 'outlined' },\n            ]}\n            dense\n          />\n        </Box>\n\n        {/* Stats Bar */}\n        {stats && (\n          <Stack direction=\"row\" spacing={2} sx={{ mt: 3, flexWrap: 'wrap' }} useFlexGap>\n            <StatCard icon={<TableChartIcon />} label=\"Tables\" value={stats.tables} delay={0} />\n            <StatCard icon={<AssessmentIcon />} label=\"Metrics\" value={stats.metrics} delay={1} />\n            <StatCard icon={<DataObjectIcon />} label=\"Entities\" value={stats.entities} delay={2} />\n            <StatCard icon={<LightbulbIcon />} label=\"Insights\" value={stats.insights} delay={3} />\n            <StatCard icon={<WarningAmberIcon />} label=\"Risks\" value={stats.risks} delay={4} />\n            <StatCard icon={<TrendingUpIcon />} label=\"Opportunities\" value={stats.opportunities} delay={5} />\n            <StatCard icon={<BarChartIcon />} label=\"Charts\" value={stats.charts} delay={6} />\n          </Stack>\n        )}\n      </Box>\n\n      {/* Main Content */}\n      <Box sx={{ px: 4, py: 3, maxWidth: 1400, mx: 'auto', width: '100%' }}>\n        {/* Upload Section */}\n        {!analysisResult && (\n          <Fade in>\n            <Box>\n              {/* Data Source Selectors */}\n              <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} sx={{ mb: 3 }}>\n                <ConnectionSelector\n                  value={selectedConnectionId}\n                  onChange={setSelectedConnectionId}\n                  label=\"Analyze from Connection (Optional)\"\n                  size=\"small\"\n                  showStatus\n                />\n                <TemplateSelector\n                  value={selectedTemplateId}\n                  onChange={setSelectedTemplateId}\n                  label=\"Report Template (Optional)\"\n                  size=\"small\"\n                />\n              </Stack>\n\n              {/* Dropzone */}\n              <GlassCard\n                gradient\n                hover={false}\n                sx={{\n                  p: 6,\n                  textAlign: 'center',\n                  cursor: 'pointer',\n                  border: `2px dashed ${isDragOver ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700]) : alpha(theme.palette.divider, 0.3)}`,\n                  bgcolor: isDragOver ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50]) : undefined,\n                  transition: 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n                }}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  hidden\n                  accept=\".pdf,.xlsx,.xls,.csv,.doc,.docx,.png,.jpg,.jpeg\"\n                  onChange={handleFileSelect}\n                />\n\n                {!selectedFile && !isAnalyzing && (\n                  <Box>\n                    <Avatar\n                      sx={{\n                        width: 100,\n                        height: 100,\n                        mx: 'auto',\n                        mb: 3,\n                        background: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n                        animation: `${float} 3s ease-in-out infinite`,\n                      }}\n                    >\n                      <CloudUploadIcon sx={{ fontSize: 48, color: 'text.secondary' }} />\n                    </Avatar>\n                    <Typography variant=\"h5\" fontWeight={600} gutterBottom>\n                      Drop your document here\n                    </Typography>\n                    <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                      or click to browse files\n                    </Typography>\n                    <Stack direction=\"row\" spacing={1} justifyContent=\"center\" flexWrap=\"wrap\">\n                      {['PDF', 'Excel', 'CSV', 'Word', 'Images'].map((type) => (\n                        <Chip\n                          key={type}\n                          label={type}\n                          size=\"small\"\n                          sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100] }}\n                        />\n                      ))}\n                    </Stack>\n                  </Box>\n                )}\n\n                {selectedFile && !isAnalyzing && (\n                  <Box>\n                    <Avatar\n                      sx={{\n                        width: 80,\n                        height: 80,\n                        mx: 'auto',\n                        mb: 3,\n                        bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n                      }}\n                    >\n                      <CheckCircleIcon sx={{ fontSize: 40, color: 'text.secondary' }} />\n                    </Avatar>\n                    <Typography variant=\"h6\" fontWeight={600} gutterBottom>\n                      {selectedFile.name}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n                      {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n                    </Typography>\n                    <Button\n                      variant=\"contained\"\n                      size=\"large\"\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        handleAnalyze()\n                      }}\n                      startIcon={<BoltIcon />}\n                      sx={{\n                        px: 6,\n                        py: 2,\n                        borderRadius: 1,  // Figma spec: 8px\n                        fontWeight: 600,\n                        fontSize: '1.1rem',\n                        textTransform: 'none',\n                        bgcolor: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                        boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.2)}`,\n                        transition: 'all 0.3s cubic-bezier(0.22, 1, 0.36, 1)',\n                        '&:hover': {\n                          transform: 'scale(1.05)',\n                          bgcolor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                          boxShadow: `0 12px 40px ${alpha(theme.palette.common.black, 0.25)}`,\n                        },\n                      }}\n                    >\n                      Analyze with AI\n                    </Button>\n                  </Box>\n                )}\n\n                {isAnalyzing && (\n                  <Box>\n                    <Box\n                      sx={{\n                        width: 120,\n                        height: 120,\n                        mx: 'auto',\n                        mb: 3,\n                        position: 'relative',\n                      }}\n                    >\n                      <CircularProgress\n                        variant=\"determinate\"\n                        value={100}\n                        size={120}\n                        thickness={4}\n                        sx={{ color: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200] }}\n                      />\n                      <CircularProgress\n                        variant=\"determinate\"\n                        value={analysisProgress}\n                        size={120}\n                        thickness={4}\n                        sx={{\n                          position: 'absolute',\n                          left: 0,\n                          color: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                          '& .MuiCircularProgress-circle': { strokeLinecap: 'round' },\n                        }}\n                      />\n                      <Box\n                        sx={{\n                          position: 'absolute',\n                          inset: 0,\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        <Typography variant=\"h4\" fontWeight={600} color=\"text.primary\">\n                          {analysisProgress}%\n                        </Typography>\n                      </Box>\n                    </Box>\n                    <Typography variant=\"h6\" fontWeight={600} gutterBottom>\n                      {progressStage}\n                    </Typography>\n                    <LinearProgress\n                      variant=\"determinate\"\n                      value={analysisProgress}\n                      sx={{\n                        maxWidth: 400,\n                        mx: 'auto',\n                        mt: 2,\n                        height: 8,\n                        borderRadius: 4,\n                        bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200],\n                        '& .MuiLinearProgress-bar': {\n                          borderRadius: 4,\n                          background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                        },\n                      }}\n                    />\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<CancelIcon />}\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        handleCancelAnalysis()\n                      }}\n                      sx={{ mt: 3, borderRadius: 1, textTransform: 'none' }}\n                    >\n                      Cancel\n                    </Button>\n                  </Box>\n                )}\n              </GlassCard>\n\n              {error && (\n                <Paper\n                  sx={{\n                    mt: 2,\n                    p: 2,\n                    bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.error.main, 0.1) : alpha(theme.palette.error.main, 0.05),\n                    border: `1px solid ${alpha(theme.palette.error.main, 0.3)}`,\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography color=\"error.main\" sx={{ fontWeight: 500 }}>{error}</Typography>\n                </Paper>\n              )}\n            </Box>\n          </Fade>\n        )}\n\n        {/* Results Section */}\n        {analysisResult && (\n          <Fade in>\n            <Box>\n              {/* Warnings from partial failures */}\n              {analysisResult.warnings?.length > 0 && (\n                <Paper\n                  sx={{\n                    mb: 2,\n                    p: 2,\n                    bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.warning.main, 0.1) : alpha(theme.palette.warning.main, 0.05),\n                    border: `1px solid ${alpha(theme.palette.warning.main, 0.3)}`,\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography variant=\"body2\" color=\"warning.main\" sx={{ fontWeight: 500 }}>\n                    Analysis completed with warnings:\n                  </Typography>\n                  {analysisResult.warnings.map((w, i) => (\n                    <Typography key={i} variant=\"body2\" color=\"text.secondary\" sx={{ ml: 2, mt: 0.5 }}>\n                      {w}\n                    </Typography>\n                  ))}\n                </Paper>\n              )}\n\n              {/* Tabs */}\n              <GlassCard hover={false} sx={{ p: 0, mb: 3 }}>\n                <Tabs\n                  value={activeTab}\n                  onChange={(e, v) => setActiveTab(v)}\n                  variant=\"scrollable\"\n                  scrollButtons=\"auto\"\n                  sx={{\n                    '& .MuiTab-root': {\n                      textTransform: 'none',\n                      fontWeight: 600,\n                      fontSize: '16px',\n                      minHeight: 64,\n                      transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n                      '&:hover': {\n                        bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                      },\n                      '&.Mui-selected': {\n                        color: 'text.primary',\n                      },\n                    },\n                    '& .MuiTabs-indicator': {\n                      height: 3,\n                      borderRadius: '3px 3px 0 0',\n                      background: theme.palette.mode === 'dark' ? neutral[500] : neutral[900],\n                    },\n                  }}\n                >\n                  <Tab icon={<InsightsOutlinedIcon />} iconPosition=\"start\" label=\"Overview\" />\n                  <Tab icon={<QuestionAnswerIcon />} iconPosition=\"start\" label=\"Q&A\" />\n                  <Tab icon={<BarChartIcon />} iconPosition=\"start\" label=\"Charts\" />\n                  <Tab icon={<TableChartIcon />} iconPosition=\"start\" label=\"Data\" />\n                  <Tab icon={<LightbulbIcon />} iconPosition=\"start\" label=\"Insights\" />\n                </Tabs>\n              </GlassCard>\n\n              {/* Overview Tab */}\n              <TabPanel value={activeTab} index={0}>\n                <Grid container spacing={3}>\n                  {/* Executive Summary */}\n                  <Grid size={{ xs: 12, lg: 8 }}>\n                    <GlassCard sx={{ height: '100%' }}>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 2 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <ArticleIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Executive Summary\n                        </Typography>\n                      </Stack>\n                      <Typography\n                        variant=\"body1\"\n                        sx={{ whiteSpace: 'pre-wrap', lineHeight: 1.8, color: 'text.secondary' }}\n                      >\n                        {analysisResult.summaries?.executive?.content ||\n                          analysisResult.summaries?.comprehensive?.content ||\n                          'Summary not available'}\n                      </Typography>\n\n                      {analysisResult.summaries?.executive?.bullet_points?.length > 0 && (\n                        <Box\n                          sx={{\n                            mt: 3,\n                            p: 2.5,\n                            bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                            borderRadius: 1,  // Figma spec: 8px\n                            border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                          }}\n                        >\n                          <Typography variant=\"subtitle2\" fontWeight={600} gutterBottom>\n                            Key Points\n                          </Typography>\n                          <Stack spacing={1}>\n                            {analysisResult.summaries.executive.bullet_points.map((point, i) => (\n                              <Stack key={i} direction=\"row\" alignItems=\"flex-start\" spacing={1.5}>\n                                <Box\n                                  sx={{\n                                    width: 24,\n                                    height: 24,\n                                    borderRadius: '50%',\n                                    bgcolor: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                                    color: 'common.white',\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    fontSize: 12,\n                                    fontWeight: 600,\n                                    flexShrink: 0,\n                                    mt: 0.25,\n                                  }}\n                                >\n                                  {i + 1}\n                                </Box>\n                                <Typography variant=\"body2\">{point}</Typography>\n                              </Stack>\n                            ))}\n                          </Stack>\n                        </Box>\n                      )}\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Sidebar */}\n                  <Grid size={{ xs: 12, lg: 4 }}>\n                    <Stack spacing={3}>\n                      <SentimentDisplay sentiment={analysisResult.sentiment} />\n                      <DataQualityGauge quality={analysisResult.data_quality} />\n                    </Stack>\n                  </Grid>\n\n                  {/* Key Metrics */}\n                  <Grid size={12}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <SpeedIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Key Metrics\n                        </Typography>\n                      </Stack>\n                      <Stack direction=\"row\" spacing={2} flexWrap=\"wrap\" useFlexGap>\n                        {analysisResult.metrics?.slice(0, 8).map((metric, i) => (\n                          <MetricCard key={metric.id} metric={metric} index={i} />\n                        ))}\n                      </Stack>\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Top Insights Preview */}\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: (t) => t.palette.mode === 'dark' ? alpha(t.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <LightbulbIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Top Insights\n                        </Typography>\n                      </Stack>\n                      {analysisResult.insights?.slice(0, 3).map((insight, i) => (\n                        <InsightCard key={insight.id} insight={insight} type=\"insight\" index={i} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Risks & Opportunities Preview */}\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <SecurityIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Risks & Opportunities\n                        </Typography>\n                      </Stack>\n                      {analysisResult.risks?.slice(0, 2).map((risk, i) => (\n                        <InsightCard key={risk.id} insight={risk} type=\"risk\" index={i} />\n                      ))}\n                      {analysisResult.opportunities?.slice(0, 2).map((opp, i) => (\n                        <InsightCard key={opp.id} insight={opp} type=\"opportunity\" index={i + 2} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              {/* Q&A Tab */}\n              <TabPanel value={activeTab} index={1}>\n                <Grid container spacing={3}>\n                  <Grid size={{ xs: 12, lg: 8 }}>\n                    <GlassCard sx={{ minHeight: 500 }}>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <SmartToyIcon />\n                        </Avatar>\n                        <Box>\n                          <Typography variant=\"h6\" fontWeight={600}>\n                            Ask AI About Your Document\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Get instant answers with source citations\n                          </Typography>\n                        </Box>\n                      </Stack>\n\n                      {/* Chat Area */}\n                      <Box\n                        sx={{\n                          minHeight: 300,\n                          maxHeight: 400,\n                          overflowY: 'auto',\n                          mb: 3,\n                          p: 2,\n                          bgcolor: alpha(theme.palette.background.default, 0.5),\n                          borderRadius: 1,  // Figma spec: 8px\n                        }}\n                      >\n                        {qaHistory.length === 0 ? (\n                          <Box sx={{ textAlign: 'center', py: 6 }}>\n                            <Avatar\n                              sx={{\n                                width: 80,\n                                height: 80,\n                                mx: 'auto',\n                                mb: 2,\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n                              }}\n                            >\n                              <QuestionAnswerIcon sx={{ fontSize: 40, color: 'text.secondary' }} />\n                            </Avatar>\n                            <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n                              Start a conversation\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.disabled\">\n                              Ask questions about the document content\n                            </Typography>\n                          </Box>\n                        ) : (\n                          qaHistory.map((qa, idx) => <QABubble key={idx} qa={qa} index={idx} />)\n                        )}\n                      </Box>\n\n                      {/* Input */}\n                      <Stack direction=\"row\" spacing={2}>\n                        <TextField\n                          fullWidth\n                          placeholder=\"Ask a question about your document...\"\n                          value={question}\n                          onChange={(e) => setQuestion(e.target.value)}\n                          onKeyDown={(e) => e.key === 'Enter' && !e.shiftKey && handleAskQuestion()}\n                          disabled={isAskingQuestion}\n                          sx={{\n                            '& .MuiOutlinedInput-root': {\n                              borderRadius: 1,  // Figma spec: 8px\n                              bgcolor: alpha(theme.palette.background.paper, 0.8),\n                            },\n                          }}\n                        />\n                        <Button\n                          variant=\"contained\"\n                          onClick={handleAskQuestion}\n                          disabled={!question.trim() || isAskingQuestion}\n                          sx={{\n                            minWidth: 56,\n                            borderRadius: 1,  // Figma spec: 8px\n                            background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                            '&:hover': {\n                              background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                            },\n                          }}\n                        >\n                          {isAskingQuestion ? <CircularProgress size={20} color=\"inherit\" /> : <SendIcon />}\n                        </Button>\n                      </Stack>\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Suggested Questions */}\n                  <Grid size={{ xs: 12, lg: 4 }}>\n                    <GlassCard>\n                      <Typography variant=\"subtitle1\" fontWeight={600} gutterBottom>\n                        Suggested Questions\n                      </Typography>\n                      <Stack spacing={1.5}>\n                        {suggestedQuestions.map((q, idx) => (\n                          <Button\n                            key={idx}\n                            variant=\"outlined\"\n                            onClick={() => setQuestion(q)}\n                            sx={{\n                              textTransform: 'none',\n                              justifyContent: 'flex-start',\n                              textAlign: 'left',\n                              borderRadius: 1,\n                              py: 1.5,\n                              px: 2,\n                              fontWeight: 500,\n                              borderColor: alpha(theme.palette.divider, 0.2),\n                              '&:hover': {\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                                borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                              },\n                            }}\n                          >\n                            {q}\n                          </Button>\n                        ))}\n                      </Stack>\n                    </GlassCard>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              {/* Charts Tab */}\n              <TabPanel value={activeTab} index={2}>\n                <GlassCard sx={{ mb: 3 }}>\n                  <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                    <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                      <AutoAwesomeIcon />\n                    </Avatar>\n                    <Box>\n                      <Typography variant=\"h6\" fontWeight={600}>\n                        Generate Charts with Natural Language\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Describe the visualization you want and AI will create it\n                      </Typography>\n                    </Box>\n                  </Stack>\n                  <Stack direction=\"row\" spacing={2}>\n                    <TextField\n                      fullWidth\n                      placeholder='e.g., \"Show revenue by quarter as a line chart\" or \"Compare categories in a pie chart\"'\n                      value={chartQuery}\n                      onChange={(e) => setChartQuery(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && handleGenerateCharts()}\n                      disabled={isGeneratingCharts}\n                      sx={{\n                        '& .MuiOutlinedInput-root': {\n                          borderRadius: 1,  // Figma spec: 8px\n                        },\n                      }}\n                    />\n                    <Button\n                      variant=\"contained\"\n                      onClick={handleGenerateCharts}\n                      disabled={!chartQuery.trim() || isGeneratingCharts}\n                      startIcon={isGeneratingCharts ? <CircularProgress size={16} color=\"inherit\" /> : <BarChartIcon />}\n                      sx={{\n                        minWidth: 160,\n                        borderRadius: 1,  // Figma spec: 8px\n                        textTransform: 'none',\n                        fontWeight: 600,\n                        background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n                        '&:hover': {\n                          background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                        },\n                      }}\n                    >\n                      Generate\n                    </Button>\n                  </Stack>\n                </GlassCard>\n\n                <Grid container spacing={3}>\n                  {generatedCharts.map((chart, idx) => (\n                    <Grid size={{ xs: 12, md: 6 }} key={chart.id || idx}>\n                      <Zoom in timeout={300 + idx * 100}>\n                        <Box>\n                          <GlassCard>\n                            <Typography variant=\"h6\" fontWeight={600} gutterBottom>\n                              {chart.title}\n                            </Typography>\n                            {chart.description && (\n                              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                                {chart.description}\n                              </Typography>\n                            )}\n                            <Box sx={{ height: 320 }}>\n                              <ZoomableChart chart={chart} data={chart.data} height={300} />\n                            </Box>\n                            {chart.ai_insights?.length > 0 && (\n                              <Box\n                                sx={{\n                                  mt: 2,\n                                  p: 2,\n                                  bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n                                  borderRadius: 1,\n                                  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n                                }}\n                              >\n                                <Typography variant=\"caption\" fontWeight={600} color=\"text.secondary\">\n                                  AI INSIGHTS\n                                </Typography>\n                                {chart.ai_insights.map((insight, i) => (\n                                  <Typography key={i} variant=\"body2\" sx={{ mt: 0.5 }}>\n                                    â€¢ {insight}\n                                  </Typography>\n                                ))}\n                              </Box>\n                            )}\n                          </GlassCard>\n                        </Box>\n                      </Zoom>\n                    </Grid>\n                  ))}\n                </Grid>\n              </TabPanel>\n\n              {/* Data Tab */}\n              <TabPanel value={activeTab} index={3}>\n                <Grid container spacing={3}>\n                  {/* Tables */}\n                  <Grid size={12}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <TableChartIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Extracted Tables ({analysisResult.tables?.length || 0})\n                        </Typography>\n                      </Stack>\n                      {analysisResult.tables?.map((table) => (\n                        <Accordion\n                          key={table.id}\n                          sx={{\n                            mb: 2,\n                            borderRadius: '12px !important',\n                            overflow: 'hidden',\n                            '&:before': { display: 'none' },\n                            boxShadow: 'none',\n                            border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                          }}\n                        >\n                          <AccordionSummary\n                            expandIcon={<ExpandMoreIcon />}\n                            sx={{\n                              bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.03) : neutral[50],\n                              '&:hover': { bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.06) : neutral[100] },\n                            }}\n                          >\n                            <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                              <TableChartIcon sx={{ color: 'text.secondary' }} />\n                              <Typography fontWeight={600}>{table.title || table.id}</Typography>\n                              <Chip label={`${table.row_count} rows`} size=\"small\" variant=\"outlined\" sx={{ borderColor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.3) : neutral[200], color: 'text.secondary' }} />\n                              <Chip label={`${table.column_count} cols`} size=\"small\" variant=\"outlined\" />\n                            </Stack>\n                          </AccordionSummary>\n                          <AccordionDetails sx={{ p: 0 }}>\n                            <Box sx={{ overflowX: 'auto' }}>\n                              <Box\n                                component=\"table\"\n                                sx={{\n                                  width: '100%',\n                                  borderCollapse: 'collapse',\n                                  '& th': {\n                                    p: 1.5,\n                                    textAlign: 'left',\n                                    fontWeight: 600,\n                                    fontSize: '12px',\n                                    textTransform: 'uppercase',\n                                    bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n                                    borderBottom: `2px solid ${theme.palette.mode === 'dark' ? neutral[700] : neutral[900]}`,\n                                  },\n                                  '& td': {\n                                    p: 1.5,\n                                    fontSize: '0.875rem',\n                                    borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                                  },\n                                  '& tr:hover td': {\n                                    bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.02) : neutral[50],\n                                  },\n                                }}\n                              >\n                                <thead>\n                                  <tr>\n                                    {table.headers.map((header, i) => (\n                                      <th key={i}>{header}</th>\n                                    ))}\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  {table.rows.slice(0, 10).map((row, i) => (\n                                    <tr key={i}>\n                                      {row.map((cell, j) => (\n                                        <td key={j}>{cell}</td>\n                                      ))}\n                                    </tr>\n                                  ))}\n                                </tbody>\n                              </Box>\n                              {table.rows.length > 10 && (\n                                <Box sx={{ p: 2, textAlign: 'center', bgcolor: alpha(neutral[500], 0.05) }}>\n                                  <Typography variant=\"caption\" color=\"text.secondary\">\n                                    Showing 10 of {table.rows.length} rows\n                                  </Typography>\n                                </Box>\n                              )}\n                            </Box>\n                          </AccordionDetails>\n                        </Accordion>\n                      ))}\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Entities */}\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <DataObjectIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Entities ({analysisResult.entities?.length || 0})\n                        </Typography>\n                      </Stack>\n                      <Stack spacing={1.5}>\n                        {analysisResult.entities?.slice(0, 20).map((entity) => (\n                          <Stack\n                            key={entity.id}\n                            direction=\"row\"\n                            alignItems=\"center\"\n                            spacing={1.5}\n                            sx={{\n                              p: 1.5,\n                              borderRadius: 1,\n                              bgcolor: alpha(theme.palette.background.default, 0.5),\n                              transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n                              '&:hover': {\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                              },\n                            }}\n                          >\n                            <Chip\n                              label={entity.type}\n                              size=\"small\"\n                              sx={{\n                                minWidth: 80,\n                                fontWeight: 600,\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n                                color: 'text.secondary',\n                              }}\n                            />\n                            <Typography variant=\"body2\" fontWeight={500}>\n                              {entity.value}\n                            </Typography>\n                            {entity.normalized_value && entity.normalized_value !== entity.value && (\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                â†’ {entity.normalized_value}\n                              </Typography>\n                            )}\n                          </Stack>\n                        ))}\n                      </Stack>\n                    </GlassCard>\n                  </Grid>\n\n                  {/* Invoices & Contracts */}\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <Stack spacing={3}>\n                      {analysisResult.invoices?.length > 0 && (\n                        <GlassCard>\n                          <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                            <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                              <ReceiptLongIcon />\n                            </Avatar>\n                            <Typography variant=\"h6\" fontWeight={600}>\n                              Invoices Detected\n                            </Typography>\n                          </Stack>\n                          {analysisResult.invoices.map((invoice) => (\n                            <Box\n                              key={invoice.id}\n                              sx={{\n                                p: 2,\n                                mb: 2,\n                                borderRadius: 1,\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                                border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n                              }}\n                            >\n                              <Typography variant=\"subtitle2\" fontWeight={600}>\n                                {invoice.vendor_name}\n                              </Typography>\n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                Invoice #{invoice.invoice_number} â€¢ {invoice.invoice_date}\n                              </Typography>\n                              <Typography variant=\"h5\" fontWeight={600} color=\"text.primary\" sx={{ mt: 1 }}>\n                                {invoice.currency} {invoice.grand_total}\n                              </Typography>\n                            </Box>\n                          ))}\n                        </GlassCard>\n                      )}\n\n                      {analysisResult.contracts?.length > 0 && (\n                        <GlassCard>\n                          <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                            <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                              <GavelIcon />\n                            </Avatar>\n                            <Typography variant=\"h6\" fontWeight={600}>\n                              Contracts Detected\n                            </Typography>\n                          </Stack>\n                          {analysisResult.contracts.map((contract) => (\n                            <Box\n                              key={contract.id}\n                              sx={{\n                                p: 2,\n                                borderRadius: 1,\n                                bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n                                border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n                              }}\n                            >\n                              <Typography variant=\"subtitle2\" fontWeight={600}>\n                                {contract.contract_type}\n                              </Typography>\n                              <Typography variant=\"body2\" color=\"text.secondary\">\n                                {contract.effective_date} â†’ {contract.expiration_date}\n                              </Typography>\n                              <Typography variant=\"caption\" color=\"text.secondary\">\n                                Parties: {contract.parties?.map((p) => p.name).join(', ')}\n                              </Typography>\n                            </Box>\n                          ))}\n                        </GlassCard>\n                      )}\n                    </Stack>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n\n              {/* Insights Tab */}\n              <TabPanel value={activeTab} index={4}>\n                <Grid container spacing={3}>\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: (t) => t.palette.mode === 'dark' ? alpha(t.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <LightbulbIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Key Insights ({analysisResult.insights?.length || 0})\n                        </Typography>\n                      </Stack>\n                      {analysisResult.insights?.map((insight, i) => (\n                        <InsightCard key={insight.id} insight={insight} type=\"insight\" index={i} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <SecurityIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Risks ({analysisResult.risks?.length || 0})\n                        </Typography>\n                      </Stack>\n                      {analysisResult.risks?.map((risk, i) => (\n                        <InsightCard key={risk.id} insight={risk} type=\"risk\" index={i} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <RocketLaunchIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Opportunities ({analysisResult.opportunities?.length || 0})\n                        </Typography>\n                      </Stack>\n                      {analysisResult.opportunities?.map((opp, i) => (\n                        <InsightCard key={opp.id} insight={opp} type=\"opportunity\" index={i} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n\n                  <Grid size={{ xs: 12, md: 6 }}>\n                    <GlassCard>\n                      <Stack direction=\"row\" alignItems=\"center\" spacing={1.5} sx={{ mb: 3 }}>\n                        <Avatar sx={{ bgcolor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], color: 'text.secondary' }}>\n                          <PlaylistAddCheckIcon />\n                        </Avatar>\n                        <Typography variant=\"h6\" fontWeight={600}>\n                          Action Items ({analysisResult.action_items?.length || 0})\n                        </Typography>\n                      </Stack>\n                      {analysisResult.action_items?.map((action, i) => (\n                        <InsightCard key={action.id} insight={action} type=\"action\" index={i} />\n                      ))}\n                    </GlassCard>\n                  </Grid>\n                </Grid>\n              </TabPanel>\n            </Box>\n          </Fade>\n        )}\n\n        {/* Footer */}\n        <Box sx={{ textAlign: 'center', py: 4, mt: 4 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Supported formats: PDF, Excel (XLSX, XLS), CSV, Word, Images\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.disabled\" sx={{ mt: 0.5, display: 'block' }}>\n            AI-powered analysis with intelligent extraction, multi-mode summaries, Q&A, and visualization\n          </Typography>\n        </Box>\n      </Box>\n    </Box>\n  )\n}\n"],"names":["AutoGraphIcon","createSvgIcon","_jsx","GavelIcon","PlaylistAddCheckIcon","SentimentNeutralIcon","SentimentSatisfiedAltIcon","SentimentVeryDissatisfiedIcon","API_V2","API_BASE","uploadAndAnalyzeEnhanced","file","preferences","onProgress","signal","form","res","fetchWithIntent","handleStreamingResponse","askQuestion","analysisId","question","includeSources","maxContextChunks","text","generateCharts","query","includeTrends","includeForecasts","exportAnalysis","format","includeRawData","includeCharts","StatCard","icon","label","value","delay","theme","useTheme","Grow","jsx","Card","alpha","neutral","CardContent","jsxs","Stack","Avatar","Box","Typography","MetricCard","metric","index","isPositive","isNegative","Zoom","Chip","TrendingUpIcon","InsightCard","insight","type","config","LightbulbIcon","SecurityIcon","RocketLaunchIcon","gradient","borderColor","iconBg","priorityColors","priorityConfig","Fade","action","i","SentimentDisplay","sentiment","level","neutralColor","neutralGradient","score","GlassCard","CircularProgress","DataQualityGauge","quality","color","s","TabPanel","children","other","QABubble","qa","Paper","SmartToyIcon","source","EnhancedAnalyzePageContainer","activeTab","setActiveTab","useState","selectedFile","setSelectedFile","isDragOver","setIsDragOver","isAnalyzing","setIsAnalyzing","analysisProgress","setAnalysisProgress","progressStage","setProgressStage","analysisResult","setAnalysisResult","error","setError","suggestedQuestions","setSuggestedQuestions","setQuestion","isAskingQuestion","setIsAskingQuestion","qaHistory","setQaHistory","chartQuery","setChartQuery","isGeneratingCharts","setIsGeneratingCharts","generatedCharts","setGeneratedCharts","selectedConnectionId","setSelectedConnectionId","selectedTemplateId","setSelectedTemplateId","exportMenuAnchor","setExportMenuAnchor","isExporting","setIsExporting","abortControllerRef","useRef","fileInputRef","toast","useToast","execute","useInteraction","handleDragOver","useCallback","e","handleDragLeave","handleDrop","handleFileSelect","handleAnalyze","InteractionType","Reversibility","result","event","err","handleCancelAnalysis","handleAskQuestion","response","prev","handleGenerateCharts","handleExport","blob","url","a","handleReset","stats","useMemo","PsychologyIcon","Fragment","Button","DownloadIcon","Menu","fmt","MenuItem","RefreshIcon","AiUsageNotice","TableChartIcon","AssessmentIcon","DataObjectIcon","WarningAmberIcon","BarChartIcon","ConnectionSelector","TemplateSelector","float","CloudUploadIcon","CheckCircleIcon","BoltIcon","LinearProgress","CancelIcon","w","Tabs","v","Tab","InsightsOutlinedIcon","QuestionAnswerIcon","Grid","ArticleIcon","point","SpeedIcon","t","risk","opp","idx","TextField","SendIcon","q","AutoAwesomeIcon","chart","ZoomableChart","table","Accordion","AccordionSummary","ExpandMoreIcon","AccordionDetails","header","row","cell","j","entity","ReceiptLongIcon","invoice","contract","p"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}