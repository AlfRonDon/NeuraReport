{"version":3,"file":"SetupWizard-DPLBUumM.js","sources":["../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/CardActionArea/cardActionAreaClasses.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/CardActionArea/CardActionArea.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/internal/svg-icons/RadioButtonUnchecked.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/internal/svg-icons/RadioButtonChecked.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/Radio/RadioButtonIcon.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/RadioGroup/RadioGroupContext.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/RadioGroup/useRadioGroup.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/Radio/radioClasses.js","../../../home/rohith/desktop/NeuraReport/frontend/node_modules/@mui/material/esm/Radio/Radio.js","../../../home/rohith/desktop/NeuraReport/frontend/src/layouts/WizardLayout.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/features/setup/components/steps/StepConnection.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/features/setup/components/steps/StepTemplate.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/features/setup/components/steps/StepMapping.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/features/setup/containers/SetupWizardContainer.jsx","../../../home/rohith/desktop/NeuraReport/frontend/src/pages/Setup/SetupWizard.jsx"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardActionAreaUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActionArea', slot);\n}\nconst cardActionAreaClasses = generateUtilityClasses('MuiCardActionArea', ['root', 'focusVisible', 'focusHighlight']);\nexport default cardActionAreaClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport cardActionAreaClasses, { getCardActionAreaUtilityClass } from \"./cardActionAreaClasses.js\";\nimport ButtonBase from \"../ButtonBase/index.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root'],\n    focusHighlight: ['focusHighlight']\n  };\n  return composeClasses(slots, getCardActionAreaUtilityClass, classes);\n};\nconst CardActionAreaRoot = styled(ButtonBase, {\n  name: 'MuiCardActionArea',\n  slot: 'Root'\n})(memoTheme(({\n  theme\n}) => ({\n  display: 'block',\n  textAlign: 'inherit',\n  borderRadius: 'inherit',\n  // for Safari to work https://github.com/mui/material-ui/issues/36285.\n  width: '100%',\n  [`&:hover .${cardActionAreaClasses.focusHighlight}`]: {\n    opacity: (theme.vars || theme).palette.action.hoverOpacity,\n    '@media (hover: none)': {\n      opacity: 0\n    }\n  },\n  [`&.${cardActionAreaClasses.focusVisible} .${cardActionAreaClasses.focusHighlight}`]: {\n    opacity: (theme.vars || theme).palette.action.focusOpacity\n  }\n})));\nconst CardActionAreaFocusHighlight = styled('span', {\n  name: 'MuiCardActionArea',\n  slot: 'FocusHighlight'\n})(memoTheme(({\n  theme\n}) => ({\n  overflow: 'hidden',\n  pointerEvents: 'none',\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  borderRadius: 'inherit',\n  opacity: 0,\n  backgroundColor: 'currentcolor',\n  transition: theme.transitions.create('opacity', {\n    duration: theme.transitions.duration.short\n  })\n})));\nconst CardActionArea = /*#__PURE__*/React.forwardRef(function CardActionArea(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardActionArea'\n  });\n  const {\n    children,\n    className,\n    focusVisibleClassName,\n    slots = {},\n    slotProps = {},\n    ...other\n  } = props;\n  const ownerState = props;\n  const classes = useUtilityClasses(ownerState);\n  const externalForwardedProps = {\n    slots,\n    slotProps\n  };\n  const [RootSlot, rootProps] = useSlot('root', {\n    elementType: CardActionAreaRoot,\n    externalForwardedProps: {\n      ...externalForwardedProps,\n      ...other\n    },\n    shouldForwardComponentProp: true,\n    ownerState,\n    ref,\n    className: clsx(classes.root, className),\n    additionalProps: {\n      focusVisibleClassName: clsx(focusVisibleClassName, classes.focusVisible)\n    }\n  });\n  const [FocusHighlightSlot, focusHighlightProps] = useSlot('focusHighlight', {\n    elementType: CardActionAreaFocusHighlight,\n    externalForwardedProps,\n    ownerState,\n    className: classes.focusHighlight\n  });\n  return /*#__PURE__*/_jsxs(RootSlot, {\n    ...rootProps,\n    children: [children, /*#__PURE__*/_jsx(FocusHighlightSlot, {\n      ...focusHighlightProps\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActionArea.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: PropTypes.string,\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    focusHighlight: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    focusHighlight: PropTypes.elementType,\n    root: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardActionArea;","'use client';\n\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonUnchecked');","'use client';\n\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z\"\n}), 'RadioButtonChecked');","'use client';\n\nimport PropTypes from 'prop-types';\nimport RadioButtonUncheckedIcon from \"../internal/svg-icons/RadioButtonUnchecked.js\";\nimport RadioButtonCheckedIcon from \"../internal/svg-icons/RadioButtonChecked.js\";\nimport rootShouldForwardProp from \"../styles/rootShouldForwardProp.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst RadioButtonIconRoot = styled('span', {\n  name: 'MuiRadioButtonIcon',\n  shouldForwardProp: rootShouldForwardProp\n})({\n  position: 'relative',\n  display: 'flex'\n});\nconst RadioButtonIconBackground = styled(RadioButtonUncheckedIcon, {\n  name: 'MuiRadioButtonIcon'\n})({\n  // Scale applied to prevent dot misalignment in Safari\n  transform: 'scale(1)'\n});\nconst RadioButtonIconDot = styled(RadioButtonCheckedIcon, {\n  name: 'MuiRadioButtonIcon'\n})(memoTheme(({\n  theme\n}) => ({\n  left: 0,\n  position: 'absolute',\n  transform: 'scale(0)',\n  transition: theme.transitions.create('transform', {\n    easing: theme.transitions.easing.easeIn,\n    duration: theme.transitions.duration.shortest\n  }),\n  variants: [{\n    props: {\n      checked: true\n    },\n    style: {\n      transform: 'scale(1)',\n      transition: theme.transitions.create('transform', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.shortest\n      })\n    }\n  }]\n})));\n\n/**\n * @ignore - internal component.\n */\nfunction RadioButtonIcon(props) {\n  const {\n    checked = false,\n    classes = {},\n    fontSize\n  } = props;\n  const ownerState = {\n    ...props,\n    checked\n  };\n  return /*#__PURE__*/_jsxs(RadioButtonIconRoot, {\n    className: classes.root,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(RadioButtonIconBackground, {\n      fontSize: fontSize,\n      className: classes.background,\n      ownerState: ownerState\n    }), /*#__PURE__*/_jsx(RadioButtonIconDot, {\n      fontSize: fontSize,\n      className: classes.dot,\n      ownerState: ownerState\n    })]\n  });\n}\nprocess.env.NODE_ENV !== \"production\" ? RadioButtonIcon.propTypes /* remove-proptypes */ = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense radio styling.\n   */\n  fontSize: PropTypes.oneOf(['small', 'medium'])\n} : void 0;\nexport default RadioButtonIcon;","'use client';\n\nimport * as React from 'react';\n/**\n * @ignore - internal component.\n */\nconst RadioGroupContext = /*#__PURE__*/React.createContext(undefined);\nif (process.env.NODE_ENV !== 'production') {\n  RadioGroupContext.displayName = 'RadioGroupContext';\n}\nexport default RadioGroupContext;","'use client';\n\nimport * as React from 'react';\nimport RadioGroupContext from \"./RadioGroupContext.js\";\nexport default function useRadioGroup() {\n  return React.useContext(RadioGroupContext);\n}","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getRadioUtilityClass(slot) {\n  return generateUtilityClass('MuiRadio', slot);\n}\nconst radioClasses = generateUtilityClasses('MuiRadio', ['root', 'checked', 'disabled', 'colorPrimary', 'colorSecondary', 'sizeSmall']);\nexport default radioClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport refType from '@mui/utils/refType';\nimport composeClasses from '@mui/utils/composeClasses';\nimport SwitchBase from \"../internal/SwitchBase.js\";\nimport RadioButtonIcon from \"./RadioButtonIcon.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport createChainedFunction from \"../utils/createChainedFunction.js\";\nimport useFormControl from \"../FormControl/useFormControl.js\";\nimport useRadioGroup from \"../RadioGroup/useRadioGroup.js\";\nimport radioClasses, { getRadioUtilityClass } from \"./radioClasses.js\";\nimport rootShouldForwardProp from \"../styles/rootShouldForwardProp.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    color,\n    size\n  } = ownerState;\n  const slots = {\n    root: ['root', `color${capitalize(color)}`, size !== 'medium' && `size${capitalize(size)}`]\n  };\n  return {\n    ...classes,\n    ...composeClasses(slots, getRadioUtilityClass, classes)\n  };\n};\nconst RadioRoot = styled(SwitchBase, {\n  shouldForwardProp: prop => rootShouldForwardProp(prop) || prop === 'classes',\n  name: 'MuiRadio',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.size !== 'medium' && styles[`size${capitalize(ownerState.size)}`], styles[`color${capitalize(ownerState.color)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  color: (theme.vars || theme).palette.text.secondary,\n  [`&.${radioClasses.disabled}`]: {\n    color: (theme.vars || theme).palette.action.disabled\n  },\n  variants: [{\n    props: {\n      color: 'default',\n      disabled: false,\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.alpha((theme.vars || theme).palette.action.active, (theme.vars || theme).palette.action.hoverOpacity)\n      }\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color,\n      disabled: false,\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.alpha((theme.vars || theme).palette[color].main, (theme.vars || theme).palette.action.hoverOpacity)\n      }\n    }\n  })), ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color,\n      disabled: false\n    },\n    style: {\n      [`&.${radioClasses.checked}`]: {\n        color: (theme.vars || theme).palette[color].main\n      }\n    }\n  })), {\n    // Should be last to override other colors\n    props: {\n      disableRipple: false\n    },\n    style: {\n      // Reset on touch devices, it doesn't add specificity\n      '&:hover': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  }]\n})));\nfunction areEqualValues(a, b) {\n  if (typeof b === 'object' && b !== null) {\n    return a === b;\n  }\n\n  // The value could be a number, the DOM will stringify it anyway.\n  return String(a) === String(b);\n}\nconst defaultCheckedIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {\n  checked: true\n});\nconst defaultIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {});\nconst Radio = /*#__PURE__*/React.forwardRef(function Radio(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiRadio'\n  });\n  const {\n    checked: checkedProp,\n    checkedIcon = defaultCheckedIcon,\n    color = 'primary',\n    icon = defaultIcon,\n    name: nameProp,\n    onChange: onChangeProp,\n    size = 'medium',\n    className,\n    disabled: disabledProp,\n    disableRipple = false,\n    slots = {},\n    slotProps = {},\n    inputProps,\n    ...other\n  } = props;\n  const muiFormControl = useFormControl();\n  let disabled = disabledProp;\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n  disabled ??= false;\n  const ownerState = {\n    ...props,\n    disabled,\n    disableRipple,\n    color,\n    size\n  };\n  const classes = useUtilityClasses(ownerState);\n  const radioGroup = useRadioGroup();\n  let checked = checkedProp;\n  const onChange = createChainedFunction(onChangeProp, radioGroup && radioGroup.onChange);\n  let name = nameProp;\n  if (radioGroup) {\n    if (typeof checked === 'undefined') {\n      checked = areEqualValues(radioGroup.value, props.value);\n    }\n    if (typeof name === 'undefined') {\n      name = radioGroup.name;\n    }\n  }\n  const externalInputProps = slotProps.input ?? inputProps;\n  const [RootSlot, rootSlotProps] = useSlot('root', {\n    ref,\n    elementType: RadioRoot,\n    className: clsx(classes.root, className),\n    shouldForwardComponentProp: true,\n    externalForwardedProps: {\n      slots,\n      slotProps,\n      ...other\n    },\n    getSlotProps: handlers => ({\n      ...handlers,\n      onChange: (event, ...args) => {\n        handlers.onChange?.(event, ...args);\n        onChange(event, ...args);\n      }\n    }),\n    ownerState,\n    additionalProps: {\n      type: 'radio',\n      icon: /*#__PURE__*/React.cloneElement(icon, {\n        fontSize: icon.props.fontSize ?? size\n      }),\n      checkedIcon: /*#__PURE__*/React.cloneElement(checkedIcon, {\n        fontSize: checkedIcon.props.fontSize ?? size\n      }),\n      disabled,\n      name,\n      checked,\n      slots,\n      slotProps: {\n        // Do not forward `slotProps.root` again because it's already handled by the `RootSlot` in this file.\n        input: typeof externalInputProps === 'function' ? externalInputProps(ownerState) : externalInputProps\n      }\n    }\n  });\n  return /*#__PURE__*/_jsx(RootSlot, {\n    ...rootSlotProps,\n    classes: classes\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Radio.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n  /**\n   * The icon to display when the component is checked.\n   * @default <RadioButtonIcon checked />\n   */\n  checkedIcon: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['default', 'primary', 'secondary', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * If `true`, the component is disabled.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, the ripple effect is disabled.\n   * @default false\n   */\n  disableRipple: PropTypes.bool,\n  /**\n   * The icon to display when the component is unchecked.\n   * @default <RadioButtonIcon />\n   */\n  icon: PropTypes.node,\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/input#attributes) applied to the `input` element.\n   * @deprecated Use `slotProps.input` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  inputProps: PropTypes.object,\n  /**\n   * Pass a ref to the `input` element.\n   * @deprecated Use `slotProps.input.ref` instead. This prop will be removed in a future major release. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  inputRef: refType,\n  /**\n   * Name attribute of the `input` element.\n   */\n  name: PropTypes.string,\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {React.ChangeEvent<HTMLInputElement>} event The event source of the callback.\n   * You can pull out the new value by accessing `event.target.value` (string).\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n  /**\n   * If `true`, the `input` element is required.\n   * @default false\n   */\n  required: PropTypes.bool,\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense radio styling.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['medium', 'small']), PropTypes.string]),\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    input: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    input: PropTypes.elementType,\n    root: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the component. The DOM API casts this to a string.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default Radio;","import { Box, Container, Paper, Typography, LinearProgress, Stack, Button } from '@mui/material'\nimport { neutral, palette } from '@/app/theme'\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack'\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward'\nimport CheckIcon from '@mui/icons-material/Check'\n\nexport default function WizardLayout({\n  title,\n  subtitle,\n  steps,\n  currentStep,\n  onNext,\n  onPrev,\n  onComplete,\n  onCancel,\n  nextLabel = 'Next',\n  prevLabel = 'Back',\n  completeLabel = 'Complete',\n  cancelLabel = 'Exit',\n  nextDisabled = false,\n  loading = false,\n  children,\n}) {\n  const progress = ((currentStep + 1) / steps.length) * 100\n  const isLastStep = currentStep === steps.length - 1\n  const isFirstStep = currentStep === 0\n\n  return (\n    <Box\n      sx={{\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        bgcolor: 'background.default',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          borderBottom: 1,\n          borderColor: 'divider',\n          bgcolor: 'background.paper',\n          py: 2,\n        }}\n      >\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h5\" fontWeight={600}>\n            {title}\n          </Typography>\n          {subtitle && (\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\n              {subtitle}\n            </Typography>\n          )}\n        </Container>\n      </Box>\n\n      {/* Progress Bar */}\n      <LinearProgress\n        variant=\"determinate\"\n        value={progress}\n        sx={{\n          height: 4,\n          bgcolor: 'action.hover',\n          '& .MuiLinearProgress-bar': {\n            bgcolor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[900],\n          },\n        }}\n      />\n\n      {/* Step Indicators */}\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', bgcolor: 'background.paper' }}>\n        <Container maxWidth=\"md\">\n          <Stack direction=\"row\" spacing={0} sx={{ py: 2 }}>\n            {steps.map((step, index) => (\n              <Box\n                key={step.key}\n                sx={{\n                  flex: 1,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 1.5,\n                }}\n              >\n                <Box\n                  sx={{\n                    width: 28,\n                    height: 28,\n                    borderRadius: '50%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    bgcolor: (theme) => index < currentStep\n                      ? (theme.palette.mode === 'dark' ? neutral[700] : neutral[900])\n                      : index === currentStep\n                        ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700])\n                        : 'action.disabledBackground',\n                    color: index <= currentStep ? 'white' : 'text.disabled',\n                    fontSize: '0.75rem',\n                    fontWeight: 600,\n                  }}\n                >\n                  {index < currentStep ? <CheckIcon sx={{ fontSize: 16 }} /> : index + 1}\n                </Box>\n                <Box sx={{ flex: 1 }}>\n                  <Typography\n                    variant=\"body2\"\n                    fontWeight={index === currentStep ? 600 : 400}\n                    color={index === currentStep ? 'text.primary' : 'text.secondary'}\n                  >\n                    {step.label}\n                  </Typography>\n                  {step.description && (\n                    <Typography variant=\"caption\" color=\"text.disabled\">\n                      {step.description}\n                    </Typography>\n                  )}\n                </Box>\n                {index < steps.length - 1 && (\n                  <Box\n                    sx={{\n                      width: 40,\n                      height: 2,\n                      bgcolor: (theme) => index < currentStep ? (theme.palette.mode === 'dark' ? neutral[700] : neutral[900]) : theme.palette.divider,\n                      mx: 1,\n                    }}\n                  />\n                )}\n              </Box>\n            ))}\n          </Stack>\n        </Container>\n      </Box>\n\n      {/* Content */}\n      <Box sx={{ flex: 1, py: 4 }}>\n        <Container maxWidth=\"md\">\n          <Paper\n            elevation={0}\n            sx={{\n              p: 4,\n              border: 1,\n              borderColor: 'divider',\n              borderRadius: 1,  // Figma spec: 8px\n            }}\n          >\n            {children}\n          </Paper>\n        </Container>\n      </Box>\n\n      {/* Footer Actions */}\n      <Box\n        sx={{\n          borderTop: 1,\n          borderColor: 'divider',\n          bgcolor: 'background.paper',\n          py: 2,\n        }}\n      >\n        <Container maxWidth=\"md\">\n          <Stack direction=\"row\" justifyContent=\"space-between\">\n            <Stack direction=\"row\" spacing={1}>\n              {onCancel && (\n                <Button\n                  variant=\"text\"\n                  onClick={onCancel}\n                  disabled={loading}\n                  sx={{ color: 'text.secondary' }}\n                >\n                  {cancelLabel}\n                </Button>\n              )}\n              <Button\n                variant=\"outlined\"\n                startIcon={<ArrowBackIcon />}\n                onClick={onPrev}\n                disabled={isFirstStep || loading}\n              >\n                {prevLabel}\n              </Button>\n            </Stack>\n            <Button\n              variant=\"contained\"\n              endIcon={isLastStep ? <CheckIcon /> : <ArrowForwardIcon />}\n              onClick={isLastStep ? onComplete : onNext}\n              disabled={nextDisabled || loading}\n            >\n              {isLastStep ? completeLabel : nextLabel}\n            </Button>\n          </Stack>\n        </Container>\n      </Box>\n    </Box>\n  )\n}\n","import { useState, useCallback, useEffect } from 'react'\nimport {\n  Box,\n  Typography,\n  Stack,\n  Card,\n  CardContent,\n  CardActionArea,\n  Radio,\n  Button,\n  Alert,\n  Collapse,\n  Divider,\n  Chip,\n  alpha,\n} from '@mui/material'\nimport AddIcon from '@mui/icons-material/Add'\nimport StorageIcon from '@mui/icons-material/Storage'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle'\nimport ScienceIcon from '@mui/icons-material/Science'\nimport CloudIcon from '@mui/icons-material/Cloud'\nimport TableChartIcon from '@mui/icons-material/TableChart'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\nimport { Drawer } from '@/components/Drawer'\nimport ConnectionForm from '@/features/connections/components/ConnectionForm'\nimport * as api from '@/api/client'\nimport { neutral, secondary, palette } from '@/app/theme'\n\n// Demo connection that doesn't require real credentials\nconst DEMO_CONNECTION = {\n  id: 'demo-connection',\n  name: 'Sample Database (Demo)',\n  db_type: 'demo',\n  database: 'sample_data',\n  status: 'connected',\n  summary: 'Pre-loaded sample data for testing',\n  isDemo: true,\n}\n\nexport default function StepConnection({ wizardState, updateWizardState, onComplete, setLoading }) {\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const savedConnections = useAppStore((s) => s.savedConnections)\n  const setSavedConnections = useAppStore((s) => s.setSavedConnections)\n  const addSavedConnection = useAppStore((s) => s.addSavedConnection)\n  const setActiveConnectionId = useAppStore((s) => s.setActiveConnectionId)\n  const activeConnection = useAppStore((s) => s.activeConnection)\n\n  const [selectedId, setSelectedId] = useState(wizardState.connectionId || activeConnection?.id || null)\n  const [drawerOpen, setDrawerOpen] = useState(false)\n  const [formLoading, setFormLoading] = useState(false)\n  const normalizedConnections = Array.isArray(savedConnections)\n    ? savedConnections.filter((conn) => conn && typeof conn === 'object' && conn.id)\n    : []\n\n  useEffect(() => {\n    const fetchConnections = async () => {\n      try {\n        const state = await api.bootstrapState()\n        if (state?.connections) {\n          setSavedConnections(state.connections)\n        }\n      } catch (err) {\n        console.error('Failed to fetch connections:', err)\n        toast.show('Failed to load saved connections', 'warning')\n      }\n    }\n    if (normalizedConnections.length === 0) {\n      fetchConnections()\n    }\n  }, [normalizedConnections.length, setSavedConnections, toast])\n\n  const handleSelect = useCallback((connectionId) => {\n    setSelectedId(connectionId)\n    updateWizardState({ connectionId })\n    setActiveConnectionId(connectionId)\n  }, [updateWizardState, setActiveConnectionId])\n\n  const handleAddConnection = useCallback(() => {\n    setDrawerOpen(true)\n  }, [])\n\n  const handleSaveConnection = useCallback(async (connectionData) => {\n    setFormLoading(true)\n    try {\n      await execute({\n        type: InteractionType.CREATE,\n        label: `Add connection \"${connectionData?.name || connectionData?.db_url || 'connection'}\"`,\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        suppressSuccessToast: true,\n        suppressErrorToast: true,\n        blocksNavigation: false,\n        intent: {\n          connectionName: connectionData?.name,\n          dbType: connectionData?.db_type,\n        },\n        action: async () => {\n          try {\n            const result = await api.testConnection(connectionData)\n            if (!result.ok) {\n              throw new Error(result.detail || 'Connection test failed')\n            }\n\n            const savedConnection = await api.upsertConnection({\n              id: result.connection_id,\n              name: connectionData.name,\n              dbType: connectionData.db_type,\n              dbUrl: connectionData.db_url,\n              database: connectionData.database,\n              status: 'connected',\n              latencyMs: result.latency_ms,\n            })\n\n            addSavedConnection(savedConnection)\n            handleSelect(savedConnection.id)\n            toast.show('Connection added', 'success')\n            setDrawerOpen(false)\n            return savedConnection\n          } catch (err) {\n            toast.show(err.message || 'Failed to save connection', 'error')\n            throw err\n          }\n        },\n      })\n    } finally {\n      setFormLoading(false)\n    }\n  }, [addSavedConnection, handleSelect, toast, execute])\n\n  const handleContinue = useCallback(() => {\n    if (selectedId) {\n      onComplete()\n    }\n  }, [selectedId, onComplete])\n\n  const handleSelectDemo = useCallback(() => {\n    setSelectedId(DEMO_CONNECTION.id)\n    updateWizardState({ connectionId: DEMO_CONNECTION.id, isDemo: true })\n    // Add demo connection to store temporarily\n    if (!normalizedConnections.find(c => c.id === DEMO_CONNECTION.id)) {\n      addSavedConnection(DEMO_CONNECTION)\n    }\n    setActiveConnectionId(DEMO_CONNECTION.id)\n    toast.show('Demo mode activated! Using sample data.', 'success')\n  }, [updateWizardState, normalizedConnections, addSavedConnection, setActiveConnectionId, toast])\n\n  const handleSkipConnection = useCallback(() => {\n    // Allow users to skip if they just want to explore\n    updateWizardState({ connectionId: null, skippedConnection: true })\n    onComplete()\n  }, [updateWizardState, onComplete])\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" fontWeight={600} sx={{ mb: 1 }}>\n        Connect Your Data\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Choose where your report data comes from. You can always change this later.\n      </Typography>\n\n      {/* Quick Start Options */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"subtitle2\" fontWeight={600} color=\"text.secondary\" sx={{ mb: 2, textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '0.05em' }}>\n          Quick Start\n        </Typography>\n        <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n          <Card\n            variant=\"outlined\"\n            sx={{\n              flex: 1,\n              border: 2,\n              borderColor: selectedId === DEMO_CONNECTION.id ? (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700] : 'divider',\n              bgcolor: selectedId === DEMO_CONNECTION.id ? (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50] : 'transparent',\n              transition: 'all 0.2s',\n              '&:hover': {\n                borderColor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n              },\n            }}\n          >\n            <CardActionArea onClick={handleSelectDemo} sx={{ height: '100%' }}>\n              <CardContent sx={{ textAlign: 'center', py: 3 }}>\n                <ScienceIcon sx={{ fontSize: 40, color: 'text.secondary', mb: 1 }} />\n                <Typography variant=\"subtitle1\" fontWeight={600}>\n                  Try Demo Mode\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                  Explore with sample data — no setup needed\n                </Typography>\n                <Chip label=\"Recommended for first-time users\" size=\"small\" variant=\"outlined\" sx={{ bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }} />\n              </CardContent>\n            </CardActionArea>\n          </Card>\n\n          <Card\n            variant=\"outlined\"\n            sx={{\n              flex: 1,\n              border: 2,\n              borderColor: 'divider',\n              transition: 'all 0.2s',\n              '&:hover': {\n                borderColor: 'secondary.main',\n              },\n            }}\n          >\n            <CardActionArea onClick={handleSkipConnection} sx={{ height: '100%' }}>\n              <CardContent sx={{ textAlign: 'center', py: 3 }}>\n                <CloudIcon sx={{ fontSize: 40, color: 'text.secondary', mb: 1 }} />\n                <Typography variant=\"subtitle1\" fontWeight={600}>\n                  Skip for Now\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Set up data source later and explore templates first\n                </Typography>\n              </CardContent>\n            </CardActionArea>\n          </Card>\n        </Stack>\n      </Box>\n\n      <Divider sx={{ my: 3 }}>\n        <Chip label=\"Or connect your own data\" size=\"small\" />\n      </Divider>\n\n      {normalizedConnections.length === 0 || normalizedConnections.every((c) => c.isDemo) ? (\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\n          No database connections yet. Add one below or try demo mode above.\n        </Alert>\n      ) : (\n        <Stack spacing={2} sx={{ mb: 3 }}>\n          {normalizedConnections.map((conn) => (\n            <Card\n              key={conn.id}\n              variant=\"outlined\"\n              sx={{\n                border: 2,\n                borderColor: selectedId === conn.id ? (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700] : 'divider',\n                transition: 'border-color 0.2s',\n              }}\n            >\n              <CardActionArea onClick={() => handleSelect(conn.id)}>\n                <CardContent sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                  <Radio\n                    checked={selectedId === conn.id}\n                    sx={{ p: 0 }}\n                  />\n                  <StorageIcon sx={{ color: 'text.secondary' }} />\n                  <Box sx={{ flex: 1 }}>\n                    <Typography variant=\"subtitle1\" fontWeight={500}>\n                      {conn.name}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {conn.db_type} • {conn.summary || conn.database}\n                    </Typography>\n                  </Box>\n                  <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                    <Chip\n                      size=\"small\"\n                      label={conn.status === 'connected' ? 'Connected' : 'Disconnected'}\n                      variant=\"outlined\"\n                      sx={{ bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                    />\n                    {selectedId === conn.id && (\n                      <CheckCircleIcon sx={{ color: 'text.secondary' }} />\n                    )}\n                  </Stack>\n                </CardContent>\n              </CardActionArea>\n            </Card>\n          ))}\n        </Stack>\n      )}\n\n      <Divider sx={{ my: 3 }} />\n\n      <Button\n        variant=\"outlined\"\n        startIcon={<AddIcon />}\n        onClick={handleAddConnection}\n        fullWidth\n        sx={{\n          py: 1.5,\n          borderStyle: 'dashed',\n        }}\n      >\n        Add New Connection\n      </Button>\n\n      {/* Connection Form Drawer */}\n      <Drawer\n        open={drawerOpen}\n        onClose={() => setDrawerOpen(false)}\n        title=\"New Connection\"\n        subtitle=\"Configure your database connection\"\n        width={520}\n      >\n        <ConnectionForm\n          onSave={handleSaveConnection}\n          onCancel={() => setDrawerOpen(false)}\n          loading={formLoading}\n        />\n      </Drawer>\n    </Box>\n  )\n}\n","import { useState, useCallback, useRef, useEffect } from 'react'\nimport {\n  Box,\n  Typography,\n  Stack,\n  Button,\n  Alert,\n  LinearProgress,\n  Paper,\n  ToggleButton,\n  ToggleButtonGroup,\n  alpha,\n  Card,\n  CardContent,\n  CardActionArea,\n  Chip,\n  Divider,\n  Grid,\n  Radio,\n} from '@mui/material'\nimport { neutral, palette } from '@/app/theme'\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload'\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf'\nimport TableChartIcon from '@mui/icons-material/TableChart'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle'\nimport AutoAwesomeIcon from '@mui/icons-material/AutoAwesome'\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong'\nimport AssessmentIcon from '@mui/icons-material/Assessment'\nimport SummarizeIcon from '@mui/icons-material/Summarize'\nimport DescriptionIcon from '@mui/icons-material/Description'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility, useNavigateInteraction } from '@/components/ux/governance'\nimport * as api from '@/api/client'\n\n// Pre-built template gallery for users who don't have their own\nconst TEMPLATE_GALLERY = [\n  {\n    id: 'gallery-invoice',\n    name: 'Invoice Report',\n    description: 'Professional invoice template with line items, totals, and company branding',\n    kind: 'pdf',\n    icon: ReceiptLongIcon,\n    popular: true,\n  },\n  {\n    id: 'gallery-sales',\n    name: 'Sales Summary',\n    description: 'Weekly/monthly sales report with charts, metrics, and trends',\n    kind: 'excel',\n    icon: AssessmentIcon,\n    popular: true,\n  },\n  {\n    id: 'gallery-inventory',\n    name: 'Inventory Report',\n    description: 'Stock levels, reorder points, and inventory movement tracking',\n    kind: 'excel',\n    icon: TableChartIcon,\n    popular: false,\n  },\n  {\n    id: 'gallery-executive',\n    name: 'Executive Summary',\n    description: 'High-level business metrics and KPIs for leadership review',\n    kind: 'pdf',\n    icon: SummarizeIcon,\n    popular: false,\n  },\n  {\n    id: 'gallery-blank-pdf',\n    name: 'Blank PDF Template',\n    description: 'Start from scratch with a customizable PDF layout',\n    kind: 'pdf',\n    icon: DescriptionIcon,\n    popular: false,\n  },\n  {\n    id: 'gallery-blank-excel',\n    name: 'Blank Excel Template',\n    description: 'Start from scratch with a customizable spreadsheet',\n    kind: 'excel',\n    icon: TableChartIcon,\n    popular: false,\n  },\n]\n\nexport default function StepTemplate({ wizardState, updateWizardState, onComplete, setLoading }) {\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const navigate = useNavigateInteraction()\n  const handleNavigate = useCallback(\n    (path, label, intent = {}) =>\n      navigate(path, { label, intent: { from: 'setup-step-template', ...intent } }),\n    [navigate]\n  )\n  const fileInputRef = useRef(null)\n\n  const activeConnection = useAppStore((s) => s.activeConnection)\n  const setTemplateId = useAppStore((s) => s.setTemplateId)\n  const setVerifyArtifacts = useAppStore((s) => s.setVerifyArtifacts)\n  const addTemplate = useAppStore((s) => s.addTemplate)\n\n  const [templateKind, setTemplateKind] = useState(wizardState.templateKind || 'pdf')\n  const [uploading, setUploading] = useState(false)\n  const [uploadProgress, setUploadProgress] = useState(0)\n  const [uploadedFile, setUploadedFile] = useState(null)\n  const [verifyResult, setVerifyResult] = useState(null)\n  const [error, setError] = useState(null)\n  const [queueInBackground, setQueueInBackground] = useState(false)\n  const [queuedJobId, setQueuedJobId] = useState(null)\n  const [selectedGalleryTemplate, setSelectedGalleryTemplate] = useState(null)\n  const [showUpload, setShowUpload] = useState(false)\n\n  useEffect(() => {\n    if (!queuedJobId) return\n    let cancelled = false\n\n    const pollJob = async () => {\n      try {\n        const job = await api.getJob(queuedJobId)\n        if (cancelled || !job) return\n\n        if (typeof job.progress === 'number') {\n          setUploadProgress(Math.round(job.progress))\n        }\n\n        if (job.status === 'completed') {\n          const result = job.result || {}\n          const templateId = result.template_id || result.templateId\n          if (!templateId) {\n            setError('Template verification completed but no template ID was returned.')\n            toast.show('Template verification completed without a template ID.', 'error')\n            setQueuedJobId(null)\n            return\n          }\n\n          setVerifyResult(result)\n          setTemplateId(templateId)\n          setVerifyArtifacts(result.artifacts)\n          updateWizardState({ templateId })\n\n          addTemplate({\n            id: templateId,\n            name: uploadedFile?.name || `Template ${templateId}`,\n            kind: templateKind,\n            status: 'pending',\n            created_at: new Date().toISOString(),\n          })\n\n          toast.show('Template verified successfully', 'success')\n          setQueuedJobId(null)\n        } else if (job.status === 'failed' || job.status === 'cancelled') {\n          const message = job.error || 'Template verification failed'\n          setError(message)\n          toast.show(message, 'error')\n          setQueuedJobId(null)\n        }\n      } catch (err) {\n        if (cancelled) return\n        const message = err.message || 'Failed to load queued job status'\n        setError(message)\n        toast.show(message, 'error')\n        setQueuedJobId(null)\n      }\n    }\n\n    pollJob()\n    const intervalId = setInterval(pollJob, 3000)\n    return () => {\n      cancelled = true\n      clearInterval(intervalId)\n    }\n  }, [\n    queuedJobId,\n    templateKind,\n    uploadedFile,\n    setTemplateId,\n    setVerifyArtifacts,\n    updateWizardState,\n    addTemplate,\n    toast,\n  ])\n\n  const handleKindChange = useCallback((_, newKind) => {\n    if (newKind) {\n      setTemplateKind(newKind)\n      updateWizardState({ templateKind: newKind })\n    }\n  }, [updateWizardState])\n\n  const handleFile = useCallback(async (file) => {\n    setError(null)\n    setUploadedFile(file)\n    setUploading(true)\n    setUploadProgress(0)\n    setQueuedJobId(null)\n\n    try {\n      const connectionId = wizardState.connectionId || activeConnection?.id\n      if (!connectionId) {\n        const msg = 'Please connect to a database before verifying templates.'\n        setError(msg)\n        toast.show(msg, 'warning')\n        setUploading(false)\n        setUploadProgress(0)\n        return\n      }\n\n      await execute({\n        type: InteractionType.UPLOAD,\n        label: `Verify ${templateKind.toUpperCase()} template`,\n        reversibility: Reversibility.SYSTEM_MANAGED,\n        suppressSuccessToast: true,\n        suppressErrorToast: true,\n        blocksNavigation: true,\n        intent: {\n          connectionId,\n          templateKind,\n          fileName: file?.name,\n          action: 'verify_template',\n        },\n        action: async () => {\n          try {\n            const result = await api.verifyTemplate({\n              file,\n              connectionId,\n              kind: templateKind,\n              background: queueInBackground,\n              onProgress: (event) => {\n                if (event.event === 'stage') {\n                  const progress = event.progress || 0\n                  setUploadProgress(progress)\n                }\n              },\n              onUploadProgress: (percent) => {\n                setUploadProgress(percent)\n              },\n            })\n\n            if (queueInBackground) {\n              const jobId = result?.job_id || result?.jobId || null\n              setQueuedJobId(jobId)\n              toast.show('Template verification queued. Track progress in Jobs.', 'success')\n              return result\n            }\n\n            setVerifyResult(result)\n            setTemplateId(result.template_id)\n            setVerifyArtifacts(result.artifacts)\n            updateWizardState({ templateId: result.template_id })\n\n            // Add to templates list\n            addTemplate({\n              id: result.template_id,\n              name: file.name,\n              kind: templateKind,\n              status: 'pending',\n              created_at: new Date().toISOString(),\n            })\n\n            toast.show('Template verified successfully', 'success')\n            return result\n          } catch (err) {\n            setError(err.message || 'Failed to verify template')\n            toast.show(err.message || 'Failed to verify template', 'error')\n            throw err\n          }\n        },\n      })\n    } finally {\n      setUploading(false)\n      setUploadProgress(100)\n    }\n  }, [\n    wizardState.connectionId,\n    activeConnection?.id,\n    templateKind,\n    queueInBackground,\n    setTemplateId,\n    setVerifyArtifacts,\n    updateWizardState,\n    addTemplate,\n    toast,\n    execute,\n  ])\n\n  const handleDrop = useCallback((event) => {\n    event.preventDefault()\n    const files = event.dataTransfer?.files\n    if (files?.length > 0) {\n      handleFile(files[0])\n    }\n  }, [handleFile])\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault()\n  }, [])\n\n  const handleFileSelect = useCallback((event) => {\n    const files = event.target.files\n    if (files?.length > 0) {\n      handleFile(files[0])\n    }\n  }, [handleFile])\n\n  const handleBrowseClick = useCallback(() => {\n    fileInputRef.current?.click()\n  }, [])\n\n  const acceptedTypes = templateKind === 'pdf'\n    ? '.pdf'\n    : '.xlsx,.xls'\n\n  const handleSelectGalleryTemplate = useCallback((template) => {\n    setSelectedGalleryTemplate(template)\n    setTemplateKind(template.kind)\n    updateWizardState({ templateKind: template.kind, galleryTemplate: template })\n  }, [updateWizardState])\n\n  const handleUseGalleryTemplate = useCallback(async () => {\n    if (!selectedGalleryTemplate) return\n\n    await execute({\n      type: InteractionType.CREATE,\n      label: `Use \"${selectedGalleryTemplate.name}\" template`,\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      intent: {\n        galleryId: selectedGalleryTemplate.id,\n        kind: selectedGalleryTemplate.kind,\n        action: 'use_gallery_template',\n      },\n      action: async () => {\n        setLoading(true)\n        try {\n          // For gallery templates, we create a template based on the selected type\n          const result = await api.createTemplateFromGallery?.({\n            galleryId: selectedGalleryTemplate.id,\n            kind: selectedGalleryTemplate.kind,\n            connectionId: wizardState.connectionId,\n          }).catch(() => ({\n            // Fallback if API not available - create a placeholder template\n            template_id: `template-${selectedGalleryTemplate.id}-${Date.now()}`,\n            name: selectedGalleryTemplate.name,\n          }))\n\n          const templateId = result.template_id || result.templateId || `gallery-${selectedGalleryTemplate.id}`\n\n          setTemplateId(templateId)\n          updateWizardState({ templateId, galleryTemplate: selectedGalleryTemplate })\n\n          addTemplate({\n            id: templateId,\n            name: selectedGalleryTemplate.name,\n            kind: selectedGalleryTemplate.kind,\n            status: 'approved',\n            created_at: new Date().toISOString(),\n            isGalleryTemplate: true,\n          })\n\n          toast.show(`\"${selectedGalleryTemplate.name}\" template ready!`, 'success')\n          setVerifyResult({ template_id: templateId })\n          return result\n        } finally {\n          setLoading(false)\n        }\n      },\n    })\n  }, [selectedGalleryTemplate, wizardState.connectionId, setTemplateId, updateWizardState, addTemplate, toast, setLoading, execute])\n\n  const filteredGalleryTemplates = TEMPLATE_GALLERY.filter(t =>\n    templateKind === 'all' || t.kind === templateKind\n  )\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" fontWeight={600} sx={{ mb: 1 }}>\n        Choose a Report Template\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Create with AI, pick from our gallery, or upload your own design.\n      </Typography>\n\n      {/* Template Type Filter */}\n      <Box sx={{ mb: 3 }}>\n        <ToggleButtonGroup\n          value={templateKind}\n          exclusive\n          onChange={handleKindChange}\n          size=\"small\"\n        >\n          <ToggleButton value=\"pdf\" sx={{ px: 3 }}>\n            <PictureAsPdfIcon sx={{ mr: 1, fontSize: 18 }} />\n            PDF Reports\n          </ToggleButton>\n          <ToggleButton value=\"excel\" sx={{ px: 3 }}>\n            <TableChartIcon sx={{ mr: 1, fontSize: 18 }} />\n            Excel Reports\n          </ToggleButton>\n        </ToggleButtonGroup>\n      </Box>\n\n      {/* Template Gallery */}\n      {!showUpload && !verifyResult && (\n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"subtitle2\" fontWeight={600} color=\"text.secondary\" sx={{ mb: 2, textTransform: 'uppercase', fontSize: '0.75rem', letterSpacing: '0.05em' }}>\n            <AutoAwesomeIcon sx={{ fontSize: 14, mr: 0.5, verticalAlign: 'middle' }} />\n            Template Gallery\n          </Typography>\n\n          <Grid container spacing={2}>\n            {filteredGalleryTemplates.map((template) => {\n              const IconComponent = template.icon\n              const isSelected = selectedGalleryTemplate?.id === template.id\n\n              return (\n                <Grid item xs={12} sm={6} md={4} key={template.id}>\n                  <Card\n                    variant=\"outlined\"\n                    sx={{\n                      height: '100%',\n                      border: 2,\n                      borderColor: isSelected ? (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700] : 'divider',\n                      bgcolor: isSelected ? (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50] : 'transparent',\n                      transition: 'all 0.2s',\n                      '&:hover': {\n                        borderColor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                        transform: 'translateY(-2px)',\n                        boxShadow: 2,\n                      },\n                    }}\n                  >\n                    <CardActionArea\n                      onClick={() => handleSelectGalleryTemplate(template)}\n                      sx={{ height: '100%', display: 'flex', flexDirection: 'column', alignItems: 'stretch' }}\n                    >\n                      <CardContent sx={{ flex: 1 }}>\n                        <Stack direction=\"row\" alignItems=\"flex-start\" spacing={1} sx={{ mb: 1 }}>\n                          <Radio checked={isSelected} size=\"small\" sx={{ p: 0, mr: 0.5 }} />\n                          <IconComponent sx={{\n                            fontSize: 24,\n                            color: 'text.secondary'\n                          }} />\n                          <Box sx={{ flex: 1 }}>\n                            <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n                              <Typography variant=\"subtitle2\" fontWeight={600}>\n                                {template.name}\n                              </Typography>\n                              {template.popular && (\n                                <Chip label=\"Popular\" size=\"small\" sx={{ height: 18, fontSize: '10px', bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }} />\n                              )}\n                            </Stack>\n                            <Chip\n                              label={template.kind.toUpperCase()}\n                              size=\"small\"\n                              variant=\"outlined\"\n                              sx={{ height: 18, fontSize: '10px', mt: 0.5, bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                            />\n                          </Box>\n                        </Stack>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {template.description}\n                        </Typography>\n                      </CardContent>\n                    </CardActionArea>\n                  </Card>\n                </Grid>\n              )\n            })}\n          </Grid>\n\n          {selectedGalleryTemplate && (\n            <Box sx={{ mt: 2 }}>\n              <Button\n                variant=\"contained\"\n                onClick={handleUseGalleryTemplate}\n                startIcon={<CheckCircleIcon />}\n                sx={{ mr: 2 }}\n              >\n                Use \"{selectedGalleryTemplate.name}\"\n              </Button>\n              <Button variant=\"text\" onClick={() => setSelectedGalleryTemplate(null)}>\n                Clear Selection\n              </Button>\n            </Box>\n          )}\n\n          <Divider sx={{ my: 3 }}>\n            <Chip label=\"Or start your own\" size=\"small\" />\n          </Divider>\n\n          <Stack direction=\"row\" spacing={2}>\n            <Button\n              variant=\"contained\"\n              startIcon={<AutoAwesomeIcon />}\n              onClick={() => handleNavigate(`/templates/new/chat?from=wizard&connectionId=${encodeURIComponent(wizardState.connectionId || '')}`, 'Create template with AI')}\n              sx={{\n                bgcolor: neutral[900],\n                '&:hover': { bgcolor: neutral[700] },\n              }}\n            >\n              Create with AI\n            </Button>\n            <Button\n              variant=\"outlined\"\n              startIcon={<CloudUploadIcon />}\n              onClick={() => setShowUpload(true)}\n              sx={{ borderStyle: 'dashed' }}\n            >\n              Upload Custom Template\n            </Button>\n          </Stack>\n        </Box>\n      )}\n\n      {/* Upload Section - shown when user chooses to upload */}\n      {(showUpload || verifyResult) && (\n        <>\n          {showUpload && !verifyResult && (\n            <Button\n              variant=\"text\"\n              onClick={() => setShowUpload(false)}\n              sx={{ mb: 2 }}\n            >\n              ← Back to Gallery\n            </Button>\n          )}\n\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\n              {error}\n            </Alert>\n          )}\n\n          {queuedJobId && (\n        <Alert\n          severity=\"info\"\n          sx={{ mb: 3 }}\n          action={(\n            <Button size=\"small\" onClick={() => handleNavigate('/jobs', 'Open jobs')} sx={{ textTransform: 'none' }}>\n              View Jobs\n            </Button>\n          )}\n        >\n          Template verification queued. Job ID: {queuedJobId}\n        </Alert>\n      )}\n\n      {verifyResult ? (\n        <Paper\n          sx={{\n            p: 3,\n            border: 2,\n            borderColor: (theme) => alpha(theme.palette.divider, 0.3),\n            bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n          }}\n        >\n          <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n            <CheckCircleIcon sx={{ fontSize: 48, color: 'text.secondary' }} />\n            <Box>\n              <Typography variant=\"subtitle1\" fontWeight={600}>\n                Template Verified\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {uploadedFile?.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                ID: {verifyResult.template_id}\n              </Typography>\n            </Box>\n          </Stack>\n        </Paper>\n      ) : (\n        <Paper\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          sx={{\n            p: 4,\n            border: 2,\n            borderStyle: 'dashed',\n            borderColor: 'divider',\n            bgcolor: 'action.hover',\n            textAlign: 'center',\n            cursor: 'pointer',\n            transition: 'border-color 0.2s, background-color 0.2s',\n            '&:hover': {\n              borderColor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n              bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n            },\n          }}\n          onClick={handleBrowseClick}\n        >\n          <Stack direction=\"row\" justifyContent=\"center\" sx={{ mb: 2 }}>\n            <Button\n              variant={queueInBackground ? 'contained' : 'outlined'}\n              size=\"small\"\n              onClick={(e) => {\n                e.stopPropagation()\n                setQueueInBackground((prev) => !prev)\n              }}\n              sx={{ textTransform: 'none' }}\n            >\n              {queueInBackground ? 'Queue in background: On' : 'Queue in background: Off'}\n            </Button>\n          </Stack>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept={acceptedTypes}\n            onChange={handleFileSelect}\n            hidden\n          />\n\n          {uploading ? (\n            <Box>\n              <Typography variant=\"body1\" sx={{ mb: 2 }}>\n                Uploading and verifying...\n              </Typography>\n              <LinearProgress\n                variant=\"determinate\"\n                value={uploadProgress}\n                sx={{ maxWidth: 300, mx: 'auto', bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100], '& .MuiLinearProgress-bar': { bgcolor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700] } }}\n              />\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\n                {uploadProgress}%\n              </Typography>\n            </Box>\n          ) : (\n            <>\n              <CloudUploadIcon sx={{ fontSize: 48, color: 'text.disabled', mb: 2 }} />\n              <Typography variant=\"body1\" sx={{ mb: 1 }}>\n                Drag and drop your {templateKind.toUpperCase()} file here\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                or click to browse\n              </Typography>\n              <Button variant=\"outlined\" size=\"small\">\n                Browse Files\n              </Button>\n            </>\n          )}\n        </Paper>\n      )}\n\n          {/* Preview */}\n          {verifyResult?.artifacts?.png_url && (\n            <Box sx={{ mt: 3 }}>\n              <Typography variant=\"subtitle2\" fontWeight={600} sx={{ mb: 1 }}>\n                Preview\n              </Typography>\n              <Paper sx={{ p: 2, bgcolor: 'background.default' }}>\n                <img\n                  src={verifyResult.artifacts.png_url}\n                  alt=\"Template preview\"\n                  style={{ maxWidth: '100%', height: 'auto', borderRadius: 4 }}\n                />\n              </Paper>\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  )\n}\n","import { useState, useCallback, useEffect } from 'react'\nimport {\n  Box,\n  Typography,\n  Stack,\n  Alert,\n  Paper,\n  LinearProgress,\n  Chip,\n  Button,\n  Collapse,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  TextField,\n  IconButton,\n  Tooltip,\n} from '@mui/material'\nimport { alpha } from '@mui/material/styles'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess'\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh'\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\nimport * as api from '@/api/client'\nimport { neutral, palette } from '@/app/theme'\n\nexport default function StepMapping({ wizardState, updateWizardState, onComplete, setLoading }) {\n  const toast = useToast()\n  const { execute } = useInteraction()\n\n  const templateId = useAppStore((s) => s.templateId) || wizardState.templateId\n  const activeConnection = useAppStore((s) => s.activeConnection)\n  const setLastApprovedTemplate = useAppStore((s) => s.setLastApprovedTemplate)\n\n  const [loading, setLocalLoading] = useState(false)\n  const [mapping, setMapping] = useState(wizardState.mapping || {})\n  const [keys, setKeys] = useState(wizardState.keys || [])\n  const [showAdvanced, setShowAdvanced] = useState(false)\n  const [approving, setApproving] = useState(false)\n  const [approved, setApproved] = useState(false)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    let cancelled = false\n\n    const fetchMapping = async () => {\n      if (!templateId) return\n\n      setLocalLoading(true)\n      try {\n        const connectionId = wizardState.connectionId || activeConnection?.id\n        await execute({\n          type: InteractionType.ANALYZE,\n          label: 'Load mapping preview',\n          reversibility: Reversibility.SYSTEM_MANAGED,\n          suppressSuccessToast: true,\n          suppressErrorToast: true,\n          blocksNavigation: false,\n          intent: {\n            connectionId,\n            templateId,\n            templateKind: wizardState.templateKind || 'pdf',\n            action: 'mapping_preview',\n          },\n          action: async () => {\n            try {\n              const result = await api.mappingPreview(templateId, connectionId, {\n                kind: wizardState.templateKind || 'pdf',\n              })\n\n              if (!cancelled) {\n                if (result.mapping) {\n                  setMapping(result.mapping)\n                  updateWizardState({ mapping: result.mapping })\n                }\n                if (result.keys) {\n                  setKeys(result.keys)\n                  updateWizardState({ keys: result.keys })\n                }\n              }\n              return result\n            } catch (err) {\n              if (!cancelled) {\n                setError(err.message || 'Failed to load mapping')\n              }\n              throw err\n            }\n          },\n        })\n      } finally {\n        if (!cancelled) {\n          setLocalLoading(false)\n        }\n      }\n    }\n\n    if (!wizardState.mapping) {\n      fetchMapping()\n    }\n\n    return () => { cancelled = true }\n  }, [templateId, wizardState.connectionId, wizardState.templateKind, wizardState.mapping, activeConnection?.id, updateWizardState, execute])\n\n  const handleMappingChange = useCallback((token, field, value) => {\n    setMapping((prev) => ({\n      ...prev,\n      [token]: {\n        ...prev[token],\n        [field]: value,\n      },\n    }))\n  }, [])\n\n  const handleApprove = useCallback(async () => {\n    setApproving(true)\n    setError(null)\n\n    try {\n      const connectionId = wizardState.connectionId || activeConnection?.id\n\n      await execute({\n        type: InteractionType.UPDATE,\n        label: 'Approve template mapping',\n        reversibility: Reversibility.SYSTEM_MANAGED,\n        suppressSuccessToast: true,\n        suppressErrorToast: true,\n        blocksNavigation: true,\n        intent: {\n          connectionId,\n          templateId,\n          templateKind: wizardState.templateKind || 'pdf',\n          action: 'mapping_approve',\n        },\n        action: async () => {\n          try {\n            const result = await api.mappingApprove(templateId, mapping, {\n              connectionId,\n              keys,\n              kind: wizardState.templateKind || 'pdf',\n              onProgress: () => {\n                // Handle progress events\n              },\n            })\n\n            if (result.ok) {\n              setApproved(true)\n              setLastApprovedTemplate({\n                id: templateId,\n                name: wizardState.templateName,\n                kind: wizardState.templateKind,\n              })\n              toast.show('Template approved and ready to use!', 'success')\n            }\n            return result\n          } catch (err) {\n            setError(err.message || 'Failed to approve mapping')\n            toast.show(err.message || 'Failed to approve mapping', 'error')\n            throw err\n          }\n        },\n      })\n    } finally {\n      setApproving(false)\n    }\n  }, [templateId, mapping, keys, wizardState, activeConnection?.id, setLastApprovedTemplate, toast, execute])\n\n  const mappingEntries = Object.entries(mapping)\n\n  return (\n    <Box>\n      <Typography variant=\"h6\" fontWeight={600} sx={{ mb: 1 }}>\n        Configure Field Mapping\n      </Typography>\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n        Map template placeholders to your database columns for automatic data insertion.\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\n          {error}\n        </Alert>\n      )}\n\n      {approved && (\n        <Alert\n          severity=\"success\"\n          icon={<CheckCircleIcon />}\n          sx={{ mb: 3 }}\n        >\n          Template mapping approved! You can now generate reports.\n        </Alert>\n      )}\n\n      {loading ? (\n        <Box sx={{ py: 4 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2, textAlign: 'center' }}>\n            Loading mapping configuration...\n          </Typography>\n          <LinearProgress />\n        </Box>\n      ) : mappingEntries.length === 0 ? (\n        <Alert severity=\"info\">\n          No mappings found. The template may not have any placeholder tokens.\n        </Alert>\n      ) : (\n        <>\n          <Paper variant=\"outlined\" sx={{ overflow: 'hidden' }}>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow sx={{ bgcolor: 'action.hover' }}>\n                  <TableCell sx={{ fontWeight: 600 }}>Template Field</TableCell>\n                  <TableCell sx={{ fontWeight: 600 }}>Database Column</TableCell>\n                  <TableCell sx={{ fontWeight: 600 }}>Status</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {mappingEntries.map(([token, config]) => (\n                  <TableRow key={token}>\n                    <TableCell>\n                      <Chip\n                        label={token}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        sx={{ fontFamily: 'monospace' }}\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <TextField\n                        size=\"small\"\n                        value={config?.column || config?.expression || ''}\n                        onChange={(e) => handleMappingChange(token, 'column', e.target.value)}\n                        placeholder=\"Enter column name\"\n                        fullWidth\n                        disabled={approved}\n                      />\n                    </TableCell>\n                    <TableCell>\n                      {config?.column || config?.expression ? (\n                        <Chip label=\"Mapped\" size=\"small\" variant=\"outlined\" sx={{ bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }} />\n                      ) : (\n                        <Chip label=\"Unmapped\" size=\"small\" variant=\"outlined\" sx={{ bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }} />\n                      )}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper>\n\n          {/* Advanced Settings */}\n          <Box sx={{ mt: 3 }}>\n            <Button\n              variant=\"text\"\n              size=\"small\"\n              onClick={() => setShowAdvanced((prev) => !prev)}\n              endIcon={showAdvanced ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n              sx={{ textTransform: 'none', fontWeight: 500 }}\n            >\n              Advanced Settings\n            </Button>\n\n            <Collapse in={showAdvanced}>\n              <Paper sx={{ mt: 2, p: 2, bgcolor: 'action.hover' }}>\n                <Typography variant=\"subtitle2\" fontWeight={600} sx={{ mb: 2 }}>\n                  Key Fields\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                  Select fields that will be used as filter keys when generating reports.\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" gap={1}>\n                  {mappingEntries.map(([token]) => (\n                    <Chip\n                      key={token}\n                      label={token}\n                      size=\"small\"\n                      variant={keys.includes(token) ? 'filled' : 'outlined'}\n                      sx={keys.includes(token) ? { bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' } : {}}\n                      onClick={() => {\n                        if (keys.includes(token)) {\n                          setKeys((prev) => prev.filter((k) => k !== token))\n                        } else {\n                          setKeys((prev) => [...prev, token])\n                        }\n                      }}\n                      disabled={approved}\n                    />\n                  ))}\n                </Stack>\n              </Paper>\n            </Collapse>\n          </Box>\n\n          {/* Approve Button */}\n          {!approved && (\n            <Box sx={{ mt: 4, textAlign: 'center' }}>\n              <Button\n                variant=\"contained\"\n                size=\"large\"\n                onClick={handleApprove}\n                disabled={approving}\n                startIcon={<AutoFixHighIcon />}\n              >\n                {approving ? 'Approving...' : 'Approve Mapping'}\n              </Button>\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  )\n}\n","import { useState, useCallback, useEffect } from 'react'\nimport { useSearchParams } from 'react-router-dom'\nimport { Stack } from '@mui/material'\nimport { WizardLayout } from '@/layouts'\nimport { useNavigateInteraction } from '@/components/ux/governance'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport StepConnection from '../components/steps/StepConnection'\nimport StepTemplate from '../components/steps/StepTemplate'\nimport StepMapping from '../components/steps/StepMapping'\nimport ReportGlossaryNotice from '@/components/ux/ReportGlossaryNotice.jsx'\n\nconst WIZARD_STORAGE_KEY = 'neurareport_wizard_state'\n\nconst saveWizardState = (state) => {\n  try {\n    sessionStorage.setItem(WIZARD_STORAGE_KEY, JSON.stringify(state))\n  } catch (e) {\n    // Ignore storage errors\n  }\n}\n\nconst loadWizardState = () => {\n  try {\n    const stored = sessionStorage.getItem(WIZARD_STORAGE_KEY)\n    return stored ? JSON.parse(stored) : null\n  } catch (e) {\n    return null\n  }\n}\n\nconst clearWizardState = () => {\n  try {\n    sessionStorage.removeItem(WIZARD_STORAGE_KEY)\n  } catch (e) {\n    // Ignore storage errors\n  }\n}\n\nconst WIZARD_STEPS = [\n  {\n    key: 'connection',\n    label: 'Connect Data Source',\n    description: 'Select or create a data source for reports',\n  },\n  {\n    key: 'template',\n    label: 'Upload Report Design',\n    description: 'Upload a PDF or Excel design',\n  },\n  {\n    key: 'mapping',\n    label: 'Map Fields',\n    description: 'Match design fields to data columns (no SQL required)',\n  },\n]\n\nconst STEP_MAP = { connection: 0, template: 1, mapping: 2 }\nconst STEP_KEYS = ['connection', 'template', 'mapping']\n\nexport default function SetupWizard() {\n  const navigate = useNavigateInteraction()\n  const [searchParams, setSearchParams] = useSearchParams()\n  const handleNavigate = useCallback(\n    (path, label, intent = {}) =>\n      navigate(path, { label, intent: { from: 'setup-wizard', ...intent } }),\n    [navigate]\n  )\n  const toast = useToast()\n  const [loading, setLoading] = useState(false)\n\n  // Get step from URL or default to 0\n  const stepParam = searchParams.get('step') || 'connection'\n  const [currentStep, setCurrentStep] = useState(() => STEP_MAP[stepParam] ?? 0)\n\n  // Load wizard state from sessionStorage on mount\n  const [wizardState, setWizardState] = useState(() => {\n    const stored = loadWizardState()\n    return stored || {\n      connectionId: null,\n      templateId: null,\n      templateKind: 'pdf',\n      mapping: null,\n      keys: [],\n    }\n  })\n\n  const activeConnection = useAppStore((s) => s.activeConnection)\n  const templateId = useAppStore((s) => s.templateId)\n\n  // Persist wizard state to sessionStorage whenever it changes\n  useEffect(() => {\n    saveWizardState(wizardState)\n  }, [wizardState])\n\n  // Update URL when step changes\n  useEffect(() => {\n    setSearchParams((prev) => {\n      const newParams = new URLSearchParams(prev)\n      newParams.set('step', STEP_KEYS[currentStep])\n      return newParams\n    }, { replace: true })\n  }, [currentStep, setSearchParams])\n\n  const updateWizardState = useCallback((updates) => {\n    setWizardState((prev) => ({ ...prev, ...updates }))\n  }, [])\n\n  const handleNext = useCallback(() => {\n    if (currentStep < WIZARD_STEPS.length - 1) {\n      setCurrentStep((prev) => prev + 1)\n    }\n  }, [currentStep])\n\n  const handlePrev = useCallback(() => {\n    if (currentStep > 0) {\n      setCurrentStep((prev) => prev - 1)\n    }\n  }, [currentStep])\n\n  const handleComplete = useCallback(() => {\n    clearWizardState()\n    toast.show('Report design ready. You can run it from Reports.', 'success')\n    handleNavigate('/reports', 'Open reports')\n  }, [handleNavigate, toast])\n\n  const handleCancel = useCallback(() => {\n    clearWizardState()\n    handleNavigate('/', 'Exit wizard')\n  }, [handleNavigate])\n\n  const getStepContent = () => {\n    switch (currentStep) {\n      case 0:\n        return (\n          <StepConnection\n            wizardState={wizardState}\n            updateWizardState={updateWizardState}\n            onComplete={handleNext}\n            setLoading={setLoading}\n          />\n        )\n      case 1:\n        return (\n          <StepTemplate\n            wizardState={wizardState}\n            updateWizardState={updateWizardState}\n            onComplete={handleNext}\n            setLoading={setLoading}\n          />\n        )\n      case 2:\n        return (\n          <StepMapping\n            wizardState={wizardState}\n            updateWizardState={updateWizardState}\n            onComplete={handleComplete}\n            setLoading={setLoading}\n          />\n        )\n      default:\n        return null\n    }\n  }\n\n  const isNextDisabled = () => {\n    switch (currentStep) {\n      case 0:\n        return !wizardState.connectionId && !activeConnection?.id\n      case 1:\n        return !wizardState.templateId && !templateId\n      case 2:\n        return false\n      default:\n        return false\n    }\n  }\n\n  return (\n    <WizardLayout\n      title=\"Set Up Report Design\"\n      subtitle=\"Connect your data source and prepare a report design for runs\"\n      steps={WIZARD_STEPS}\n      currentStep={currentStep}\n      onNext={handleNext}\n      onPrev={handlePrev}\n      onComplete={handleComplete}\n      onCancel={handleCancel}\n      nextDisabled={isNextDisabled()}\n      loading={loading}\n    >\n      <Stack spacing={2}>\n        <ReportGlossaryNotice dense showChips={false} />\n        {getStepContent()}\n      </Stack>\n    </WizardLayout>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport SetupWizardContainer from '@/features/setup/containers/SetupWizardContainer'\n\nexport default function SetupWizard() {\n  useInteraction()\n  return <SetupWizardContainer />\n}\n"],"names":["getCardActionAreaUtilityClass","slot","generateUtilityClass","cardActionAreaClasses","generateUtilityClasses","useUtilityClasses","ownerState","classes","composeClasses","CardActionAreaRoot","styled","ButtonBase","memoTheme","theme","CardActionAreaFocusHighlight","CardActionArea","React.forwardRef","inProps","ref","props","useDefaultProps","children","className","focusVisibleClassName","slots","slotProps","other","externalForwardedProps","RootSlot","rootProps","useSlot","clsx","FocusHighlightSlot","focusHighlightProps","_jsx","RadioButtonUncheckedIcon","createSvgIcon","RadioButtonCheckedIcon","RadioButtonIconRoot","rootShouldForwardProp","RadioButtonIconBackground","RadioButtonIconDot","RadioButtonIcon","checked","fontSize","RadioGroupContext","React.createContext","useRadioGroup","React.useContext","getRadioUtilityClass","radioClasses","color","size","capitalize","RadioRoot","SwitchBase","prop","styles","createSimplePaletteValueFilter","areEqualValues","a","b","defaultCheckedIcon","defaultIcon","Radio","checkedProp","checkedIcon","icon","nameProp","onChangeProp","disabledProp","disableRipple","inputProps","muiFormControl","useFormControl","disabled","radioGroup","onChange","createChainedFunction","name","externalInputProps","rootSlotProps","handlers","event","args","React.cloneElement","WizardLayout","title","subtitle","steps","currentStep","onNext","onPrev","onComplete","onCancel","nextLabel","prevLabel","completeLabel","cancelLabel","nextDisabled","loading","progress","isLastStep","isFirstStep","jsxs","Box","jsx","Container","Typography","LinearProgress","neutral","Stack","step","index","CheckIcon","Paper","Button","ArrowBackIcon","ArrowForwardIcon","DEMO_CONNECTION","StepConnection","wizardState","updateWizardState","setLoading","toast","useToast","execute","useInteraction","savedConnections","useAppStore","setSavedConnections","addSavedConnection","setActiveConnectionId","activeConnection","selectedId","setSelectedId","useState","drawerOpen","setDrawerOpen","formLoading","setFormLoading","normalizedConnections","conn","useEffect","fetchConnections","state","api.bootstrapState","err","handleSelect","useCallback","connectionId","handleAddConnection","handleSaveConnection","connectionData","InteractionType","Reversibility","result","api.testConnection","savedConnection","api.upsertConnection","handleSelectDemo","c","handleSkipConnection","Card","alpha","CardContent","ScienceIcon","Chip","CloudIcon","Divider","Alert","StorageIcon","CheckCircleIcon","AddIcon","Drawer","ConnectionForm","TEMPLATE_GALLERY","ReceiptLongIcon","AssessmentIcon","TableChartIcon","SummarizeIcon","DescriptionIcon","StepTemplate","navigate","useNavigateInteraction","handleNavigate","path","label","intent","fileInputRef","useRef","s","setTemplateId","setVerifyArtifacts","addTemplate","templateKind","setTemplateKind","uploading","setUploading","uploadProgress","setUploadProgress","uploadedFile","setUploadedFile","verifyResult","setVerifyResult","error","setError","queueInBackground","setQueueInBackground","queuedJobId","setQueuedJobId","selectedGalleryTemplate","setSelectedGalleryTemplate","showUpload","setShowUpload","cancelled","pollJob","job","api.getJob","templateId","message","intervalId","handleKindChange","_","newKind","handleFile","file","msg","api.verifyTemplate","percent","jobId","handleDrop","files","handleDragOver","handleFileSelect","handleBrowseClick","acceptedTypes","handleSelectGalleryTemplate","template","handleUseGalleryTemplate","api.createTemplateFromGallery","filteredGalleryTemplates","t","ToggleButtonGroup","ToggleButton","PictureAsPdfIcon","AutoAwesomeIcon","Grid","IconComponent","isSelected","CloudUploadIcon","Fragment","e","prev","StepMapping","setLastApprovedTemplate","setLocalLoading","mapping","setMapping","keys","setKeys","showAdvanced","setShowAdvanced","approving","setApproving","approved","setApproved","fetchMapping","api.mappingPreview","handleMappingChange","token","field","value","handleApprove","api.mappingApprove","mappingEntries","Table","TableHead","TableRow","TableCell","TableBody","config","TextField","ExpandLessIcon","ExpandMoreIcon","Collapse","k","AutoFixHighIcon","WIZARD_STORAGE_KEY","saveWizardState","loadWizardState","stored","clearWizardState","WIZARD_STEPS","STEP_MAP","STEP_KEYS","SetupWizard","searchParams","setSearchParams","useSearchParams","stepParam","setCurrentStep","setWizardState","newParams","updates","handleNext","handlePrev","handleComplete","handleCancel","getStepContent","isNextDisabled","ReportGlossaryNotice","SetupWizardContainer"],"mappings":"iwCAEO,SAASA,GAA8BC,EAAM,CAClD,OAAOC,GAAqB,oBAAqBD,CAAI,CACvD,CACA,MAAME,GAAwBC,GAAuB,oBAAqB,CAAC,OAAQ,eAAgB,gBAAgB,CAAC,ECQ9GC,GAAoBC,GAAc,CACtC,KAAM,CACJ,QAAAC,CAAA,EACED,EAKJ,OAAOE,GAJO,CACZ,KAAM,CAAC,MAAM,EACb,eAAgB,CAAC,gBAAgB,CAAA,EAENR,GAA+BO,CAAO,CACrE,EACME,GAAqBC,EAAOC,GAAY,CAC5C,KAAM,oBACN,KAAM,MACR,CAAC,EAAEC,GAAU,CAAC,CACZ,MAAAC,CACF,KAAO,CACL,QAAS,QACT,UAAW,UACX,aAAc,UAEd,MAAO,OACP,CAAC,YAAYV,GAAsB,cAAc,EAAE,EAAG,CACpD,SAAUU,EAAM,MAAQA,GAAO,QAAQ,OAAO,aAC9C,uBAAwB,CACtB,QAAS,CAAA,CACX,EAEF,CAAC,KAAKV,GAAsB,YAAY,KAAKA,GAAsB,cAAc,EAAE,EAAG,CACpF,SAAUU,EAAM,MAAQA,GAAO,QAAQ,OAAO,YAAA,CAElD,EAAE,CAAC,EACGC,GAA+BJ,EAAO,OAAQ,CAClD,KAAM,oBACN,KAAM,gBACR,CAAC,EAAEE,GAAU,CAAC,CACZ,MAAAC,CACF,KAAO,CACL,SAAU,SACV,cAAe,OACf,SAAU,WACV,IAAK,EACL,MAAO,EACP,OAAQ,EACR,KAAM,EACN,aAAc,UACd,QAAS,EACT,gBAAiB,eACjB,WAAYA,EAAM,YAAY,OAAO,UAAW,CAC9C,SAAUA,EAAM,YAAY,SAAS,KAAA,CACtC,CACH,EAAE,CAAC,EACGE,GAA8BC,EAAAA,WAAiB,SAAwBC,EAASC,EAAK,CACzF,MAAMC,EAAQC,GAAgB,CAC5B,MAAOH,EACP,KAAM,mBAAA,CACP,EACK,CACJ,SAAAI,EACA,UAAAC,EACA,sBAAAC,EACA,MAAAC,EAAQ,CAAA,EACR,UAAAC,EAAY,CAAA,EACZ,GAAGC,CAAA,EACDP,EACEb,EAAaa,EACbZ,EAAUF,GAAkBC,CAAU,EACtCqB,EAAyB,CAC7B,MAAAH,EACA,UAAAC,CAAA,EAEI,CAACG,EAAUC,CAAS,EAAIC,GAAQ,OAAQ,CAC5C,YAAarB,GACb,uBAAwB,CACtB,GAAGkB,EACH,GAAGD,CAAA,EAEL,2BAA4B,GAC5B,WAAApB,EACA,IAAAY,EACA,UAAWa,GAAKxB,EAAQ,KAAMe,CAAS,EACvC,gBAAiB,CACf,sBAAuBS,GAAKR,EAAuBhB,EAAQ,YAAY,CAAA,CACzE,CACD,EACK,CAACyB,EAAoBC,CAAmB,EAAIH,GAAQ,iBAAkB,CAC1E,YAAahB,GACb,uBAAAa,EACA,WAAArB,EACA,UAAWC,EAAQ,cAAA,CACpB,EACD,cAA0BqB,EAAU,CAClC,GAAGC,EACH,SAAU,CAACR,EAAuBa,EAAAA,IAAKF,EAAoB,CACzD,GAAGC,CAAA,CACJ,CAAC,CAAA,CACH,CACH,CAAC,ECrGDE,GAAeC,GAA2BF,EAAAA,IAAK,OAAQ,CACrD,EAAG,8HACL,CAAC,CAAyB,ECF1BG,GAAeD,GAA2BF,EAAAA,IAAK,OAAQ,CACrD,EAAG,6KACL,CAAC,CAAuB,ECDlBI,GAAsB5B,EAAO,OAAQ,CACzC,KAAM,qBACN,kBAAmB6B,EACrB,CAAC,EAAE,CACD,SAAU,WACV,QAAS,MACX,CAAC,EACKC,GAA4B9B,EAAOyB,GAA0B,CACjE,KAAM,oBACR,CAAC,EAAE,CAED,UAAW,UACb,CAAC,EACKM,GAAqB/B,EAAO2B,GAAwB,CACxD,KAAM,oBACR,CAAC,EAAEzB,GAAU,CAAC,CACZ,MAAAC,CACF,KAAO,CACL,KAAM,EACN,SAAU,WACV,UAAW,WACX,WAAYA,EAAM,YAAY,OAAO,YAAa,CAChD,OAAQA,EAAM,YAAY,OAAO,OACjC,SAAUA,EAAM,YAAY,SAAS,QAAA,CACtC,EACD,SAAU,CAAC,CACT,MAAO,CACL,QAAS,EAAA,EAEX,MAAO,CACL,UAAW,WACX,WAAYA,EAAM,YAAY,OAAO,YAAa,CAChD,OAAQA,EAAM,YAAY,OAAO,QACjC,SAAUA,EAAM,YAAY,SAAS,QAAA,CACtC,CAAA,CACH,CACD,CACH,EAAE,CAAC,EAKH,SAAS6B,GAAgBvB,EAAO,CAC9B,KAAM,CACJ,QAAAwB,EAAU,GACV,QAAApC,EAAU,CAAA,EACV,SAAAqC,CAAA,EACEzB,EACEb,EAAa,CACjB,GAAGa,EACH,QAAAwB,CAAA,EAEF,cAA0BL,GAAqB,CAC7C,UAAW/B,EAAQ,KACnB,WAAAD,EACA,SAAU,CAAc4B,EAAAA,IAAKM,GAA2B,CACtD,SAAAI,EACA,UAAWrC,EAAQ,WACnB,WAAAD,CAAA,CACD,EAAgB4B,EAAAA,IAAKO,GAAoB,CACxC,SAAAG,EACA,UAAWrC,EAAQ,IACnB,WAAAD,CAAA,CACD,CAAC,CAAA,CACH,CACH,CCpEA,MAAMuC,GAAiCC,EAAAA,cAAoB,MAAS,ECFrD,SAASC,IAAgB,CACtC,OAAOC,EAAAA,WAAiBH,EAAiB,CAC3C,CCJO,SAASI,GAAqBhD,EAAM,CACzC,OAAOC,GAAqB,WAAYD,CAAI,CAC9C,CACA,MAAMiD,GAAe9C,GAAuB,WAAY,CAAC,OAAQ,UAAW,WAAY,eAAgB,iBAAkB,WAAW,CAAC,ECgBhIC,GAAoBC,GAAc,CACtC,KAAM,CACJ,QAAAC,EACA,MAAA4C,EACA,KAAAC,CAAA,EACE9C,EACEkB,EAAQ,CACZ,KAAM,CAAC,OAAQ,QAAQ6B,GAAWF,CAAK,CAAC,GAAIC,IAAS,UAAY,OAAOC,GAAWD,CAAI,CAAC,EAAE,CAAA,EAE5F,MAAO,CACL,GAAG7C,EACH,GAAGC,GAAegB,EAAOyB,GAAsB1C,CAAO,CAAA,CAE1D,EACM+C,GAAY5C,EAAO6C,GAAY,CACnC,kBAAmBC,GAAQjB,GAAsBiB,CAAI,GAAKA,IAAS,UACnE,KAAM,WACN,KAAM,OACN,kBAAmB,CAACrC,EAAOsC,IAAW,CACpC,KAAM,CACJ,WAAAnD,CAAA,EACEa,EACJ,MAAO,CAACsC,EAAO,KAAMnD,EAAW,OAAS,UAAYmD,EAAO,OAAOJ,GAAW/C,EAAW,IAAI,CAAC,EAAE,EAAGmD,EAAO,QAAQJ,GAAW/C,EAAW,KAAK,CAAC,EAAE,CAAC,CACnJ,CACF,CAAC,EAAEM,GAAU,CAAC,CACZ,MAAAC,CACF,KAAO,CACL,OAAQA,EAAM,MAAQA,GAAO,QAAQ,KAAK,UAC1C,CAAC,KAAKqC,GAAa,QAAQ,EAAE,EAAG,CAC9B,OAAQrC,EAAM,MAAQA,GAAO,QAAQ,OAAO,QAAA,EAE9C,SAAU,CAAC,CACT,MAAO,CACL,MAAO,UACP,SAAU,GACV,cAAe,EAAA,EAEjB,MAAO,CACL,UAAW,CACT,gBAAiBA,EAAM,OAAOA,EAAM,MAAQA,GAAO,QAAQ,OAAO,QAASA,EAAM,MAAQA,GAAO,QAAQ,OAAO,YAAY,CAAA,CAC7H,CACF,EACC,GAAG,OAAO,QAAQA,EAAM,OAAO,EAAE,OAAO6C,GAAA,CAAgC,EAAE,IAAI,CAAC,CAACP,CAAK,KAAO,CAC7F,MAAO,CACL,MAAAA,EACA,SAAU,GACV,cAAe,EAAA,EAEjB,MAAO,CACL,UAAW,CACT,gBAAiBtC,EAAM,OAAOA,EAAM,MAAQA,GAAO,QAAQsC,CAAK,EAAE,MAAOtC,EAAM,MAAQA,GAAO,QAAQ,OAAO,YAAY,CAAA,CAC3H,CACF,EACA,EAAG,GAAG,OAAO,QAAQA,EAAM,OAAO,EAAE,OAAO6C,GAAA,CAAgC,EAAE,IAAI,CAAC,CAACP,CAAK,KAAO,CAC/F,MAAO,CACL,MAAAA,EACA,SAAU,EAAA,EAEZ,MAAO,CACL,CAAC,KAAKD,GAAa,OAAO,EAAE,EAAG,CAC7B,OAAQrC,EAAM,MAAQA,GAAO,QAAQsC,CAAK,EAAE,IAAA,CAC9C,CACF,EACA,EAAG,CAEH,MAAO,CACL,cAAe,EAAA,EAEjB,MAAO,CAEL,UAAW,CACT,uBAAwB,CACtB,gBAAiB,aAAA,CACnB,CACF,CACF,CACD,CACH,EAAE,CAAC,EACH,SAASQ,GAAeC,EAAGC,EAAG,CAC5B,OAAI,OAAOA,GAAM,UAAYA,IAAM,KAC1BD,IAAMC,EAIR,OAAOD,CAAC,IAAM,OAAOC,CAAC,CAC/B,CACA,MAAMC,SAAuCpB,GAAiB,CAC5D,QAAS,EACX,CAAC,EACKqB,GAA2B7B,EAAAA,IAAKQ,GAAiB,EAAE,EACnDsB,GAAqBhD,EAAAA,WAAiB,SAAeC,EAASC,EAAK,CACvE,MAAMC,EAAQC,GAAgB,CAC5B,MAAOH,EACP,KAAM,UAAA,CACP,EACK,CACJ,QAASgD,EACT,YAAAC,EAAcJ,GACd,MAAAX,EAAQ,UACR,KAAAgB,EAAOJ,GACP,KAAMK,EACN,SAAUC,EACV,KAAAjB,EAAO,SACP,UAAA9B,EACA,SAAUgD,EACV,cAAAC,EAAgB,GAChB,MAAA/C,EAAQ,CAAA,EACR,UAAAC,EAAY,CAAA,EACZ,WAAA+C,EACA,GAAG9C,CAAA,EACDP,EACEsD,EAAiBC,GAAA,EACvB,IAAIC,EAAWL,EACXG,GACE,OAAOE,EAAa,MACtBA,EAAWF,EAAe,UAG9BE,IAAa,GACb,MAAMrE,EAAa,CACjB,GAAGa,EACH,SAAAwD,EACA,cAAAJ,EACA,MAAApB,EACA,KAAAC,CAAA,EAEI7C,EAAUF,GAAkBC,CAAU,EACtCsE,EAAa7B,GAAA,EACnB,IAAIJ,EAAUsB,EACd,MAAMY,EAAWC,GAAsBT,EAAcO,GAAcA,EAAW,QAAQ,EACtF,IAAIG,EAAOX,EACPQ,IACE,OAAOjC,EAAY,MACrBA,EAAUgB,GAAeiB,EAAW,MAAOzD,EAAM,KAAK,GAEpD,OAAO4D,EAAS,MAClBA,EAAOH,EAAW,OAGtB,MAAMI,EAAqBvD,EAAU,OAAS+C,EACxC,CAAC5C,EAAUqD,CAAa,EAAInD,GAAQ,OAAQ,CAChD,IAAAZ,EACA,YAAaoC,GACb,UAAWvB,GAAKxB,EAAQ,KAAMe,CAAS,EACvC,2BAA4B,GAC5B,uBAAwB,CACtB,MAAAE,EACA,UAAAC,EACA,GAAGC,CAAA,EAEL,aAAcwD,IAAa,CACzB,GAAGA,EACH,SAAU,CAACC,KAAUC,IAAS,CAC5BF,EAAS,WAAWC,EAAO,GAAGC,CAAI,EAClCP,EAASM,EAAO,GAAGC,CAAI,CACzB,CAAA,GAEF,WAAA9E,EACA,gBAAiB,CACf,KAAM,QACN,KAAmB+E,EAAAA,aAAmBlB,EAAM,CAC1C,SAAUA,EAAK,MAAM,UAAYf,CAAA,CAClC,EACD,YAA0BiC,EAAAA,aAAmBnB,EAAa,CACxD,SAAUA,EAAY,MAAM,UAAYd,CAAA,CACzC,EACD,SAAAuB,EACA,KAAAI,EACA,QAAApC,EACA,MAAAnB,EACA,UAAW,CAET,MAAO,OAAOwD,GAAuB,WAAaA,EAAmB1E,CAAU,EAAI0E,CAAA,CACrF,CACF,CACD,EACD,aAAyBpD,EAAU,CACjC,GAAGqD,EACH,QAAA1E,CAAA,CACD,CACH,CAAC,ECnMD,SAAwB+E,GAAa,CACnC,MAAAC,EACA,SAAAC,EACA,MAAAC,EACA,YAAAC,EACA,OAAAC,EACA,OAAAC,EACA,WAAAC,EACA,SAAAC,EACA,UAAAC,EAAY,OACZ,UAAAC,EAAY,OACZ,cAAAC,EAAgB,WAChB,YAAAC,EAAc,OACd,aAAAC,EAAe,GACf,QAAAC,EAAU,GACV,SAAA/E,CACF,EAAG,CACD,MAAMgF,GAAaX,EAAc,GAAKD,EAAM,OAAU,IAChDa,EAAaZ,IAAgBD,EAAM,OAAS,EAC5Cc,EAAcb,IAAgB,EAEpC,OACEc,EAAAA,KAACC,EAAA,CACC,GAAI,CACF,UAAW,QACX,QAAS,OACT,cAAe,SACf,QAAS,oBAAA,EAIX,SAAA,CAAAC,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,aAAc,EACd,YAAa,UACb,QAAS,mBACT,GAAI,CAAA,EAGN,SAAAD,EAAAA,KAACG,GAAA,CAAU,SAAS,KAClB,SAAA,CAAAD,MAACE,EAAA,CAAW,QAAQ,KAAK,WAAY,IAClC,SAAArB,EACH,EACCC,GACCkB,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,EAAA,EAC1D,SAAApB,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,EAIFkB,EAAAA,IAACG,GAAA,CACC,QAAQ,cACR,MAAOR,EACP,GAAI,CACF,OAAQ,EACR,QAAS,eACT,2BAA4B,CAC1B,QAAUxF,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,CAAA,CAChF,CACF,CAAA,EAIFJ,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,aAAc,EAAG,YAAa,UAAW,QAAS,kBAAA,EAC3D,SAAAC,EAAAA,IAACC,IAAU,SAAS,KAClB,SAAAD,EAAAA,IAACK,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,GAAI,CAAE,GAAI,CAAA,EAC1C,SAAAtB,EAAM,IAAI,CAACuB,EAAMC,IAChBT,EAAAA,KAACC,EAAA,CAEC,GAAI,CACF,KAAM,EACN,QAAS,OACT,WAAY,SACZ,IAAK,GAAA,EAGP,SAAA,CAAAC,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,MAAO,GACP,OAAQ,GACR,aAAc,MACd,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,QAAU5F,GAAUoG,EAAQvB,EACvB7E,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAC3DG,IAAUvB,EACP7E,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAC3D,4BACN,MAAOG,GAASvB,EAAc,QAAU,gBACxC,SAAU,UACV,WAAY,GAAA,EAGb,SAAAuB,EAAQvB,EAAcgB,EAAAA,IAACQ,GAAA,CAAU,GAAI,CAAE,SAAU,GAAG,CAAG,EAAKD,EAAQ,CAAA,CAAA,SAEtER,EAAA,CAAI,GAAI,CAAE,KAAM,GACf,SAAA,CAAAC,EAAAA,IAACE,EAAA,CACC,QAAQ,QACR,WAAYK,IAAUvB,EAAc,IAAM,IAC1C,MAAOuB,IAAUvB,EAAc,eAAiB,iBAE/C,SAAAsB,EAAK,KAAA,CAAA,EAEPA,EAAK,aACJN,MAACE,EAAA,CAAW,QAAQ,UAAU,MAAM,gBACjC,SAAAI,EAAK,WAAA,CACR,CAAA,EAEJ,EACCC,EAAQxB,EAAM,OAAS,GACtBiB,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,MAAO,GACP,OAAQ,EACR,QAAU5F,GAAUoG,EAAQvB,EAAe7E,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAAKjG,EAAM,QAAQ,QACxH,GAAI,CAAA,CACN,CAAA,CACF,CAAA,EAlDGmG,EAAK,GAAA,CAqDb,CAAA,CACH,CAAA,CACF,EACF,EAGAN,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,KAAM,EAAG,GAAI,CAAA,EACtB,SAAAC,EAAAA,IAACC,GAAA,CAAU,SAAS,KAClB,SAAAD,EAAAA,IAACS,EAAA,CACC,UAAW,EACX,GAAI,CACF,EAAG,EACH,OAAQ,EACR,YAAa,UACb,aAAc,CAAA,EAGf,SAAA9F,CAAA,CAAA,EAEL,CAAA,CACF,EAGAqF,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,UAAW,EACX,YAAa,UACb,QAAS,mBACT,GAAI,CAAA,EAGN,SAAAC,EAAAA,IAACC,IAAU,SAAS,KAClB,gBAACI,EAAA,CAAM,UAAU,MAAM,eAAe,gBACpC,SAAA,CAAAP,EAAAA,KAACO,EAAA,CAAM,UAAU,MAAM,QAAS,EAC7B,SAAA,CAAAjB,GACCY,EAAAA,IAACU,EAAA,CACC,QAAQ,OACR,QAAStB,EACT,SAAUM,EACV,GAAI,CAAE,MAAO,gBAAA,EAEZ,SAAAF,CAAA,CAAA,EAGLQ,EAAAA,IAACU,EAAA,CACC,QAAQ,WACR,gBAAYC,GAAA,EAAc,EAC1B,QAASzB,EACT,SAAUW,GAAeH,EAExB,SAAAJ,CAAA,CAAA,CACH,EACF,EACAU,EAAAA,IAACU,EAAA,CACC,QAAQ,YACR,QAASd,EAAaI,EAAAA,IAACQ,GAAA,CAAA,CAAU,QAAMI,GAAA,EAAiB,EACxD,QAAShB,EAAaT,EAAaF,EACnC,SAAUQ,GAAgBC,EAEzB,WAAaH,EAAgBF,CAAA,CAAA,CAChC,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAGN,CCpKA,MAAMwB,EAAkB,CACtB,GAAI,kBACJ,KAAM,yBACN,QAAS,OACT,SAAU,cACV,OAAQ,YACR,QAAS,qCACT,OAAQ,EACV,EAEA,SAAwBC,GAAe,CAAE,YAAAC,EAAa,kBAAAC,EAAmB,WAAA7B,EAAY,WAAA8B,GAAc,CACjG,MAAMC,EAAQC,GAAA,EACR,CAAE,QAAAC,CAAA,EAAYC,GAAA,EACdC,EAAmBC,EAAa,GAAM,EAAE,gBAAgB,EACxDC,EAAsBD,EAAa,GAAM,EAAE,mBAAmB,EAC9DE,EAAqBF,EAAa,GAAM,EAAE,kBAAkB,EAC5DG,EAAwBH,EAAa,GAAM,EAAE,qBAAqB,EAClEI,EAAmBJ,EAAa,GAAM,EAAE,gBAAgB,EAExD,CAACK,EAAYC,CAAa,EAAIC,EAAAA,SAASf,EAAY,cAAgBY,GAAkB,IAAM,IAAI,EAC/F,CAACI,EAAYC,CAAa,EAAIF,EAAAA,SAAS,EAAK,EAC5C,CAACG,EAAaC,CAAc,EAAIJ,EAAAA,SAAS,EAAK,EAC9CK,EAAwB,MAAM,QAAQb,CAAgB,EACxDA,EAAiB,OAAQc,GAASA,GAAQ,OAAOA,GAAS,UAAYA,EAAK,EAAE,EAC7E,CAAA,EAEJC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAmB,SAAY,CACnC,GAAI,CACF,MAAMC,EAAQ,MAAMC,GAAI,EACpBD,GAAO,aACTf,EAAoBe,EAAM,WAAW,CAEzC,OAASE,EAAK,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,EACjDvB,EAAM,KAAK,mCAAoC,SAAS,CAC1D,CACF,EACIiB,EAAsB,SAAW,GACnCG,EAAA,CAEJ,EAAG,CAACH,EAAsB,OAAQX,EAAqBN,CAAK,CAAC,EAE7D,MAAMwB,EAAeC,cAAaC,GAAiB,CACjDf,EAAce,CAAY,EAC1B5B,EAAkB,CAAE,aAAA4B,EAAc,EAClClB,EAAsBkB,CAAY,CACpC,EAAG,CAAC5B,EAAmBU,CAAqB,CAAC,EAEvCmB,EAAsBF,EAAAA,YAAY,IAAM,CAC5CX,EAAc,EAAI,CACpB,EAAG,CAAA,CAAE,EAECc,EAAuBH,cAAY,MAAOI,GAAmB,CACjEb,EAAe,EAAI,EACnB,GAAI,CACF,MAAMd,EAAQ,CACZ,KAAM4B,GAAgB,OACtB,MAAO,mBAAmBD,GAAgB,MAAQA,GAAgB,QAAU,YAAY,IACxF,cAAeE,EAAc,iBAC7B,qBAAsB,GACtB,mBAAoB,GACpB,iBAAkB,GAClB,OAAQ,CACN,eAAgBF,GAAgB,KAChC,OAAQA,GAAgB,OAAA,EAE1B,OAAQ,SAAY,CAClB,GAAI,CACF,MAAMG,EAAS,MAAMC,GAAmBJ,CAAc,EACtD,GAAI,CAACG,EAAO,GACV,MAAM,IAAI,MAAMA,EAAO,QAAU,wBAAwB,EAG3D,MAAME,EAAkB,MAAMC,GAAqB,CACjD,GAAIH,EAAO,cACX,KAAMH,EAAe,KACrB,OAAQA,EAAe,QACvB,MAAOA,EAAe,OACtB,SAAUA,EAAe,SACzB,OAAQ,YACR,UAAWG,EAAO,UAAA,CACnB,EAED,OAAAzB,EAAmB2B,CAAe,EAClCV,EAAaU,EAAgB,EAAE,EAC/BlC,EAAM,KAAK,mBAAoB,SAAS,EACxCc,EAAc,EAAK,EACZoB,CACT,OAASX,EAAK,CACZ,MAAAvB,EAAM,KAAKuB,EAAI,SAAW,4BAA6B,OAAO,EACxDA,CACR,CACF,CAAA,CACD,CACH,QAAA,CACEP,EAAe,EAAK,CACtB,CACF,EAAG,CAACT,EAAoBiB,EAAcxB,EAAOE,CAAO,CAAC,EAE9BuB,EAAAA,YAAY,IAAM,CACnCf,GACFzC,EAAA,CAEJ,EAAG,CAACyC,EAAYzC,CAAU,CAAC,EAE3B,MAAMmE,EAAmBX,EAAAA,YAAY,IAAM,CACzCd,EAAchB,EAAgB,EAAE,EAChCG,EAAkB,CAAE,aAAcH,EAAgB,GAAI,OAAQ,GAAM,EAE/DsB,EAAsB,KAAKoB,GAAKA,EAAE,KAAO1C,EAAgB,EAAE,GAC9DY,EAAmBZ,CAAe,EAEpCa,EAAsBb,EAAgB,EAAE,EACxCK,EAAM,KAAK,0CAA2C,SAAS,CACjE,EAAG,CAACF,EAAmBmB,EAAuBV,EAAoBC,EAAuBR,CAAK,CAAC,EAEzFsC,EAAuBb,EAAAA,YAAY,IAAM,CAE7C3B,EAAkB,CAAE,aAAc,KAAM,kBAAmB,GAAM,EACjE7B,EAAA,CACF,EAAG,CAAC6B,EAAmB7B,CAAU,CAAC,EAElC,cACGY,EAAA,CACC,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,KAAK,WAAY,IAAK,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,mBAAA,CAEzD,EACAF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,6EAAA,CAElE,SAGCH,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAA,CAAAC,MAACE,GAAW,QAAQ,YAAY,WAAY,IAAK,MAAM,iBAAiB,GAAI,CAAE,GAAI,EAAG,cAAe,YAAa,SAAU,UAAW,cAAe,QAAA,EAAY,SAAA,cAEjK,EACAJ,EAAAA,KAACO,EAAA,CAAM,UAAW,CAAE,GAAI,SAAU,GAAI,KAAA,EAAS,QAAS,EACtD,SAAA,CAAAL,EAAAA,IAACyD,GAAA,CACC,QAAQ,WACR,GAAI,CACF,KAAM,EACN,OAAQ,EACR,YAAa7B,IAAef,EAAgB,GAAM1G,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAAI,UAC1H,QAASwB,IAAef,EAAgB,GAAM1G,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,GAAI,EAAIiG,EAAQ,EAAE,EAAI,cAChJ,WAAY,WACZ,UAAW,CACT,YAAcjG,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAClF,QAAUjG,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,GAAI,EAAIiG,EAAQ,EAAE,CAAA,CAC1G,EAGF,eAAC/F,GAAA,CAAe,QAASiJ,EAAkB,GAAI,CAAE,OAAQ,MAAA,EACvD,SAAAxD,OAAC6D,IAAY,GAAI,CAAE,UAAW,SAAU,GAAI,GAC1C,SAAA,CAAA3D,EAAAA,IAAC4D,GAAA,CAAY,GAAI,CAAE,SAAU,GAAI,MAAO,iBAAkB,GAAI,CAAA,CAAE,CAAG,QAClE1D,EAAA,CAAW,QAAQ,YAAY,WAAY,IAAK,SAAA,gBAEjD,EACAF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,4CAAA,CAElE,EACAF,EAAAA,IAAC6D,EAAA,CAAK,MAAM,mCAAmC,KAAK,QAAQ,QAAQ,WAAW,GAAI,CAAE,QAAU1J,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,iBAAiB,CAAG,CAAA,CAAA,CAC7N,CAAA,CACF,CAAA,CAAA,EAGFJ,EAAAA,IAACyD,GAAA,CACC,QAAQ,WACR,GAAI,CACF,KAAM,EACN,OAAQ,EACR,YAAa,UACb,WAAY,WACZ,UAAW,CACT,YAAa,gBAAA,CACf,EAGF,eAACpJ,GAAA,CAAe,QAASmJ,EAAsB,GAAI,CAAE,OAAQ,MAAA,EAC3D,SAAA1D,OAAC6D,IAAY,GAAI,CAAE,UAAW,SAAU,GAAI,GAC1C,SAAA,CAAA3D,EAAAA,IAAC8D,GAAA,CAAU,GAAI,CAAE,SAAU,GAAI,MAAO,iBAAkB,GAAI,CAAA,CAAE,CAAG,QAChE5D,EAAA,CAAW,QAAQ,YAAY,WAAY,IAAK,SAAA,eAEjD,QACCA,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,SAAA,sDAAA,CAEnD,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAEAF,EAAAA,IAAC+D,GAAA,CAAQ,GAAI,CAAE,GAAI,CAAA,EACjB,SAAA/D,EAAAA,IAAC6D,EAAA,CAAK,MAAM,2BAA2B,KAAK,QAAQ,EACtD,EAEC1B,EAAsB,SAAW,GAAKA,EAAsB,MAAOoB,GAAMA,EAAE,MAAM,EAChFvD,EAAAA,IAACgE,EAAA,CAAM,SAAS,OAAO,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,oEAAA,CAEtC,EAEAhE,EAAAA,IAACK,GAAM,QAAS,EAAG,GAAI,CAAE,GAAI,CAAA,EAC1B,SAAA8B,EAAsB,IAAKC,GAC1BpC,EAAAA,IAACyD,GAAA,CAEC,QAAQ,WACR,GAAI,CACF,OAAQ,EACR,YAAa7B,IAAeQ,EAAK,GAAMjI,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAAI,UAC/G,WAAY,mBAAA,EAGd,eAAC/F,GAAA,CAAe,QAAS,IAAMqI,EAAaN,EAAK,EAAE,EACjD,SAAAtC,EAAAA,KAAC6D,GAAA,CAAY,GAAI,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,GAC7D,SAAA,CAAA3D,EAAAA,IAAC1C,GAAA,CACC,QAASsE,IAAeQ,EAAK,GAC7B,GAAI,CAAE,EAAG,CAAA,CAAE,CAAA,QAEZ6B,GAAA,CAAY,GAAI,CAAE,MAAO,kBAAoB,SAC7ClE,EAAA,CAAI,GAAI,CAAE,KAAM,GACf,SAAA,CAAAC,MAACE,GAAW,QAAQ,YAAY,WAAY,IACzC,WAAK,KACR,EACAJ,EAAAA,KAACI,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAC/B,SAAA,CAAAkC,EAAK,QAAQ,MAAIA,EAAK,SAAWA,EAAK,QAAA,CAAA,CACzC,CAAA,EACF,SACC/B,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,WAAW,SAC5C,SAAA,CAAAL,EAAAA,IAAC6D,EAAA,CACC,KAAK,QACL,MAAOzB,EAAK,SAAW,YAAc,YAAc,eACnD,QAAQ,WACR,GAAI,CAAE,QAAUjI,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,gBAAA,CAAiB,CAAA,EAE1IwB,IAAeQ,EAAK,IACnBpC,MAACkE,IAAgB,GAAI,CAAE,MAAO,iBAAiB,CAAG,CAAA,CAAA,CAEtD,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAnCK9B,EAAK,EAAA,CAqCb,EACH,QAGD2B,GAAA,CAAQ,GAAI,CAAE,GAAI,GAAK,EAExB/D,EAAAA,IAACU,EAAA,CACC,QAAQ,WACR,gBAAYyD,GAAA,EAAQ,EACpB,QAAStB,EACT,UAAS,GACT,GAAI,CACF,GAAI,IACJ,YAAa,QAAA,EAEhB,SAAA,oBAAA,CAAA,EAKD7C,EAAAA,IAACoE,GAAA,CACC,KAAMrC,EACN,QAAS,IAAMC,EAAc,EAAK,EAClC,MAAM,iBACN,SAAS,qCACT,MAAO,IAEP,SAAAhC,EAAAA,IAACqE,GAAA,CACC,OAAQvB,EACR,SAAU,IAAMd,EAAc,EAAK,EACnC,QAASC,CAAA,CAAA,CACX,CAAA,CACF,EACF,CAEJ,CChRA,MAAMqC,GAAmB,CACvB,CACE,GAAI,kBACJ,KAAM,iBACN,YAAa,8EACb,KAAM,MACN,KAAMC,GACN,QAAS,EAAA,EAEX,CACE,GAAI,gBACJ,KAAM,gBACN,YAAa,+DACb,KAAM,QACN,KAAMC,GACN,QAAS,EAAA,EAEX,CACE,GAAI,oBACJ,KAAM,mBACN,YAAa,gEACb,KAAM,QACN,KAAMC,GACN,QAAS,EAAA,EAEX,CACE,GAAI,oBACJ,KAAM,oBACN,YAAa,6DACb,KAAM,MACN,KAAMC,GACN,QAAS,EAAA,EAEX,CACE,GAAI,oBACJ,KAAM,qBACN,YAAa,oDACb,KAAM,MACN,KAAMC,GACN,QAAS,EAAA,EAEX,CACE,GAAI,sBACJ,KAAM,uBACN,YAAa,qDACb,KAAM,QACN,KAAMF,GACN,QAAS,EAAA,CAEb,EAEA,SAAwBG,GAAa,CAAE,YAAA7D,EAAa,kBAAAC,EAAmB,WAAA7B,EAAY,WAAA8B,GAAc,CAC/F,MAAMC,EAAQC,GAAA,EACR,CAAE,QAAAC,CAAA,EAAYC,GAAA,EACdwD,EAAWC,GAAA,EACXC,EAAiBpC,EAAAA,YACrB,CAACqC,EAAMC,EAAOC,EAAS,CAAA,IACrBL,EAASG,EAAM,CAAE,MAAAC,EAAO,OAAQ,CAAE,KAAM,sBAAuB,GAAGC,CAAA,EAAU,EAC9E,CAACL,CAAQ,CAAA,EAELM,EAAeC,EAAAA,OAAO,IAAI,EAE1BzD,EAAmBJ,EAAa8D,GAAMA,EAAE,gBAAgB,EACxDC,EAAgB/D,EAAa8D,GAAMA,EAAE,aAAa,EAClDE,EAAqBhE,EAAa8D,GAAMA,EAAE,kBAAkB,EAC5DG,EAAcjE,EAAa8D,GAAMA,EAAE,WAAW,EAE9C,CAACI,EAAcC,CAAe,EAAI5D,EAAAA,SAASf,EAAY,cAAgB,KAAK,EAC5E,CAAC4E,EAAWC,CAAY,EAAI9D,EAAAA,SAAS,EAAK,EAC1C,CAAC+D,EAAgBC,CAAiB,EAAIhE,EAAAA,SAAS,CAAC,EAChD,CAACiE,EAAcC,CAAe,EAAIlE,EAAAA,SAAS,IAAI,EAC/C,CAACmE,EAAcC,CAAe,EAAIpE,EAAAA,SAAS,IAAI,EAC/C,CAACqE,EAAOC,CAAQ,EAAItE,EAAAA,SAAS,IAAI,EACjC,CAACuE,EAAmBC,CAAoB,EAAIxE,EAAAA,SAAS,EAAK,EAC1D,CAACyE,EAAaC,CAAc,EAAI1E,EAAAA,SAAS,IAAI,EAC7C,CAAC2E,EAAyBC,CAA0B,EAAI5E,EAAAA,SAAS,IAAI,EACrE,CAAC6E,EAAYC,EAAa,EAAI9E,EAAAA,SAAS,EAAK,EAElDO,EAAAA,UAAU,IAAM,CACd,GAAI,CAACkE,EAAa,OAClB,IAAIM,EAAY,GAEhB,MAAMC,EAAU,SAAY,CAC1B,GAAI,CACF,MAAMC,EAAM,MAAMC,GAAWT,CAAW,EACxC,GAAIM,GAAa,CAACE,EAAK,OAMvB,GAJI,OAAOA,EAAI,UAAa,UAC1BjB,EAAkB,KAAK,MAAMiB,EAAI,QAAQ,CAAC,EAGxCA,EAAI,SAAW,YAAa,CAC9B,MAAM7D,EAAS6D,EAAI,QAAU,CAAA,EACvBE,EAAa/D,EAAO,aAAeA,EAAO,WAChD,GAAI,CAAC+D,EAAY,CACfb,EAAS,kEAAkE,EAC3ElF,EAAM,KAAK,yDAA0D,OAAO,EAC5EsF,EAAe,IAAI,EACnB,MACF,CAEAN,EAAgBhD,CAAM,EACtBoC,EAAc2B,CAAU,EACxB1B,EAAmBrC,EAAO,SAAS,EACnClC,EAAkB,CAAE,WAAAiG,EAAY,EAEhCzB,EAAY,CACV,GAAIyB,EACJ,KAAMlB,GAAc,MAAQ,YAAYkB,CAAU,GAClD,KAAMxB,EACN,OAAQ,UACR,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EAEDvE,EAAM,KAAK,iCAAkC,SAAS,EACtDsF,EAAe,IAAI,CACrB,SAAWO,EAAI,SAAW,UAAYA,EAAI,SAAW,YAAa,CAChE,MAAMG,EAAUH,EAAI,OAAS,+BAC7BX,EAASc,CAAO,EAChBhG,EAAM,KAAKgG,EAAS,OAAO,EAC3BV,EAAe,IAAI,CACrB,CACF,OAAS/D,EAAK,CACZ,GAAIoE,EAAW,OACf,MAAMK,EAAUzE,EAAI,SAAW,mCAC/B2D,EAASc,CAAO,EAChBhG,EAAM,KAAKgG,EAAS,OAAO,EAC3BV,EAAe,IAAI,CACrB,CACF,EAEAM,EAAA,EACA,MAAMK,EAAa,YAAYL,EAAS,GAAI,EAC5C,MAAO,IAAM,CACXD,EAAY,GACZ,cAAcM,CAAU,CAC1B,CACF,EAAG,CACDZ,EACAd,EACAM,EACAT,EACAC,EACAvE,EACAwE,EACAtE,CAAA,CACD,EAED,MAAMkG,GAAmBzE,EAAAA,YAAY,CAAC0E,EAAGC,IAAY,CAC/CA,IACF5B,EAAgB4B,CAAO,EACvBtG,EAAkB,CAAE,aAAcsG,EAAS,EAE/C,EAAG,CAACtG,CAAiB,CAAC,EAEhBuG,GAAa5E,cAAY,MAAO6E,GAAS,CAC7CpB,EAAS,IAAI,EACbJ,EAAgBwB,CAAI,EACpB5B,EAAa,EAAI,EACjBE,EAAkB,CAAC,EACnBU,EAAe,IAAI,EAEnB,GAAI,CACF,MAAM5D,EAAe7B,EAAY,cAAgBY,GAAkB,GACnE,GAAI,CAACiB,EAAc,CACjB,MAAM6E,EAAM,2DACZrB,EAASqB,CAAG,EACZvG,EAAM,KAAKuG,EAAK,SAAS,EACzB7B,EAAa,EAAK,EAClBE,EAAkB,CAAC,EACnB,MACF,CAEA,MAAM1E,EAAQ,CACZ,KAAM4B,GAAgB,OACtB,MAAO,UAAUyC,EAAa,YAAA,CAAa,YAC3C,cAAexC,EAAc,eAC7B,qBAAsB,GACtB,mBAAoB,GACpB,iBAAkB,GAClB,OAAQ,CACN,aAAAL,EACA,aAAA6C,EACA,SAAU+B,GAAM,KAChB,OAAQ,iBAAA,EAEV,OAAQ,SAAY,CAClB,GAAI,CACF,MAAMtE,EAAS,MAAMwE,GAAmB,CACtC,KAAAF,EACA,aAAA5E,EACA,KAAM6C,EACN,WAAYY,EACZ,WAAa5H,GAAU,CACrB,GAAIA,EAAM,QAAU,QAAS,CAC3B,MAAMkB,EAAWlB,EAAM,UAAY,EACnCqH,EAAkBnG,CAAQ,CAC5B,CACF,EACA,iBAAmBgI,GAAY,CAC7B7B,EAAkB6B,CAAO,CAC3B,CAAA,CACD,EAED,GAAItB,EAAmB,CACrB,MAAMuB,EAAQ1E,GAAQ,QAAUA,GAAQ,OAAS,KACjD,OAAAsD,EAAeoB,CAAK,EACpB1G,EAAM,KAAK,wDAAyD,SAAS,EACtEgC,CACT,CAEA,OAAAgD,EAAgBhD,CAAM,EACtBoC,EAAcpC,EAAO,WAAW,EAChCqC,EAAmBrC,EAAO,SAAS,EACnClC,EAAkB,CAAE,WAAYkC,EAAO,WAAA,CAAa,EAGpDsC,EAAY,CACV,GAAItC,EAAO,YACX,KAAMsE,EAAK,KACX,KAAM/B,EACN,OAAQ,UACR,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EAEDvE,EAAM,KAAK,iCAAkC,SAAS,EAC/CgC,CACT,OAAST,EAAK,CACZ,MAAA2D,EAAS3D,EAAI,SAAW,2BAA2B,EACnDvB,EAAM,KAAKuB,EAAI,SAAW,4BAA6B,OAAO,EACxDA,CACR,CACF,CAAA,CACD,CACH,QAAA,CACEmD,EAAa,EAAK,EAClBE,EAAkB,GAAG,CACvB,CACF,EAAG,CACD/E,EAAY,aACZY,GAAkB,GAClB8D,EACAY,EACAf,EACAC,EACAvE,EACAwE,EACAtE,EACAE,CAAA,CACD,EAEKyG,GAAalF,cAAalE,GAAU,CACxCA,EAAM,eAAA,EACN,MAAMqJ,EAAQrJ,EAAM,cAAc,MAC9BqJ,GAAO,OAAS,GAClBP,GAAWO,EAAM,CAAC,CAAC,CAEvB,EAAG,CAACP,EAAU,CAAC,EAETQ,GAAiBpF,cAAalE,GAAU,CAC5CA,EAAM,eAAA,CACR,EAAG,CAAA,CAAE,EAECuJ,GAAmBrF,cAAalE,GAAU,CAC9C,MAAMqJ,EAAQrJ,EAAM,OAAO,MACvBqJ,GAAO,OAAS,GAClBP,GAAWO,EAAM,CAAC,CAAC,CAEvB,EAAG,CAACP,EAAU,CAAC,EAETU,GAAoBtF,EAAAA,YAAY,IAAM,CAC1CwC,EAAa,SAAS,MAAA,CACxB,EAAG,CAAA,CAAE,EAEC+C,GAAgBzC,IAAiB,MACnC,OACA,aAEE0C,GAA8BxF,cAAayF,GAAa,CAC5D1B,EAA2B0B,CAAQ,EACnC1C,EAAgB0C,EAAS,IAAI,EAC7BpH,EAAkB,CAAE,aAAcoH,EAAS,KAAM,gBAAiBA,EAAU,CAC9E,EAAG,CAACpH,CAAiB,CAAC,EAEhBqH,GAA2B1F,EAAAA,YAAY,SAAY,CAClD8D,GAEL,MAAMrF,EAAQ,CACZ,KAAM4B,GAAgB,OACtB,MAAO,QAAQyD,EAAwB,IAAI,aAC3C,cAAexD,EAAc,iBAC7B,qBAAsB,GACtB,OAAQ,CACN,UAAWwD,EAAwB,GACnC,KAAMA,EAAwB,KAC9B,OAAQ,sBAAA,EAEV,OAAQ,SAAY,CAClBxF,EAAW,EAAI,EACf,GAAI,CAEF,MAAMiC,EAAS,MAAMoF,KAAgC,CACnD,UAAW7B,EAAwB,GACnC,KAAMA,EAAwB,KAC9B,aAAc1F,EAAY,YAAA,CAC3B,EAAE,MAAM,KAAO,CAEd,YAAa,YAAY0F,EAAwB,EAAE,IAAI,KAAK,KAAK,GACjE,KAAMA,EAAwB,IAAA,EAC9B,EAEIQ,EAAa/D,EAAO,aAAeA,EAAO,YAAc,WAAWuD,EAAwB,EAAE,GAEnG,OAAAnB,EAAc2B,CAAU,EACxBjG,EAAkB,CAAE,WAAAiG,EAAY,gBAAiBR,CAAA,CAAyB,EAE1EjB,EAAY,CACV,GAAIyB,EACJ,KAAMR,EAAwB,KAC9B,KAAMA,EAAwB,KAC9B,OAAQ,WACR,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,kBAAmB,EAAA,CACpB,EAEDvF,EAAM,KAAK,IAAIuF,EAAwB,IAAI,oBAAqB,SAAS,EACzEP,EAAgB,CAAE,YAAae,EAAY,EACpC/D,CACT,QAAA,CACEjC,EAAW,EAAK,CAClB,CACF,CAAA,CACD,CACH,EAAG,CAACwF,EAAyB1F,EAAY,aAAcuE,EAAetE,EAAmBwE,EAAatE,EAAOD,EAAYG,CAAO,CAAC,EAE3HmH,GAA2BjE,GAAiB,OAAOkE,GACvD/C,IAAiB,OAAS+C,EAAE,OAAS/C,CAAA,EAGvC,cACG1F,EAAA,CACC,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,KAAK,WAAY,IAAK,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,0BAAA,CAEzD,EACAF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,mEAAA,CAElE,QAGCH,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAAD,EAAAA,KAAC2I,GAAA,CACC,MAAOhD,EACP,UAAS,GACT,SAAU2B,GACV,KAAK,QAEL,SAAA,CAAAtH,OAAC4I,IAAa,MAAM,MAAM,GAAI,CAAE,GAAI,GAClC,SAAA,CAAA1I,MAAC2I,IAAiB,GAAI,CAAE,GAAI,EAAG,SAAU,IAAM,EAAE,aAAA,EAEnD,EACA7I,OAAC4I,IAAa,MAAM,QAAQ,GAAI,CAAE,GAAI,GACpC,SAAA,CAAA1I,MAACyE,IAAe,GAAI,CAAE,GAAI,EAAG,SAAU,IAAM,EAAE,eAAA,CAAA,CAEjD,CAAA,CAAA,CAAA,EAEJ,EAGC,CAACkC,GAAc,CAACV,GACfnG,EAAAA,KAACC,GAAI,GAAI,CAAE,GAAI,CAAA,EACb,SAAA,CAAAD,OAACI,GAAW,QAAQ,YAAY,WAAY,IAAK,MAAM,iBAAiB,GAAI,CAAE,GAAI,EAAG,cAAe,YAAa,SAAU,UAAW,cAAe,UACnJ,SAAA,CAAAF,EAAAA,IAAC4I,GAAA,CAAgB,GAAI,CAAE,SAAU,GAAI,GAAI,GAAK,cAAe,QAAA,CAAS,CAAG,EAAE,kBAAA,EAE7E,EAEA5I,EAAAA,IAAC6I,IAAK,UAAS,GAAC,QAAS,EACtB,SAAAN,GAAyB,IAAKH,GAAa,CAC1C,MAAMU,EAAgBV,EAAS,KACzBW,EAAatC,GAAyB,KAAO2B,EAAS,GAE5D,OACEpI,EAAAA,IAAC6I,IAAK,KAAI,GAAC,GAAI,GAAI,GAAI,EAAG,GAAI,EAC5B,SAAA7I,EAAAA,IAACyD,GAAA,CACC,QAAQ,WACR,GAAI,CACF,OAAQ,OACR,OAAQ,EACR,YAAasF,EAAc5O,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAAI,UACnG,QAAS2I,EAAc5O,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,GAAI,EAAIiG,EAAQ,EAAE,EAAI,cACzH,WAAY,WACZ,UAAW,CACT,YAAcjG,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAClF,UAAW,mBACX,UAAW,CAAA,CACb,EAGF,SAAAJ,EAAAA,IAAC3F,GAAA,CACC,QAAS,IAAM8N,GAA4BC,CAAQ,EACnD,GAAI,CAAE,OAAQ,OAAQ,QAAS,OAAQ,cAAe,SAAU,WAAY,SAAA,EAE5E,gBAACzE,GAAA,CAAY,GAAI,CAAE,KAAM,GACvB,SAAA,CAAA7D,EAAAA,KAACO,EAAA,CAAM,UAAU,MAAM,WAAW,aAAa,QAAS,EAAG,GAAI,CAAE,GAAI,CAAA,EACnE,SAAA,CAAAL,EAAAA,IAAC1C,GAAA,CAAM,QAASyL,EAAY,KAAK,QAAQ,GAAI,CAAE,EAAG,EAAG,GAAI,EAAA,CAAI,CAAG,EAChE/I,MAAC8I,GAAc,GAAI,CACjB,SAAU,GACV,MAAO,gBAAA,EACN,SACF/I,EAAA,CAAI,GAAI,CAAE,KAAM,GACf,SAAA,CAAAD,OAACO,GAAM,UAAU,MAAM,WAAW,SAAS,QAAS,EAClD,SAAA,CAAAL,MAACE,GAAW,QAAQ,YAAY,WAAY,IACzC,WAAS,KACZ,EACCkI,EAAS,SACRpI,EAAAA,IAAC6D,EAAA,CAAK,MAAM,UAAU,KAAK,QAAQ,GAAI,CAAE,OAAQ,GAAI,SAAU,OAAQ,QAAU1J,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,iBAAiB,CAAG,CAAA,EAEjN,EACAJ,EAAAA,IAAC6D,EAAA,CACC,MAAOuE,EAAS,KAAK,YAAA,EACrB,KAAK,QACL,QAAQ,WACR,GAAI,CAAE,OAAQ,GAAI,SAAU,OAAQ,GAAI,GAAK,QAAUjO,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,gBAAA,CAAiB,CAAA,CAClL,CAAA,CACF,CAAA,EACF,QACCF,EAAA,CAAW,QAAQ,UAAU,MAAM,iBACjC,WAAS,WAAA,CACZ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAjDoCkI,EAAS,EAkD/C,CAEJ,CAAC,CAAA,CACH,EAEC3B,GACC3G,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAA,CAAAD,EAAAA,KAACY,EAAA,CACC,QAAQ,YACR,QAAS2H,GACT,gBAAYnE,GAAA,EAAgB,EAC5B,GAAI,CAAE,GAAI,CAAA,EACX,SAAA,CAAA,QACOuC,EAAwB,KAAK,GAAA,CAAA,CAAA,EAErCzG,EAAAA,IAACU,GAAO,QAAQ,OAAO,QAAS,IAAMgG,EAA2B,IAAI,EAAG,SAAA,iBAAA,CAExE,CAAA,EACF,EAGF1G,EAAAA,IAAC+D,GAAA,CAAQ,GAAI,CAAE,GAAI,CAAA,EACjB,SAAA/D,EAAAA,IAAC6D,EAAA,CAAK,MAAM,oBAAoB,KAAK,QAAQ,EAC/C,EAEA/D,EAAAA,KAACO,EAAA,CAAM,UAAU,MAAM,QAAS,EAC9B,SAAA,CAAAL,EAAAA,IAACU,EAAA,CACC,QAAQ,YACR,gBAAYkI,GAAA,EAAgB,EAC5B,QAAS,IAAM7D,EAAe,gDAAgD,mBAAmBhE,EAAY,cAAgB,EAAE,CAAC,GAAI,yBAAyB,EAC7J,GAAI,CACF,QAASX,EAAQ,GAAG,EACpB,UAAW,CAAE,QAASA,EAAQ,GAAG,CAAA,CAAE,EAEtC,SAAA,gBAAA,CAAA,EAGDJ,EAAAA,IAACU,EAAA,CACC,QAAQ,WACR,gBAAYsI,GAAA,EAAgB,EAC5B,QAAS,IAAMpC,GAAc,EAAI,EACjC,GAAI,CAAE,YAAa,QAAA,EACpB,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,GAIAD,GAAcV,IACdnG,EAAAA,KAAAmJ,EAAAA,SAAA,CACG,SAAA,CAAAtC,GAAc,CAACV,GACdjG,EAAAA,IAACU,EAAA,CACC,QAAQ,OACR,QAAS,IAAMkG,GAAc,EAAK,EAClC,GAAI,CAAE,GAAI,CAAA,EACX,SAAA,mBAAA,CAAA,EAKFT,GACCnG,EAAAA,IAACgE,EAAA,CAAM,SAAS,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,QAAS,IAAMoC,EAAS,IAAI,EAChE,SAAAD,EACH,EAGDI,GACHzG,EAAAA,KAACkE,EAAA,CACC,SAAS,OACT,GAAI,CAAE,GAAI,CAAA,EACV,OACEhE,EAAAA,IAACU,EAAA,CAAO,KAAK,QAAQ,QAAS,IAAMqE,EAAe,QAAS,WAAW,EAAG,GAAI,CAAE,cAAe,QAAU,SAAA,YAEzG,EAEH,SAAA,CAAA,yCACwCwB,CAAA,CAAA,CAAA,EAI1CN,EACCjG,EAAAA,IAACS,EAAA,CACC,GAAI,CACF,EAAG,EACH,OAAQ,EACR,YAActG,GAAUuJ,EAAMvJ,EAAM,QAAQ,QAAS,EAAG,EACxD,QAAUA,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,GAAI,EAAIiG,EAAQ,EAAE,CAAA,EAG1G,gBAACC,EAAA,CAAM,UAAU,MAAM,WAAW,SAAS,QAAS,EAClD,SAAA,CAAAL,MAACkE,IAAgB,GAAI,CAAE,SAAU,GAAI,MAAO,kBAAoB,SAC/DnE,EAAA,CACC,SAAA,CAAAC,MAACE,EAAA,CAAW,QAAQ,YAAY,WAAY,IAAK,SAAA,oBAEjD,QACCA,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAC/B,YAAc,KACjB,EACAJ,EAAAA,KAACI,EAAA,CAAW,QAAQ,UAAU,MAAM,iBAAiB,SAAA,CAAA,OAC9C+F,EAAa,WAAA,CAAA,CACpB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAGFnG,EAAAA,KAACW,EAAA,CACC,OAAQoH,GACR,WAAYE,GACZ,GAAI,CACF,EAAG,EACH,OAAQ,EACR,YAAa,SACb,YAAa,UACb,QAAS,eACT,UAAW,SACX,OAAQ,UACR,WAAY,2CACZ,UAAW,CACT,YAAc5N,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAClF,QAAUjG,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,GAAI,EAAIiG,EAAQ,EAAE,CAAA,CAC1G,EAEF,QAAS6H,GAET,SAAA,CAAAjI,EAAAA,IAACK,EAAA,CAAM,UAAU,MAAM,eAAe,SAAS,GAAI,CAAE,GAAI,CAAA,EACvD,SAAAL,EAAAA,IAACU,EAAA,CACC,QAAS2F,EAAoB,YAAc,WAC3C,KAAK,QACL,QAAU6C,GAAM,CACdA,EAAE,gBAAA,EACF5C,EAAsB6C,GAAS,CAACA,CAAI,CACtC,EACA,GAAI,CAAE,cAAe,MAAA,EAEpB,WAAoB,0BAA4B,0BAAA,CAAA,EAErD,EACAnJ,EAAAA,IAAC,QAAA,CACC,IAAKmF,EACL,KAAK,OACL,OAAQ+C,GACR,SAAUF,GACV,OAAM,EAAA,CAAA,EAGPrC,SACE5F,EAAA,CACC,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,4BAAA,CAE3C,EACAF,EAAAA,IAACG,GAAA,CACC,QAAQ,cACR,MAAO0F,EACP,GAAI,CAAE,SAAU,IAAK,GAAI,OAAQ,QAAU1L,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,2BAA4B,CAAE,QAAUjG,GAAUA,EAAM,QAAQ,OAAS,OAASiG,EAAQ,GAAG,EAAIA,EAAQ,GAAG,EAAE,CAAE,CAAA,EAE9PN,EAAAA,KAACI,EAAA,CAAW,QAAQ,UAAU,MAAM,iBAAiB,GAAI,CAAE,GAAI,EAAG,QAAS,OAAA,EACxE,SAAA,CAAA2F,EAAe,GAAA,CAAA,CAClB,CAAA,CAAA,CACF,EAEA/F,EAAAA,KAAAmJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAACgJ,GAAA,CAAgB,GAAI,CAAE,SAAU,GAAI,MAAO,gBAAiB,GAAI,CAAA,CAAE,CAAG,EACtElJ,OAACI,GAAW,QAAQ,QAAQ,GAAI,CAAE,GAAI,GAAK,SAAA,CAAA,sBACrBuF,EAAa,YAAA,EAAc,YAAA,EACjD,EACAzF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,oBAAA,CAElE,QACCQ,EAAA,CAAO,QAAQ,WAAW,KAAK,QAAQ,SAAA,cAAA,CAExC,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAMDuF,GAAc,WAAW,SACxBnG,EAAAA,KAACC,GAAI,GAAI,CAAE,GAAI,CAAA,EACb,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,YAAY,WAAY,IAAK,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,SAAA,CAEhE,EACAF,MAACS,GAAM,GAAI,CAAE,EAAG,EAAG,QAAS,sBAC1B,SAAAT,EAAAA,IAAC,MAAA,CACC,IAAKiG,EAAa,UAAU,QAC5B,IAAI,mBACJ,MAAO,CAAE,SAAU,OAAQ,OAAQ,OAAQ,aAAc,CAAA,CAAE,CAAA,CAC7D,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EAEJ,CAEJ,CCrnBA,SAAwBmD,GAAY,CAAE,YAAArI,EAAa,kBAAAC,EAAmB,WAAA7B,EAAY,WAAA8B,GAAc,CAC9F,MAAMC,EAAQC,GAAA,EACR,CAAE,QAAAC,CAAA,EAAYC,GAAA,EAEd4F,EAAa1F,EAAa8D,GAAMA,EAAE,UAAU,GAAKtE,EAAY,WAC7DY,EAAmBJ,EAAa8D,GAAMA,EAAE,gBAAgB,EACxDgE,EAA0B9H,EAAa8D,GAAMA,EAAE,uBAAuB,EAEtE,CAAC3F,EAAS4J,CAAe,EAAIxH,EAAAA,SAAS,EAAK,EAC3C,CAACyH,EAASC,CAAU,EAAI1H,EAAAA,SAASf,EAAY,SAAW,EAAE,EAC1D,CAAC0I,EAAMC,CAAO,EAAI5H,EAAAA,SAASf,EAAY,MAAQ,EAAE,EACjD,CAAC4I,EAAcC,CAAe,EAAI9H,EAAAA,SAAS,EAAK,EAChD,CAAC+H,EAAWC,CAAY,EAAIhI,EAAAA,SAAS,EAAK,EAC1C,CAACiI,EAAUC,CAAW,EAAIlI,EAAAA,SAAS,EAAK,EACxC,CAACqE,EAAOC,CAAQ,EAAItE,EAAAA,SAAS,IAAI,EAEvCO,EAAAA,UAAU,IAAM,CACd,IAAIwE,EAAY,GAEhB,MAAMoD,EAAe,SAAY,CAC/B,GAAKhD,EAEL,CAAAqC,EAAgB,EAAI,EACpB,GAAI,CACF,MAAM1G,EAAe7B,EAAY,cAAgBY,GAAkB,GACnE,MAAMP,EAAQ,CACZ,KAAM4B,GAAgB,QACtB,MAAO,uBACP,cAAeC,EAAc,eAC7B,qBAAsB,GACtB,mBAAoB,GACpB,iBAAkB,GAClB,OAAQ,CACN,aAAAL,EACA,WAAAqE,EACA,aAAclG,EAAY,cAAgB,MAC1C,OAAQ,iBAAA,EAEV,OAAQ,SAAY,CAClB,GAAI,CACF,MAAMmC,EAAS,MAAMgH,GAAmBjD,EAAYrE,EAAc,CAChE,KAAM7B,EAAY,cAAgB,KAAA,CACnC,EAED,OAAK8F,IACC3D,EAAO,UACTsG,EAAWtG,EAAO,OAAO,EACzBlC,EAAkB,CAAE,QAASkC,EAAO,OAAA,CAAS,GAE3CA,EAAO,OACTwG,EAAQxG,EAAO,IAAI,EACnBlC,EAAkB,CAAE,KAAMkC,EAAO,IAAA,CAAM,IAGpCA,CACT,OAAST,EAAK,CACZ,MAAKoE,GACHT,EAAS3D,EAAI,SAAW,wBAAwB,EAE5CA,CACR,CACF,CAAA,CACD,CACH,QAAA,CACOoE,GACHyC,EAAgB,EAAK,CAEzB,EACF,EAEA,OAAKvI,EAAY,SACfkJ,EAAA,EAGK,IAAM,CAAEpD,EAAY,EAAK,CAClC,EAAG,CAACI,EAAYlG,EAAY,aAAcA,EAAY,aAAcA,EAAY,QAASY,GAAkB,GAAIX,EAAmBI,CAAO,CAAC,EAE1I,MAAM+I,EAAsBxH,EAAAA,YAAY,CAACyH,EAAOC,EAAOC,IAAU,CAC/Dd,EAAYL,IAAU,CACpB,GAAGA,EACH,CAACiB,CAAK,EAAG,CACP,GAAGjB,EAAKiB,CAAK,EACb,CAACC,CAAK,EAAGC,CAAA,CACX,EACA,CACJ,EAAG,CAAA,CAAE,EAECC,EAAgB5H,EAAAA,YAAY,SAAY,CAC5CmH,EAAa,EAAI,EACjB1D,EAAS,IAAI,EAEb,GAAI,CACF,MAAMxD,EAAe7B,EAAY,cAAgBY,GAAkB,GAEnE,MAAMP,EAAQ,CACZ,KAAM4B,GAAgB,OACtB,MAAO,2BACP,cAAeC,EAAc,eAC7B,qBAAsB,GACtB,mBAAoB,GACpB,iBAAkB,GAClB,OAAQ,CACN,aAAAL,EACA,WAAAqE,EACA,aAAclG,EAAY,cAAgB,MAC1C,OAAQ,iBAAA,EAEV,OAAQ,SAAY,CAClB,GAAI,CACF,MAAMmC,EAAS,MAAMsH,GAAmBvD,EAAYsC,EAAS,CAC3D,aAAA3G,EACA,KAAA6G,EACA,KAAM1I,EAAY,cAAgB,MAClC,WAAY,IAAM,CAElB,CAAA,CACD,EAED,OAAImC,EAAO,KACT8G,EAAY,EAAI,EAChBX,EAAwB,CACtB,GAAIpC,EACJ,KAAMlG,EAAY,aAClB,KAAMA,EAAY,YAAA,CACnB,EACDG,EAAM,KAAK,sCAAuC,SAAS,GAEtDgC,CACT,OAAST,EAAK,CACZ,MAAA2D,EAAS3D,EAAI,SAAW,2BAA2B,EACnDvB,EAAM,KAAKuB,EAAI,SAAW,4BAA6B,OAAO,EACxDA,CACR,CACF,CAAA,CACD,CACH,QAAA,CACEqH,EAAa,EAAK,CACpB,CACF,EAAG,CAAC7C,EAAYsC,EAASE,EAAM1I,EAAaY,GAAkB,GAAI0H,EAAyBnI,EAAOE,CAAO,CAAC,EAEpGqJ,EAAiB,OAAO,QAAQlB,CAAO,EAE7C,cACGxJ,EAAA,CACC,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,KAAK,WAAY,IAAK,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,yBAAA,CAEzD,EACAF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,kFAAA,CAElE,EAECiG,GACCnG,EAAAA,IAACgE,EAAA,CAAM,SAAS,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,QAAS,IAAMoC,EAAS,IAAI,EAChE,SAAAD,EACH,EAGD4D,GACC/J,EAAAA,IAACgE,EAAA,CACC,SAAS,UACT,WAAOE,GAAA,EAAgB,EACvB,GAAI,CAAE,GAAI,CAAA,EACX,SAAA,0DAAA,CAAA,EAKFxE,EACCI,EAAAA,KAACC,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,EAAG,UAAW,QAAA,EAAY,SAAA,mCAEvF,QACCC,GAAA,CAAA,CAAe,CAAA,CAAA,CAClB,EACEsK,EAAe,SAAW,EAC5BzK,EAAAA,IAACgE,GAAM,SAAS,OAAO,SAAA,sEAAA,CAEvB,EAEAlE,EAAAA,KAAAmJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAACS,EAAA,CAAM,QAAQ,WAAW,GAAI,CAAE,SAAU,QAAA,EACxC,SAAAX,EAAAA,KAAC4K,GAAA,CAAM,KAAK,QACV,SAAA,CAAA1K,EAAAA,IAAC2K,IACC,SAAA7K,OAAC8K,GAAA,CAAS,GAAI,CAAE,QAAS,gBACvB,SAAA,CAAA5K,MAAC6K,GAAU,GAAI,CAAE,WAAY,GAAA,EAAO,SAAA,iBAAc,QACjDA,EAAA,CAAU,GAAI,CAAE,WAAY,GAAA,EAAO,SAAA,kBAAe,QAClDA,EAAA,CAAU,GAAI,CAAE,WAAY,GAAA,EAAO,SAAA,QAAA,CAAM,CAAA,CAAA,CAC5C,CAAA,CACF,EACA7K,EAAAA,IAAC8K,GAAA,CACE,SAAAL,EAAe,IAAI,CAAC,CAACL,EAAOW,CAAM,IACjCjL,EAAAA,KAAC8K,GAAA,CACC,SAAA,CAAA5K,MAAC6K,EAAA,CACC,SAAA7K,EAAAA,IAAC6D,EAAA,CACC,MAAOuG,EACP,KAAK,QACL,QAAQ,WACR,GAAI,CAAE,WAAY,WAAA,CAAY,CAAA,EAElC,QACCS,EAAA,CACC,SAAA7K,EAAAA,IAACgL,GAAA,CACC,KAAK,QACL,MAAOD,GAAQ,QAAUA,GAAQ,YAAc,GAC/C,SAAW7B,GAAMiB,EAAoBC,EAAO,SAAUlB,EAAE,OAAO,KAAK,EACpE,YAAY,oBACZ,UAAS,GACT,SAAUa,CAAA,CAAA,EAEd,EACA/J,EAAAA,IAAC6K,EAAA,CACE,SAAAE,GAAQ,QAAUA,GAAQ,WACzB/K,EAAAA,IAAC6D,EAAA,CAAK,MAAM,SAAS,KAAK,QAAQ,QAAQ,WAAW,GAAI,CAAE,QAAU1J,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,gBAAA,CAAiB,CAAG,EAEjMJ,EAAAA,IAAC6D,EAAA,CAAK,MAAM,WAAW,KAAK,QAAQ,QAAQ,WAAW,GAAI,CAAE,QAAU1J,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,gBAAA,EAAoB,CAAA,CAEvM,CAAA,CAAA,EAzBagK,CA0Bf,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,SAGCrK,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAA,CAAAC,EAAAA,IAACU,EAAA,CACC,QAAQ,OACR,KAAK,QACL,QAAS,IAAMkJ,EAAiBT,GAAS,CAACA,CAAI,EAC9C,QAASQ,EAAe3J,EAAAA,IAACiL,GAAA,CAAA,CAAe,QAAMC,GAAA,EAAe,EAC7D,GAAI,CAAE,cAAe,OAAQ,WAAY,GAAA,EAC1C,SAAA,mBAAA,CAAA,EAIDlL,EAAAA,IAACmL,GAAA,CAAS,GAAIxB,EACZ,gBAAClJ,EAAA,CAAM,GAAI,CAAE,GAAI,EAAG,EAAG,EAAG,QAAS,gBACjC,SAAA,CAAAT,EAAAA,IAACE,EAAA,CAAW,QAAQ,YAAY,WAAY,IAAK,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,YAAA,CAEhE,EACAF,EAAAA,IAACE,EAAA,CAAW,QAAQ,QAAQ,MAAM,iBAAiB,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,yEAAA,CAElE,EACAF,EAAAA,IAACK,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,SAAS,OAAO,IAAK,EACrD,SAAAoK,EAAe,IAAI,CAAC,CAACL,CAAK,IACzBpK,EAAAA,IAAC6D,EAAA,CAEC,MAAOuG,EACP,KAAK,QACL,QAASX,EAAK,SAASW,CAAK,EAAI,SAAW,WAC3C,GAAIX,EAAK,SAASW,CAAK,EAAI,CAAE,QAAUjQ,GAAUA,EAAM,QAAQ,OAAS,OAASuJ,EAAMvJ,EAAM,QAAQ,KAAK,QAAS,EAAG,EAAIiG,EAAQ,GAAG,EAAG,MAAO,gBAAA,EAAqB,CAAA,EACpK,QAAS,IAAM,CACTqJ,EAAK,SAASW,CAAK,EACrBV,EAASP,GAASA,EAAK,OAAQiC,GAAMA,IAAMhB,CAAK,CAAC,EAEjDV,EAASP,GAAS,CAAC,GAAGA,EAAMiB,CAAK,CAAC,CAEtC,EACA,SAAUL,CAAA,EAZLK,CAAA,CAcR,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGC,CAACL,GACA/J,EAAAA,IAACD,EAAA,CAAI,GAAI,CAAE,GAAI,EAAG,UAAW,QAAA,EAC3B,SAAAC,EAAAA,IAACU,EAAA,CACC,QAAQ,YACR,KAAK,QACL,QAAS6J,EACT,SAAUV,EACV,gBAAYwB,GAAA,EAAgB,EAE3B,WAAY,eAAiB,iBAAA,CAAA,CAChC,CACF,CAAA,CAAA,CAEJ,CAAA,EAEJ,CAEJ,CCnTA,MAAMC,GAAqB,2BAErBC,GAAmBhJ,GAAU,CACjC,GAAI,CACF,eAAe,QAAQ+I,GAAoB,KAAK,UAAU/I,CAAK,CAAC,CAClE,MAAY,CAEZ,CACF,EAEMiJ,GAAkB,IAAM,CAC5B,GAAI,CACF,MAAMC,EAAS,eAAe,QAAQH,EAAkB,EACxD,OAAOG,EAAS,KAAK,MAAMA,CAAM,EAAI,IACvC,MAAY,CACV,OAAO,IACT,CACF,EAEMC,GAAmB,IAAM,CAC7B,GAAI,CACF,eAAe,WAAWJ,EAAkB,CAC9C,MAAY,CAEZ,CACF,EAEMK,GAAe,CACnB,CACE,IAAK,aACL,MAAO,sBACP,YAAa,4CAAA,EAEf,CACE,IAAK,WACL,MAAO,uBACP,YAAa,8BAAA,EAEf,CACE,IAAK,UACL,MAAO,aACP,YAAa,uDAAA,CAEjB,EAEMC,GAAW,CAAE,WAAY,EAAG,SAAU,EAAG,QAAS,CAAA,EAClDC,GAAY,CAAC,aAAc,WAAY,SAAS,EAEtD,SAAwBC,IAAc,CACpC,MAAMjH,EAAWC,GAAA,EACX,CAACiH,EAAcC,CAAe,EAAIC,GAAA,EAClClH,EAAiBpC,EAAAA,YACrB,CAACqC,EAAMC,EAAOC,EAAS,CAAA,IACrBL,EAASG,EAAM,CAAE,MAAAC,EAAO,OAAQ,CAAE,KAAM,eAAgB,GAAGC,CAAA,EAAU,EACvE,CAACL,CAAQ,CAAA,EAEL3D,EAAQC,GAAA,EACR,CAACzB,EAASuB,CAAU,EAAIa,EAAAA,SAAS,EAAK,EAGtCoK,EAAYH,EAAa,IAAI,MAAM,GAAK,aACxC,CAAC/M,EAAamN,CAAc,EAAIrK,EAAAA,SAAS,IAAM8J,GAASM,CAAS,GAAK,CAAC,EAGvE,CAACnL,EAAaqL,CAAc,EAAItK,EAAAA,SAAS,IAC9B0J,GAAA,GACE,CACf,aAAc,KACd,WAAY,KACZ,aAAc,MACd,QAAS,KACT,KAAM,CAAA,CAAC,CAEV,EAEK7J,EAAmBJ,EAAa8D,GAAMA,EAAE,gBAAgB,EACxD4B,EAAa1F,EAAa8D,GAAMA,EAAE,UAAU,EAGlDhD,EAAAA,UAAU,IAAM,CACdkJ,GAAgBxK,CAAW,CAC7B,EAAG,CAACA,CAAW,CAAC,EAGhBsB,EAAAA,UAAU,IAAM,CACd2J,EAAiB7C,GAAS,CACxB,MAAMkD,EAAY,IAAI,gBAAgBlD,CAAI,EAC1C,OAAAkD,EAAU,IAAI,OAAQR,GAAU7M,CAAW,CAAC,EACrCqN,CACT,EAAG,CAAE,QAAS,GAAM,CACtB,EAAG,CAACrN,EAAagN,CAAe,CAAC,EAEjC,MAAMhL,EAAoB2B,cAAa2J,GAAY,CACjDF,EAAgBjD,IAAU,CAAE,GAAGA,EAAM,GAAGmD,GAAU,CACpD,EAAG,CAAA,CAAE,EAECC,EAAa5J,EAAAA,YAAY,IAAM,CAC/B3D,EAAc2M,GAAa,OAAS,GACtCQ,EAAgBhD,GAASA,EAAO,CAAC,CAErC,EAAG,CAACnK,CAAW,CAAC,EAEVwN,EAAa7J,EAAAA,YAAY,IAAM,CAC/B3D,EAAc,GAChBmN,EAAgBhD,GAASA,EAAO,CAAC,CAErC,EAAG,CAACnK,CAAW,CAAC,EAEVyN,EAAiB9J,EAAAA,YAAY,IAAM,CACvC+I,GAAA,EACAxK,EAAM,KAAK,oDAAqD,SAAS,EACzE6D,EAAe,WAAY,cAAc,CAC3C,EAAG,CAACA,EAAgB7D,CAAK,CAAC,EAEpBwL,EAAe/J,EAAAA,YAAY,IAAM,CACrC+I,GAAA,EACA3G,EAAe,IAAK,aAAa,CACnC,EAAG,CAACA,CAAc,CAAC,EAEb4H,EAAiB,IAAM,CAC3B,OAAQ3N,EAAA,CACN,IAAK,GACH,OACEgB,EAAAA,IAACc,GAAA,CACC,YAAAC,EACA,kBAAAC,EACA,WAAYuL,EACZ,WAAAtL,CAAA,CAAA,EAGN,IAAK,GACH,OACEjB,EAAAA,IAAC4E,GAAA,CACC,YAAA7D,EACA,kBAAAC,EACA,WAAYuL,EACZ,WAAAtL,CAAA,CAAA,EAGN,IAAK,GACH,OACEjB,EAAAA,IAACoJ,GAAA,CACC,YAAArI,EACA,kBAAAC,EACA,WAAYyL,EACZ,WAAAxL,CAAA,CAAA,EAGN,QACE,OAAO,IAAA,CAEb,EAEM2L,EAAiB,IAAM,CAC3B,OAAQ5N,EAAA,CACN,IAAK,GACH,MAAO,CAAC+B,EAAY,cAAgB,CAACY,GAAkB,GACzD,IAAK,GACH,MAAO,CAACZ,EAAY,YAAc,CAACkG,EACrC,IAAK,GACH,MAAO,GACT,QACE,MAAO,EAAA,CAEb,EAEA,OACEjH,EAAAA,IAACpB,GAAA,CACC,MAAM,uBACN,SAAS,gEACT,MAAO+M,GACP,YAAA3M,EACA,OAAQuN,EACR,OAAQC,EACR,WAAYC,EACZ,SAAUC,EACV,aAAcE,EAAA,EACd,QAAAlN,EAEA,SAAAI,EAAAA,KAACO,EAAA,CAAM,QAAS,EACd,SAAA,CAAAL,EAAAA,IAAC6M,GAAA,CAAqB,MAAK,GAAC,UAAW,GAAO,EAC7CF,EAAA,CAAe,CAAA,CAClB,CAAA,CAAA,CAGN,CClMA,SAAwBb,IAAc,CACpC,OAAAzK,GAAA,QACQyL,GAAA,EAAqB,CAC/B","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}