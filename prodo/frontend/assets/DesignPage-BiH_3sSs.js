import{c as V,j as a,a as l,bC as ue,e as me,d as pe,u as J,r as d,R as j,I as v,B as c,T as u,A as he,v as ge,k as T,p as g,s as S,o as fe,a1 as xe,aM as _,N as w,a3 as ye,ak as be,al as Ce,am as je,ao as ve,P as we,J as f}from"./index-B8Eu23bA.js";import{T as Te,a as E}from"./Tabs-D_BhmpzR.js";import{C as Ke}from"./FormatColorFill-C9muaUft.js";import{G as m}from"./Grid-5L9Rvqba.js";import{a as Be,C as Se}from"./CardContent-xJVpuEbT.js";import{D as De}from"./Star-BdvflhJ9.js";import{F as ke}from"./TextFields-82Hb5uqU.js";import{C as Ee}from"./CardActions-CJzuqktr.js";import{C as _e}from"./Check-BATZaRrq.js";import"./KeyboardArrowRight-BOQXGjwe.js";const U=V(a.jsx("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3m13.71-9.37-1.34-1.34a.996.996 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41"})),O=V(a.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}));async function Ae(e){return(await l.post("/design/brand-kits",e)).data}async function Pe(e){return(await l.get(`/design/brand-kits/${e}`)).data}async function Fe({limit:e,offset:o}={}){const r={};return e!=null&&(r.limit=e),o!=null&&(r.offset=o),(await l.get("/design/brand-kits",{params:r})).data}async function $e(e,o){return(await l.put(`/design/brand-kits/${e}`,o)).data}async function Le(e){return(await l.delete(`/design/brand-kits/${e}`)).data}async function We(e){return(await l.post(`/design/brand-kits/${e}/set-default`)).data}async function Ge(e,o){return(await l.post(`/design/brand-kits/${e}/apply`,{document_id:o})).data}async function Me(e){return(await l.post("/design/themes",e)).data}async function Re(e){return(await l.get(`/design/themes/${e}`)).data}async function Ie({limit:e,offset:o}={}){const r={};return e!=null&&(r.limit=e),o!=null&&(r.offset=o),(await l.get("/design/themes",{params:r})).data}async function Ne(e,o){return(await l.put(`/design/themes/${e}`,o)).data}async function ze(e){return(await l.delete(`/design/themes/${e}`)).data}async function Ye(e){return(await l.post(`/design/themes/${e}/activate`)).data}async function Ue(e,o="complementary",r=5){return(await l.post("/design/color-palette",{base_color:e,harmony_type:o,count:r})).data}async function Oe(){return(await l.get("/design/fonts")).data}async function He(e){return(await l.get("/design/fonts/pairings",{params:{primary:e}})).data}async function Ve(e,o){const r=new FormData;return r.append("file",e),r.append("brand_kit_id",o),(await l.post("/design/assets/logo",r,{headers:{"Content-Type":"multipart/form-data"}})).data}async function Je(e,o="json"){return(await l.get(`/design/brand-kits/${e}/export`,{params:{format:o}})).data}async function qe(e){return(await l.post("/design/brand-kits/import",e)).data}const Qe=ue((e,o)=>({brandKits:[],themes:[],currentBrandKit:null,currentTheme:null,defaultBrandKit:null,activeTheme:null,fonts:[],loading:!1,error:null,setLoading:r=>e({loading:r}),setError:r=>e({error:r}),createBrandKit:async r=>{e({loading:!0,error:null});try{const t=await Ae(r);return e(s=>({brandKits:[t,...s.brandKits],currentBrandKit:t,loading:!1})),t}catch(t){return e({error:t.message,loading:!1}),null}},fetchBrandKits:async()=>{e({loading:!0,error:null});try{const r=await Fe(),t=r.find(s=>s.is_default);return e({brandKits:r||[],defaultBrandKit:t||null,loading:!1}),r}catch(r){return e({error:r.message,loading:!1}),[]}},getBrandKit:async r=>{e({loading:!0,error:null});try{const t=await Pe(r);return e({currentBrandKit:t,loading:!1}),t}catch(t){return e({error:t.message,loading:!1}),null}},updateBrandKit:async(r,t)=>{e({loading:!0,error:null});try{const s=await $e(r,t);return e(p=>({brandKits:p.brandKits.map(x=>x.id===r?s:x),currentBrandKit:p.currentBrandKit?.id===r?s:p.currentBrandKit,loading:!1})),s}catch(s){return e({error:s.message,loading:!1}),null}},deleteBrandKit:async r=>{e({loading:!0,error:null});try{return await Le(r),e(t=>({brandKits:t.brandKits.filter(s=>s.id!==r),currentBrandKit:t.currentBrandKit?.id===r?null:t.currentBrandKit,loading:!1})),!0}catch(t){return e({error:t.message,loading:!1}),!1}},setDefaultBrandKit:async r=>{e({loading:!0,error:null});try{return await We(r),e(t=>({brandKits:t.brandKits.map(s=>({...s,is_default:s.id===r})),defaultBrandKit:t.brandKits.find(s=>s.id===r)||null,loading:!1})),!0}catch(t){return e({error:t.message,loading:!1}),!1}},applyBrandKit:async(r,t)=>{e({loading:!0,error:null});try{const s=await Ge(r,t);return e({loading:!1}),s}catch(s){return e({error:s.message,loading:!1}),null}},createTheme:async r=>{e({loading:!0,error:null});try{const t=await Me(r);return e(s=>({themes:[t,...s.themes],currentTheme:t,loading:!1})),t}catch(t){return e({error:t.message,loading:!1}),null}},fetchThemes:async()=>{e({loading:!0,error:null});try{const r=await Ie(),t=r.find(s=>s.is_active);return e({themes:r||[],activeTheme:t||null,loading:!1}),r}catch(r){return e({error:r.message,loading:!1}),[]}},getTheme:async r=>{e({loading:!0,error:null});try{const t=await Re(r);return e({currentTheme:t,loading:!1}),t}catch(t){return e({error:t.message,loading:!1}),null}},updateTheme:async(r,t)=>{e({loading:!0,error:null});try{const s=await Ne(r,t);return e(p=>({themes:p.themes.map(x=>x.id===r?s:x),currentTheme:p.currentTheme?.id===r?s:p.currentTheme,loading:!1})),s}catch(s){return e({error:s.message,loading:!1}),null}},deleteTheme:async r=>{e({loading:!0,error:null});try{return await ze(r),e(t=>({themes:t.themes.filter(s=>s.id!==r),currentTheme:t.currentTheme?.id===r?null:t.currentTheme,loading:!1})),!0}catch(t){return e({error:t.message,loading:!1}),!1}},setActiveTheme:async r=>{e({loading:!0,error:null});try{return await Ye(r),e(t=>({themes:t.themes.map(s=>({...s,is_active:s.id===r})),activeTheme:t.themes.find(s=>s.id===r)||null,loading:!1})),!0}catch(t){return e({error:t.message,loading:!1}),!1}},generateColorPalette:async(r,t="complementary")=>{e({loading:!0,error:null});try{const s=await Ue(r,t);return e({loading:!1}),s}catch(s){return e({error:s.message,loading:!1}),null}},fetchFonts:async()=>{try{const r=await Oe();return e({fonts:r||[]}),r}catch(r){return e({error:r.message}),[]}},getFontPairings:async r=>{try{return await He(r)}catch(t){return e({error:t.message}),[]}},uploadLogo:async(r,t)=>{e({loading:!0,error:null});try{const s=await Ve(r,t);return await o().getBrandKit(t),e({loading:!1}),s}catch(s){return e({error:s.message,loading:!1}),null}},exportBrandKit:async(r,t="json")=>{try{return await Je(r,t)}catch(s){return e({error:s.message}),null}},importBrandKit:async r=>{e({loading:!0,error:null});try{const t=await qe(r);return e(s=>({brandKits:[t,...s.brandKits],loading:!1})),t}catch(t){return e({error:t.message,loading:!1}),null}},reset:()=>e({currentBrandKit:null,currentTheme:null,error:null})})),Xe=f(c)(({theme:e})=>({display:"flex",flexDirection:"column",height:"calc(100vh - 64px)",backgroundColor:e.palette.background.default})),Ze=f(c)(({theme:e})=>({padding:e.spacing(2,3),borderBottom:`1px solid ${g(e.palette.divider,.1)}`,backgroundColor:g(e.palette.background.paper,.8)})),er=f(c)(({theme:e})=>({flex:1,padding:e.spacing(3),overflow:"auto"})),rr=f(Se)(({theme:e,isDefault:o})=>({cursor:"pointer",transition:"all 0.2s ease",border:o?`2px solid ${e.palette.mode==="dark"?T[1e3]:T[1100]}`:`1px solid ${g(e.palette.divider,.2)}`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 8px 24px ${g(e.palette.text.primary,.15)}`}})),h=f(c)(({color:e})=>({width:40,height:40,borderRadius:8,backgroundColor:e,border:"2px solid rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.1)"}})),ar=f(_)(({theme:e,isActive:o})=>({padding:e.spacing(2),cursor:"pointer",transition:"all 0.2s ease",border:o?`2px solid ${e.palette.mode==="dark"?T[1e3]:T[1100]}`:`1px solid ${g(e.palette.divider,.2)}`,"&:hover":{backgroundColor:e.palette.mode==="dark"?g(e.palette.text.primary,.05):T[200]}})),H=f(S)(({theme:e})=>({borderRadius:8,textTransform:"none",fontWeight:500})),tr=[{name:"Complementary",value:"complementary"},{name:"Analogous",value:"analogous"},{name:"Triadic",value:"triadic"},{name:"Split-Complementary",value:"split-complementary"},{name:"Tetradic",value:"tetradic"}];function nr(){const e=me(),o=pe(),{execute:r}=J(),{brandKits:t,themes:s,currentBrandKit:p,currentTheme:x,defaultBrandKit:sr,activeTheme:or,fonts:ir,loading:q,error:A,fetchBrandKits:P,fetchThemes:F,fetchFonts:$,createBrandKit:L,updateBrandKit:lr,deleteBrandKit:W,setDefaultBrandKit:G,createTheme:M,updateTheme:cr,deleteTheme:dr,setActiveTheme:R,generateColorPalette:I,uploadLogo:ur,reset:N}=Qe(),[y,Q]=d.useState(0),[X,K]=d.useState(!1),[z,Z]=d.useState("brandKit"),[i,b]=d.useState({name:"",primaryColor:"#3b82f6",secondaryColor:"#6366f1",fontFamily:"Inter"}),[B,ee]=d.useState("#3b82f6"),[D,re]=d.useState("complementary"),[Y,ae]=d.useState(null);d.useEffect(()=>(P(),F(),$(),()=>N()),[P,$,F,N]);const te=d.useCallback(async()=>{if(i.name.trim())return r({type:v.CREATE,label:"Create brand kit",reversibility:j.SYSTEM_MANAGED,intent:{source:"design",name:i.name},action:async()=>{await L({name:i.name,primary_color:i.primaryColor,secondary_color:i.secondaryColor,font_family:i.fontFamily}),o.show("Brand kit created","success"),K(!1),b({name:"",primaryColor:"#3b82f6",secondaryColor:"#6366f1",fontFamily:"Inter"})}})},[L,r,i,o]),ne=d.useCallback(async()=>{if(i.name.trim())return r({type:v.CREATE,label:"Create theme",reversibility:j.SYSTEM_MANAGED,intent:{source:"design",name:i.name},action:async()=>{await M({name:i.name,colors:{primary:i.primaryColor,secondary:i.secondaryColor},typography:{fontFamily:i.fontFamily}}),o.show("Theme created","success"),K(!1),b({name:"",primaryColor:"#3b82f6",secondaryColor:"#6366f1",fontFamily:"Inter"})}})},[M,r,i,o]),se=d.useCallback(async n=>r({type:v.UPDATE,label:"Set default brand kit",reversibility:j.FULLY_REVERSIBLE,intent:{source:"design",brandKitId:n},action:async()=>{await G(n),o.show("Default brand kit updated","success")}}),[r,G,o]),oe=d.useCallback(async n=>r({type:v.UPDATE,label:"Set active theme",reversibility:j.FULLY_REVERSIBLE,intent:{source:"design",themeId:n},action:async()=>{await R(n),o.show("Active theme updated","success")}}),[r,R,o]),ie=d.useCallback(async n=>r({type:v.DELETE,label:"Delete brand kit",reversibility:j.SYSTEM_MANAGED,intent:{source:"design",brandKitId:n},action:async()=>{await W(n),o.show("Brand kit deleted","success")}}),[W,r,o]),le=d.useCallback(async()=>r({type:v.GENERATE,label:"Generate color palette",reversibility:j.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{source:"design",baseColor:B,colorScheme:D,action:"generate_palette"},action:async()=>{const n=await I(B,D);return n&&(ae(n),o.show("Palette generated","success")),n}}),[B,D,I,o,r]),k=n=>{navigator.clipboard.writeText(n),o.show(`Copied ${n}`,"success")},ce=n=>{Z(n),K(!0)};return a.jsxs(Xe,{children:[a.jsx(Ze,{children:a.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[a.jsx(O,{sx:{color:"text.secondary",fontSize:28}}),a.jsxs(c,{children:[a.jsx(u,{variant:"h6",sx:{fontWeight:600},children:"Design System"}),a.jsx(u,{variant:"body2",color:"text.secondary",children:"Manage brand kits, themes, and color palettes"})]})]}),a.jsx(H,{variant:"contained",startIcon:a.jsx(he,{}),onClick:()=>ce(y===0?"brandKit":"theme"),children:y===0?"New Brand Kit":"New Theme"})]})}),a.jsxs(er,{children:[a.jsxs(Te,{value:y,onChange:(n,C)=>Q(C),sx:{mb:3},children:[a.jsx(E,{icon:a.jsx(U,{}),label:"Brand Kits",iconPosition:"start"}),a.jsx(E,{icon:a.jsx(Ke,{}),label:"Themes",iconPosition:"start"}),a.jsx(E,{icon:a.jsx(O,{}),label:"Color Generator",iconPosition:"start"})]}),y===0&&a.jsxs(m,{container:!0,spacing:3,children:[t.map(n=>a.jsx(m,{item:!0,xs:12,sm:6,md:4,children:a.jsxs(rr,{isDefault:n.is_default,children:[a.jsxs(Be,{children:[a.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[a.jsx(u,{variant:"h6",sx:{fontWeight:600},children:n.name}),n.is_default&&a.jsx(ge,{size:"small",label:"Default",icon:a.jsx(De,{}),sx:{bgcolor:e.palette.mode==="dark"?g(e.palette.text.primary,.1):T[400],color:"text.secondary"}})]}),a.jsxs(c,{sx:{display:"flex",gap:1,mb:2},children:[a.jsx(h,{color:n.primary_color,onClick:()=>k(n.primary_color)}),a.jsx(h,{color:n.secondary_color,onClick:()=>k(n.secondary_color)}),n.colors?.map((C,de)=>a.jsx(h,{color:C.value,onClick:()=>k(C.value)},de))]}),a.jsxs(u,{variant:"body2",color:"text.secondary",children:[a.jsx(ke,{fontSize:"small",sx:{mr:.5,verticalAlign:"middle"}}),n.font_family||"System Default"]})]}),a.jsxs(Ee,{children:[!n.is_default&&a.jsx(S,{size:"small",onClick:()=>se(n.id),children:"Set Default"}),a.jsx(c,{sx:{flex:1}}),a.jsx(fe,{size:"small",onClick:()=>ie(n.id),children:a.jsx(xe,{fontSize:"small"})})]})]})},n.id)),t.length===0&&a.jsx(m,{item:!0,xs:12,children:a.jsxs(c,{sx:{textAlign:"center",py:8},children:[a.jsx(U,{sx:{fontSize:80,color:"text.disabled",mb:2}}),a.jsx(u,{variant:"h6",color:"text.secondary",children:"No brand kits yet"}),a.jsx(u,{variant:"body2",color:"text.secondary",children:"Create a brand kit to maintain consistent branding"})]})})]}),y===1&&a.jsx(m,{container:!0,spacing:2,children:s.map(n=>a.jsx(m,{item:!0,xs:12,sm:6,md:4,children:a.jsxs(ar,{isActive:n.is_active,children:[a.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[a.jsx(u,{variant:"subtitle1",sx:{fontWeight:600},children:n.name}),n.is_active&&a.jsx(_e,{sx:{color:"text.secondary"}})]}),a.jsxs(c,{sx:{display:"flex",gap:1,mb:2},children:[a.jsx(h,{color:n.colors?.primary||"#3b82f6"}),a.jsx(h,{color:n.colors?.secondary||"#6366f1"}),a.jsx(h,{color:n.colors?.background||"#ffffff"})]}),a.jsx(c,{sx:{display:"flex",justifyContent:"space-between"},children:!n.is_active&&a.jsx(S,{size:"small",onClick:()=>oe(n.id),children:"Activate"})})]})},n.id))}),y===2&&a.jsxs(m,{container:!0,spacing:3,children:[a.jsx(m,{item:!0,xs:12,md:4,children:a.jsxs(_,{sx:{p:3},children:[a.jsx(u,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Generate Color Palette"}),a.jsx(w,{fullWidth:!0,label:"Base Color",type:"color",value:B,onChange:n=>ee(n.target.value),sx:{mb:2},InputProps:{startAdornment:a.jsx(h,{color:B,sx:{mr:1,width:24,height:24}})}}),a.jsx(w,{fullWidth:!0,select:!0,label:"Color Scheme",value:D,onChange:n=>re(n.target.value),sx:{mb:3},SelectProps:{native:!1},children:tr.map(n=>a.jsx(ye,{value:n.value,children:n.name},n.value))}),a.jsx(H,{variant:"contained",fullWidth:!0,onClick:le,disabled:q,children:"Generate Palette"})]})}),a.jsx(m,{item:!0,xs:12,md:8,children:Y?a.jsxs(_,{sx:{p:3},children:[a.jsx(u,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Generated Palette"}),a.jsx(c,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:Y.colors?.map((n,C)=>a.jsxs(c,{sx:{textAlign:"center"},children:[a.jsx(h,{color:n,sx:{width:60,height:60,mb:1},onClick:()=>k(n)}),a.jsx(u,{variant:"caption",sx:{fontFamily:"monospace"},children:n})]},C))})]}):a.jsx(c,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(u,{color:"text.secondary",children:"Generated palette will appear here"})})})]})]}),a.jsxs(be,{open:X,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,children:[a.jsx(Ce,{children:z==="brandKit"?"Create Brand Kit":"Create Theme"}),a.jsxs(je,{children:[a.jsx(w,{autoFocus:!0,fullWidth:!0,label:"Name",value:i.name,onChange:n=>b({...i,name:n.target.value}),sx:{mt:2,mb:2}}),a.jsxs(m,{container:!0,spacing:2,children:[a.jsx(m,{item:!0,xs:6,children:a.jsx(w,{fullWidth:!0,type:"color",label:"Primary Color",value:i.primaryColor,onChange:n=>b({...i,primaryColor:n.target.value})})}),a.jsx(m,{item:!0,xs:6,children:a.jsx(w,{fullWidth:!0,type:"color",label:"Secondary Color",value:i.secondaryColor,onChange:n=>b({...i,secondaryColor:n.target.value})})})]}),a.jsx(w,{fullWidth:!0,label:"Font Family",value:i.fontFamily,onChange:n=>b({...i,fontFamily:n.target.value}),sx:{mt:2}})]}),a.jsxs(ve,{children:[a.jsx(S,{onClick:()=>K(!1),children:"Cancel"}),a.jsx(S,{variant:"contained",onClick:z==="brandKit"?te:ne,children:"Create"})]})]}),A&&a.jsx(we,{severity:"error",sx:{m:2},children:A})]})}function vr(){return J(),a.jsx(nr,{})}export{vr as default};
