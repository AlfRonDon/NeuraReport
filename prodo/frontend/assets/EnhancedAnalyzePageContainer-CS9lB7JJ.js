import{c as P,j as e,bb as X,bc as Ne,bd as Oe,e as $,r as m,d as Ue,u as Qe,R as L,I as D,B as x,k as s,S as h,z as g,p as a,T as i,s as W,as as z,ah as He,a2 as Ye,a3 as qe,q as Ve,E as V,y as Ke,H,be as Xe,v as I,t as Ze,O as Je,aD as et,aM as K,bg as $e,N as Se,bh as tt,F as rt,a$ as Ae,Q as st,G as at,K as Y}from"./index-B8Eu23bA.js";import{I as it,Z as nt}from"./ZoomableChart-CJTNLwGR.js";import{F as Ce}from"./QuestionAnswer-n3mCgub-.js";import{C as oe}from"./BarChart-ClLuOAaO.js";import{W as ot}from"./WarningAmber-DtVJgAFk.js";import{T as le}from"./TrendingUp-ByVNVmvX.js";import{L as Q}from"./Lightbulb-CLdW-uXX.js";import{S as ce}from"./Security-yUjg5jYh.js";import{B as ze}from"./DataObject-CqeGq04Y.js";import{R as lt}from"./ReceiptLong-Dexlf27p.js";import{S as ct}from"./Speed-JRGKarSn.js";import{B as dt,R as We}from"./RocketLaunch-lXN39Dvq.js";import{S as xt}from"./Psychology-BoNYy9kx.js";import{A as pt}from"./Article-B2tsd32U.js";import{A as ht}from"./AiUsageNotice-DRuwRFKl.js";import{T as mt,a as O}from"./Tabs-D_BhmpzR.js";import{G as j}from"./Grid-5L9Rvqba.js";import{A as ut,a as gt,b as jt}from"./AccordionSummary-CvHbDzcW.js";import{C as de,a as xe}from"./CardContent-xJVpuEbT.js";import"./PieChart-BVneXJBn.js";import"./index-B21QI1NW.js";import"./index-Chjiymov.js";import"./KeyboardArrowRight-BOQXGjwe.js";const bt=P(e.jsx("path",{d:"M14.06 9.94 12 9l2.06-.94L15 6l.94 2.06L18 9l-2.06.94L15 12zM4 14l.94-2.06L7 11l-2.06-.94L4 8l-.94 2.06L1 11l2.06.94zm4.5-5 1.09-2.41L12 5.5 9.59 4.41 8.5 2 7.41 4.41 5 5.5l2.41 1.09zm-4 11.5 6-6.01 4 4L23 8.93l-1.41-1.41-7.09 7.97-4-4L3 19z"})),yt=P(e.jsx("path",{d:"m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z"})),Re=P(e.jsx("path",{d:"M3 10h11v2H3zm0-4h11v2H3zm0 8h7v2H3zm17.59-2.07-4.25 4.24-2.12-2.12-1.41 1.41L16.34 19 22 13.34z"})),ft=P([e.jsx("path",{d:"M9 15.5h6v1H9z"},"0"),e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"1"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"2"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"3")]),vt=P([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"2"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"3"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-2.5c2.33 0 4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2s-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5"},"4")]),kt=P([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),Z=`${Oe}/analyze/v2`;async function wt({file:t,preferences:p={},onProgress:c,signal:n}){if(!t)throw new Error("No file provided for analysis");const d=new FormData;d.append("file",t),Object.keys(p).length>0&&d.append("preferences",JSON.stringify(p));const u=await X(`${Z}/upload`,{method:"POST",body:d,signal:n});return Ne(u,{onEvent:c,errorMessage:"Enhanced document analysis failed"})}async function It(t,{question:p,includeSources:c=!0,maxContextChunks:n=5}){if(!t)throw new Error("Analysis ID is required");if(!p)throw new Error("Question is required");const d=await X(`${Z}/${encodeURIComponent(t)}/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:p,include_sources:c,max_context_chunks:n})});if(!d.ok){const u=await d.text().catch(()=>"");throw new Error(u||`Failed to ask question (${d.status})`)}return d.json()}async function St(t,{query:p,includeTrends:c=!0,includeForecasts:n=!1}){if(!t)throw new Error("Analysis ID is required");if(!p)throw new Error("Query is required");const d=await X(`${Z}/${encodeURIComponent(t)}/charts/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:p,include_trends:c,include_forecasts:n})});if(!d.ok)throw new Error("Failed to generate charts");return d.json()}async function Ct(t,{format:p="json",includeRawData:c=!0,includeCharts:n=!0}){const d=await X(`${Z}/${encodeURIComponent(t)}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:p,include_raw_data:c,include_charts:n})});if(!d.ok)throw new Error("Failed to export analysis");return d.blob()}const zt=Y`
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
`;Y`
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
`;Y`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`;Y`
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
`;Y`
  0% { transform: scale(0.9); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
`;function b({children:t,sx:p={},gradient:c=!1,hover:n=!0,...d}){const u=$();return e.jsx(K,{elevation:0,sx:{p:3,borderRadius:4,background:c?`linear-gradient(135deg, ${a(u.palette.text.primary,.04)} 0%, ${a(u.palette.text.primary,.02)} 100%)`:a(u.palette.background.paper,.8),backdropFilter:"blur(20px)",border:`1px solid ${a(u.palette.divider,.1)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",...n&&{"&:hover":{transform:"translateY(-4px)",boxShadow:u.palette.mode==="dark"?`0 20px 40px ${a(u.palette.common.black,.3)}`:"0 20px 40px rgba(0,0,0,0.08)",borderColor:u.palette.mode==="dark"?a(u.palette.text.primary,.15):s[500]}},...p},...d,children:t})}function R({icon:t,label:p,value:c,delay:n=0}){const d=$();return e.jsx(at,{in:!0,timeout:500+n*100,children:e.jsx(de,{sx:{minWidth:140,background:d.palette.mode==="dark"?`linear-gradient(135deg, ${a(d.palette.text.primary,.08)} 0%, ${a(d.palette.text.primary,.03)} 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 100%)`,border:`1px solid ${a(d.palette.divider,.15)}`,borderRadius:1,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:d.palette.mode==="dark"?`0 8px 24px ${a(d.palette.common.black,.3)}`:"0 8px 24px rgba(0,0,0,0.08)"}},children:e.jsx(xe,{sx:{py:2,px:2.5,"&:last-child":{pb:2}},children:e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(g,{sx:{bgcolor:d.palette.mode==="dark"?a(d.palette.text.primary,.1):s[400],color:"text.secondary",width:40,height:40},children:t}),e.jsxs(x,{children:[e.jsx(i,{variant:"h5",fontWeight:800,color:"text.primary",children:c}),e.jsx(i,{variant:"caption",color:"text.secondary",fontWeight:500,children:p})]})]})})})})}function $t({metric:t,index:p}){const c=$(),n=t.change>0,d=t.change<0;return e.jsx(Ae,{in:!0,timeout:300+p*50,children:e.jsx(de,{sx:{minWidth:220,background:`linear-gradient(145deg, ${c.palette.background.paper} 0%, ${a(c.palette.text.primary,.02)} 100%)`,border:`1px solid ${a(c.palette.divider,.1)}`,borderRadius:1,overflow:"hidden",position:"relative",transition:"all 0.3s ease","&:hover":{transform:"translateY(-6px)",boxShadow:c.palette.mode==="dark"?`0 12px 32px ${a(c.palette.common.black,.3)}`:"0 12px 32px rgba(0,0,0,0.08)","& .metric-icon":{transform:"scale(1.2) rotate(10deg)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:c.palette.mode==="dark"?s[1100]:s[1200]}},children:e.jsx(xe,{sx:{py:2.5,px:3},children:e.jsxs(h,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"caption",color:"text.secondary",fontWeight:600,sx:{textTransform:"uppercase",letterSpacing:.5},children:t.name}),e.jsx(i,{variant:"h4",fontWeight:800,sx:{mt:.5,color:c.palette.text.primary},children:t.raw_value}),t.change!==void 0&&t.change!==null&&e.jsx(I,{size:"small",icon:n?e.jsx(le,{sx:{fontSize:14}}):d?e.jsx(le,{sx:{fontSize:14,transform:"rotate(180deg)"}}):null,label:`${n?"+":""}${t.change}%`,sx:{mt:1,height:24,fontWeight:700,bgcolor:c.palette.mode==="dark"?a(c.palette.text.primary,.1):s[300],color:"text.secondary","& .MuiChip-icon":{color:"inherit"}}})]}),e.jsx(x,{className:"metric-icon",sx:{transition:"transform 0.3s ease",color:a(c.palette.text.primary,.15)},children:e.jsx(bt,{sx:{fontSize:48}})})]})})})})}function _({insight:t,type:p="insight",index:c=0}){const n=$(),d={insight:{gradient:n.palette.mode==="dark"?`linear-gradient(135deg, ${a(n.palette.text.primary,.08)} 0%, ${a(n.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 100%)`,borderColor:n.palette.mode==="dark"?s[1e3]:s[1100],icon:e.jsx(Q,{}),iconBg:n.palette.mode==="dark"?a(n.palette.text.primary,.1):s[400]},risk:{gradient:n.palette.mode==="dark"?`linear-gradient(135deg, ${a(n.palette.text.primary,.08)} 0%, ${a(n.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 100%)`,borderColor:n.palette.mode==="dark"?s[900]:s[1100],icon:e.jsx(ce,{}),iconBg:n.palette.mode==="dark"?a(n.palette.text.primary,.1):s[400]},opportunity:{gradient:n.palette.mode==="dark"?`linear-gradient(135deg, ${a(n.palette.text.primary,.08)} 0%, ${a(n.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 100%)`,borderColor:n.palette.mode==="dark"?s[600]:s[1e3],icon:e.jsx(We,{}),iconBg:n.palette.mode==="dark"?a(n.palette.text.primary,.1):s[400]},action:{gradient:n.palette.mode==="dark"?`linear-gradient(135deg, ${a(n.palette.text.primary,.08)} 0%, ${a(n.palette.text.primary,.04)} 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 100%)`,borderColor:n.palette.mode==="dark"?s[600]:s[900],icon:e.jsx(Re,{}),iconBg:n.palette.mode==="dark"?a(n.palette.text.primary,.1):s[400]}},{gradient:u,borderColor:y,icon:k,iconBg:M}=d[p]||d.insight,E={critical:{bg:n.palette.mode==="dark"?s[1100]:s[1200],text:"#fff"},high:{bg:n.palette.mode==="dark"?s[1e3]:s[1100],text:"#fff"},medium:{bg:n.palette.mode==="dark"?s[900]:s[1e3],text:"#fff"},low:{bg:n.palette.mode==="dark"?s[600]:s[900],text:n.palette.mode==="dark"?s[1200]:"#fff"}},A=E[t.priority?.toLowerCase()]||E.medium;return e.jsx(H,{in:!0,timeout:400+c*100,children:e.jsx(de,{sx:{mb:2,background:u,borderLeft:`4px solid ${y}`,borderRadius:1,overflow:"hidden",transition:"all 0.3s ease","&:hover":{transform:"translateX(8px)",boxShadow:`0 8px 24px ${a(y,.2)}`}},children:e.jsx(xe,{sx:{py:2.5,px:3},children:e.jsxs(h,{direction:"row",spacing:2,children:[e.jsx(g,{sx:{bgcolor:M,color:y,width:48,height:48},children:k}),e.jsxs(x,{sx:{flex:1},children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:1},children:[e.jsx(i,{variant:"subtitle1",fontWeight:700,children:t.title}),t.priority&&e.jsx(I,{label:t.priority,size:"small",sx:{height:22,fontSize:10,fontWeight:700,textTransform:"uppercase",bgcolor:A.bg,color:A.text}}),t.confidence&&e.jsx(I,{label:`${Math.round(t.confidence*100)}% confident`,size:"small",variant:"outlined",sx:{height:22,fontSize:10}})]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6},children:t.description}),t.suggested_actions?.length>0&&e.jsxs(x,{sx:{mt:2,p:2,bgcolor:a(y,.08),borderRadius:1},children:[e.jsx(i,{variant:"caption",fontWeight:700,color:y,children:"SUGGESTED ACTIONS"}),e.jsx(h,{spacing:.5,sx:{mt:1},children:t.suggested_actions.map((J,B)=>e.jsxs(h,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{sx:{width:6,height:6,borderRadius:"50%",bgcolor:y}}),e.jsx(i,{variant:"body2",children:J})]},B))})]})]})]})})})})}function At({sentiment:t}){const p=$();if(!t)return null;const n=(u=>{const y=p.palette.mode==="dark"?s[1e3]:s[1100],k=p.palette.mode==="dark"?`linear-gradient(135deg, ${a(p.palette.text.primary,.12)} 0%, ${a(p.palette.text.primary,.06)} 100%)`:`linear-gradient(135deg, ${s[400]} 0%, ${s[300]} 100%)`;return u?.includes("positive")?{icon:e.jsx(vt,{sx:{fontSize:32}}),color:y,label:"Positive",gradient:k}:u?.includes("negative")?{icon:e.jsx(kt,{sx:{fontSize:32}}),color:y,label:"Negative",gradient:k}:{icon:e.jsx(ft,{sx:{fontSize:32}}),color:y,label:"Neutral",gradient:k}})(t.overall_sentiment),d=Math.round((t.overall_score+1)*50);return e.jsx(b,{hover:!1,sx:{p:2.5},children:e.jsxs(h,{spacing:2,children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(g,{sx:{width:56,height:56,background:n.gradient,color:n.color},children:n.icon}),e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"overline",color:"text.secondary",fontWeight:600,children:"Document Sentiment"}),e.jsx(i,{variant:"h5",fontWeight:800,color:n.color,children:n.label})]}),e.jsx(x,{sx:{textAlign:"center"},children:e.jsxs(x,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(z,{variant:"determinate",value:d,size:60,thickness:6,sx:{color:n.color}}),e.jsx(x,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{variant:"body2",fontWeight:800,color:n.color,children:[d,"%"]})})]})})]}),e.jsxs(h,{direction:"row",spacing:2,children:[e.jsx(I,{size:"small",label:`Tone: ${t.emotional_tone||"Neutral"}`,sx:{bgcolor:p.palette.mode==="dark"?a(p.palette.text.primary,.08):s[300]}}),e.jsx(I,{size:"small",label:`Urgency: ${t.urgency_level||"Normal"}`,sx:{bgcolor:p.palette.mode==="dark"?a(p.palette.text.primary,.08):s[300]}})]})]})})}function Wt({quality:t}){const p=$();if(!t)return null;const c=Math.round((t.quality_score||0)*100),d=(u=>u>=80?p.palette.mode==="dark"?s[1e3]:s[1100]:u>=60?p.palette.mode==="dark"?s[900]:s[1e3]:p.palette.mode==="dark"?s[600]:s[900])(c);return e.jsx(b,{hover:!1,sx:{p:2.5},children:e.jsxs(h,{spacing:2,children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsxs(x,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(z,{variant:"determinate",value:100,size:80,thickness:6,sx:{color:a(d,.2)}}),e.jsx(z,{variant:"determinate",value:c,size:80,thickness:6,sx:{color:d,position:"absolute",left:0,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsxs(x,{sx:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(i,{variant:"h5",fontWeight:800,color:d,children:c}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Score"})]})]}),e.jsxs(x,{sx:{flex:1},children:[e.jsx(i,{variant:"overline",color:"text.secondary",fontWeight:600,children:"Data Quality"}),e.jsx(i,{variant:"h6",fontWeight:700,children:c>=80?"Excellent":c>=60?"Good":"Needs Attention"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[t.total_rows," rows, ",t.total_columns," columns"]})]})]}),t.recommendations?.length>0&&e.jsx(x,{sx:{p:1.5,bgcolor:a(d,.1),borderRadius:1},children:e.jsx(i,{variant:"caption",color:"text.secondary",children:t.recommendations[0]})})]})})}function U({children:t,value:p,index:c,...n}){return e.jsx("div",{role:"tabpanel",hidden:p!==c,...n,children:p===c&&e.jsx(H,{in:!0,timeout:300,children:e.jsx(x,{sx:{py:3},children:t})})})}function Rt({qa:t,index:p}){const c=$();return e.jsx(H,{in:!0,timeout:300+p*100,children:e.jsxs(x,{sx:{mb:3},children:[e.jsx(h,{direction:"row",justifyContent:"flex-end",sx:{mb:1.5},children:e.jsx(K,{sx:{maxWidth:"80%",p:2,px:3,borderRadius:"20px 20px 4px 20px",background:c.palette.mode==="dark"?s[1100]:s[1200],color:"#fff",boxShadow:`0 4px 12px ${a(c.palette.common.black,.2)}`},children:e.jsx(i,{variant:"body1",fontWeight:500,children:t.question})})}),e.jsxs(h,{direction:"row",sx:{mb:1},children:[e.jsx(g,{sx:{width:36,height:36,mr:1.5,bgcolor:c.palette.mode==="dark"?a(c.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx($e,{sx:{fontSize:20}})}),e.jsxs(K,{sx:{maxWidth:"80%",p:2,px:3,borderRadius:"4px 20px 20px 20px",bgcolor:a(c.palette.background.paper,.8),backdropFilter:"blur(10px)",border:`1px solid ${a(c.palette.divider,.1)}`},children:[e.jsx(i,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.7},children:t.answer}),t.sources?.length>0&&e.jsxs(x,{sx:{mt:2,pt:2,borderTop:`1px solid ${a(c.palette.divider,.1)}`},children:[e.jsx(i,{variant:"caption",fontWeight:700,color:"text.secondary",children:"Sources:"}),t.sources.slice(0,2).map((n,d)=>e.jsxs(i,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:.5},children:['"',n.content_preview?.slice(0,100),'..."']},d))]})]})]})]})})}function tr(){const t=$(),[p,c]=m.useState(0),[n,d]=m.useState(null),[u,y]=m.useState(!1),[k,M]=m.useState(!1),[E,A]=m.useState(0),[J,B]=m.useState(""),[l,q]=m.useState(null),[pe,F]=m.useState(null),[_e,ee]=m.useState([]),[T,te]=m.useState(""),[re,he]=m.useState(!1),[me,ue]=m.useState([]),[G,ge]=m.useState(""),[se,je]=m.useState(!1),[ae,ie]=m.useState([]),[be,ne]=m.useState(null),[ye,fe]=m.useState(!1),[ve]=m.useState({analysis_depth:"standard",focus_areas:[],output_format:"executive",industry:null,enable_predictions:!0,auto_chart_generation:!0,max_charts:10}),N=m.useRef(null),ke=m.useRef(null),v=Ue(),{execute:f}=Qe(),Ee=m.useCallback(r=>{r.preventDefault(),y(!0)},[]),Te=m.useCallback(r=>{r.preventDefault(),y(!1)},[]),Le=m.useCallback(r=>{r.preventDefault(),y(!1);const o=r.dataTransfer.files[0];o&&(d(o),F(null),q(null))},[]),De=m.useCallback(r=>{const o=r.target.files?.[0];o&&(d(o),F(null),q(null))},[]),Pe=m.useCallback(()=>{if(n)return f({type:D.ANALYZE,label:"Analyze document",reversibility:L.FULLY_REVERSIBLE,blocksNavigation:!0,suppressSuccessToast:!0,intent:{fileName:n?.name},action:async()=>{N.current=new AbortController,M(!0),A(0),B("Initializing AI analysis..."),F(null);try{const r=await wt({file:n,preferences:ve,signal:N.current?.signal,onProgress:o=>{o.event==="stage"&&(A(o.progress||0),B(o.detail||o.stage||"Processing..."))}});r.event==="result"&&(q(r),ee(r.suggested_questions||[]),ie(r.chart_suggestions||[]),c(0),v.show("Analysis complete!","success"))}catch(r){r.name==="AbortError"?v.show("Analysis cancelled","info"):F(r.message||"Analysis failed")}finally{M(!1),A(100),N.current=null}}})},[f,n,ve,v]),Me=m.useCallback(()=>f({type:D.UPDATE,label:"Cancel analysis",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"enhanced-analyze"},action:()=>{N.current&&(N.current.abort(),M(!1),A(0),B(""))}}),[f]),we=m.useCallback(()=>{if(!(!l?.analysis_id||!T.trim()))return f({type:D.ANALYZE,label:"Ask analysis question",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id},action:async()=>{he(!0);try{const r=await It(l.analysis_id,{question:T.trim(),includeSources:!0});ue(o=>[...o,{question:T.trim(),answer:r.answer,sources:r.sources,timestamp:new Date}]),te(""),r.suggested_followups?.length&&ee(r.suggested_followups)}catch(r){v.show(r.message||"Failed to get answer","error")}finally{he(!1)}}})},[l?.analysis_id,f,T,v]),Ie=m.useCallback(()=>{if(!(!l?.analysis_id||!G.trim()))return f({type:D.GENERATE,label:"Generate charts",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id},action:async()=>{je(!0);try{const r=await St(l.analysis_id,{query:G.trim(),includeTrends:!0,includeForecasts:!1});r.charts?.length&&(ie(o=>[...r.charts,...o]),ge(""),v.show(`Generated ${r.charts.length} chart(s)`,"success"))}catch(r){v.show(r.message||"Failed to generate charts","error")}finally{je(!1)}}})},[l?.analysis_id,G,f,v]),Be=m.useCallback(r=>{if(l?.analysis_id)return f({type:D.DOWNLOAD,label:`Export analysis (${r.toUpperCase()})`,reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,intent:{analysisId:l.analysis_id,format:r},action:async()=>{ne(null),fe(!0);try{const o=await Ct(l.analysis_id,{format:r}),C=URL.createObjectURL(o),w=document.createElement("a");w.href=C,w.download=`analysis_${l.analysis_id}.${r}`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(C),v.show(`Exported as ${r.toUpperCase()}`,"success")}catch(o){v.show(o.message||"Export failed","error")}finally{fe(!1)}}})},[l?.analysis_id,f,v]),Fe=m.useCallback(()=>f({type:D.UPDATE,label:"Reset analysis",reversibility:L.FULLY_REVERSIBLE,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{source:"enhanced-analyze"},action:()=>{d(null),q(null),F(null),ee([]),ue([]),ie([]),c(0)}}),[f]),S=m.useMemo(()=>l?{tables:l.total_tables||l.tables?.length||0,metrics:l.total_metrics||l.metrics?.length||0,entities:l.total_entities||l.entities?.length||0,insights:l.insights?.length||0,risks:l.risks?.length||0,opportunities:l.opportunities?.length||0,charts:ae.length}:null,[l,ae.length]);return e.jsxs(x,{sx:{minHeight:"100vh",background:t.palette.mode==="dark"?`linear-gradient(180deg, ${a(t.palette.text.primary,.02)} 0%, ${t.palette.background.default} 50%)`:`linear-gradient(180deg, ${s[200]} 0%, ${t.palette.background.default} 50%)`},children:[e.jsxs(x,{sx:{pt:4,pb:l?2:4,px:4,background:t.palette.mode==="dark"?`linear-gradient(135deg, ${a(t.palette.text.primary,.06)} 0%, ${a(t.palette.text.primary,.03)} 50%, transparent 100%)`:`linear-gradient(135deg, ${s[300]} 0%, ${s[200]} 50%, transparent 100%)`,borderBottom:`1px solid ${a(t.palette.divider,.1)}`},children:[e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(g,{sx:{width:56,height:56,background:t.palette.mode==="dark"?s[1100]:s[1200],boxShadow:`0 8px 24px ${a(t.palette.common.black,.2)}`},children:e.jsx(xt,{sx:{fontSize:28}})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h4",fontWeight:800,color:"text.primary",children:"AI Document Analysis"}),e.jsx(i,{variant:"body2",color:"text.secondary",fontWeight:500,children:"Intelligent extraction, analysis, visualization & insights powered by AI"})]})]}),e.jsx(h,{direction:"row",spacing:1.5,children:l&&e.jsxs(e.Fragment,{children:[e.jsx(W,{variant:"outlined",startIcon:ye?e.jsx(z,{size:16,color:"inherit"}):e.jsx(He,{}),onClick:r=>ne(r.currentTarget),disabled:ye,sx:{borderRadius:1,textTransform:"none",fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2}},children:"Export"}),e.jsx(Ye,{anchorEl:be,open:!!be,onClose:()=>ne(null),PaperProps:{sx:{borderRadius:1,minWidth:140}},children:["json","excel","pdf","csv","markdown","html"].map(r=>e.jsx(qe,{onClick:()=>Be(r),children:r.toUpperCase()},r))}),e.jsx(W,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:Fe,sx:{borderRadius:1,textTransform:"none",fontWeight:600,background:t.palette.mode==="dark"?s[1100]:s[1200],boxShadow:`0 4px 14px ${a(t.palette.common.black,.2)}`,"&:hover":{background:t.palette.mode==="dark"?s[1e3]:s[1100]}},children:"New Analysis"})]})})]}),e.jsx(x,{sx:{mt:3},children:e.jsx(ht,{title:"AI analysis",description:"Uses the document you upload. Results are generated by AI; review before sharing.",chips:[{label:"Source: Uploaded document",color:"default",variant:"outlined"},{label:"Confidence: Review required",color:"warning",variant:"outlined"},{label:"Reversible: No source changes",color:"success",variant:"outlined"}],dense:!0})}),S&&e.jsxs(h,{direction:"row",spacing:2,sx:{mt:3,flexWrap:"wrap"},useFlexGap:!0,children:[e.jsx(R,{icon:e.jsx(V,{}),label:"Tables",value:S.tables,delay:0}),e.jsx(R,{icon:e.jsx(Ke,{}),label:"Metrics",value:S.metrics,delay:1}),e.jsx(R,{icon:e.jsx(ze,{}),label:"Entities",value:S.entities,delay:2}),e.jsx(R,{icon:e.jsx(Q,{}),label:"Insights",value:S.insights,delay:3}),e.jsx(R,{icon:e.jsx(ot,{}),label:"Risks",value:S.risks,delay:4}),e.jsx(R,{icon:e.jsx(le,{}),label:"Opportunities",value:S.opportunities,delay:5}),e.jsx(R,{icon:e.jsx(oe,{}),label:"Charts",value:S.charts,delay:6})]})]}),e.jsxs(x,{sx:{px:4,py:3},children:[!l&&e.jsx(H,{in:!0,children:e.jsxs(x,{children:[e.jsxs(b,{gradient:!0,hover:!1,sx:{p:6,textAlign:"center",cursor:"pointer",border:`2px dashed ${u?t.palette.mode==="dark"?s[1e3]:s[1100]:a(t.palette.divider,.3)}`,bgcolor:u?t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200]:void 0,transition:"all 0.3s ease"},onDragOver:Ee,onDragLeave:Te,onDrop:Le,onClick:()=>ke.current?.click(),children:[e.jsx("input",{ref:ke,type:"file",hidden:!0,accept:".pdf,.xlsx,.xls,.csv,.doc,.docx,.png,.jpg,.jpeg",onChange:De}),!n&&!k&&e.jsxs(x,{children:[e.jsx(g,{sx:{width:100,height:100,mx:"auto",mb:3,background:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[400],animation:`${zt} 3s ease-in-out infinite`},children:e.jsx(Xe,{sx:{fontSize:48,color:"text.secondary"}})}),e.jsx(i,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Drop your document here"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"or click to browse files"}),e.jsx(h,{direction:"row",spacing:1,justifyContent:"center",flexWrap:"wrap",children:["PDF","Excel","CSV","Word","Images"].map(r=>e.jsx(I,{label:r,size:"small",sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300]}},r))})]}),n&&!k&&e.jsxs(x,{children:[e.jsx(g,{sx:{width:80,height:80,mx:"auto",mb:3,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300]},children:e.jsx(Ze,{sx:{fontSize:40,color:"text.secondary"}})}),e.jsx(i,{variant:"h6",fontWeight:700,gutterBottom:!0,children:n.name}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:[(n.size/1024/1024).toFixed(2)," MB"]}),e.jsx(W,{variant:"contained",size:"large",onClick:r=>{r.stopPropagation(),Pe()},startIcon:e.jsx(dt,{}),sx:{px:6,py:2,borderRadius:1,fontWeight:700,fontSize:"1.1rem",textTransform:"none",bgcolor:t.palette.mode==="dark"?s[1100]:s[1200],boxShadow:`0 8px 32px ${a(t.palette.common.black,.2)}`,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",bgcolor:t.palette.mode==="dark"?s[1e3]:s[1100],boxShadow:`0 12px 40px ${a(t.palette.common.black,.25)}`}},children:"Analyze with AI"})]}),k&&e.jsxs(x,{children:[e.jsxs(x,{sx:{width:120,height:120,mx:"auto",mb:3,position:"relative"},children:[e.jsx(z,{variant:"determinate",value:100,size:120,thickness:4,sx:{color:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[400]}}),e.jsx(z,{variant:"determinate",value:E,size:120,thickness:4,sx:{position:"absolute",left:0,color:t.palette.mode==="dark"?s[1e3]:s[1100],"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(x,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{variant:"h4",fontWeight:800,color:"text.primary",children:[E,"%"]})})]}),e.jsx(i,{variant:"h6",fontWeight:600,gutterBottom:!0,children:J}),e.jsx(Je,{variant:"determinate",value:E,sx:{maxWidth:400,mx:"auto",mt:2,height:8,borderRadius:4,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[400],"& .MuiLinearProgress-bar":{borderRadius:4,background:t.palette.mode==="dark"?s[1100]:s[1200]}}}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(et,{}),onClick:r=>{r.stopPropagation(),Me()},sx:{mt:3,borderRadius:1,textTransform:"none"},children:"Cancel"})]})]}),pe&&e.jsx(K,{sx:{mt:2,p:2,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.08):s[300],border:`1px solid ${a(t.palette.divider,.3)}`,borderRadius:1},children:e.jsx(i,{color:"text.primary",children:pe})})]})}),l&&e.jsx(H,{in:!0,children:e.jsxs(x,{children:[e.jsx(b,{hover:!1,sx:{p:0,mb:3},children:e.jsxs(mt,{value:p,onChange:(r,o)=>c(o),variant:"scrollable",scrollButtons:"auto",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"0.95rem",minHeight:64,transition:"all 0.2s ease","&:hover":{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200]},"&.Mui-selected":{color:"text.primary"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0",background:t.palette.mode==="dark"?s[1e3]:s[1200]}},children:[e.jsx(O,{icon:e.jsx(it,{}),iconPosition:"start",label:"Overview"}),e.jsx(O,{icon:e.jsx(Ce,{}),iconPosition:"start",label:"Q&A"}),e.jsx(O,{icon:e.jsx(oe,{}),iconPosition:"start",label:"Charts"}),e.jsx(O,{icon:e.jsx(V,{}),iconPosition:"start",label:"Data"}),e.jsx(O,{icon:e.jsx(Q,{}),iconPosition:"start",label:"Insights"})]})}),e.jsx(U,{value:p,index:0,children:e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:{xs:12,lg:8},children:e.jsxs(b,{sx:{height:"100%"},children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:2},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(pt,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Executive Summary"})]}),e.jsx(i,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.8,color:"text.secondary"},children:l.summaries?.executive?.content||l.summaries?.comprehensive?.content||"Summary not available"}),l.summaries?.executive?.bullet_points?.length>0&&e.jsxs(x,{sx:{mt:3,p:2.5,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200],borderRadius:1,border:`1px solid ${a(t.palette.divider,.1)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:700,gutterBottom:!0,children:"Key Points"}),e.jsx(h,{spacing:1,children:l.summaries.executive.bullet_points.map((r,o)=>e.jsxs(h,{direction:"row",alignItems:"flex-start",spacing:1.5,children:[e.jsx(x,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:t.palette.mode==="dark"?s[1100]:s[1200],color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,flexShrink:0,mt:.25},children:o+1}),e.jsx(i,{variant:"body2",children:r})]},o))})]})]})}),e.jsx(j,{size:{xs:12,lg:4},children:e.jsxs(h,{spacing:3,children:[e.jsx(At,{sentiment:l.sentiment}),e.jsx(Wt,{quality:l.data_quality})]})}),e.jsx(j,{size:12,children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(ct,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Key Metrics"})]}),e.jsx(h,{direction:"row",spacing:2,flexWrap:"wrap",useFlexGap:!0,children:l.metrics?.slice(0,8).map((r,o)=>e.jsx($t,{metric:r,index:o},r.id))})]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:r=>r.palette.mode==="dark"?a(r.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(Q,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Top Insights"})]}),l.insights?.slice(0,3).map((r,o)=>e.jsx(_,{insight:r,type:"insight",index:o},r.id))]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(ce,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Risks & Opportunities"})]}),l.risks?.slice(0,2).map((r,o)=>e.jsx(_,{insight:r,type:"risk",index:o},r.id)),l.opportunities?.slice(0,2).map((r,o)=>e.jsx(_,{insight:r,type:"opportunity",index:o+2},r.id))]})})]})}),e.jsx(U,{value:p,index:1,children:e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:{xs:12,lg:8},children:e.jsxs(b,{sx:{minHeight:500},children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx($e,{})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h6",fontWeight:700,children:"Ask AI About Your Document"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Get instant answers with source citations"})]})]}),e.jsx(x,{sx:{minHeight:300,maxHeight:400,overflowY:"auto",mb:3,p:2,bgcolor:a(t.palette.background.default,.5),borderRadius:1},children:me.length===0?e.jsxs(x,{sx:{textAlign:"center",py:6},children:[e.jsx(g,{sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.08):s[300]},children:e.jsx(Ce,{sx:{fontSize:40,color:"text.secondary"}})}),e.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Start a conversation"}),e.jsx(i,{variant:"body2",color:"text.disabled",children:"Ask questions about the document content"})]}):me.map((r,o)=>e.jsx(Rt,{qa:r,index:o},o))}),e.jsxs(h,{direction:"row",spacing:2,children:[e.jsx(Se,{fullWidth:!0,placeholder:"Ask a question about your document...",value:T,onChange:r=>te(r.target.value),onKeyDown:r=>r.key==="Enter"&&!r.shiftKey&&we(),disabled:re,sx:{"& .MuiOutlinedInput-root":{borderRadius:1,bgcolor:a(t.palette.background.paper,.8)}}}),e.jsx(W,{variant:"contained",onClick:we,disabled:!T.trim()||re,sx:{minWidth:56,borderRadius:1,background:t.palette.mode==="dark"?s[1100]:s[1200],"&:hover":{background:t.palette.mode==="dark"?s[1e3]:s[1100]}},children:re?e.jsx(z,{size:20,color:"inherit"}):e.jsx(tt,{})})]})]})}),e.jsx(j,{size:{xs:12,lg:4},children:e.jsxs(b,{children:[e.jsx(i,{variant:"subtitle1",fontWeight:700,gutterBottom:!0,children:"Suggested Questions"}),e.jsx(h,{spacing:1.5,children:_e.map((r,o)=>e.jsx(W,{variant:"outlined",onClick:()=>te(r),sx:{textTransform:"none",justifyContent:"flex-start",textAlign:"left",borderRadius:1,py:1.5,px:2,fontWeight:500,borderColor:a(t.palette.divider,.2),"&:hover":{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200],borderColor:t.palette.mode==="dark"?s[1e3]:s[1100]}},children:r},o))})]})})]})}),e.jsxs(U,{value:p,index:2,children:[e.jsxs(b,{sx:{mb:3},children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(rt,{})}),e.jsxs(x,{children:[e.jsx(i,{variant:"h6",fontWeight:700,children:"Generate Charts with Natural Language"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Describe the visualization you want and AI will create it"})]})]}),e.jsxs(h,{direction:"row",spacing:2,children:[e.jsx(Se,{fullWidth:!0,placeholder:'e.g., "Show revenue by quarter as a line chart" or "Compare categories in a pie chart"',value:G,onChange:r=>ge(r.target.value),onKeyDown:r=>r.key==="Enter"&&Ie(),disabled:se,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),e.jsx(W,{variant:"contained",onClick:Ie,disabled:!G.trim()||se,startIcon:se?e.jsx(z,{size:16,color:"inherit"}):e.jsx(oe,{}),sx:{minWidth:160,borderRadius:1,textTransform:"none",fontWeight:600,background:t.palette.mode==="dark"?s[1100]:s[1200],"&:hover":{background:t.palette.mode==="dark"?s[1e3]:s[1100]}},children:"Generate"})]})]}),e.jsx(j,{container:!0,spacing:3,children:ae.map((r,o)=>e.jsx(j,{size:{xs:12,md:6},children:e.jsx(Ae,{in:!0,timeout:300+o*100,children:e.jsx(x,{children:e.jsxs(b,{children:[e.jsx(i,{variant:"h6",fontWeight:700,gutterBottom:!0,children:r.title}),r.description&&e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),e.jsx(x,{sx:{height:320},children:e.jsx(nt,{chart:r,data:r.data,height:300})}),r.ai_insights?.length>0&&e.jsxs(x,{sx:{mt:2,p:2,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.08):s[300],borderRadius:1,border:`1px solid ${a(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"caption",fontWeight:700,color:"text.secondary",children:"AI INSIGHTS"}),r.ai_insights.map((C,w)=>e.jsxs(i,{variant:"body2",sx:{mt:.5},children:["• ",C]},w))]})]})})})},r.id||o))})]}),e.jsx(U,{value:p,index:3,children:e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:12,children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(V,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Extracted Tables (",l.tables?.length||0,")"]})]}),l.tables?.map(r=>e.jsxs(ut,{sx:{mb:2,borderRadius:"12px !important",overflow:"hidden","&:before":{display:"none"},boxShadow:"none",border:`1px solid ${a(t.palette.divider,.1)}`},children:[e.jsx(gt,{expandIcon:e.jsx(st,{}),sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.03):s[200],"&:hover":{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.06):s[300]}},children:e.jsxs(h,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(V,{sx:{color:"text.secondary"}}),e.jsx(i,{fontWeight:600,children:r.title||r.id}),e.jsx(I,{label:`${r.row_count} rows`,size:"small",variant:"outlined",sx:{borderColor:o=>o.palette.mode==="dark"?a(o.palette.text.primary,.3):s[500],color:"text.secondary"}}),e.jsx(I,{label:`${r.column_count} cols`,size:"small",variant:"outlined"})]})}),e.jsx(jt,{sx:{p:0},children:e.jsxs(x,{sx:{overflowX:"auto"},children:[e.jsxs(x,{component:"table",sx:{width:"100%",borderCollapse:"collapse","& th":{p:1.5,textAlign:"left",fontWeight:700,fontSize:"0.8rem",textTransform:"uppercase",bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.08):s[300],borderBottom:`2px solid ${t.palette.mode==="dark"?s[1100]:s[1200]}`},"& td":{p:1.5,fontSize:"0.875rem",borderBottom:`1px solid ${a(t.palette.divider,.1)}`},"& tr:hover td":{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.02):s[200]}},children:[e.jsx("thead",{children:e.jsx("tr",{children:r.headers.map((o,C)=>e.jsx("th",{children:o},C))})}),e.jsx("tbody",{children:r.rows.slice(0,10).map((o,C)=>e.jsx("tr",{children:o.map((w,Ge)=>e.jsx("td",{children:w},Ge))},C))})]}),r.rows.length>10&&e.jsx(x,{sx:{p:2,textAlign:"center",bgcolor:a(t.palette.grey[500],.05)},children:e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Showing 10 of ",r.rows.length," rows"]})})]})})]},r.id))]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(ze,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Entities (",l.entities?.length||0,")"]})]}),e.jsx(h,{spacing:1.5,children:l.entities?.slice(0,20).map(r=>e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{p:1.5,borderRadius:1,bgcolor:a(t.palette.background.default,.5),transition:"all 0.2s ease","&:hover":{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200]}},children:[e.jsx(I,{label:r.type,size:"small",sx:{minWidth:80,fontWeight:600,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"}}),e.jsx(i,{variant:"body2",fontWeight:500,children:r.value}),r.normalized_value&&r.normalized_value!==r.value&&e.jsxs(i,{variant:"caption",color:"text.secondary",children:["→ ",r.normalized_value]})]},r.id))})]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(h,{spacing:3,children:[l.invoices?.length>0&&e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(lt,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Invoices Detected"})]}),l.invoices.map(r=>e.jsxs(x,{sx:{p:2,mb:2,borderRadius:1,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200],border:`1px solid ${a(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:700,children:r.vendor_name}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Invoice #",r.invoice_number," • ",r.invoice_date]}),e.jsxs(i,{variant:"h5",fontWeight:800,color:"text.primary",sx:{mt:1},children:[r.currency," ",r.grand_total]})]},r.id))]}),l.contracts?.length>0&&e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(yt,{})}),e.jsx(i,{variant:"h6",fontWeight:700,children:"Contracts Detected"})]}),l.contracts.map(r=>e.jsxs(x,{sx:{p:2,borderRadius:1,bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.05):s[200],border:`1px solid ${a(t.palette.divider,.2)}`},children:[e.jsx(i,{variant:"subtitle2",fontWeight:700,children:r.contract_type}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:[r.effective_date," → ",r.expiration_date]}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Parties: ",r.parties?.map(o=>o.name).join(", ")]})]},r.id))]})]})})]})}),e.jsx(U,{value:p,index:4,children:e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:r=>r.palette.mode==="dark"?a(r.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(Q,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Key Insights (",l.insights?.length||0,")"]})]}),l.insights?.map((r,o)=>e.jsx(_,{insight:r,type:"insight",index:o},r.id))]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(ce,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Risks (",l.risks?.length||0,")"]})]}),l.risks?.map((r,o)=>e.jsx(_,{insight:r,type:"risk",index:o},r.id))]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(We,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Opportunities (",l.opportunities?.length||0,")"]})]}),l.opportunities?.map((r,o)=>e.jsx(_,{insight:r,type:"opportunity",index:o},r.id))]})}),e.jsx(j,{size:{xs:12,md:6},children:e.jsxs(b,{children:[e.jsxs(h,{direction:"row",alignItems:"center",spacing:1.5,sx:{mb:3},children:[e.jsx(g,{sx:{bgcolor:t.palette.mode==="dark"?a(t.palette.text.primary,.1):s[300],color:"text.secondary"},children:e.jsx(Re,{})}),e.jsxs(i,{variant:"h6",fontWeight:700,children:["Action Items (",l.action_items?.length||0,")"]})]}),l.action_items?.map((r,o)=>e.jsx(_,{insight:r,type:"action",index:o},r.id))]})})]})})]})}),e.jsxs(x,{sx:{textAlign:"center",py:4,mt:4},children:[e.jsx(i,{variant:"body2",color:"text.secondary",children:"Supported formats: PDF, Excel (XLSX, XLS), CSV, Word, Images"}),e.jsx(i,{variant:"caption",color:"text.disabled",sx:{mt:.5,display:"block"},children:"AI-powered analysis with intelligent extraction, multi-mode summaries, Q&A, and visualization"})]})]})]})}export{tr as default};
