import{c as W,j as e,e as O,d as Te,u as de,f as ne,r as l,bj as ke,bk as Ae,bl as Ee,bm as Ie,R as _,I as z,bn as D,B as b,T as o,as as le,q as Pe,P as q,S as x,N as V,a3 as ce,b1 as C,s as R,aJ as T,p as u,w as _e,ah as ie,ag as ze,at as De,bo as Re,bp as Me,J as E,o as Fe,k as A,b0 as U,Z as Ue,t as L,v as Le,K as Ne}from"./index-B8Eu23bA.js";import{S as Oe}from"./Security-yUjg5jYh.js";import{S as $e}from"./Speed-JRGKarSn.js";import{C as Be}from"./Cloud-BjXKCnvy.js";import{A as Ge}from"./AccessTime-DOFLvw9F.js";import{P as Ye}from"./Person-DzBPKkcS.js";import{S as k}from"./Switch-CKmzMGzD.js";import{a as He,C as Ke}from"./CardContent-xJVpuEbT.js";const qe=W(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),Ve=W(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),We=W(e.jsx("path",{d:"M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6M3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65"})),ue=Ne`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,Je=E(b)(({theme:t})=>({padding:t.spacing(3),maxWidth:1e3,margin:"0 auto",width:"100%",minHeight:"100vh",backgroundColor:t.palette.background.default})),Ze=E(x)(({theme:t})=>({marginBottom:t.spacing(3),animation:`${ue} 0.5s ease-out`})),Qe=E(Ke)(({theme:t})=>({backgroundColor:u(t.palette.background.paper,.8),backdropFilter:"blur(20px)",border:`1px solid ${u(t.palette.divider,.1)}`,borderRadius:8,boxShadow:`0 8px 32px ${u(t.palette.common.black,.08)}`,animation:`${ue} 0.5s ease-out`,transition:"all 0.3s ease","&:hover":{boxShadow:`0 12px 48px ${u(t.palette.common.black,.12)}`}})),Xe=E(b)(({theme:t})=>({width:32,height:32,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"})),et=E(Fe)(({theme:t})=>({borderRadius:12,transition:"all 0.2s ease","&:hover":{backgroundColor:t.palette.mode==="dark"?u(t.palette.text.primary,.1):A[300],transform:"rotate(180deg)"}})),tt=E(R)(({theme:t})=>({borderRadius:12,textTransform:"none",fontWeight:500,borderColor:u(t.palette.divider,.2),transition:"all 0.2s ease","&:hover":{borderColor:t.palette.mode==="dark"?A[1e3]:A[1100],backgroundColor:t.palette.mode==="dark"?u(t.palette.text.primary,.08):A[300]}}));function at(){return De()}function w(t){try{return localStorage.setItem(Re,JSON.stringify(t)),Me(t),{success:!0}}catch(s){return{success:!1,error:s.message||"Storage quota exceeded or unavailable"}}}function N({status:t}){O();const s={healthy:{color:"success",icon:L},configured:{color:"success",icon:L},ready:{color:"success",icon:L},ok:{color:"success",icon:L},warning:{color:"warning",icon:U},degraded:{color:"warning",icon:U},error:{color:"error",icon:Ue},not_configured:{color:"default",icon:U},unknown:{color:"default",icon:U}},p=(s[t]||s.unknown).icon;return e.jsx(Le,{size:"small",icon:e.jsx(p,{sx:{fontSize:14}}),label:t?.replace(/_/g," ")||"unknown",sx:{textTransform:"capitalize",fontSize:"0.75rem",borderRadius:1,bgcolor:M=>M.palette.mode==="dark"?u(M.palette.text.primary,.1):A[400],color:"text.secondary"}})}function f({icon:t,title:s,children:d}){const p=O();return e.jsx(Qe,{children:e.jsxs(He,{children:[e.jsxs(x,{direction:"row",spacing:1.5,alignItems:"center",sx:{mb:2},children:[e.jsx(Xe,{sx:{bgcolor:p.palette.mode==="dark"?u(p.palette.text.primary,.08):A[300]},children:e.jsx(t,{sx:{color:"text.secondary",fontSize:16}})}),e.jsx(o,{variant:"subtitle1",fontWeight:600,sx:{color:p.palette.text.primary},children:s})]}),d]})})}function c({label:t,value:s,mono:d=!1}){const p=O();return e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:p.palette.text.secondary},children:t}),e.jsx(o,{variant:"body2",sx:{color:p.palette.text.primary,...d&&{fontFamily:"monospace",fontSize:"0.8125rem"}},children:s})]})}function st(){const t=O(),s=Te(),{execute:d}=de(),p=ne(a=>a.setDemoMode),M=ne(a=>a.demoMode),[J,Z]=l.useState(!0),[m,xe]=l.useState(null),[Q,X]=l.useState(null),[h,v]=l.useState(at),[S,pe]=l.useState(null),[$,ee]=l.useState(!1),I=l.useRef(0),[he,te]=l.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[me,ae]=l.useState("en"),[B,G]=l.useState(!1),[be,Y]=l.useState(!1),ge=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Phoenix",label:"Arizona (no DST)"},{value:"America/Anchorage",label:"Alaska Time"},{value:"Pacific/Honolulu",label:"Hawaii Time"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Central European Time"},{value:"Europe/Berlin",label:"Berlin"},{value:"Asia/Tokyo",label:"Japan Standard Time"},{value:"Asia/Shanghai",label:"China Standard Time"},{value:"Asia/Kolkata",label:"India Standard Time"},{value:"Asia/Dubai",label:"Gulf Standard Time"},{value:"Australia/Sydney",label:"Australian Eastern Time"},{value:"UTC",label:"UTC"}],ye=[{value:"en",label:"English"},{value:"es",label:"Español (Spanish)"},{value:"fr",label:"Français (French)"},{value:"de",label:"Deutsch (German)"},{value:"pt",label:"Português (Portuguese)"},{value:"zh",label:"中文 (Chinese)"},{value:"ja",label:"日本語 (Japanese)"},{value:"ko",label:"한국어 (Korean)"}],H=l.useCallback(async()=>{Z(!0),X(null);try{const[a,n]=await Promise.all([ke(),Ae().catch(()=>null)]);xe(a),pe(n?.usage||null)}catch(a){X(a.message||"Failed to fetch system health")}finally{Z(!1)}},[]),se=l.useCallback(async()=>{const a=Date.now();try{const n=await Ee();if(I.current>a)return;const r=n?.preferences||{};v(r),w(r),typeof r.demoMode=="boolean"&&p(r.demoMode),r.timezone&&te(r.timezone),r.language&&ae(r.language),typeof r.twoFactorEnabled=="boolean"&&G(r.twoFactorEnabled)}catch(n){s.show(n.message||"Failed to load preferences","warning")}},[p,s]),fe=l.useCallback(async()=>{ee(!0);try{const a=await Ie(),n=new Blob([JSON.stringify(a.config||a,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`neurareport-config-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),s.show("Configuration exported successfully","success")}catch(a){s.show(a.message||"Failed to export configuration","error")}finally{ee(!1)}},[s]);l.useEffect(()=>{H(),se()},[H,se]);const F=l.useCallback(a=>async n=>{const r=n.target.checked,i={...h,[a]:r};I.current=Date.now(),v(i);const g=w(i);g.success||s.show(`Failed to cache preferences locally: ${g.error}`,"warning"),await d({type:z.UPDATE,label:"Update preference",reversibility:_.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{preferenceKey:a,action:"update_preference"},action:async()=>{try{const y=await D(a,r);if(y?.preferences){const re={...i,...y.preferences};v(re),w(re)}return s.show("Preferences saved","success"),y}catch(y){throw s.show(y.message||"Failed to save preferences","error"),y}}})},[h,s,d]),je=l.useCallback(async a=>{const n=a.target.value;te(n);const r={...h,timezone:n};I.current=Date.now(),v(r),w(r),await d({type:z.UPDATE,label:"Update timezone",reversibility:_.SYSTEM_MANAGED,suppressSuccessToast:!0,intent:{preferenceKey:"timezone",action:"update_timezone"},action:async()=>{try{await D("timezone",n),s.show("Timezone updated","success")}catch(i){s.show(i.message||"Failed to save timezone","error")}}})},[h,s,d]),ve=l.useCallback(async a=>{const n=a.target.value;ae(n);const r={...h,language:n};I.current=Date.now(),v(r),w(r),await d({type:z.UPDATE,label:"Update language",reversibility:_.SYSTEM_MANAGED,suppressSuccessToast:!0,intent:{preferenceKey:"language",action:"update_language"},action:async()=>{try{await D("language",n),s.show("Language updated. Some changes may require a page refresh.","success")}catch(i){s.show(i.message||"Failed to save language","error")}}})},[h,s,d]),we=l.useCallback(async a=>{a.target.checked?Y(!0):await d({type:z.UPDATE,label:"Disable two-factor authentication",reversibility:_.PARTIALLY_REVERSIBLE,intent:{action:"disable_2fa"},action:async()=>{try{await D("twoFactorEnabled",!1),G(!1),s.show("Two-factor authentication disabled","success")}catch(r){s.show(r.message||"Failed to disable 2FA","error")}}})},[d,s]),Se=l.useCallback(async a=>{const n=a.target.checked;p(n);const r={...h,demoMode:n};I.current=Date.now(),v(r);const i=w(r);i.success||s.show(`Failed to cache preferences locally: ${i.error}`,"warning"),await d({type:z.UPDATE,label:"Toggle demo mode",reversibility:_.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{preferenceKey:"demoMode",action:"toggle_demo_mode"},action:async()=>{try{const g=await D("demoMode",n);if(g?.preferences){const y={...r,...g.preferences};v(y),w(y)}return s.show(n?"Demo mode enabled - sample data loaded":"Demo mode disabled","success"),g}catch(g){throw s.show(g.message||"Failed to save preferences","error"),g}}})},[h,p,s,d]),j=m?.checks?.configuration||{},P=m?.checks?.openai||{},oe=m?.checks?.memory||{},K=m?.checks?.uploads_dir||{},Ce=m?.checks?.state_dir||{};return e.jsxs(Je,{children:[e.jsxs(Ze,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(b,{children:[e.jsx(o,{variant:"h5",fontWeight:600,sx:{color:t.palette.text.primary},children:"Settings"}),e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"System configuration and preferences"})]}),e.jsx(et,{onClick:H,disabled:J,sx:{color:t.palette.text.secondary},children:J?e.jsx(le,{size:20}):e.jsx(Pe,{})})]}),Q&&e.jsx(q,{severity:"error",sx:{mb:3,borderRadius:1},children:Q}),e.jsxs(x,{spacing:3,children:[e.jsxs(f,{icon:Ye,title:"Personal Settings",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"Customize your personal experience with NeuraReport."}),e.jsxs(x,{spacing:2,children:[e.jsx(V,{select:!0,fullWidth:!0,size:"small",label:"Language",value:me,onChange:ve,InputProps:{startAdornment:e.jsx(qe,{sx:{mr:1,color:"text.secondary",fontSize:20}})},children:ye.map(a=>e.jsx(ce,{value:a.value,children:a.label},a.value))}),e.jsx(V,{select:!0,fullWidth:!0,size:"small",label:"Timezone",value:he,onChange:je,InputProps:{startAdornment:e.jsx(Ge,{sx:{mr:1,color:"text.secondary",fontSize:20}})},children:ge.map(a=>e.jsx(ce,{value:a.value,children:a.label},a.value))})]})]}),e.jsx(f,{icon:Ve,title:"Security",children:e.jsxs(x,{spacing:2,children:[e.jsx(C,{control:e.jsx(k,{checked:B,onChange:we,size:"small"}),label:e.jsxs(x,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Two-Factor Authentication (2FA)"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary},children:B?"Your account is protected with 2FA":"Add an extra layer of security to your account"})]})}),B&&e.jsx(q,{severity:"success",sx:{borderRadius:1},children:"Two-factor authentication is enabled. Your account is more secure."}),be&&e.jsxs(q,{severity:"info",sx:{borderRadius:1},children:[e.jsx(o,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Set up Two-Factor Authentication"}),e.jsx(o,{variant:"body2",sx:{mb:2},children:"To enable 2FA, scan the QR code with your authenticator app (Google Authenticator, Authy, etc.) and enter the verification code."}),e.jsx(b,{sx:{textAlign:"center",py:2,bgcolor:"background.paper",borderRadius:1,mb:2},children:e.jsx(o,{variant:"caption",color:"text.secondary",children:"[QR Code would appear here]"})}),e.jsx(V,{fullWidth:!0,size:"small",label:"Verification Code",placeholder:"Enter 6-digit code",sx:{mb:2}}),e.jsxs(x,{direction:"row",spacing:1,children:[e.jsx(R,{variant:"contained",size:"small",onClick:()=>{G(!0),Y(!1),s.show("Two-factor authentication enabled!","success")},children:"Verify & Enable"}),e.jsx(R,{variant:"outlined",size:"small",onClick:()=>Y(!1),children:"Cancel"})]})]}),e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.08)}}),e.jsxs(b,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary,mb:.5},children:"Change Password"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary,display:"block",mb:1},children:"Update your password to keep your account secure."}),e.jsx(R,{variant:"outlined",size:"small",sx:{borderRadius:1},children:"Change Password"})]}),e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.08)}}),e.jsxs(b,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary,mb:.5},children:"Active Sessions"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary,display:"block",mb:1},children:"You're currently logged in on 1 device."}),e.jsx(R,{variant:"outlined",size:"small",sx:{borderRadius:1,color:"text.secondary"},children:"Sign Out Other Devices"})]})]})}),e.jsx(f,{icon:$e,title:"System Status",children:e.jsxs(x,{spacing:1,children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Overall Status"}),e.jsx(N,{status:m?.status})]}),e.jsx(c,{label:"API Version",value:m?.version||"-"}),e.jsx(c,{label:"Response Time",value:m?.response_time_ms?`${m.response_time_ms}ms`:"-"}),m?.timestamp&&e.jsx(c,{label:"Last Checked",value:new Date(m.timestamp).toLocaleString()})]})}),e.jsx(f,{icon:_e,title:"Storage",children:e.jsxs(x,{spacing:1,children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Uploads Directory"}),e.jsx(N,{status:K.status})]}),K.writable!==void 0&&e.jsx(c,{label:"Writable",value:K.writable?"Yes":"No"}),e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.08)}}),e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"State Directory"}),e.jsx(N,{status:Ce.status})]}),oe.rss_mb&&e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.08)}}),e.jsx(c,{label:"Memory Usage (RSS)",value:`${oe.rss_mb.toFixed(1)} MB`})]})]})}),e.jsx(f,{icon:Oe,title:"API Configuration",children:e.jsxs(x,{spacing:1,children:[e.jsx(c,{label:"API Key",value:j.api_key_configured?"Configured":"Not Set"}),e.jsx(c,{label:"Rate Limiting",value:j.rate_limiting_enabled?`Enabled (${j.rate_limit})`:"Disabled"}),e.jsx(c,{label:"Request Timeout",value:j.request_timeout?`${j.request_timeout}s`:"-"}),e.jsx(c,{label:"Max Upload Size",value:j.max_upload_size_mb?`${j.max_upload_size_mb} MB`:"-"}),e.jsx(c,{label:"Debug Mode",value:j.debug_mode?"Enabled":"Disabled"})]})}),e.jsx(f,{icon:Be,title:"OpenAI Integration",children:e.jsxs(x,{spacing:1,children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Connection Status"}),e.jsx(N,{status:P.status})]}),P.message&&e.jsx(c,{label:"Details",value:P.message}),P.key_prefix&&e.jsx(c,{label:"API Key",value:P.key_prefix,mono:!0})]})}),e.jsx(f,{icon:We,title:"Token Usage",children:S?e.jsxs(x,{spacing:1,children:[e.jsx(c,{label:"Total Tokens",value:(S.total_tokens||0).toLocaleString()}),e.jsx(c,{label:"Input Tokens",value:(S.total_input_tokens||0).toLocaleString()}),e.jsx(c,{label:"Output Tokens",value:(S.total_output_tokens||0).toLocaleString()}),e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.08)}}),e.jsx(c,{label:"Estimated Cost",value:`$${(S.estimated_cost_usd||0).toFixed(4)}`,mono:!0}),e.jsx(c,{label:"API Requests",value:(S.request_count||0).toLocaleString()}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.disabled,mt:1},children:"Usage statistics are tracked since server start."})]}):e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Token usage data unavailable"})}),e.jsxs(f,{icon:ie,title:"Export & Backup",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"Export your configuration for backup or migration purposes."}),e.jsx(tt,{variant:"outlined",startIcon:$?e.jsx(le,{size:16}):e.jsx(ie,{}),onClick:fe,disabled:$,children:$?"Exporting...":"Export Configuration"})]}),e.jsxs(f,{icon:ze,title:"Preferences",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"These preferences are synced with the server and cached locally."}),e.jsxs(x,{spacing:1,children:[e.jsx(C,{control:e.jsx(k,{checked:M,onChange:Se,size:"small"}),label:e.jsxs(x,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Demo Mode"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary},children:"Explore with sample data (no real database required)"})]})}),e.jsx(T,{sx:{my:1,borderColor:u(t.palette.divider,.06)}}),e.jsx(C,{control:e.jsx(k,{checked:h.autoRefreshJobs??!0,onChange:F("autoRefreshJobs"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Auto-refresh jobs list"})}),e.jsx(C,{control:e.jsx(k,{checked:h.showNotifications??!0,onChange:F("showNotifications"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Show desktop notifications"})}),e.jsx(C,{control:e.jsx(k,{checked:h.confirmDelete??!0,onChange:F("confirmDelete"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Confirm before deleting items"})}),e.jsx(C,{control:e.jsx(k,{checked:h.compactTables??!1,onChange:F("compactTables"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Use compact table view"})})]})]})]})]})}function xt(){return de(),e.jsx(st,{})}export{xt as default};
