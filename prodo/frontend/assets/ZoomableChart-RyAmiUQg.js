import{g as Lt,j as c,cI as mt,cJ as te,a$ as vt,bJ as j,ab as xt,r as k,B as ot,q as ht,o as H,p as Ot,n as Pt,f as ee,T as ne,e as St,C as re,aV as ie,b2 as B}from"./index-DeRHNZar.js";import{g as $t,D as ae,t as wt,E as zt,L as M,f as U,C as Tt,A as Rt,a as N,d as Bt,b as F,h as oe,e as Nt,j as q,u as Ft,G as Kt,k as ct,S as _t,v as se,w as le,x as ce,r as Mt,l as Wt,X as Q,Y as tt,n as Zt,R as ue,y as fe,z as pe,B as de,o as yt,T as st,s as lt,p as he,P as ye,q as me}from"./PieChart-CHoWBHnY.js";const nn=Lt([c.jsx("path",{d:"M21 8c-1.45 0-2.26 1.44-1.93 2.51l-3.55 3.56c-.3-.09-.74-.09-1.04 0l-2.55-2.55C12.27 10.45 11.46 9 10 9c-1.45 0-2.27 1.44-1.93 2.52l-4.56 4.55C2.44 15.74 1 16.55 1 18c0 1.1.9 2 2 2 1.45 0 2.26-1.44 1.93-2.51l4.55-4.56c.3.09.74.09 1.04 0l2.55 2.55C12.73 16.55 13.54 18 15 18c1.45 0 2.27-1.44 1.93-2.52l3.56-3.55c1.07.33 2.51-.48 2.51-1.93 0-1.1-.9-2-2-2"},"0"),c.jsx("path",{d:"m15 9 .94-2.07L18 6l-2.06-.93L15 3l-.92 2.07L12 6l2.08.93zM3.5 11 4 9l2-.5L4 8l-.5-2L3 8l-2 .5L3 9z"},"1")]),ve=Lt(c.jsx("path",{d:"m15 3 2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}));async function rn({file:t,templateId:e,connectionId:r,onProgress:n,background:i=!1,signal:a}){if(!t)throw new Error("No file provided for analysis");const o=new FormData;if(o.append("file",t),e&&o.append("template_id",e),r&&o.append("connection_id",r),i){const s=await mt(`${vt}/analyze/upload?background=true`,{method:"POST",body:o});if(!s.ok){const h=await s.text().catch(()=>"");throw new Error(h||`Failed to queue analysis (${s.status})`)}return s.json()}const l=await mt(`${vt}/analyze/upload`,{method:"POST",body:o,signal:a});return te(l,{onEvent:n,errorMessage:"Document analysis failed"})}async function an(t,{question:e,includeSampleData:r=!0,tableIds:n}={}){if(!t)throw new Error("Analysis ID is required");const i={question:e||"",include_sample_data:r};Array.isArray(n)&&n.length&&(i.table_ids=n);const a=await mt(`${vt}/analyze/${encodeURIComponent(t)}/charts/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok){const o=await a.text().catch(()=>"");throw new Error(o||`Failed to get chart suggestions (${a.status})`)}return a.json()}function on(t,e=0){if(!t||typeof t!="object")return null;const r=typeof t.type=="string"?t.type.toLowerCase().trim():"bar",n=t.xField??t.x_field??"",i=typeof n=="string"?n.trim():"";let a=t.yFields??t.y_fields;typeof a=="string"&&(a=[a]),Array.isArray(a)||(a=[]);const o=a.map(l=>typeof l=="string"?l.trim():String(l)).filter(Boolean);return!i||!o.length?null:{id:t.id?String(t.id):`chart_${e+1}`,type:r,xField:i,yFields:o,groupField:t.groupField??null,aggregation:t.aggregation??null,title:t.title??null,description:t.description??null}}function sn(t){if(!t)return{valid:!1,error:"No file selected"};const e=50;if(t.size>e*1024*1024)return{valid:!1,error:`File too large. Maximum size is ${e}MB.`};const r=t.name.toLowerCase();return[".pdf",".xlsx",".xls",".xlsm"].some(a=>r.endsWith(a))?{valid:!0}:{valid:!1,error:"Only PDF and Excel files are supported."}}var xe=["type","layout","connectNulls","ref"],ge=["key"];function G(t){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function Et(t,e){if(t==null)return{};var r=be(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function be(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},et.apply(this,arguments)}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dt(Object(r),!0).forEach(function(n){z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V(t){return Oe(t)||we(t)||je(t)||Ae()}function Ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function je(t,e){if(t){if(typeof t=="string")return gt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gt(t,e)}}function we(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oe(t){if(Array.isArray(t))return gt(t)}function gt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vt(n.key),n)}}function Se(t,e,r){return e&&kt(t.prototype,e),r&&kt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _e(t,e,r){return e=ut(e),Ee(t,Ut()?Reflect.construct(e,r||[],ut(t).constructor):e.apply(t,r))}function Ee(t,e){if(e&&(G(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return De(t)}function De(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ut=function(){return!!t})()}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ut(t)}function ke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bt(t,e)}function z(t,e,r){return e=Vt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vt(t){var e=Ce(t,"string");return G(e)=="symbol"?e:e+""}function Ce(t,e){if(G(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(G(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var it=(function(t){function e(){var r;Pe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=_e(this,e,[].concat(i)),z(r,"state",{isAnimationFinished:!0,totalLength:0}),z(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),z(r,"getStrokeDasharray",function(o,l,s){var h=s.reduce(function(O,P){return O+P});if(!h)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/h),f=o%h,p=l-o,y=[],d=0,x=0;d<s.length;x+=s[d],++d)if(x+s[d]>f){y=[].concat(V(s.slice(0,d)),[f-x]);break}var w=y.length%2===0?[0,p]:[p];return[].concat(V(e.repeat(s,u)),V(y),w).map(function(O){return"".concat(O,"px")}).join(", ")}),z(r,"id",Ft("recharts-line-")),z(r,"pathRef",function(o){r.mainCurve=o}),z(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),z(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return ke(e,t),Se(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,s=a.yAxis,h=a.layout,u=a.children,f=wt(u,zt);if(!f)return null;var p=function(x,w){return{x:x.x,y:x.y,value:x.value,errorVal:q(x.payload,w)}},y={clipPath:n?"url(#clipPath-".concat(i,")"):null};return j.createElement(M,y,f.map(function(d){return j.cloneElement(d,{key:"bar-".concat(d.props.dataKey),data:o,xAxis:l,yAxis:s,layout:h,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,s=l.dot,h=l.points,u=l.dataKey,f=U(this.props,!1),p=U(s,!0),y=h.map(function(x,w){var O=C(C(C({key:"dot-".concat(w),r:3},f),p),{},{index:w,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:h});return e.renderDotItem(s,O)}),d={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return j.createElement(M,et({className:"recharts-line-dots",key:"dots"},d),y)}},{key:"renderCurveStatically",value:function(n,i,a,o){var l=this.props,s=l.type,h=l.layout,u=l.connectNulls;l.ref;var f=Et(l,xe),p=C(C(C({},U(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:n},o),{},{type:s,layout:h,connectNulls:u});return j.createElement(Tt,et({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var a=this,o=this.props,l=o.points,s=o.strokeDasharray,h=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,p=o.animationEasing,y=o.animationId,d=o.animateNewValues,x=o.width,w=o.height,O=this.state,P=O.prevPoints,A=O.totalLength;return j.createElement(Rt,{begin:u,duration:f,isActive:h,easing:p,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(D){var E=D.t;if(P){var m=P.length/l.length,v=l.map(function(b,K){var T=Math.floor(K*m);if(P[T]){var R=P[T],L=N(R.x,b.x),Y=N(R.y,b.y);return C(C({},b),{},{x:L(E),y:Y(E)})}if(d){var Ht=N(x*2,b.x),Qt=N(w/2,b.y);return C(C({},b),{},{x:Ht(E),y:Qt(E)})}return C(C({},b),{},{x:b.x,y:b.y})});return a.renderCurveStatically(v,n,i)}var S=N(0,A),g=S(E),_;if(s){var I="".concat(s).split(/[,\s]+/gim).map(function(b){return parseFloat(b)});_=a.getStrokeDasharray(g,A,I)}else _=a.generateSimpleStrokeDasharray(A,g);return a.renderCurveStatically(l,n,i,{strokeDasharray:_})})}},{key:"renderCurve",value:function(n,i){var a=this.props,o=a.points,l=a.isAnimationActive,s=this.state,h=s.prevPoints,u=s.totalLength;return l&&o&&o.length&&(!h&&u>0||!Bt(h,o))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(o,n,i)}},{key:"render",value:function(){var n,i=this.props,a=i.hide,o=i.dot,l=i.points,s=i.className,h=i.xAxis,u=i.yAxis,f=i.top,p=i.left,y=i.width,d=i.height,x=i.isAnimationActive,w=i.id;if(a||!l||!l.length)return null;var O=this.state.isAnimationFinished,P=l.length===1,A=xt("recharts-line",s),D=h&&h.allowDataOverflow,E=u&&u.allowDataOverflow,m=D||E,v=F(w)?this.id:w,S=(n=U(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},g=S.r,_=g===void 0?3:g,I=S.strokeWidth,b=I===void 0?2:I,K=oe(o)?o:{},T=K.clipDot,R=T===void 0?!0:T,L=_*2+b;return j.createElement(M,{className:A},D||E?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(v)},j.createElement("rect",{x:D?p:p-y/2,y:E?f:f-d/2,width:D?y:y*2,height:E?d:d*2})),!R&&j.createElement("clipPath",{id:"clipPath-dots-".concat(v)},j.createElement("rect",{x:p-L/2,y:f-L/2,width:y+L,height:d+L}))):null,!P&&this.renderCurve(m,v),this.renderErrorBar(m,v),(P||o)&&this.renderDots(m,R,v),(!x||O)&&Nt.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var a=n.length%2!==0?[].concat(V(n),[0]):n,o=[],l=0;l<i;++l)o=[].concat(V(o),V(a));return o}},{key:"renderDotItem",value:function(n,i){var a;if(j.isValidElement(n))a=j.cloneElement(n,i);else if($t(n))a=n(i);else{var o=i.key,l=Et(i,ge),s=xt("recharts-line-dot",typeof n!="boolean"?n.className:"");a=j.createElement(ae,et({key:o},l,{className:s}))}return a}}])})(k.PureComponent);z(it,"displayName","Line");z(it,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Kt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});z(it,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,l=t.bandSize,s=t.displayedData,h=t.offset,u=e.layout,f=s.map(function(p,y){var d=q(p,o);return u==="horizontal"?{x:ct({axis:r,ticks:i,bandSize:l,entry:p,index:y}),y:F(d)?null:n.scale(d),value:d,payload:p}:{x:F(d)?null:r.scale(d),y:ct({axis:n,ticks:a,bandSize:l,entry:p,index:y}),value:d,payload:p}});return C({points:f,layout:u},h)});function J(t){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(t)}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jt(n.key),n)}}function $e(t,e,r){return e&&Le(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ze(t,e,r){return e=ft(e),Te(t,qt()?Reflect.construct(e,r||[],ft(t).constructor):e.apply(t,r))}function Te(t,e){if(e&&(J(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Re(t)}function Re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!t})()}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ft(t)}function Be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},At(t,e)}function Gt(t,e,r){return e=Jt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jt(t){var e=Ne(t,"string");return J(e)=="symbol"?e:e+""}function Ne(t,e){if(J(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(J(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dt=(function(t){function e(){return Ie(this,e),ze(this,e,arguments)}return Be(e,t),$e(e,[{key:"render",value:function(){return null}}])})(k.Component);Gt(dt,"displayName","ZAxis");Gt(dt,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Fe=["option","isActive"];function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nt.apply(this,arguments)}function Ke(t,e){if(t==null)return{};var r=Me(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Me(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function We(t){var e=t.option,r=t.isActive,n=Ke(t,Fe);return typeof e=="string"?k.createElement(_t,nt({option:k.createElement(se,nt({type:e},n)),isActive:r,shapeType:"symbols"},n)):k.createElement(_t,nt({option:e,isActive:r,shapeType:"symbols"},n))}function X(t){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(t)}function rt(){return rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rt.apply(this,arguments)}function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ct(Object(r),!0).forEach(function(n){W(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Ue(t,e,r){return e&&It(t.prototype,e),r&&It(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ve(t,e,r){return e=pt(e),qe(t,Xt()?Reflect.construct(e,r||[],pt(t).constructor):e.apply(t,r))}function qe(t,e){if(e&&(X(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ge(t)}function Ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xt=function(){return!!t})()}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pt(t)}function Je(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jt(t,e)}function W(t,e,r){return e=Yt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){var e=Xe(t,"string");return X(e)=="symbol"?e:e+""}function Xe(t,e){if(X(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(X(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var at=(function(t){function e(){var r;Ze(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Ve(this,e,[].concat(i)),W(r,"state",{isAnimationFinished:!1}),W(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),W(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),W(r,"id",Ft("recharts-scatter-")),r}return Je(e,t),Ue(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,o=a.shape,l=a.activeShape,s=a.activeIndex,h=U(this.props,!1);return n.map(function(u,f){var p=s===f,y=p?l:o,d=$($({},h),u);return j.createElement(M,rt({className:"recharts-scatter-symbol",key:"symbol-".concat(u?.cx,"-").concat(u?.cy,"-").concat(u?.size,"-").concat(f)},le(i.props,u,f),{role:"img"}),j.createElement(We,rt({option:y,isActive:p,key:"symbol-".concat(f)},d)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,o=i.isAnimationActive,l=i.animationBegin,s=i.animationDuration,h=i.animationEasing,u=i.animationId,f=this.state.prevPoints;return j.createElement(Rt,{begin:l,duration:s,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,d=a.map(function(x,w){var O=f&&f[w];if(O){var P=N(O.cx,x.cx),A=N(O.cy,x.cy),D=N(O.size,x.size);return $($({},x),{},{cx:P(y),cy:A(y),size:D(y)})}var E=N(0,x.size);return $($({},x),{},{size:E(y)})});return j.createElement(M,null,n.renderSymbolsStatically(d))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,o=this.state.prevPoints;return a&&i&&i.length&&(!o||!Bt(o,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,o=i.xAxis,l=i.yAxis,s=i.children,h=wt(s,zt);return h?h.map(function(u,f){var p=u.props,y=p.direction,d=p.dataKey;return j.cloneElement(u,{key:"".concat(y,"-").concat(d,"-").concat(a[f]),data:a,xAxis:o,yAxis:l,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(w,O){return{x:w.cx,y:w.cy,value:y==="x"?+w.node.x:+w.node.y,errorVal:q(w,O)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,o=n.lineType,l=n.lineJointType,s=U(this.props,!1),h=U(a,!1),u,f;if(o==="joint")u=i.map(function(A){return{x:A.cx,y:A.cy}});else if(o==="fitting"){var p=ce(i),y=p.xmin,d=p.xmax,x=p.a,w=p.b,O=function(D){return x*D+w};u=[{x:y,y:O(y)},{x:d,y:O(d)}]}var P=$($($({},s),{},{fill:"none",stroke:s&&s.fill},h),{},{points:u});return j.isValidElement(a)?f=j.cloneElement(a,P):$t(a)?f=a(P):f=j.createElement(Tt,rt({},P,{type:l})),j.createElement(M,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,o=n.line,l=n.className,s=n.xAxis,h=n.yAxis,u=n.left,f=n.top,p=n.width,y=n.height,d=n.id,x=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,O=xt("recharts-scatter",l),P=s&&s.allowDataOverflow,A=h&&h.allowDataOverflow,D=P||A,E=F(d)?this.id:d;return j.createElement(M,{className:O,clipPath:D?"url(#clipPath-".concat(E,")"):null},P||A?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(E)},j.createElement("rect",{x:P?u:u-p/2,y:A?f:f-y/2,width:P?p:p*2,height:A?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),j.createElement(M,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!x||w)&&Nt.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(k.PureComponent);W(at,"displayName","Scatter");W(at,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Kt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});W(at,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,a=t.displayedData,o=t.xAxisTicks,l=t.yAxisTicks,s=t.offset,h=i.props.tooltipType,u=wt(i.props.children,Mt),f=F(e.dataKey)?i.props.dataKey:e.dataKey,p=F(r.dataKey)?i.props.dataKey:r.dataKey,y=n&&n.dataKey,d=n?n.range:dt.defaultProps.range,x=d&&d[0],w=e.scale.bandwidth?e.scale.bandwidth():0,O=r.scale.bandwidth?r.scale.bandwidth():0,P=a.map(function(A,D){var E=q(A,f),m=q(A,p),v=!F(y)&&q(A,y)||"-",S=[{name:F(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:E,payload:A,dataKey:f,type:h},{name:F(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:m,payload:A,dataKey:p,type:h}];v!=="-"&&S.push({name:n.name||n.dataKey,unit:n.unit||"",value:v,payload:A,dataKey:y,type:h});var g=ct({axis:e,ticks:o,bandSize:w,entry:A,index:D,dataKey:f}),_=ct({axis:r,ticks:l,bandSize:O,entry:A,index:D,dataKey:p}),I=v!=="-"?n.scale(v):x,b=Math.sqrt(Math.max(I,0)/Math.PI);return $($({},A),{},{cx:g,cy:_,x:g-b,y:_-b,xAxis:e,yAxis:r,zAxis:n,width:2*b,height:2*b,size:I,node:{x:E,y:m,z:v},tooltipPayload:S,tooltipPosition:{x:g,y:_},payload:A},u&&u[D]&&u[D].props)});return $({points:P},s)});var Ye=Wt({chartName:"LineChart",GraphicalChild:it,axisComponents:[{axisType:"xAxis",AxisComp:Q},{axisType:"yAxis",AxisComp:tt}],formatAxisMap:Zt}),He=Wt({chartName:"ScatterChart",GraphicalChild:at,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Q},{axisType:"yAxis",AxisComp:tt},{axisType:"zAxis",AxisComp:dt}],formatAxisMap:Zt});const Z=[B.violet[500],B.emerald[500],B.cyan[500],B.rose[500],B.teal[500],B.fuchsia[500],B.slate[500],B.zinc[500]],Qe={top:8,right:16,bottom:24,left:8};function ln({data:t=[],spec:e={},height:r=350,showBrush:n=!0,showZoomControls:i=!0}){const a=k.useRef(null),[o,l]=k.useState(!1),[s,h]=k.useState({refAreaLeft:null,refAreaRight:null,startIndex:0,endIndex:null,isZoomed:!1}),{type:u="bar",xField:f,yFields:p=[],title:y}=e,d=k.useMemo(()=>{if(!t||t.length===0)return[];if(s.isZoomed&&s.startIndex!==null){const m=s.endIndex??t.length;return t.slice(s.startIndex,m+1)}return t},[t,s]),x=k.useCallback(m=>{m?.activeLabel&&h(v=>({...v,refAreaLeft:m.activeLabel,refAreaRight:null}))},[]),w=k.useCallback(m=>{!s.refAreaLeft||!m?.activeLabel||h(v=>({...v,refAreaRight:m.activeLabel}))},[s.refAreaLeft]),O=k.useCallback(()=>{if(!s.refAreaLeft||!s.refAreaRight){h(b=>({...b,refAreaLeft:null,refAreaRight:null}));return}let m=s.refAreaLeft,v=s.refAreaRight;const S=t.findIndex(b=>b[f]===m),g=t.findIndex(b=>b[f]===v);S>g&&([m,v]=[v,m]);const _=Math.min(S,g),I=Math.max(S,g);if(I-_<1){h(b=>({...b,refAreaLeft:null,refAreaRight:null}));return}h({refAreaLeft:null,refAreaRight:null,startIndex:_,endIndex:I,isZoomed:!0})},[s.refAreaLeft,s.refAreaRight,t,f]),P=k.useCallback(()=>{h({refAreaLeft:null,refAreaRight:null,startIndex:0,endIndex:null,isZoomed:!1})},[]),A=k.useCallback(async()=>{if(a.current){l(!0);try{const m=a.current.querySelector("svg");if(!m){console.warn("No SVG found to export");return}const v=m.cloneNode(!0),S=document.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("width","100%"),S.setAttribute("height","100%"),S.setAttribute("fill","white"),v.insertBefore(S,v.firstChild);const g=m.getBoundingClientRect();v.setAttribute("width",g.width),v.setAttribute("height",g.height);const _=new XMLSerializer().serializeToString(v),I=new Blob([_],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(I),K=document.createElement("canvas"),T=K.getContext("2d"),R=new Image;R.onload=()=>{K.width=g.width*2,K.height=g.height*2,T.scale(2,2),T.fillStyle="white",T.fillRect(0,0,g.width,g.height),T.drawImage(R,0,0);const L=K.toDataURL("image/png"),Y=document.createElement("a");Y.href=L,Y.download=`chart_${y||"export"}_${Date.now()}.png`,Y.click(),URL.revokeObjectURL(b),l(!1)},R.onerror=()=>{const L=document.createElement("a");L.href=b,L.download=`chart_${y||"export"}_${Date.now()}.svg`,L.click(),URL.revokeObjectURL(b),l(!1)},R.src=b}catch(m){console.error("Failed to export chart:",m),l(!1)}}},[y]),D=k.useCallback(m=>{if(!m)return;const{startIndex:v,endIndex:S}=m;v!==void 0&&S!==void 0&&h(g=>({...g,startIndex:v,endIndex:S,isZoomed:v>0||S<t.length-1}))},[t.length]),E=()=>{if(!f||p.length===0)return c.jsx(ot,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:r},children:c.jsx(H,{color:"text.secondary",children:"Invalid chart configuration"})});if(!d||d.length===0)return c.jsx(ot,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:r},children:c.jsx(H,{color:"text.secondary",children:"No data available"})});const m={data:d,margin:Qe,onMouseDown:u!=="pie"?x:void 0,onMouseMove:u!=="pie"?w:void 0,onMouseUp:u!=="pie"?O:void 0},v=s.refAreaLeft&&s.refAreaRight?c.jsx(fe,{x1:s.refAreaLeft,x2:s.refAreaRight,strokeOpacity:.3,fill:B.violet[500],fillOpacity:.3}):null,S=n&&u!=="pie"&&t.length>10?c.jsx(pe,{dataKey:f,height:24,stroke:B.violet[500],travellerWidth:8,onChange:D,startIndex:s.startIndex,endIndex:s.endIndex??t.length-1}):null;switch(u){case"line":return c.jsxs(Ye,{...m,children:[c.jsx(yt,{strokeDasharray:"3 3"}),c.jsx(Q,{dataKey:f,tick:{fontSize:12}}),c.jsx(tt,{tick:{fontSize:12}}),c.jsx(st,{}),c.jsx(lt,{}),p.map((g,_)=>c.jsx(it,{type:"monotone",dataKey:g,stroke:Z[_%Z.length],strokeWidth:2,dot:{r:3},activeDot:{r:5}},g)),v,S]});case"pie":return c.jsxs(ye,{children:[c.jsx(me,{data:d,dataKey:p[0],nameKey:f,cx:"50%",cy:"50%",innerRadius:"40%",outerRadius:"75%",label:({name:g,percent:_})=>`${g}: ${(_*100).toFixed(0)}%`,labelLine:{stroke:Pt[500],strokeWidth:1},children:d.map((g,_)=>c.jsx(Mt,{fill:Z[_%Z.length]},`cell-${_}`))}),c.jsx(st,{}),c.jsx(lt,{})]});case"scatter":return c.jsxs(He,{...m,children:[c.jsx(yt,{strokeDasharray:"3 3"}),c.jsx(Q,{dataKey:f,name:f,tick:{fontSize:12}}),c.jsx(tt,{dataKey:p[0],name:p[0],tick:{fontSize:12}}),c.jsx(st,{cursor:{strokeDasharray:"3 3"}}),c.jsx(lt,{}),c.jsx(at,{name:p[0],data:d,fill:Z[0]}),v,S]});default:return c.jsxs(de,{...m,children:[c.jsx(yt,{strokeDasharray:"3 3"}),c.jsx(Q,{dataKey:f,tick:{fontSize:12}}),c.jsx(tt,{tick:{fontSize:12}}),c.jsx(st,{}),c.jsx(lt,{}),p.map((g,_)=>c.jsx(he,{dataKey:g,fill:Z[_%Z.length],radius:[4,4,0,0]},g)),v,S]})}};return c.jsxs(ot,{children:[c.jsxs(ht,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[c.jsxs(ht,{direction:"row",spacing:1,alignItems:"center",children:[y&&c.jsx(H,{variant:"subtitle1",fontWeight:600,children:y}),c.jsx(Ot,{label:u.toUpperCase(),size:"small",variant:"outlined"}),s.isZoomed&&c.jsx(Ot,{label:"Zoomed",size:"small",sx:{bgcolor:m=>m.palette.mode==="dark"?ee(m.palette.text.primary,.1):Pt[200],color:"text.secondary"}})]}),c.jsxs(ht,{direction:"row",spacing:.5,alignItems:"center",children:[c.jsx(ne,{title:"Export chart as PNG",children:c.jsx(St,{size:"small",onClick:A,disabled:o,children:o?c.jsx(re,{size:16}):c.jsx(ie,{fontSize:"small"})})}),i&&u!=="pie"&&c.jsxs(c.Fragment,{children:[c.jsx(St,{size:"small",onClick:P,disabled:!s.isZoomed,title:"Reset zoom",children:c.jsx(ve,{fontSize:"small"})}),c.jsx(H,{variant:"caption",color:"text.secondary",children:"Drag to zoom"})]})]})]}),c.jsx(ot,{ref:a,sx:{width:"100%",height:r},children:c.jsx(ue,{width:"100%",height:"100%",children:E()})}),e.description&&c.jsx(H,{variant:"body2",color:"text.secondary",sx:{mt:1},children:e.description})]})}export{nn as I,ln as Z,on as n,an as s,rn as u,sn as v};
