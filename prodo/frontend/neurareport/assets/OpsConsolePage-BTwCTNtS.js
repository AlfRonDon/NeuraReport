import{j as e,q as o,o as c,B as T,v as ot,a as Ce,r as s,p as E,a$ as dt,aJ as l,K as r,ak as H,b0 as K,M as V,R as be,I as A,i as ut}from"./index-tNjrNcyx.js";import{I as ct,P as ht}from"./PageHeader-BhtIQYqP.js";import{S as j}from"./Surface-BP-OE1Iu.js";import{C as mt}from"./ConnectionSelector-DPzRBoqg.js";import{T as xt}from"./TemplateSelector-BfMrWm58.js";import{G as d}from"./Grid-DP3jmde8.js";import{S as Q}from"./Switch-CfAkngKV.js";const v=({title:i,subtitle:x=null,eyebrow:a=null,action:p=null,align:u="flex-start",sx:b=[],helpContent:f=null,helpPlacement:R="top",helpTooltipProps:y={},...D})=>{const S=Array.isArray(b)?b:[b],U=!!f;return e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:1.5,alignItems:{xs:"flex-start",sm:u},justifyContent:"space-between",sx:[{width:"100%",gap:1},...S],...D,children:[e.jsxs(o,{spacing:.5,sx:{minWidth:0},children:[a&&e.jsx(c,{variant:"overline",sx:{color:"text.secondary",letterSpacing:"0.1em",fontWeight:w=>w.typography.fontWeightMedium},children:a}),e.jsxs(T,{sx:{display:"flex",alignItems:"center",gap:.75,flexWrap:"nowrap",minWidth:0},children:[e.jsx(c,{variant:"h6",component:"h2",sx:{wordBreak:"break-word"},children:i}),U?e.jsx(ct,{content:f,placement:R,ariaLabel:`More information about ${i}`,...y}):null]}),x&&e.jsx(c,{variant:"body2",color:"text.secondary",children:x})]}),p?e.jsx(T,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1},children:p}):null]})},Z=(i,x,a)=>{const p=(i||"").trim();if(p)try{return JSON.parse(p)}catch{return x.show(`Invalid ${a} JSON`,"error"),null}},ee=i=>(i||"").split(",").map(x=>x.trim()).filter(Boolean);function pt(){const i=ot(),{execute:x}=Ce(),[a,p]=s.useState(!1),[u,b]=s.useState(null),[f,R]=s.useState(""),[y,D]=s.useState(""),[S,U]=s.useState(""),[w,fe]=s.useState(""),[P,ye]=s.useState(""),[L,Se]=s.useState(""),[_,we]=s.useState(""),[I,Ie]=s.useState(""),[$,ke]=s.useState(""),[te,ze]=s.useState(""),[J,De]=s.useState(""),[M,We]=s.useState(""),[se,Ee]=s.useState(!1),[ae,Ae]=s.useState(!1),[ne,Te]=s.useState(""),[le,Re]=s.useState(""),[q,Ue]=s.useState(20),[C,Pe]=s.useState(""),[N,Le]=s.useState(""),[B,_e]=s.useState(""),[k,$e]=s.useState(""),[re,Je]=s.useState(""),[ie,Me]=s.useState(""),[O,qe]=s.useState(""),[oe,Ne]=s.useState(""),[de,Be]=s.useState(""),[F,Oe]=s.useState(""),[ue,Fe]=s.useState("view"),[Y,Ye]=s.useState(""),[ce,Xe]=s.useState(""),[he,Ge]=s.useState(!1),[X,He]=s.useState(""),[G,Ke]=s.useState('[{"month":"Jan","value":120},{"month":"Feb","value":140}]'),[me,Ve]=s.useState("bar"),[xe,Qe]=s.useState("month"),[pe,Ze]=s.useState("value"),[ge,et]=s.useState(""),[je,tt]=s.useState(3),st=s.useMemo(()=>{const t={},h=f.trim(),W=y.trim();return h&&(t["X-API-Key"]=h),W&&(t.Authorization=`Bearer ${W}`),t},[f,y]),n=async({method:t="get",url:h,data:W,headers:nt={},onSuccess:ve}={})=>{const m=t.toLowerCase(),lt=m==="delete"?A.DELETE:m==="put"||m==="patch"?A.UPDATE:m==="post"?A.CREATE:A.EXECUTE,rt=m==="delete"?be.IRREVERSIBLE:be.SYSTEM_MANAGED;return x({type:lt,label:`${m.toUpperCase()} ${h}`,reversibility:rt,suppressSuccessToast:!0,suppressErrorToast:!0,blocksNavigation:!1,intent:{method:m,url:h},action:async()=>{p(!0),b({pending:!0,method:m,url:h,timestamp:new Date().toISOString()});try{const g=await ut.request({method:m,url:h,data:W,headers:{...st,...nt}}),z=g.data;return b({method:m,url:h,status:g.status,data:z,timestamp:new Date().toISOString()}),ve&&ve(z),i.show(`Success: ${m.toUpperCase()} ${h}`,"success"),z}catch(g){const z=g.response?.status,it=g.response?.data||{message:g.userMessage||g.message};throw b({method:m,url:h,status:z,error:it,timestamp:new Date().toISOString()}),i.show(`Failed: ${m.toUpperCase()} ${h}`,"error"),g}finally{p(!1)}}})},at=s.useMemo(()=>{if(!u)return"Run an action to view the response payload.";if(u.pending)return"Waiting for response...";const t=u.data||u.error||{};return JSON.stringify(t,null,2)},[u]);return e.jsx(T,{sx:{py:3,px:{xs:2,md:3}},children:e.jsxs(o,{spacing:3,children:[e.jsx(ht,{eyebrow:"Operations",title:"Ops Console",description:"Direct access to health checks, auth, jobs, schedules, and AI utilities that are not surfaced elsewhere."}),e.jsxs(j,{children:[e.jsx(v,{title:"Request Context",subtitle:"Provide API key or bearer token to authorize protected endpoints."}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:4,children:e.jsxs(o,{spacing:1,children:[e.jsx(c,{variant:"caption",color:"text.secondary",children:"API Base"}),e.jsx(E,{label:dt,variant:"outlined"})]})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,label:"X-API-Key",value:f,onChange:t=>R(t.target.value),size:"small",placeholder:"Optional"})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,label:"Bearer Token",value:y,onChange:t=>D(t.target.value),size:"small",placeholder:"Paste access token"})})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Auth & Users",subtitle:"Register users, obtain tokens, and manage user records."}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Register"}),e.jsx(l,{fullWidth:!0,label:"Email",value:S,onChange:t=>U(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Password",value:w,onChange:t=>fe(t.target.value),size:"small",type:"password"}),e.jsx(l,{fullWidth:!0,label:"Full Name (optional)",value:P,onChange:t=>ye(t.target.value),size:"small"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{if(!S||!w){i.show("Email and password are required","warning");return}const t={email:S,password:w};P&&(t.full_name=P),n({method:"post",url:"/auth/register",data:t})},children:"Register User"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Login"}),e.jsx(l,{fullWidth:!0,label:"Email / Username",value:L,onChange:t=>Se(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Password",value:_,onChange:t=>we(t.target.value),size:"small",type:"password"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{if(!L||!_){i.show("Login requires email and password","warning");return}const t=new URLSearchParams;t.append("username",L),t.append("password",_),n({method:"post",url:"/auth/jwt/login",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:h=>{h?.access_token&&(D(h.access_token),i.show("Token saved to bearer field","info"))}})},children:"Get Access Token"})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(H,{})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"User Management"}),e.jsx(l,{fullWidth:!0,label:"User ID",value:I,onChange:t=>Ie(t.target.value),size:"small",placeholder:"UUID"}),e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/users"}),children:"List Users"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!I){i.show("User ID required","warning");return}n({url:`/users/${encodeURIComponent(I)}`})},children:"Get User"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!I){i.show("User ID required","warning");return}n({method:"delete",url:`/users/${encodeURIComponent(I)}`})},sx:{color:"text.secondary"},children:"Delete User"})]})]})})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Health & Ops",subtitle:"Run service health checks and diagnostics."}),e.jsx(o,{spacing:1.5,children:e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health"}),children:"/health"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/healthz"}),children:"/healthz"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/ready"}),children:"/ready"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/readyz"}),children:"/readyz"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health/detailed"}),children:"/health/detailed"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health/token-usage"}),children:"/health/token-usage"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health/email"}),children:"/health/email"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health/email/test"}),children:"/health/email/test"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({method:"post",url:"/health/email/refresh"}),children:"/health/email/refresh"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/health/scheduler"}),children:"/health/scheduler"})]})})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Jobs & Schedules",subtitle:"Trigger job runs, inspect active jobs, and manage schedules."}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Run Report Job"}),e.jsx(xt,{value:$,onChange:ke,label:"Template",size:"small",fullWidth:!0,showAll:!0}),e.jsx(mt,{value:te,onChange:ze,label:"Connection (optional)",size:"small",fullWidth:!0,showStatus:!0}),e.jsxs(d,{container:!0,spacing:1,children:[e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"Start Date",value:J,onChange:t=>De(t.target.value),size:"small",placeholder:"YYYY-MM-DD"})}),e.jsx(d,{item:!0,xs:12,sm:6,children:e.jsx(l,{fullWidth:!0,label:"End Date",value:M,onChange:t=>We(t.target.value),size:"small",placeholder:"YYYY-MM-DD"})})]}),e.jsxs(o,{direction:"row",spacing:2,children:[e.jsx(K,{control:e.jsx(Q,{checked:se,onChange:t=>Ee(t.target.checked)}),label:"DOCX"}),e.jsx(K,{control:e.jsx(Q,{checked:ae,onChange:t=>Ae(t.target.checked)}),label:"XLSX"})]}),e.jsx(l,{fullWidth:!0,label:"Key Values (JSON)",value:ne,onChange:t=>Te(t.target.value),size:"small",multiline:!0,minRows:3,placeholder:'{"PARAM:region":"US"}'}),e.jsx(l,{fullWidth:!0,label:"Batch IDs (comma separated)",value:le,onChange:t=>Re(t.target.value),size:"small"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{if(!$||!J||!M){i.show("Template ID, start date, and end date are required","warning");return}const t=Z(ne,i,"key values");if(t===null)return;const h={template_id:$,connection_id:te||void 0,start_date:J,end_date:M,docx:se,xlsx:ae,key_values:t,batch_ids:ee(le)};n({method:"post",url:"/jobs/run-report",data:h})},children:"Queue Job"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Active Jobs"}),e.jsx(l,{fullWidth:!0,label:"Limit",type:"number",value:q,onChange:t=>Ue(Number(t.target.value)||0),size:"small",inputProps:{min:1,max:200}}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{const t=q>0?q:20;n({url:`/jobs/active?limit=${t}`})},children:"List Active Jobs"}),e.jsx(H,{}),e.jsx(c,{variant:"subtitle2",children:"Schedule Controls"}),e.jsx(l,{fullWidth:!0,label:"Schedule ID",value:C,onChange:t=>Pe(t.target.value),size:"small"}),e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!C){i.show("Schedule ID required","warning");return}n({method:"post",url:`/reports/schedules/${encodeURIComponent(C)}/trigger`})},children:"Trigger"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!C){i.show("Schedule ID required","warning");return}n({method:"post",url:`/reports/schedules/${encodeURIComponent(C)}/pause`})},children:"Pause"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!C){i.show("Schedule ID required","warning");return}n({method:"post",url:`/reports/schedules/${encodeURIComponent(C)}/resume`})},children:"Resume"})]})]})})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Analyze v2 Extras",subtitle:"Compare analyses, manage comments, create share links, and load config values."}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Compare Analyses"}),e.jsx(l,{fullWidth:!0,label:"Analysis ID 1",value:N,onChange:t=>Le(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Analysis ID 2",value:B,onChange:t=>_e(t.target.value),size:"small"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!N||!B){i.show("Both analysis IDs are required","warning");return}n({method:"post",url:"/analyze/v2/compare",data:{analysis_id_1:N,analysis_id_2:B}})},children:"Compare"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Comments"}),e.jsx(l,{fullWidth:!0,label:"Analysis ID",value:k,onChange:t=>$e(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"User ID",value:re,onChange:t=>Je(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"User Name",value:ie,onChange:t=>Me(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Element Type (optional)",value:oe,onChange:t=>Ne(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Element ID (optional)",value:de,onChange:t=>Be(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Comment",value:O,onChange:t=>qe(t.target.value),size:"small",multiline:!0,minRows:2}),e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!k){i.show("Analysis ID is required","warning");return}n({url:`/analyze/v2/${encodeURIComponent(k)}/comments`})},children:"List Comments"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{if(!k||!O){i.show("Analysis ID and comment content are required","warning");return}n({method:"post",url:`/analyze/v2/${encodeURIComponent(k)}/comments`,data:{content:O,user_id:re||void 0,user_name:ie||void 0,element_type:oe||void 0,element_id:de||void 0}})},children:"Add Comment"})]})]})}),e.jsx(d,{item:!0,xs:12,children:e.jsx(H,{})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Share Links"}),e.jsx(l,{fullWidth:!0,label:"Analysis ID",value:F,onChange:t=>Oe(t.target.value),size:"small"}),e.jsxs(l,{fullWidth:!0,select:!0,label:"Access Level",value:ue,onChange:t=>Fe(t.target.value),size:"small",children:[e.jsx(V,{value:"view",children:"View"}),e.jsx(V,{value:"comment",children:"Comment"}),e.jsx(V,{value:"edit",children:"Edit"})]}),e.jsx(l,{fullWidth:!0,label:"Expires in Hours (optional)",value:Y,onChange:t=>Ye(t.target.value),size:"small",type:"number"}),e.jsx(l,{fullWidth:!0,label:"Allowed Emails (comma separated)",value:ce,onChange:t=>Xe(t.target.value),size:"small"}),e.jsx(K,{control:e.jsx(Q,{checked:he,onChange:t=>Ge(t.target.checked)}),label:"Password Protected"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{if(!F){i.show("Analysis ID is required","warning");return}const t=Y?Number(Y):void 0;n({method:"post",url:`/analyze/v2/${encodeURIComponent(F)}/share`,data:{access_level:ue,expires_hours:Number.isFinite(t)?t:void 0,password_protected:he,allowed_emails:ee(ce)}})},children:"Create Share Link"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Config Endpoints"}),e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/analyze/v2/config/industries"}),children:"Industries"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/analyze/v2/config/export-formats"}),children:"Export Formats"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/analyze/v2/config/chart-types"}),children:"Chart Types"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/analyze/v2/config/summary-modes"}),children:"Summary Modes"})]})]})})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Enrichment Extras",subtitle:"Legacy source-type endpoints and source lookups."}),e.jsxs(o,{spacing:1.5,children:[e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/enrichment/source-types"}),children:"/enrichment/source-types"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>n({url:"/enrichment/sources"}),children:"/enrichment/sources"})]}),e.jsx(l,{fullWidth:!0,label:"Source ID",value:X,onChange:t=>He(t.target.value),size:"small"}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{if(!X){i.show("Source ID required","warning");return}n({url:`/enrichment/sources/${encodeURIComponent(X)}`})},children:"Get Source"})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Charts API",subtitle:"Request chart analysis and generation directly."}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Analyze Data"}),e.jsx(l,{fullWidth:!0,label:"Data (JSON array)",value:G,onChange:t=>Ke(t.target.value),size:"small",multiline:!0,minRows:4}),e.jsx(l,{fullWidth:!0,label:"Max Suggestions",type:"number",value:je,onChange:t=>tt(Number(t.target.value)||0),size:"small",inputProps:{min:1,max:10}}),e.jsx(r,{variant:"outlined",disabled:a,onClick:()=>{const t=Z(G,i,"chart data");t!==null&&n({method:"post",url:"/charts/analyze?background=true",data:{data:t,max_suggestions:je||3}})},children:"Analyze Charts"})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(o,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Generate Chart"}),e.jsx(l,{fullWidth:!0,label:"Chart Type",value:me,onChange:t=>Ve(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"X Field",value:xe,onChange:t=>Qe(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Y Fields (comma separated)",value:pe,onChange:t=>Ze(t.target.value),size:"small"}),e.jsx(l,{fullWidth:!0,label:"Title (optional)",value:ge,onChange:t=>et(t.target.value),size:"small"}),e.jsx(r,{variant:"contained",disabled:a,onClick:()=>{const t=Z(G,i,"chart data");t!==null&&n({method:"post",url:"/charts/generate?background=true",data:{data:t,chart_type:me||"bar",x_field:xe,y_fields:ee(pe),title:ge||void 0}})},children:"Generate Chart"})]})})]})]}),e.jsxs(j,{children:[e.jsx(v,{title:"Latest Response",subtitle:"Most recent API payload and status metadata."}),e.jsxs(o,{spacing:1.5,children:[u?e.jsxs(o,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(E,{label:`${(u.method||"GET").toUpperCase()} ${u.url||""}`}),u.status&&e.jsx(E,{label:`Status ${u.status}`,color:u.status>=200&&u.status<300?"success":"error",variant:"outlined"}),u.timestamp&&e.jsx(E,{label:new Date(u.timestamp).toLocaleTimeString(),variant:"outlined"})]}):e.jsx(c,{variant:"body2",color:"text.secondary",children:"No requests yet."}),e.jsx(T,{component:"pre",sx:{mt:1,p:2,borderRadius:1,backgroundColor:"background.default",border:"1px solid",borderColor:"divider",fontSize:"12px",overflow:"auto",maxHeight:320},children:at})]})]})]})})}function St(){return Ce(),e.jsx(pt,{})}export{St as default};
