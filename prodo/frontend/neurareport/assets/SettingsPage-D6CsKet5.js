import{g as ce,j as e,u as U,v as Ce,a as ie,l as oe,r as l,bA as Te,bB as ke,bC as Ee,bD as Ae,R as I,I as P,bE as _,B as m,o,z as Ie,C as re,E as Pe,A as Y,q as u,aJ as H,M as ne,b0 as C,K as M,ak as T,f as j,t as _e,aV as le,bF as ze,U as De,aK as Me,bG as Re,bH as Fe,N as q,O as Le,bh as Ue,n as de,bI as R,a6 as Ne,a7 as F,p as Oe}from"./index-tNjrNcyx.js";import{S as Be}from"./Security-GALjhzXN.js";import{K as Ge}from"./Speed-Bd0aUWiB.js";import{C as Ke}from"./Cloud-hmcboQxH.js";import{A as $e}from"./AccessTime-lMRy3h0r.js";import{V as Ye}from"./Lock-DHXml2sr.js";import{P as He}from"./Person-DUB1eFh9.js";import{S as k}from"./Switch-CfAkngKV.js";const qe=ce(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),Ve=ce(e.jsx("path",{d:"M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6M3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65"})),We=q(m)(({theme:t})=>({padding:t.spacing(3),maxWidth:1e3,margin:"0 auto",width:"100%",minHeight:"100vh",backgroundColor:t.palette.background.default})),Je=q(u)(({theme:t})=>({marginBottom:t.spacing(3),animation:`${Le} 0.5s ease-out`})),Qe=q(m)(({theme:t})=>({width:32,height:32,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"}));function Ze(){return Me()}function w(t){try{return localStorage.setItem(Re,JSON.stringify(t)),Fe(t),{success:!0}}catch(s){return{success:!1,error:s.message||"Storage quota exceeded or unavailable"}}}function L({status:t}){U();const s={healthy:{color:"success",icon:F},configured:{color:"success",icon:F},ready:{color:"success",icon:F},ok:{color:"success",icon:F},warning:{color:"warning",icon:R},degraded:{color:"warning",icon:R},error:{color:"error",icon:Ne},not_configured:{color:"default",icon:R},unknown:{color:"default",icon:R}},x=(s[t]||s.unknown).icon;return e.jsx(Oe,{size:"small",icon:e.jsx(x,{sx:{fontSize:14}}),label:t?.replace(/_/g," ")||"unknown",sx:{textTransform:"capitalize",fontSize:"0.75rem",borderRadius:1,bgcolor:z=>z.palette.mode==="dark"?j(z.palette.text.primary,.1):de[200],color:"text.secondary"}})}function y({icon:t,title:s,children:d}){const x=U();return e.jsxs(Ue,{children:[e.jsxs(u,{direction:"row",spacing:1.5,alignItems:"center",sx:{mb:2},children:[e.jsx(Qe,{sx:{bgcolor:x.palette.mode==="dark"?j(x.palette.text.primary,.08):de[100]},children:e.jsx(t,{sx:{color:"text.secondary",fontSize:16}})}),e.jsx(o,{variant:"subtitle1",fontWeight:600,sx:{color:x.palette.text.primary},children:s})]}),d]})}function c({label:t,value:s,mono:d=!1}){const x=U();return e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:x.palette.text.secondary},children:t}),e.jsx(o,{variant:"body2",sx:{color:x.palette.text.primary,...d&&{fontFamily:"monospace",fontSize:"14px"}},children:s})]})}function Xe(){const t=U(),s=Ce(),{execute:d}=ie(),x=oe(a=>a.setDemoMode),z=oe(a=>a.demoMode),[V,W]=l.useState(!0),[h,ue]=l.useState(null),[J,Q]=l.useState(null),[p,v]=l.useState(Ze),[S,xe]=l.useState(null),[N,Z]=l.useState(!1),E=l.useRef(0),[he,X]=l.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[pe,ee]=l.useState("en"),[O,B]=l.useState(!1),[me,G]=l.useState(!1),be=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Phoenix",label:"Arizona (no DST)"},{value:"America/Anchorage",label:"Alaska Time"},{value:"Pacific/Honolulu",label:"Hawaii Time"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Central European Time"},{value:"Europe/Berlin",label:"Berlin"},{value:"Asia/Tokyo",label:"Japan Standard Time"},{value:"Asia/Shanghai",label:"China Standard Time"},{value:"Asia/Kolkata",label:"India Standard Time"},{value:"Asia/Dubai",label:"Gulf Standard Time"},{value:"Australia/Sydney",label:"Australian Eastern Time"},{value:"UTC",label:"UTC"}],ge=[{value:"en",label:"English"},{value:"es",label:"Español (Spanish)"},{value:"fr",label:"Français (French)"},{value:"de",label:"Deutsch (German)"},{value:"pt",label:"Português (Portuguese)"},{value:"zh",label:"中文 (Chinese)"},{value:"ja",label:"日本語 (Japanese)"},{value:"ko",label:"한국어 (Korean)"}],K=l.useCallback(async()=>{W(!0),Q(null);try{const[a,n]=await Promise.all([Te(),ke().catch(()=>null)]);ue(a),xe(n?.usage||null)}catch(a){Q(a.message||"Failed to fetch system health")}finally{W(!1)}},[]),te=l.useCallback(async()=>{const a=Date.now();try{const n=await Ee();if(E.current>a)return;const r=n?.preferences||{};v(r),w(r),typeof r.demoMode=="boolean"&&x(r.demoMode),r.timezone&&X(r.timezone),r.language&&ee(r.language),typeof r.twoFactorEnabled=="boolean"&&B(r.twoFactorEnabled)}catch(n){s.show(n.message||"Failed to load preferences","warning")}},[x,s]),ye=l.useCallback(async()=>{Z(!0);try{const a=await Ae(),n=new Blob([JSON.stringify(a.config||a,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`neurareport-config-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),s.show("Configuration exported successfully","success")}catch(a){s.show(a.message||"Failed to export configuration","error")}finally{Z(!1)}},[s]);l.useEffect(()=>{K(),te()},[K,te]);const D=l.useCallback(a=>async n=>{const r=n.target.checked,i={...p,[a]:r};E.current=Date.now(),v(i);const b=w(i);b.success||s.show(`Failed to cache preferences locally: ${b.error}`,"warning"),await d({type:P.UPDATE,label:"Update preference",reversibility:I.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{preferenceKey:a,action:"update_preference"},action:async()=>{try{const g=await _(a,r);if(g?.preferences){const se={...i,...g.preferences};v(se),w(se)}return s.show("Preferences saved","success"),g}catch(g){throw s.show(g.message||"Failed to save preferences","error"),g}}})},[p,s,d]),fe=l.useCallback(async a=>{const n=a.target.value;X(n);const r={...p,timezone:n};E.current=Date.now(),v(r),w(r),await d({type:P.UPDATE,label:"Update timezone",reversibility:I.SYSTEM_MANAGED,suppressSuccessToast:!0,intent:{preferenceKey:"timezone",action:"update_timezone"},action:async()=>{try{await _("timezone",n),s.show("Timezone updated","success")}catch(i){s.show(i.message||"Failed to save timezone","error")}}})},[p,s,d]),je=l.useCallback(async a=>{const n=a.target.value;ee(n);const r={...p,language:n};E.current=Date.now(),v(r),w(r),await d({type:P.UPDATE,label:"Update language",reversibility:I.SYSTEM_MANAGED,suppressSuccessToast:!0,intent:{preferenceKey:"language",action:"update_language"},action:async()=>{try{await _("language",n),s.show("Language updated. Some changes may require a page refresh.","success")}catch(i){s.show(i.message||"Failed to save language","error")}}})},[p,s,d]),ve=l.useCallback(async a=>{a.target.checked?G(!0):await d({type:P.UPDATE,label:"Disable two-factor authentication",reversibility:I.PARTIALLY_REVERSIBLE,intent:{action:"disable_2fa"},action:async()=>{try{await _("twoFactorEnabled",!1),B(!1),s.show("Two-factor authentication disabled","success")}catch(r){s.show(r.message||"Failed to disable 2FA","error")}}})},[d,s]),we=l.useCallback(async a=>{const n=a.target.checked;x(n);const r={...p,demoMode:n};E.current=Date.now(),v(r);const i=w(r);i.success||s.show(`Failed to cache preferences locally: ${i.error}`,"warning"),await d({type:P.UPDATE,label:"Toggle demo mode",reversibility:I.SYSTEM_MANAGED,suppressSuccessToast:!0,suppressErrorToast:!0,intent:{preferenceKey:"demoMode",action:"toggle_demo_mode"},action:async()=>{try{const b=await _("demoMode",n);if(b?.preferences){const g={...r,...b.preferences};v(g),w(g)}return s.show(n?"Demo mode enabled - sample data loaded":"Demo mode disabled","success"),b}catch(b){throw s.show(b.message||"Failed to save preferences","error"),b}}})},[p,x,s,d]),f=h?.checks?.configuration||{},A=h?.checks?.llm||h?.checks?.openai||{},ae=h?.checks?.memory||{},$=h?.checks?.uploads_dir||{},Se=h?.checks?.state_dir||{};return e.jsxs(We,{children:[e.jsxs(Je,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(m,{children:[e.jsx(o,{variant:"h5",fontWeight:600,sx:{color:t.palette.text.primary},children:"Settings"}),e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"System configuration and preferences"})]}),e.jsx(Ie,{onClick:K,disabled:V,sx:{color:t.palette.text.secondary},children:V?e.jsx(re,{size:20}):e.jsx(Pe,{})})]}),J&&e.jsx(Y,{severity:"error",sx:{mb:3,borderRadius:1},children:J}),e.jsxs(u,{spacing:3,children:[e.jsxs(y,{icon:He,title:"Personal Settings",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"Customize your personal experience with NeuraReport."}),e.jsxs(u,{spacing:2,children:[e.jsx(H,{select:!0,fullWidth:!0,size:"small",label:"Language",value:pe,onChange:je,InputProps:{startAdornment:e.jsx(qe,{sx:{mr:1,color:"text.secondary",fontSize:20}})},children:ge.map(a=>e.jsx(ne,{value:a.value,children:a.label},a.value))}),e.jsx(H,{select:!0,fullWidth:!0,size:"small",label:"Timezone",value:he,onChange:fe,InputProps:{startAdornment:e.jsx($e,{sx:{mr:1,color:"text.secondary",fontSize:20}})},children:be.map(a=>e.jsx(ne,{value:a.value,children:a.label},a.value))})]})]}),e.jsx(y,{icon:Ye,title:"Security",children:e.jsxs(u,{spacing:2,children:[e.jsx(C,{control:e.jsx(k,{checked:O,onChange:ve,size:"small"}),label:e.jsxs(u,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Two-Factor Authentication (2FA)"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary},children:O?"Your account is protected with 2FA":"Add an extra layer of security to your account"})]})}),O&&e.jsx(Y,{severity:"success",sx:{borderRadius:1},children:"Two-factor authentication is enabled. Your account is more secure."}),me&&e.jsxs(Y,{severity:"info",sx:{borderRadius:1},children:[e.jsx(o,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Set up Two-Factor Authentication"}),e.jsx(o,{variant:"body2",sx:{mb:2},children:"To enable 2FA, scan the QR code with your authenticator app (Google Authenticator, Authy, etc.) and enter the verification code."}),e.jsx(m,{sx:{textAlign:"center",py:2,bgcolor:"background.paper",borderRadius:1,mb:2},children:e.jsx(o,{variant:"caption",color:"text.secondary",children:"[QR Code would appear here]"})}),e.jsx(H,{fullWidth:!0,size:"small",label:"Verification Code",placeholder:"Enter 6-digit code",sx:{mb:2}}),e.jsxs(u,{direction:"row",spacing:1,children:[e.jsx(M,{variant:"contained",size:"small",onClick:()=>{B(!0),G(!1),s.show("Two-factor authentication enabled!","success")},children:"Verify & Enable"}),e.jsx(M,{variant:"outlined",size:"small",onClick:()=>G(!1),children:"Cancel"})]})]}),e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.08)}}),e.jsxs(m,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary,mb:.5},children:"Change Password"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary,display:"block",mb:1},children:"Update your password to keep your account secure."}),e.jsx(M,{variant:"outlined",size:"small",sx:{borderRadius:1},children:"Change Password"})]}),e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.08)}}),e.jsxs(m,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary,mb:.5},children:"Active Sessions"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary,display:"block",mb:1},children:"You're currently logged in on 1 device."}),e.jsx(M,{variant:"outlined",size:"small",sx:{borderRadius:1,color:"text.secondary"},children:"Sign Out Other Devices"})]})]})}),e.jsx(y,{icon:Ge,title:"System Status",children:e.jsxs(u,{spacing:1,children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Overall Status"}),e.jsx(L,{status:h?.status})]}),e.jsx(c,{label:"API Version",value:h?.version||"-"}),e.jsx(c,{label:"Response Time",value:h?.response_time_ms?`${h.response_time_ms}ms`:"-"}),h?.timestamp&&e.jsx(c,{label:"Last Checked",value:new Date(h.timestamp).toLocaleString()})]})}),e.jsx(y,{icon:_e,title:"Storage",children:e.jsxs(u,{spacing:1,children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Uploads Directory"}),e.jsx(L,{status:$.status})]}),$.writable!==void 0&&e.jsx(c,{label:"Writable",value:$.writable?"Yes":"No"}),e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.08)}}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"State Directory"}),e.jsx(L,{status:Se.status})]}),ae.rss_mb&&e.jsxs(e.Fragment,{children:[e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.08)}}),e.jsx(c,{label:"Memory Usage (RSS)",value:`${ae.rss_mb.toFixed(1)} MB`})]})]})}),e.jsx(y,{icon:Be,title:"API Configuration",children:e.jsxs(u,{spacing:1,children:[e.jsx(c,{label:"API Key",value:f.api_key_configured?"Configured":"Not Set"}),e.jsx(c,{label:"Rate Limiting",value:f.rate_limiting_enabled?`Enabled (${f.rate_limit})`:"Disabled"}),e.jsx(c,{label:"Request Timeout",value:f.request_timeout?`${f.request_timeout}s`:"-"}),e.jsx(c,{label:"Max Upload Size",value:f.max_upload_size_mb?`${f.max_upload_size_mb} MB`:"-"}),e.jsx(c,{label:"Debug Mode",value:f.debug_mode?"Enabled":"Disabled"})]})}),e.jsx(y,{icon:Ke,title:"LLM Provider (Claude Code CLI)",children:e.jsxs(u,{spacing:1,children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.75},children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Connection Status"}),e.jsx(L,{status:A.status})]}),A.message&&e.jsx(c,{label:"Details",value:A.message}),A.model&&e.jsx(c,{label:"Model",value:A.model})]})}),e.jsx(y,{icon:Ve,title:"Token Usage",children:S?e.jsxs(u,{spacing:1,children:[e.jsx(c,{label:"Total Tokens",value:(S.total_tokens||0).toLocaleString()}),e.jsx(c,{label:"Input Tokens",value:(S.total_input_tokens||0).toLocaleString()}),e.jsx(c,{label:"Output Tokens",value:(S.total_output_tokens||0).toLocaleString()}),e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.08)}}),e.jsx(c,{label:"Estimated Cost",value:`$${(S.estimated_cost_usd||0).toFixed(4)}`,mono:!0}),e.jsx(c,{label:"API Requests",value:(S.request_count||0).toLocaleString()}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.disabled,mt:1},children:"Usage statistics are tracked since server start."})]}):e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Token usage data unavailable"})}),e.jsxs(y,{icon:le,title:"Export & Backup",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"Export your configuration for backup or migration purposes."}),e.jsx(ze,{variant:"outlined",startIcon:N?e.jsx(re,{size:16}):e.jsx(le,{}),onClick:ye,disabled:N,children:N?"Exporting...":"Export Configuration"})]}),e.jsxs(y,{icon:De,title:"Preferences",children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.secondary,mb:2},children:"These preferences are synced with the server and cached locally."}),e.jsxs(u,{spacing:1,children:[e.jsx(C,{control:e.jsx(k,{checked:z,onChange:we,size:"small"}),label:e.jsxs(u,{children:[e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Demo Mode"}),e.jsx(o,{variant:"caption",sx:{color:t.palette.text.secondary},children:"Explore with sample data (no real database required)"})]})}),e.jsx(T,{sx:{my:1,borderColor:j(t.palette.divider,.06)}}),e.jsx(C,{control:e.jsx(k,{checked:p.autoRefreshJobs??!0,onChange:D("autoRefreshJobs"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Auto-refresh jobs list"})}),e.jsx(C,{control:e.jsx(k,{checked:p.showNotifications??!0,onChange:D("showNotifications"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Show desktop notifications"})}),e.jsx(C,{control:e.jsx(k,{checked:p.confirmDelete??!0,onChange:D("confirmDelete"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Confirm before deleting items"})}),e.jsx(C,{control:e.jsx(k,{checked:p.compactTables??!1,onChange:D("compactTables"),size:"small"}),label:e.jsx(o,{variant:"body2",sx:{color:t.palette.text.primary},children:"Use compact table view"})})]})]})]})]})}function ct(){return ie(),e.jsx(Xe,{})}export{ct as default};
