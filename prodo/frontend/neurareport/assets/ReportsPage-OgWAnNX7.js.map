{"version":3,"file":"ReportsPage-OgWAnNX7.js","sources":["../../node_modules/@mui/icons-material/esm/DateRange.js","../../node_modules/@mui/icons-material/esm/Today.js","../../src/features/reports/components/TemplateRecommender.jsx","../../src/features/reports/containers/ReportsPageContainer.jsx","../../src/pages/reports/ReportsPage.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z\"\n}), 'DateRange');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zM7 10h5v5H7z\"\n}), 'Today');","import { useState, useCallback } from 'react'\nimport {\n  Box,\n  Stack,\n  Typography,\n  TextField,\n  Button,\n  Paper,\n  Chip,\n  CircularProgress,\n  Collapse,\n  IconButton,\n  Avatar,\n  LinearProgress,\n  Alert,\n  Tooltip,\n  alpha,\n} from '@mui/material'\nimport { neutral, palette } from '@/app/theme'\nimport AutoAwesomeIcon from '@mui/icons-material/AutoAwesome'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess'\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf'\nimport TableChartIcon from '@mui/icons-material/TableChart'\nimport CheckIcon from '@mui/icons-material/Check'\nimport ScheduleIcon from '@mui/icons-material/Schedule'\nimport { recommendTemplates, queueRecommendTemplates } from '@/api/client'\nimport { useToast } from '@/components/ToastProvider.jsx'\nimport { useInteraction, InteractionType, Reversibility } from '@/components/ux/governance'\n\nconst KIND_ICONS = {\n  pdf: PictureAsPdfIcon,\n  excel: TableChartIcon,\n}\n\nconst KIND_COLORS = {\n  pdf: 'error',\n  excel: 'success',\n}\n\nexport default function TemplateRecommender({ onSelectTemplate }) {\n  const { execute } = useInteraction()\n  const [expanded, setExpanded] = useState(false)\n  const [requirement, setRequirement] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [queueing, setQueueing] = useState(false)\n  const [recommendations, setRecommendations] = useState([])\n  const [error, setError] = useState(null)\n  const toast = useToast()\n\n  const executeUI = useCallback(\n    (label, action, intent = {}) =>\n      execute({\n        type: InteractionType.EXECUTE,\n        label,\n        reversibility: Reversibility.FULLY_REVERSIBLE,\n        suppressSuccessToast: true,\n        suppressErrorToast: true,\n        intent: { source: 'template_recommender', ...intent },\n        action,\n      }),\n    [execute]\n  )\n\n  const handleSearch = useCallback(() => {\n    const trimmed = requirement.trim()\n    if (!trimmed) return undefined\n\n    return execute({\n      type: InteractionType.ANALYZE,\n      label: 'Recommend templates',\n      reversibility: Reversibility.FULLY_REVERSIBLE,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'template_recommender', action: 'recommend_templates', requirement: trimmed },\n      action: async () => {\n        setLoading(true)\n        setError(null)\n        setRecommendations([])\n\n        try {\n          const results = await recommendTemplates({\n            requirement: trimmed,\n            limit: 5,\n          })\n          const normalized = Array.isArray(results) ? results : []\n          setRecommendations(normalized)\n          if (!normalized.length) {\n            setError('No matching templates found. Try a different description.')\n          }\n          return normalized\n        } catch (err) {\n          setError(err.message || 'Failed to get recommendations')\n          throw err\n        } finally {\n          setLoading(false)\n        }\n      },\n    })\n  }, [execute, requirement])\n\n  const handleQueue = useCallback(() => {\n    const trimmed = requirement.trim()\n    if (!trimmed) return undefined\n\n    return execute({\n      type: InteractionType.GENERATE,\n      label: 'Queue template recommendations',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: { source: 'template_recommender', action: 'queue_recommendations', requirement: trimmed },\n      action: async () => {\n        setQueueing(true)\n        setError(null)\n        try {\n          const response = await queueRecommendTemplates({\n            requirement: trimmed,\n            limit: 5,\n          })\n          if (response?.job_id) {\n            toast.show('Recommendation job queued. Track it in Jobs.', 'success')\n          } else {\n            toast.show('Failed to queue recommendation job.', 'error')\n          }\n          return response\n        } catch (err) {\n          toast.show(err.message || 'Failed to queue recommendations', 'error')\n          throw err\n        } finally {\n          setQueueing(false)\n        }\n      },\n    })\n  }, [execute, requirement, toast])\n\n  const handleSelect = useCallback(\n    (template) =>\n      executeUI(\n        'Select recommended template',\n        () => {\n          onSelectTemplate?.(template)\n          setExpanded(false)\n        },\n        { templateId: template?.id }\n      ),\n    [executeUI, onSelectTemplate]\n  )\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault()\n        handleSearch()\n      }\n    },\n    [handleSearch]\n  )\n\n  return (\n    <Paper\n      sx={{\n        border: 1,\n        borderColor: 'divider',\n        borderStyle: expanded ? 'solid' : 'dashed',\n        transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          px: 2,\n          py: 1.5,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          cursor: 'pointer',\n          bgcolor: expanded ? 'action.selected' : 'transparent',\n          '&:hover': {\n            bgcolor: 'action.hover',\n          },\n        }}\n      onClick={() => executeUI('Toggle template recommender', () => setExpanded((prev) => !prev))}\n      >\n        <Stack direction=\"row\" alignItems=\"center\" spacing={1.5}>\n          <Avatar\n            sx={{\n              width: 32,\n              height: 32,\n              bgcolor: (theme) => theme.palette.mode === 'dark' ? 'rgba(255,255,255,0.08)' : neutral[100],\n            }}\n          >\n            <AutoAwesomeIcon sx={{ color: 'text.secondary', fontSize: 18 }} />\n          </Avatar>\n          <Box>\n            <Typography variant=\"subtitle2\" fontWeight={600}>\n              AI Template Picker\n            </Typography>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Describe what you need and let AI find the best template\n            </Typography>\n          </Box>\n        </Stack>\n        <Tooltip title={expanded ? 'Collapse' : 'Expand'}>\n          <IconButton size=\"small\" aria-label={expanded ? 'Collapse' : 'Expand'}>\n            {expanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n          </IconButton>\n        </Tooltip>\n      </Box>\n\n      {/* Expanded Content */}\n      <Collapse in={expanded}>\n        <Box sx={{ px: 2, pb: 2 }}>\n          <Stack spacing={2}>\n            {/* Search Input */}\n            <Stack direction=\"row\" spacing={1}>\n              <TextField\n                fullWidth\n                size=\"small\"\n                placeholder=\"e.g., monthly sales report with charts, inventory tracking spreadsheet...\"\n                value={requirement}\n                onChange={(e) => setRequirement(e.target.value)}\n                onKeyDown={handleKeyDown}\n                disabled={loading}\n                sx={{\n                  '& .MuiOutlinedInput-root': {\n                    bgcolor: 'background.paper',\n                  },\n                }}\n              />\n              <Button\n                variant=\"contained\"\n                onClick={handleSearch}\n                disabled={loading || queueing || !requirement.trim()}\n                startIcon={\n                  loading ? (\n                    <CircularProgress size={16} color=\"inherit\" />\n                  ) : (\n                    <AutoAwesomeIcon />\n                  )\n                }\n                sx={{ minWidth: 120, textTransform: 'none' }}\n              >\n                {loading ? 'Searching...' : 'Find'}\n              </Button>\n              <Button\n                variant=\"outlined\"\n                onClick={handleQueue}\n                disabled={loading || queueing || !requirement.trim()}\n                startIcon={\n                  queueing ? (\n                    <CircularProgress size={16} color=\"inherit\" />\n                  ) : (\n                    <ScheduleIcon />\n                  )\n                }\n                sx={{ minWidth: 120, textTransform: 'none' }}\n              >\n                {queueing ? 'Queueing...' : 'Queue'}\n              </Button>\n            </Stack>\n\n            {/* Loading */}\n            {loading && <LinearProgress />}\n\n            {/* Error */}\n            {error && (\n              <Alert severity=\"info\" onClose={() => executeUI('Dismiss recommendations error', () => setError(null))}>\n                {error}\n              </Alert>\n            )}\n\n            {/* Results */}\n            {recommendations.length > 0 && (\n              <Stack spacing={1.5}>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {recommendations.length} template{recommendations.length !== 1 ? 's' : ''} found\n                </Typography>\n                {recommendations.map((rec, idx) => {\n                  const template = rec.template || rec\n                  const kind = template.kind || 'pdf'\n                  const Icon = KIND_ICONS[kind] || PictureAsPdfIcon\n                  const score = typeof rec.score === 'number' ? rec.score : null\n\n                  return (\n                    <Paper\n                      key={template.id || idx}\n                      variant=\"outlined\"\n                      sx={{\n                        p: 2,\n                        cursor: 'pointer',\n                        transition: 'all 0.15s cubic-bezier(0.22, 1, 0.36, 1)',\n                        '&:hover': {\n                          borderColor: (theme) => theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n                          bgcolor: 'action.hover',\n                        },\n                      }}\n                      onClick={() => handleSelect(template)}\n                    >\n                      <Stack\n                        direction=\"row\"\n                        alignItems=\"flex-start\"\n                        spacing={2}\n                      >\n                        <Avatar\n                          variant=\"rounded\"\n                          sx={{\n                            width: 40,\n                            height: 40,\n                            bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n                          }}\n                        >\n                          <Icon\n                            sx={{\n                              color: 'text.secondary',\n                            }}\n                          />\n                        </Avatar>\n                        <Box sx={{ flex: 1, minWidth: 0 }}>\n                          <Stack\n                            direction=\"row\"\n                            alignItems=\"center\"\n                            spacing={1}\n                            sx={{ mb: 0.5 }}\n                          >\n                            <Typography variant=\"subtitle2\" fontWeight={600}>\n                              {template.name || template.id}\n                            </Typography>\n                            <Chip\n                              label={kind.toUpperCase()}\n                              size=\"small\"\n                              variant=\"outlined\"\n                              sx={{ height: 20, fontSize: '10px', bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                            />\n                            {score !== null && (\n                              <Chip\n                                label={`${Math.round(score * 100)}% match`}\n                                size=\"small\"\n                                sx={{ height: 20, fontSize: '10px', bgcolor: (theme) => theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[200], color: 'text.secondary' }}\n                              />\n                            )}\n                          </Stack>\n                          {rec.explanation && (\n                            <Typography\n                              variant=\"body2\"\n                              color=\"text.secondary\"\n                              sx={{\n                                display: '-webkit-box',\n                                WebkitLineClamp: 2,\n                                WebkitBoxOrient: 'vertical',\n                                overflow: 'hidden',\n                              }}\n                            >\n                              {rec.explanation}\n                            </Typography>\n                          )}\n                          {!rec.explanation && template.description && (\n                            <Typography\n                              variant=\"body2\"\n                              color=\"text.secondary\"\n                              sx={{\n                                display: '-webkit-box',\n                                WebkitLineClamp: 2,\n                                WebkitBoxOrient: 'vertical',\n                                overflow: 'hidden',\n                              }}\n                            >\n                              {template.description}\n                            </Typography>\n                          )}\n                        </Box>\n                        <Button\n                          size=\"small\"\n                          variant=\"outlined\"\n                          startIcon={<CheckIcon />}\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        handleSelect(template)\n                      }}\n                          sx={{ textTransform: 'none', whiteSpace: 'nowrap' }}\n                        >\n                          Select\n                        </Button>\n                      </Stack>\n                    </Paper>\n                  )\n                })}\n              </Stack>\n            )}\n\n            {/* Quick Examples */}\n            {!loading && recommendations.length === 0 && (\n              <Box>\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mb: 1, display: 'block' }}>\n                  Try these examples:\n                </Typography>\n                <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n                  {[\n                    'monthly financial report',\n                    'inventory tracking',\n                    'sales summary with charts',\n                    'equipment status report',\n                  ].map((example) => (\n                    <Chip\n                      key={example}\n                      label={example}\n                      size=\"small\"\n                      variant=\"outlined\"\n                      onClick={() => executeUI('Set example requirement', () => setRequirement(example), { example })}\n                      sx={{ cursor: 'pointer' }}\n                    />\n                  ))}\n                </Stack>\n              </Box>\n            )}\n          </Stack>\n        </Box>\n      </Collapse>\n    </Paper>\n  )\n}\n","/**\n * Premium Reports Page\n * Sophisticated report generation with glassmorphism and smooth animations\n */\nimport { useState, useCallback, useMemo, useEffect, useRef } from 'react'\nimport { useSearchParams } from 'react-router-dom'\nimport {\n  Box,\n  Container,\n  Typography,\n  Stack,\n  Paper,\n  Button,\n  InputLabel,\n  Select,\n  MenuItem,\n  TextField,\n  Chip,\n  Alert,\n  LinearProgress,\n  Grid,\n  Divider,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemText,\n  useTheme,\n  alpha,\n  styled,\n} from '@mui/material'\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow'\nimport DownloadIcon from '@mui/icons-material/Download'\nimport ScheduleIcon from '@mui/icons-material/Schedule'\nimport AutoAwesomeIcon from '@mui/icons-material/AutoAwesome'\nimport SmartToyIcon from '@mui/icons-material/SmartToy'\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward'\nimport TodayIcon from '@mui/icons-material/Today'\nimport DateRangeIcon from '@mui/icons-material/DateRange'\nimport FilterListIcon from '@mui/icons-material/FilterList'\nimport DescriptionIcon from '@mui/icons-material/Description'\nimport RefreshIcon from '@mui/icons-material/Refresh'\nimport { useAppStore } from '@/stores'\nimport { useToast } from '@/components/ToastProvider'\nimport TemplateRecommender from '@/features/reports/components/TemplateRecommender.jsx'\nimport SuccessCelebration, { useCelebration } from '@/components/SuccessCelebration'\nimport AiUsageNotice from '@/components/ai/AiUsageNotice'\nimport ReportGlossaryNotice from '@/components/ux/ReportGlossaryNotice.jsx'\nimport { useInteraction, InteractionType, Reversibility, useNavigateInteraction } from '@/components/ux/governance'\nimport ConnectionSelector from '@/components/common/ConnectionSelector'\nimport * as api from '@/api/client'\nimport * as summaryApi from '@/api/summary'\nimport { neutral, palette } from '@/app/theme'\nimport { fadeInUp, GlassCard, StyledFormControl } from '@/styles'\n\n// =============================================================================\n// STYLED COMPONENTS\n// =============================================================================\n\nconst PageContainer = styled(Box)(({ theme }) => ({\n  minHeight: '100vh',\n  padding: theme.spacing(3),\n  backgroundColor: theme.palette.background.default,\n}))\n\nconst PageHeader = styled(Box)(({ theme }) => ({\n  marginBottom: theme.spacing(4),\n  animation: `${fadeInUp} 0.5s ease-out`,\n}))\n\nconst PageTitle = styled(Typography)(({ theme }) => ({\n  fontSize: '1.75rem',\n  fontWeight: 600,\n  letterSpacing: '-0.02em',\n  color: theme.palette.mode === 'dark' ? neutral[100] : neutral[900],\n}))\n\nconst SectionLabel = styled(Typography)(({ theme }) => ({\n  fontSize: '12px',\n  fontWeight: 600,\n  textTransform: 'uppercase',\n  letterSpacing: '0.1em',\n  color: theme.palette.text.secondary,\n  marginBottom: theme.spacing(1.5),\n  display: 'flex',\n  alignItems: 'center',\n  gap: theme.spacing(1),\n  '&::after': {\n    content: '\"\"',\n    flex: 1,\n    height: 1,\n    backgroundColor: alpha(theme.palette.divider, 0.3),\n  },\n}))\n\nconst SectionTitle = styled(Typography)(({ theme }) => ({\n  fontSize: '1rem',\n  fontWeight: 600,\n  color: theme.palette.text.primary,\n  marginBottom: theme.spacing(2),\n}))\n\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    borderRadius: 12,\n    backgroundColor: alpha(theme.palette.background.paper, 0.6),\n    transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.background.paper, 0.8),\n    },\n    '&.Mui-focused': {\n      backgroundColor: theme.palette.background.paper,\n      boxShadow: `0 0 0 3px ${alpha(theme.palette.text.primary, 0.08)}`,\n    },\n  },\n}))\n\nconst PresetChip = styled(Chip, {\n  shouldForwardProp: (prop) => prop !== 'selected',\n})(({ theme, selected }) => ({\n  borderRadius: 10,\n  fontWeight: 500,\n  fontSize: '0.75rem',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  cursor: 'pointer',\n  ...(selected && {\n    background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n    color: theme.palette.common.white,\n    boxShadow: `0 4px 12px ${alpha(theme.palette.common.black, 0.15)}`,\n    '& .MuiChip-icon': {\n      color: theme.palette.common.white,\n    },\n  }),\n  ...(!selected && {\n    backgroundColor: alpha(theme.palette.action.hover, 0.5),\n    '&:hover': {\n      backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.1) : neutral[100],\n      transform: 'translateY(-1px)',\n    },\n  }),\n}))\n\nconst DiscoveryChip = styled(Chip)(({ theme }) => ({\n  borderRadius: 8,\n  fontWeight: 600,\n  fontSize: '0.75rem',\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  color: theme.palette.text.secondary,\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n}))\n\nconst BatchListContainer = styled(Box)(({ theme }) => ({\n  maxHeight: 200,\n  overflow: 'auto',\n  borderRadius: 12,\n  border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: alpha(theme.palette.background.paper, 0.4),\n  '&::-webkit-scrollbar': {\n    width: 6,\n  },\n  '&::-webkit-scrollbar-track': {\n    background: 'transparent',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    background: alpha(theme.palette.text.primary, 0.2),\n    borderRadius: 8,  // Figma spec: 8px (styled component)\n  },\n}))\n\nconst BatchListItem = styled(ListItem, {\n  shouldForwardProp: (prop) => prop !== 'selected',\n})(({ theme, selected }) => ({\n  padding: theme.spacing(1, 1.5),\n  cursor: 'pointer',\n  transition: 'all 0.15s cubic-bezier(0.22, 1, 0.36, 1)',\n  borderBottom: `1px solid ${alpha(theme.palette.divider, 0.05)}`,\n  ...(selected && {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n  }),\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  },\n  '&:last-child': {\n    borderBottom: 'none',\n  },\n}))\n\nconst PrimaryButton = styled(Button)(({ theme }) => ({\n  borderRadius: 12,\n  textTransform: 'none',\n  fontWeight: 600,\n  fontSize: '0.875rem',\n  padding: theme.spacing(1.25, 3),\n  background: theme.palette.mode === 'dark' ? neutral[700] : neutral[900],\n  color: theme.palette.common.white,\n  boxShadow: `0 4px 14px ${alpha(theme.palette.common.black, 0.15)}`,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    boxShadow: `0 6px 20px ${alpha(theme.palette.common.black, 0.2)}`,\n    transform: 'translateY(-2px)',\n  },\n  '&:active': {\n    transform: 'translateY(0)',\n  },\n  '&:disabled': {\n    background: theme.palette.action.disabledBackground,\n    color: theme.palette.action.disabled,\n    boxShadow: 'none',\n  },\n}))\n\nconst SecondaryButton = styled(Button)(({ theme }) => ({\n  borderRadius: 12,\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.875rem',\n  padding: theme.spacing(1.25, 2.5),\n  borderColor: alpha(theme.palette.divider, 0.3),\n  color: theme.palette.text.primary,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n    transform: 'translateY(-1px)',\n  },\n}))\n\nconst TextButton = styled(Button)(({ theme }) => ({\n  borderRadius: 8,\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.75rem',\n  padding: theme.spacing(0.5, 1.5),\n  color: theme.palette.text.secondary,\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.08) : neutral[100],\n    color: theme.palette.text.primary,\n  },\n}))\n\nconst OutputCard = styled(GlassCard)(({ theme }) => ({\n  height: '100%',\n  animationDelay: '0.1s',\n}))\n\nconst RunHistoryCard = styled(Paper, {\n  shouldForwardProp: (prop) => prop !== 'selected',\n})(({ theme, selected }) => ({\n  padding: theme.spacing(1.5),\n  borderRadius: 12,\n  cursor: 'pointer',\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  border: `1px solid ${selected ? (theme.palette.mode === 'dark' ? neutral[500] : neutral[700]) : alpha(theme.palette.divider, 0.1)}`,\n  backgroundColor: selected ? (theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50]) : 'transparent',\n  '&:hover': {\n    borderColor: alpha(theme.palette.divider, 0.3),\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.03) : neutral[50],\n    transform: 'translateX(4px)',\n    '& .view-summary-hint': {\n      opacity: 1,\n      color: theme.palette.text.primary,\n    },\n  },\n}))\n\nconst SummaryCard = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(2),\n  borderRadius: 12,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n  border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n}))\n\nconst StyledLinearProgress = styled(LinearProgress)(({ theme }) => ({\n  borderRadius: 4,\n  height: 6,\n  backgroundColor: alpha(theme.palette.text.primary, 0.1),\n  '& .MuiLinearProgress-bar': {\n    borderRadius: 4,\n    background: theme.palette.mode === 'dark' ? neutral[500] : neutral[900],\n  },\n}))\n\nconst WarningAlert = styled(Alert)(({ theme }) => ({\n  borderRadius: 8,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '& .MuiAlert-icon': {\n    color: theme.palette.text.secondary,\n  },\n  '& .MuiAlert-message': {\n    color: theme.palette.text.primary,\n  },\n}))\n\nconst SuccessAlert = styled(Alert)(({ theme }) => ({\n  borderRadius: 8,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '& .MuiAlert-icon': {\n    color: theme.palette.text.secondary,\n  },\n  '& .MuiAlert-message': {\n    color: theme.palette.text.primary,\n  },\n}))\n\nconst ErrorAlert = styled(Alert)(({ theme }) => ({\n  borderRadius: 8,\n  backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.05) : neutral[50],\n  border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n  '& .MuiAlert-icon': {\n    color: theme.palette.text.secondary,\n  },\n  '& .MuiAlert-message': {\n    color: theme.palette.text.primary,\n  },\n}))\n\nconst AiIcon = styled(AutoAwesomeIcon)(({ theme }) => ({\n  color: theme.palette.text.secondary,\n}))\n\nconst DownloadButton = styled(Button)(({ theme }) => ({\n  borderRadius: 8,\n  textTransform: 'none',\n  fontWeight: 500,\n  fontSize: '0.75rem',\n  padding: theme.spacing(0.5, 1.5),\n  borderColor: alpha(theme.palette.divider, 0.3),\n  transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)',\n  '&:hover': {\n    borderColor: theme.palette.mode === 'dark' ? neutral[500] : neutral[700],\n    backgroundColor: theme.palette.mode === 'dark' ? alpha(theme.palette.text.primary, 0.04) : neutral[50],\n  },\n}))\n\nconst StyledDivider = styled(Divider)(({ theme }) => ({\n  borderColor: alpha(theme.palette.divider, 0.08),\n  margin: theme.spacing(2, 0),\n}))\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\nconst formatDateForInput = (date) => date.toISOString().split('T')[0]\n\nconst getDatePresets = () => {\n  const today = new Date()\n  const startOfWeek = new Date(today)\n  startOfWeek.setDate(today.getDate() - today.getDay())\n  const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1)\n  const startOfLastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1)\n  const endOfLastMonth = new Date(today.getFullYear(), today.getMonth(), 0)\n\n  return {\n    today: {\n      label: 'Today',\n      start: formatDateForInput(today),\n      end: formatDateForInput(today),\n    },\n    thisWeek: {\n      label: 'This Week',\n      start: formatDateForInput(startOfWeek),\n      end: formatDateForInput(today),\n    },\n    thisMonth: {\n      label: 'This Month',\n      start: formatDateForInput(startOfMonth),\n      end: formatDateForInput(today),\n    },\n    lastMonth: {\n      label: 'Last Month',\n      start: formatDateForInput(startOfLastMonth),\n      end: formatDateForInput(endOfLastMonth),\n    },\n  }\n}\n\n// =============================================================================\n// MAIN COMPONENT\n// =============================================================================\n\nexport default function ReportsPage() {\n  const theme = useTheme()\n  const [searchParams] = useSearchParams()\n  const navigate = useNavigateInteraction()\n  const toast = useToast()\n  const { execute } = useInteraction()\n  const handleNavigate = useCallback(\n    (path, label, intent = {}) =>\n      navigate(path, { label, intent: { from: 'reports', ...intent } }),\n    [navigate]\n  )\n\n  const templates = useAppStore((s) => s.templates)\n  const activeConnection = useAppStore((s) => s.activeConnection)\n  const setActiveConnectionId = useAppStore((s) => s.setActiveConnectionId)\n  const setTemplates = useAppStore((s) => s.setTemplates)\n\n  const [selectedTemplate, setSelectedTemplate] = useState(searchParams.get('template') || '')\n  const [startDate, setStartDate] = useState('')\n  const [endDate, setEndDate] = useState('')\n  const [datePreset, setDatePreset] = useState('thisMonth')\n  const [keyValues, setKeyValues] = useState({})\n  const [loading, setLoading] = useState(false)\n  const [generating, setGenerating] = useState(false)\n  const [result, setResult] = useState(null)\n  const [error, setError] = useState(null)\n  const [keyOptions, setKeyOptions] = useState({})\n  const [discovering, setDiscovering] = useState(false)\n  const [discovery, setDiscovery] = useState(null)\n  const [selectedBatches, setSelectedBatches] = useState([])\n  const [historyLoading, setHistoryLoading] = useState(false)\n  const [runHistory, setRunHistory] = useState([])\n  const [selectedRun, setSelectedRun] = useState(null)\n  const [runSummary, setRunSummary] = useState(null)\n  const [summaryLoading, setSummaryLoading] = useState(false)\n  const [queueingSummary, setQueueingSummary] = useState(false)\n\n  const selectedTemplateInfo = templates.find((t) => t.id === selectedTemplate)\n  const outputLabel = selectedTemplateInfo?.kind?.toUpperCase() || 'PDF'\n  const dateRangeLabel = startDate && endDate ? `${startDate} to ${endDate}` : 'Select dates'\n  const connectionLabel = activeConnection?.name || 'No connection'\n\n  // Success celebration\n  const { celebrating, celebrate, onComplete: onCelebrationComplete } = useCelebration()\n\n  // Refs to prevent race conditions\n  const keyOptionsRequestIdRef = useRef(0)\n  const summaryRequestIdRef = useRef(0)\n\n  useEffect(() => {\n    const fetchTemplates = async () => {\n      setLoading(true)\n      try {\n        const data = await api.listApprovedTemplates()\n        setTemplates(data)\n        if (!selectedTemplate && data.length > 0) {\n          setSelectedTemplate(data[0].id)\n        }\n      } catch (err) {\n        toast.show(err.message || 'Failed to load designs', 'error')\n      } finally {\n        setLoading(false)\n      }\n    }\n    if (templates.length === 0) {\n      fetchTemplates()\n    }\n  }, [templates.length, setTemplates, selectedTemplate, toast])\n\n  useEffect(() => {\n    const fetchKeyOptions = async () => {\n      if (!selectedTemplate || !activeConnection?.id) return\n\n      const requestId = ++keyOptionsRequestIdRef.current\n\n      try {\n        const template = templates.find((t) => t.id === selectedTemplate)\n        const result = await api.fetchTemplateKeyOptions(selectedTemplate, {\n          connectionId: activeConnection.id,\n          kind: template?.kind || 'pdf',\n        })\n\n        if (requestId === keyOptionsRequestIdRef.current) {\n          setKeyOptions(result.keys || {})\n        }\n      } catch (err) {\n        if (requestId === keyOptionsRequestIdRef.current) {\n          console.error('Failed to fetch key options:', err)\n          toast.show('Could not load filter options. You can still generate reports.', 'warning')\n        }\n      }\n    }\n    fetchKeyOptions()\n  }, [selectedTemplate, activeConnection?.id, templates, toast])\n\n  const handleTemplateChange = useCallback((event) => {\n    setSelectedTemplate(event.target.value)\n    setKeyValues({})\n    setResult(null)\n    setDiscovery(null)\n    setSelectedBatches([])\n  }, [])\n\n  const handleAiSelectTemplate = useCallback((template) => {\n    if (template?.id) {\n      setSelectedTemplate(template.id)\n      setKeyValues({})\n      setResult(null)\n      toast.show(`Selected: ${template.name || template.id}`, 'success')\n    }\n  }, [toast])\n\n  const handleKeyValueChange = useCallback((key, value) => {\n    setKeyValues((prev) => ({\n      ...prev,\n      [key]: value,\n    }))\n  }, [])\n\n  const handleDatePreset = useCallback((presetKey) => {\n    setDatePreset(presetKey)\n    if (presetKey !== 'custom') {\n      const presets = getDatePresets()\n      const preset = presets[presetKey]\n      if (preset) {\n        setStartDate(preset.start)\n        setEndDate(preset.end)\n      }\n    }\n  }, [])\n\n  // Initialize dates on first render\n  useEffect(() => {\n    if (!startDate && !endDate && datePreset !== 'custom') {\n      const presets = getDatePresets()\n      const preset = presets[datePreset]\n      if (preset) {\n        setStartDate(preset.start)\n        setEndDate(preset.end)\n      }\n    }\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleGenerate = useCallback(async () => {\n    if (!selectedTemplate || !activeConnection?.id) {\n      toast.show('Please select a design and connect to a data source first', 'error')\n      return\n    }\n    if (discovery && selectedBatches.length === 0) {\n      toast.show('Select at least one batch to run', 'error')\n      return\n    }\n    if (startDate && endDate && new Date(startDate) > new Date(endDate)) {\n      toast.show('Start date must be before or equal to end date', 'error')\n      return\n    }\n\n    await execute({\n      type: InteractionType.EXECUTE,\n      label: 'Generate report',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: {\n        templateId: selectedTemplate,\n        connectionId: activeConnection?.id,\n        action: 'run_report',\n      },\n      action: async () => {\n        setGenerating(true)\n        setError(null)\n        setResult(null)\n\n        try {\n          const template = templates.find((t) => t.id === selectedTemplate)\n\n          const batches = discovery?.batches || []\n          const allSelected = batches.length > 0 && selectedBatches.length === batches.length\n          const useSelectedBatches = batches.length > 0 && selectedBatches.length > 0 && !allSelected\n\n          const reportResult = await api.runReportAsJob({\n            templateId: selectedTemplate,\n            templateName: template?.name,\n            connectionId: activeConnection.id,\n            startDate: startDate || undefined,\n            endDate: endDate || undefined,\n            keyValues: Object.keys(keyValues).length > 0 ? keyValues : undefined,\n            batchIds: useSelectedBatches ? selectedBatches : undefined,\n            kind: template?.kind || 'pdf',\n          })\n\n          setResult(reportResult)\n          toast.show('Report generation started!', 'success')\n          celebrate()\n          return reportResult\n        } catch (err) {\n          setError(err.message || 'Failed to generate report')\n          toast.show(err.message || 'Failed to generate report', 'error')\n          throw err\n        } finally {\n          setGenerating(false)\n        }\n      },\n    })\n  }, [selectedTemplate, activeConnection?.id, templates, startDate, endDate, keyValues, discovery, selectedBatches, toast, celebrate, execute])\n\n  const keyFields = Object.keys(keyOptions)\n\n  const handleDiscover = useCallback(async () => {\n    if (!selectedTemplate || !activeConnection?.id) {\n      toast.show('Select a design and data source first', 'error')\n      return\n    }\n    if (!startDate || !endDate) {\n      toast.show('Provide a start and end date to discover batches', 'error')\n      return\n    }\n    if (new Date(startDate) > new Date(endDate)) {\n      toast.show('Start date must be before or equal to end date', 'error')\n      return\n    }\n    await execute({\n      type: InteractionType.ANALYZE,\n      label: 'Discover batches',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: {\n        templateId: selectedTemplate,\n        connectionId: activeConnection?.id,\n        action: 'discover_batches',\n      },\n      action: async () => {\n        setDiscovering(true)\n        setDiscovery(null)\n        try {\n          const template = templates.find((t) => t.id === selectedTemplate)\n          const data = await api.discoverReports({\n            templateId: selectedTemplate,\n            connectionId: activeConnection.id,\n            startDate,\n            endDate,\n            keyValues: Object.keys(keyValues).length > 0 ? keyValues : undefined,\n            kind: template?.kind || 'pdf',\n          })\n          setDiscovery(data)\n          const batchIds = Array.isArray(data?.batches) ? data.batches.map((batch) => batch.id) : []\n          setSelectedBatches(batchIds)\n          return data\n        } catch (err) {\n          toast.show(err.message || 'Failed to discover batches', 'error')\n          throw err\n        } finally {\n          setDiscovering(false)\n        }\n      },\n    })\n  }, [selectedTemplate, activeConnection?.id, startDate, endDate, keyValues, templates, toast, execute])\n\n  const fetchRunHistory = useCallback(async () => {\n    setHistoryLoading(true)\n    try {\n      const opts = { limit: 10 }\n      if (selectedTemplate) opts.templateId = selectedTemplate\n      const runs = await api.listReportRuns(opts)\n      setRunHistory(runs)\n    } catch (err) {\n      console.error('Failed to load run history:', err)\n      toast.show('Failed to load run history', 'warning')\n    } finally {\n      setHistoryLoading(false)\n    }\n  }, [selectedTemplate, toast])\n\n  useEffect(() => {\n    fetchRunHistory()\n  }, [fetchRunHistory])\n\n  const toggleBatch = useCallback((batchId) => {\n    setSelectedBatches((prev) => {\n      if (prev.includes(batchId)) {\n        return prev.filter((id) => id !== batchId)\n      }\n      return [...prev, batchId]\n    })\n  }, [])\n\n  const handleSelectRun = useCallback(async (run) => {\n    setSelectedRun(run)\n    setRunSummary(null)\n    if (run?.id) {\n      const requestId = ++summaryRequestIdRef.current\n\n      setSummaryLoading(true)\n      try {\n        const summaryData = await summaryApi.getReportSummary(run.id)\n\n        if (requestId === summaryRequestIdRef.current) {\n          setRunSummary(summaryData.summary || summaryData)\n        }\n      } catch (err) {\n        if (requestId === summaryRequestIdRef.current) {\n          console.error('Failed to fetch summary:', err)\n          setRunSummary(null)\n        }\n      } finally {\n        if (requestId === summaryRequestIdRef.current) {\n          setSummaryLoading(false)\n        }\n      }\n    }\n  }, [])\n\n  const handleQueueSummary = useCallback(async () => {\n    if (!selectedRun?.id) return\n    await execute({\n      type: InteractionType.GENERATE,\n      label: 'Queue summary',\n      reversibility: Reversibility.SYSTEM_MANAGED,\n      suppressSuccessToast: true,\n      suppressErrorToast: true,\n      intent: {\n        runId: selectedRun?.id,\n        action: 'queue_report_summary',\n      },\n      action: async () => {\n        setQueueingSummary(true)\n        try {\n          const response = await summaryApi.queueReportSummary(selectedRun.id)\n          const jobId = response?.job_id || response?.jobId || null\n          if (jobId) {\n            toast.show('Summary queued. Track progress in Report Progress.', 'success')\n          } else {\n            toast.show('Failed to queue summary.', 'error')\n          }\n          return response\n        } catch (err) {\n          toast.show(err?.message || 'Failed to queue summary.', 'error')\n          throw err\n        } finally {\n          setQueueingSummary(false)\n        }\n      },\n    })\n  }, [selectedRun?.id, toast, execute])\n\n  const handleSelectAllBatches = useCallback(() => {\n    const allIds = Array.isArray(discovery?.batches) ? discovery.batches.map((batch) => batch.id) : []\n    setSelectedBatches(allIds)\n  }, [discovery])\n\n  const handleClearBatches = useCallback(() => {\n    setSelectedBatches([])\n  }, [])\n\n  return (\n    <PageContainer>\n      <SuccessCelebration trigger={celebrating} onComplete={onCelebrationComplete} />\n      <Container maxWidth=\"lg\">\n        <PageHeader>\n          <PageTitle>Run a Report</PageTitle>\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n            Choose a design, set your date range, and generate a new report run.\n          </Typography>\n        </PageHeader>\n\n        <ReportGlossaryNotice sx={{ mb: 3 }} />\n\n        {!activeConnection && (\n          <WarningAlert severity=\"warning\" sx={{ mb: 3 }}>\n            Please select a data source below or add one from the Connections page.\n          </WarningAlert>\n        )}\n\n        {/* AI Template Picker */}\n        <Box sx={{ mb: 3 }}>\n          <TemplateRecommender onSelectTemplate={handleAiSelectTemplate} />\n        </Box>\n\n        <Grid container spacing={3}>\n          {/* Configuration Panel */}\n          <Grid size={{ xs: 12, md: 8 }}>\n            <GlassCard>\n              <SectionLabel>\n                <DescriptionIcon sx={{ fontSize: 14 }} />\n                Report Settings\n              </SectionLabel>\n\n              <Stack spacing={3}>\n                <Alert\n                  severity=\"info\"\n                  sx={{ borderRadius: 1 }}  // Figma spec: 8px\n                  action={(\n                    <Button\n                      size=\"small\"\n                      onClick={() => handleNavigate('/jobs', 'Open jobs')}\n                      sx={{ textTransform: 'none' }}\n                    >\n                      View Progress\n                    </Button>\n                  )}\n                >\n                  Reports run in the background. Track progress in Report Progress and download finished files in History.\n                </Alert>\n\n                <Box\n                  sx={{\n                    p: 1.5,\n                    borderRadius: 1,  // Figma spec: 8px\n                    border: '1px solid',\n                    borderColor: 'divider',\n                    bgcolor: alpha(theme.palette.background.paper, 0.6),\n                  }}\n                >\n                  <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n                    Outcome preview\n                  </Typography>\n                  <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n                    <Chip size=\"small\" label={`Output: ${outputLabel}`} variant=\"outlined\" />\n                    <Chip size=\"small\" label={`Connection: ${connectionLabel}`} variant=\"outlined\" />\n                    <Chip size=\"small\" label={`Dates: ${dateRangeLabel}`} variant=\"outlined\" />\n                  </Stack>\n                </Box>\n                {/* Design Selection */}\n                <StyledFormControl fullWidth>\n                  <InputLabel>Report Design</InputLabel>\n                  <Select\n                    value={selectedTemplate}\n                    onChange={handleTemplateChange}\n                    label=\"Report Design\"\n                  >\n                    {templates.map((template) => (\n                      <MenuItem key={template.id} value={template.id}>\n                        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n                          <span>{template.name || template.id}</span>\n                          <Chip\n                            label={template.kind?.toUpperCase() || 'PDF'}\n                            size=\"small\"\n                            variant=\"outlined\"\n                            sx={{ borderRadius: 6, fontSize: '10px', height: 20 }}\n                          />\n                        </Stack>\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </StyledFormControl>\n\n                {/* Database Connection */}\n                <ConnectionSelector\n                  value={activeConnection?.id || ''}\n                  onChange={(connId) => setActiveConnectionId(connId)}\n                  label=\"Data Source\"\n                  showStatus\n                />\n\n                {/* Date Range */}\n                <Box>\n                  <SectionTitle>Time Period</SectionTitle>\n                  <Stack direction=\"row\" spacing={1} sx={{ mb: 2, flexWrap: 'wrap', gap: 1 }}>\n                    {Object.entries(getDatePresets()).map(([key, preset]) => (\n                      <PresetChip\n                        key={key}\n                        label={preset.label}\n                        icon={<TodayIcon sx={{ fontSize: 14 }} />}\n                        onClick={() => handleDatePreset(key)}\n                        selected={datePreset === key}\n                        variant={datePreset === key ? 'filled' : 'outlined'}\n                      />\n                    ))}\n                    <PresetChip\n                      label=\"Custom\"\n                      icon={<DateRangeIcon sx={{ fontSize: 14 }} />}\n                      onClick={() => handleDatePreset('custom')}\n                      selected={datePreset === 'custom'}\n                      variant={datePreset === 'custom' ? 'filled' : 'outlined'}\n                    />\n                  </Stack>\n                  <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n                    <StyledTextField\n                      label=\"Start Date\"\n                      type=\"date\"\n                      value={startDate}\n                      onChange={(e) => {\n                        setStartDate(e.target.value)\n                        setDatePreset('custom')\n                      }}\n                      InputLabelProps={{ shrink: true }}\n                      fullWidth\n                      size=\"small\"\n                    />\n                    <StyledTextField\n                      label=\"End Date\"\n                      type=\"date\"\n                      value={endDate}\n                      onChange={(e) => {\n                        setEndDate(e.target.value)\n                        setDatePreset('custom')\n                      }}\n                      InputLabelProps={{ shrink: true }}\n                      fullWidth\n                      size=\"small\"\n                    />\n                  </Stack>\n                </Box>\n\n                {/* Key Fields */}\n                {keyFields.length > 0 && (\n                  <>\n                    <StyledDivider />\n                    <Box>\n                      <SectionLabel>\n                        <FilterListIcon sx={{ fontSize: 14 }} />\n                        Filter Parameters\n                      </SectionLabel>\n                      <Stack spacing={2}>\n                        {keyFields.map((key) => (\n                          <StyledFormControl key={key} fullWidth size=\"small\">\n                            <InputLabel>{key}</InputLabel>\n                            <Select\n                              value={keyValues[key] || ''}\n                              onChange={(e) => handleKeyValueChange(key, e.target.value)}\n                              label={key}\n                            >\n                              <MenuItem value=\"\">\n                                <em>All</em>\n                              </MenuItem>\n                              {(keyOptions[key] || []).map((option) => (\n                                <MenuItem key={option} value={option}>\n                                  {option}\n                                </MenuItem>\n                              ))}\n                            </Select>\n                          </StyledFormControl>\n                        ))}\n                      </Stack>\n                    </Box>\n                  </>\n                )}\n\n                <StyledDivider />\n\n                {/* Batch Discovery */}\n                <Stack direction=\"row\" spacing={1} alignItems=\"center\" justifyContent=\"space-between\">\n                  <SectionTitle sx={{ mb: 0 }}>Find Data Batches</SectionTitle>\n                  <SecondaryButton\n                    variant=\"outlined\"\n                    size=\"small\"\n                    onClick={handleDiscover}\n                    disabled={discovering || !selectedTemplate || !activeConnection}\n                  >\n                    {discovering ? 'Searching...' : 'Find Batches'}\n                  </SecondaryButton>\n                </Stack>\n\n                {discovering && <StyledLinearProgress />}\n                {!discovering && discovery && (\n                  <Stack spacing={2}>\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                      <DiscoveryChip label={`${discovery.batches_count || discovery.batches?.length || 0} batches`} />\n                      <DiscoveryChip label={`${discovery.rows_total || 0} rows`} />\n                    </Stack>\n                    <Stack direction=\"row\" spacing={1}>\n                      <TextButton size=\"small\" onClick={handleSelectAllBatches}>\n                        Select all\n                      </TextButton>\n                      <TextButton size=\"small\" onClick={handleClearBatches}>\n                        Clear\n                      </TextButton>\n                    </Stack>\n                    <BatchListContainer>\n                      <List dense disablePadding>\n                        {(discovery.batches || []).map((batch) => (\n                          <BatchListItem\n                            key={batch.id}\n                            disableGutters\n                            onClick={() => toggleBatch(batch.id)}\n                            selected={selectedBatches.includes(batch.id)}\n                          >\n                            <Checkbox\n                              checked={selectedBatches.includes(batch.id)}\n                              sx={{ p: 0.5, mr: 1 }}\n                            />\n                            <ListItemText\n                              primary={`${batch.id}`}\n                              secondary={`${batch.rows || 0} rows`}\n                              primaryTypographyProps={{ variant: 'body2', fontWeight: 500 }}\n                              secondaryTypographyProps={{ variant: 'caption' }}\n                            />\n                          </BatchListItem>\n                        ))}\n                      </List>\n                    </BatchListContainer>\n                  </Stack>\n                )}\n\n                {error && (\n                  <ErrorAlert\n                    severity=\"error\"\n                    onClose={() => setError(null)}\n                    action={\n                      <TextButton\n                        color=\"inherit\"\n                        size=\"small\"\n                        onClick={handleGenerate}\n                        disabled={generating}\n                      >\n                        Try Again\n                      </TextButton>\n                    }\n                  >\n                    {error}\n                  </ErrorAlert>\n                )}\n\n                {generating && (\n                  <Box>\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                      Generating report...\n                    </Typography>\n                    <StyledLinearProgress />\n                  </Box>\n                )}\n\n                {/* Actions */}\n                <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\" flexWrap=\"wrap\">\n                  <SecondaryButton\n                    variant=\"outlined\"\n                    startIcon={<ScheduleIcon />}\n                    disabled={!selectedTemplate || generating}\n                    onClick={() =>\n                      handleNavigate(`/schedules?template=${selectedTemplate}`, 'Open schedules', {\n                        templateId: selectedTemplate,\n                      })\n                    }\n                  >\n                    Schedule\n                  </SecondaryButton>\n                  <PrimaryButton\n                    startIcon={<PlayArrowIcon />}\n                    onClick={handleGenerate}\n                    disabled={!selectedTemplate || !activeConnection || generating}\n                  >\n                    Generate Report\n                  </PrimaryButton>\n                </Stack>\n              </Stack>\n            </GlassCard>\n          </Grid>\n\n          {/* Result Panel */}\n          <Grid size={{ xs: 12, md: 4 }}>\n            <OutputCard>\n              <SectionLabel>Output</SectionLabel>\n\n              {result ? (\n                <Stack spacing={2}>\n                  <SuccessAlert severity=\"success\">\n                    Report started! ID: {result.job_id?.slice(0, 8)}...\n                  </SuccessAlert>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Your report is being generated. Track it in Report Progress.\n                  </Typography>\n                  <SecondaryButton\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={() => handleNavigate('/jobs', 'Open jobs')}\n                    sx={{ alignSelf: 'flex-start' }}\n                  >\n                    View Progress\n                  </SecondaryButton>\n                </Stack>\n              ) : (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  Configure your report parameters and click \"Generate Report\" to create a new report.\n                </Typography>\n              )}\n\n              {/* AI Summary Widget */}\n              {selectedRun && (\n                <>\n                  <StyledDivider />\n                  <AiUsageNotice\n                    title=\"AI summary\"\n                    description=\"Summaries are generated from the selected report run. Review before sharing.\"\n                    chips={[\n                      { label: 'Source: Selected run', color: 'info', variant: 'outlined' },\n                      { label: 'Confidence: Review required', color: 'warning', variant: 'outlined' },\n                    ]}\n                    dense\n                    sx={{ mb: 2 }}\n                  />\n                  <Stack spacing={1.5}>\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n                      <AiIcon fontSize=\"small\" />\n                      <Typography variant=\"subtitle2\" fontWeight={600}>\n                        AI Summary\n                      </Typography>\n                    </Stack>\n                    {summaryLoading && <StyledLinearProgress />}\n                    {!summaryLoading && runSummary ? (\n                      <SummaryCard>\n                        <Typography variant=\"body2\" sx={{ whiteSpace: 'pre-wrap' }}>\n                          {typeof runSummary === 'string' ? runSummary : runSummary.text || runSummary.content || 'No summary available'}\n                        </Typography>\n                        {runSummary.key_points && (\n                          <Box sx={{ mt: 1.5 }}>\n                            <Typography variant=\"caption\" fontWeight={600} color=\"text.primary\">\n                              Key Points:\n                            </Typography>\n                            <ul style={{ margin: '4px 0', paddingLeft: 20 }}>\n                              {runSummary.key_points.map((point, idx) => (\n                                <li key={idx}>\n                                  <Typography variant=\"caption\">{point}</Typography>\n                                </li>\n                              ))}\n                            </ul>\n                          </Box>\n                        )}\n                      </SummaryCard>\n                    ) : !summaryLoading && (\n                      <Stack spacing={1}>\n                        <Typography variant=\"body2\" color=\"text.secondary\">\n                          Click on a run below to view its AI summary.\n                        </Typography>\n                        <SecondaryButton\n                          size=\"small\"\n                          variant=\"outlined\"\n                          startIcon={<ScheduleIcon />}\n                          onClick={handleQueueSummary}\n                          disabled={queueingSummary}\n                          sx={{ alignSelf: 'flex-start' }}\n                        >\n                          {queueingSummary ? 'Queueing...' : 'Queue summary'}\n                        </SecondaryButton>\n                      </Stack>\n                    )}\n                  </Stack>\n                </>\n              )}\n\n              <StyledDivider />\n              <Stack spacing={1.5}>\n                <Stack direction=\"row\" spacing={1} alignItems=\"center\" justifyContent=\"space-between\">\n                  <Typography variant=\"subtitle2\" fontWeight={600}>\n                    Recent Runs\n                  </Typography>\n                  <TextButton\n                    size=\"small\"\n                    onClick={fetchRunHistory}\n                    disabled={historyLoading}\n                    startIcon={<RefreshIcon sx={{ fontSize: 14 }} />}\n                  >\n                    Refresh\n                  </TextButton>\n                </Stack>\n                {historyLoading && <StyledLinearProgress />}\n                {!historyLoading && runHistory.length === 0 && (\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {selectedTemplate ? 'No recent runs for this design yet.' : 'No report runs yet. Generate a report to get started.'}\n                  </Typography>\n                )}\n                <Stack spacing={1}>\n                  {runHistory.map((run) => (\n                    <RunHistoryCard\n                      key={run.id}\n                      selected={selectedRun?.id === run.id}\n                      onClick={() => handleSelectRun(run)}\n                      title=\"Click to view summary\"\n                    >\n                      <Stack spacing={0.5}>\n                        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\">\n                          <Typography variant=\"body2\" fontWeight={600}>\n                            {run.templateName || run.templateId}\n                          </Typography>\n                          <Stack\n                            direction=\"row\"\n                            alignItems=\"center\"\n                            spacing={0.5}\n                            className=\"view-summary-hint\"\n                            sx={{ opacity: 0.6, transition: 'all 0.2s cubic-bezier(0.22, 1, 0.36, 1)' }}\n                          >\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              View\n                            </Typography>\n                            <ArrowForwardIcon sx={{ fontSize: 12 }} />\n                          </Stack>\n                        </Stack>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {new Date(run.createdAt).toLocaleString()} &middot; {run.startDate} to {run.endDate}\n                        </Typography>\n                        <Stack direction=\"row\" spacing={1} sx={{ mt: 0.5 }} flexWrap=\"wrap\" useFlexGap>\n                          {run.artifacts?.pdf_url && (\n                            <DownloadButton\n                              size=\"small\"\n                              variant=\"outlined\"\n                              startIcon={<DownloadIcon sx={{ fontSize: 14 }} />}\n                              href={api.withBase(run.artifacts.pdf_url)}\n                              target=\"_blank\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              PDF\n                            </DownloadButton>\n                          )}\n                          {run.artifacts?.html_url && (\n                            <DownloadButton\n                              size=\"small\"\n                              variant=\"outlined\"\n                              startIcon={<DownloadIcon sx={{ fontSize: 14 }} />}\n                              href={api.withBase(run.artifacts.html_url)}\n                              target=\"_blank\"\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                              HTML\n                            </DownloadButton>\n                          )}\n                          <DownloadButton\n                            size=\"small\"\n                            variant=\"outlined\"\n                            startIcon={<SmartToyIcon sx={{ fontSize: 14 }} />}\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleNavigate(`/agents?analyzeRunId=${run.id}`, 'Analyze with AI', { runId: run.id })\n                            }}\n                            data-testid={`analyze-ai-${run.id}`}\n                          >\n                            Analyze\n                          </DownloadButton>\n                        </Stack>\n                      </Stack>\n                    </RunHistoryCard>\n                  ))}\n                </Stack>\n              </Stack>\n            </OutputCard>\n          </Grid>\n        </Grid>\n      </Container>\n    </PageContainer>\n  )\n}\n","import { useInteraction } from '@/components/ux/governance'\nimport ReportsPageContainer from '@/features/reports/containers/ReportsPageContainer'\n\nexport default function ReportsPage() {\n  useInteraction()\n  return <ReportsPageContainer />\n}\n"],"names":["DateRangeIcon","createSvgIcon","_jsx","TodayIcon","KIND_ICONS","PictureAsPdfIcon","TableChartIcon","TemplateRecommender","onSelectTemplate","execute","useInteraction","expanded","setExpanded","useState","requirement","setRequirement","loading","setLoading","queueing","setQueueing","recommendations","setRecommendations","error","setError","toast","useToast","executeUI","useCallback","label","action","intent","InteractionType","Reversibility","handleSearch","trimmed","results","recommendTemplates","normalized","err","handleQueue","response","queueRecommendTemplates","handleSelect","template","handleKeyDown","e","jsxs","Paper","Box","prev","Stack","jsx","Avatar","theme","neutral","AutoAwesomeIcon","Typography","Tooltip","IconButton","ExpandLessIcon","ExpandMoreIcon","Collapse","TextField","Button","CircularProgress","ScheduleIcon","LinearProgress","Alert","rec","idx","kind","Icon","score","alpha","Chip","CheckIcon","example","PageContainer","styled","PageHeader","fadeInUp","PageTitle","SectionLabel","SectionTitle","StyledTextField","PresetChip","prop","selected","DiscoveryChip","BatchListContainer","BatchListItem","ListItem","PrimaryButton","SecondaryButton","TextButton","OutputCard","GlassCard","RunHistoryCard","SummaryCard","StyledLinearProgress","WarningAlert","SuccessAlert","ErrorAlert","AiIcon","DownloadButton","StyledDivider","Divider","formatDateForInput","date","getDatePresets","today","startOfWeek","startOfMonth","startOfLastMonth","endOfLastMonth","ReportsPage","useTheme","searchParams","useSearchParams","navigate","useNavigateInteraction","handleNavigate","path","templates","useAppStore","s","activeConnection","setActiveConnectionId","setTemplates","selectedTemplate","setSelectedTemplate","startDate","setStartDate","endDate","setEndDate","datePreset","setDatePreset","keyValues","setKeyValues","generating","setGenerating","result","setResult","keyOptions","setKeyOptions","discovering","setDiscovering","discovery","setDiscovery","selectedBatches","setSelectedBatches","historyLoading","setHistoryLoading","runHistory","setRunHistory","selectedRun","setSelectedRun","runSummary","setRunSummary","summaryLoading","setSummaryLoading","queueingSummary","setQueueingSummary","outputLabel","t","dateRangeLabel","connectionLabel","celebrating","celebrate","onCelebrationComplete","useCelebration","keyOptionsRequestIdRef","useRef","summaryRequestIdRef","useEffect","fetchTemplates","data","api.listApprovedTemplates","requestId","api.fetchTemplateKeyOptions","handleTemplateChange","event","handleAiSelectTemplate","handleKeyValueChange","key","value","handleDatePreset","presetKey","preset","handleGenerate","batches","allSelected","useSelectedBatches","reportResult","api.runReportAsJob","keyFields","handleDiscover","api.discoverReports","batchIds","batch","fetchRunHistory","opts","runs","api.listReportRuns","toggleBatch","batchId","id","handleSelectRun","run","summaryData","summaryApi.getReportSummary","handleQueueSummary","summaryApi.queueReportSummary","handleSelectAllBatches","allIds","handleClearBatches","SuccessCelebration","Container","ReportGlossaryNotice","Grid","DescriptionIcon","StyledFormControl","InputLabel","Select","MenuItem","ConnectionSelector","connId","Fragment","FilterListIcon","option","List","Checkbox","ListItemText","PlayArrowIcon","AiUsageNotice","point","RefreshIcon","ArrowForwardIcon","DownloadIcon","api.withBase","SmartToyIcon","ReportsPageContainer"],"mappings":"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","x_google_ignoreList":[0,1]}