# NeuraReport Backend Configuration
# Copy this file to .env and customize

# ═══════════════════════════════════════════════════════════════════════════════
# LLM Configuration - Claude Code CLI
# ═══════════════════════════════════════════════════════════════════════════════
# NeuraReport uses Claude Code CLI for all LLM operations.
# The CLI handles authentication - no API key needed if already authenticated.
# Run `claude` in your terminal to verify it's installed and authenticated.

# Claude Code model selection: sonnet (default), opus, haiku
CLAUDE_CODE_MODEL=sonnet

# Storage paths (relative to repo root, or use absolute paths)
UPLOAD_ROOT=backend/uploads
EXCEL_UPLOAD_ROOT=backend/uploads_excel
NEURA_STATE_DIR=backend/state
NEURA_STATE_SECRET=

# PDF Configuration
PDF_DPI=400
NEURA_MAX_VERIFY_PDF_BYTES=52428800
VERIFY_FIX_HTML_ENABLED=true
MAX_FIX_PASSES=1

# JWT Authentication (REQUIRED — no default for security)
NEURA_JWT_SECRET=

# Database (PostgreSQL for production, SQLite for development)
# PostgreSQL example: postgresql+asyncpg://user:password@localhost:5432/neurareport
# SQLite example (default): sqlite+aiosqlite:///backend/state/neurareport.db
NEURA_DATABASE_URL=sqlite+aiosqlite:///backend/state/neurareport.db
NEURA_DB_POOL_SIZE=10
NEURA_DB_POOL_MAX_OVERFLOW=20
NEURA_DB_POOL_TIMEOUT=30
NEURA_DB_ECHO=false

# Auth database override (optional - defaults to NEURA_DATABASE_URL)
# NEURA_AUTH_DB_URL=

# Legacy (deprecated - use NEURA_DATABASE_URL instead)
NR_DEFAULT_DB=

# UX Governance
NEURA_UX_GOVERNANCE_STRICT=true

# Task Queue (Dramatiq + Redis)
NEURA_REDIS_URL=redis://localhost:6379/0
NEURA_TASK_RESULT_TTL_MS=1800000
NEURA_WORKER_PROCESSES=4
NEURA_WORKER_THREADS=8

# Observability
NEURA_OTLP_ENDPOINT=
NEURA_METRICS_ENABLED=true
NEURA_APP_NAME=neurareport-backend

# Vector Search / RAG
NEURA_EMBEDDING_MODEL=text-embedding-3-small
NEURA_EMBEDDING_DIM=1536

# Secrets (HashiCorp Vault)
VAULT_ADDR=
VAULT_TOKEN=
VAULT_ROLE_ID=
VAULT_SECRET_ID=

# Development Settings (set to true for local development)
NEURA_ALLOW_ANON_API=false
NEURA_DEBUG=false
